!function(){function e(e){return e&&e.__esModule?e.default:e}const t=e=>"function"==typeof e,r=(e,t)=>null!=e&&"function"==typeof e[t],n=Array.isArray,i=e=>null!=e&&"function"!=typeof e&&void 0!==e.length,o=e=>"string"==typeof e,s=e=>null!=e&&"function"==typeof e[Symbol.iterator],a=e=>null!==e&&"object"==typeof e,c=Object.getPrototypeOf,u=e=>{let t;return null!=e&&"object"==typeof e&&(null===(t=c(e))||null===c(t))},l=e=>n(e)?e:o(e)?e.length>0?e.split("."):[]:null!=e?[e]:[],f=e=>h(e);function h(e){const t=l(e);let[r,n,i,o]=t;switch(t.length){case 0:return e=>e;case 1:return e=>null!=e?e[r]:void 0;case 2:return e=>null!=e&&null!=(e=e[r])?e[n]:void 0;case 3:return e=>null!=e&&null!=(e=e[r])&&null!=(e=e[n])?e[i]:void 0;case 4:return e=>null!=e&&null!=(e=e[r])&&null!=(e=e[n])&&null!=(e=e[i])?e[o]:void 0;default:return e=>{const r=t.length-1;let n=e;for(let e=0;null!=n&&e<=r;e++)n=n[t[e]];return n}}}const d=e=>p(e);function p(e){const t=l(e);let[r,n,i,o]=t;switch(t.length){case 0:return(e,t)=>t;case 1:return(e,t)=>((e=g(e))[r]=t,e);case 2:return(e,t)=>{let i;return(e=g(e))[r]=i=g(e[r]),i[n]=t,e};case 3:return(e,t)=>{let o,s;return(e=g(e))[r]=o=g(e[r]),o[n]=s=g(o[n]),s[i]=t,e};case 4:return(e,t)=>{let s,a,c;return(e=g(e))[r]=s=g(e[r]),s[n]=a=g(s[n]),a[i]=c=g(a[i]),c[o]=t,e};default:let e;for(let r=t.length;--r>=0;)e=b(t[r],e);return e}}const g=e=>n(e)?e.slice():Object.assign({},e),b=(e,t)=>(r,n)=>((r=g(r))[e]=t?t(r[e],n):n,r),y=(e,t,r,...n)=>function(e,t,r,...n){return p(t)(e,r.apply(null,(n.unshift(h(t)(e)),n)))}(e,t,r,...n);const m=(e,t)=>h(t)(e),v=(e,t=(e=>void 0!==e?": "+e:""))=>class extends Error{constructor(r){super(e(r)+t(r))}},w=v(()=>"illegal argument(s)"),O=e=>{throw new w(e)},x=v(()=>"illegal arity"),j=e=>{throw new x(e)},A=v(()=>"illegal state"),_=(e,t,r)=>p(t)(e,r),E=Symbol(),k=()=>{};var S,R;(R=S||(S={}))[R.FINE=0]="FINE",R[R.DEBUG=1]="DEBUG",R[R.INFO=2]="INFO",R[R.WARN=3]="WARN",R[R.SEVERE=4]="SEVERE",R[R.NONE=5]="NONE";const P=(e,t={})=>{const r=Reflect.ownKeys(e),n=Reflect.ownKeys(t),i=Symbol("isa");function o(t){for(let n of r){const r=Object.getOwnPropertyDescriptor(t.prototype,n);!r||r.configurable?Object.defineProperty(t.prototype,n,{value:e[n],writable:!0}):console.log(`not patching: ${t.name}.${n.toString()}`)}return Object.defineProperty(t.prototype,i,{value:!0}),t}for(let e of n)Object.defineProperty(o,e,{value:t[e],enumerable:t.propertyIsEnumerable(e)});return Object.defineProperty(o,Symbol.hasInstance,{value:e=>!!e[i]}),o},T=(e,t)=>{if(e)for(let r,n=0,i=e.length;n<i;n++)if(r=e[n],r[0].call(r[1],t),t.canceled)return},D=P({addListener(e,t,r){let n=(this._listeners=this._listeners||{})[e];return!n&&(n=this._listeners[e]=[]),-1===this.__listener(n,t,r)&&(n.push([t,r]),!0)},removeListener(e,t,r){let n;if(!(n=this._listeners))return!1;const i=n[e];if(i){const o=this.__listener(i,t,r);if(-1!==o)return i.splice(o,1),!i.length&&delete n[e],!0}return!1},notify(e){let t;if(!(t=this._listeners))return!1;void 0===e.target&&(e.target=this),T(t[e.id],e),T(t["*"],e)},__listener(e,t,r){let n=e.length;for(;--n>=0;){const i=e[n];if(i[0]===t&&i[1]===r)break}return n}}),C=P({addWatch(e,t){return this._watches=this._watches||{},!this._watches[e]&&(this._watches[e]=t,!0)},removeWatch(e){if(this._watches)return!!this._watches[e]&&(delete this._watches[e],!0)},notifyWatches(e,t){if(!this._watches)return;const r=this._watches;for(let n in r)r[n](n,e,t)}}),L=Object.getPrototypeOf({}),I="function",U=(e,t)=>{let r;return e===t||(null==e?e==t:typeof e.equiv===I?e.equiv(t):null==t?e==t:typeof t.equiv===I?t.equiv(e):"string"!=typeof e&&"string"!=typeof t&&(r=Object.getPrototypeOf(e),null!=r&&r!==L||(r=Object.getPrototypeOf(t),null!=r&&r!==L)?typeof e!==I&&void 0!==e.length&&typeof t!==I&&void 0!==t.length?W(e,t):e instanceof Set&&t instanceof Set?M(e,t):e instanceof Map&&t instanceof Map?z(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:N(e,t)))},W=(e,t,r=U)=>{let n=e.length;if(n===t.length)for(;--n>=0&&r(e[n],t[n]););return n<0},M=(e,t,r=U)=>e.size===t.size&&r([...e.keys()].sort(),[...t.keys()].sort()),z=(e,t,r=U)=>e.size===t.size&&r([...e].sort(),[...t].sort()),N=(e,t,r=U)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(!t.hasOwnProperty(n)||!r(e[n],t[n]))return!1;return!0};function q(e,t){for(let r of t)e.delete(r);return e}const $=(e,t)=>{if(e===t)return!0;if(!(t instanceof Map)||e.size!==t.size)return!1;for(let r of e.entries())if(!U(t.get(r[0]),r[1]))return!1;return!0};function F(e,t){if((e=>e instanceof Map)(e))for(let r of t)e.set(r[0],r[1]);else for(let r of t)e.add(r);return e}const H=new WeakMap,V=e=>H.get(e).vals;class B extends Set{constructor(e,t={}){super(),H.set(this,{equiv:t.equiv||U,vals:[]}),e&&this.into(e)}*[Symbol.iterator](){yield*V(this)}get[Symbol.species](){return B}get[Symbol.toStringTag](){return"ArraySet"}get size(){return V(this).length}copy(){const e=H.get(this),t=new B(null,{equiv:e.equiv});return H.get(t).vals=e.vals.slice(),t}empty(){return new B(null,this.opts())}clear(){V(this).length=0}first(){if(this.size)return V(this)[0]}add(e){return!this.has(e)&&V(this).push(e),this}into(e){return F(this,e)}has(e){return this.get(e,E)!==E}get(e,t){const r=H.get(this),n=r.equiv,i=r.vals;for(let t=i.length;--t>=0;)if(n(i[t],e))return i[t];return t}delete(e){const t=H.get(this),r=t.equiv,n=t.vals;for(let t=n.length;--t>=0;)if(r(n[t],e))return n.splice(t,1),!0;return!1}disj(e){return q(this,e)}equiv(e){return((e,t)=>{if(e===t)return!0;if(!(t instanceof Set)||e.size!==t.size)return!1;for(let r of e.keys())if(!t.has(r))return!1;return!0})(this,e)}forEach(e,t){const r=V(this);for(let n=r.length;--n>=0;){const i=r[n];e.call(t,i,i,this)}}*entries(){for(let e of V(this))yield[e,e]}*keys(){yield*V(this)}*values(){yield*V(this)}opts(){return{equiv:H.get(this).equiv}}}const Q=e=>r(e,"xform")?e.xform():e;class G{constructor(e){this.value=e}deref(){return this.value}}const Y=e=>e instanceof G,K=e=>e instanceof G?e.deref():e;function J(...e){const t=e[0],n=t[0],o=t[1],s=t[2],a=null==(e=(e=>2===e.length?[void 0,e[1]]:3===e.length?[e[1],e[2]]:j(e.length))(e))[0]?n():e[0],c=e[1];return K(o(r(c,"$reduce")?c.$reduce(s,a):i(c)?X(s,a,c):Z(s,a,c)))}const X=(e,t,r)=>{for(let n=0,i=r.length;n<i;n++)if(t=e(t,r[n]),Y(t)){t=t.deref();break}return t},Z=(e,t,r)=>{for(let n of r)if(t=e(t,n),Y(t)){t=t.deref();break}return t},ee=(e,t)=>[e,e=>e,t];function te(e){return e?[...e]:ee(()=>[],(e,t)=>(e.push(t),e))}function*re(e,t){const r=Q(e)(te()),n=r[1],i=r[2];for(let e of t){const t=i([],e);if(Y(t))return void(yield*K(n(t.deref())));t.length&&(yield*t)}yield*K(n([]))}function*ne(e,t){const r=Q(e)([k,k,(e,t)=>t])[2];for(let e of t){let t=r(E,e);if(Y(t))return t=K(t.deref()),void(t!==E&&(yield t));t!==E&&(yield t)}}const ie=(e,t)=>[e[0],e[1],t];function oe(e,t){return t?ne(oe(e),t):t=>{const r=t[2];return ie(t,(t,n)=>r(t,e(n)))}}function se(...e){let t,r;switch(e.length){case 4:r=e[3],t=e[2];break;case 3:r=e[2];break;case 2:return oe(t=>se(e[0],e[1],t));default:j(e.length)}return J(Q(e[0])(e[1]),t,r)}function ae(...e){let[t,r,n,i,o,s,a,c,u,l]=e;switch(e.length){case 0:j(0);case 1:return t;case 2:return(...e)=>t(r(...e));case 3:return(...e)=>t(r(n(...e)));case 4:return(...e)=>t(r(n(i(...e))));case 5:return(...e)=>t(r(n(i(o(...e)))));case 6:return(...e)=>t(r(n(i(o(s(...e))))));case 7:return(...e)=>t(r(n(i(o(s(a(...e)))))));case 8:return(...e)=>t(r(n(i(o(s(a(c(...e))))))));case 9:return(...e)=>t(r(n(i(o(s(a(c(u(...e)))))))));case 10:default:const f=(...e)=>t(r(n(i(o(s(a(c(u(l(...e))))))))));return 10===e.length?f:ae(f,...e.slice(10))}}const ce=(e,t)=>e===t?0:null==e?null==t?0:-1:null==t?null==e?0:1:"function"==typeof e.compare?e.compare(t):"function"==typeof t.compare?-t.compare(e):e<t?-1:e>t?1:0;function ue(e,t){e=e||"";let r=!0;return t?[...t].join(e):ee(()=>"",(t,n)=>(t=r?t+n:t+e+n,r=!1,t))}const le=e=>((null==e||!e[Symbol.iterator])&&O(`value is not iterable: ${e}`),e),fe=e=>i(e)?e:[...le(e)],he=1/4294967295;const de=Math.random;new class extends class{float(e=1){return this.int()*he*e}norm(e=1){return 2*(this.int()*he-.5)*e}minmax(e,t){return this.float()*(t-e)+e}gaussian(e=10,t=-.5,r=1){let n=0,i=e;for(;i-- >0;)n+=this.float(r);return n/e+t}}{int(){return 4294967295*de()>>>0}float(e=1){return de()*e}norm(e=1){return 2*(de()-.5)*e}};function pe(...e){return e=e.map(Q),ae.apply(null,e)}Math.PI,Math.sqrt(5),Math.SQRT2,Math.sqrt(3);var ge,be;(be=ge||(ge={}))[be.EQUAL=0]="EQUAL",be[be.FLAT=1]="FLAT",be[be.UNDER=2]="UNDER",be[be.OVER=3]="OVER",be[be.OTHER=4]="OTHER";Math.abs,Math.max;function*ye(e,t=1/0){for(;t-- >0;)yield e}function*me(...e){const t=e.length-1;if(t<0)return;const r=new Array(t+1).fill(0),n=e.map(fe),i=n.reduce((e,t)=>e*t.length,1);for(let e=0;e<i;e++){const e=[];for(let i=t;i>=0;i--){const t=n[i];let o=r[i];o===t.length&&(r[i]=o=0,i>0&&r[i-1]++),e[i]=t[o]}r[t]++,yield e}}const ve=new WeakMap,we=e=>ve.get(e).map;class Oe extends Map{static fromObject(e,t){const r=new Oe(null,Object.assign({equiv:(e,t)=>e===t},t));for(let t in e)e.hasOwnProperty(t)&&r.set(t,e[t]);return r}constructor(e,t){super();const r=Object.assign({equiv:U,keys:B},t);ve.set(this,{keys:new r.keys(null,{equiv:r.equiv}),map:new Map,opts:r}),e&&this.into(e)}[Symbol.iterator](){return this.entries()}get[Symbol.species](){return Oe}get[Symbol.toStringTag](){return"EquivMap"}get size(){return ve.get(this).keys.size}clear(){const e=ve.get(this);e.keys.clear(),e.map.clear()}empty(){return new Oe(null,ve.get(this).opts)}copy(){const e=ve.get(this),t=new Oe;return ve.set(t,{keys:e.keys.copy(),map:new Map(e.map),opts:e.opts}),t}equiv(e){return $(this,e)}delete(e){const t=ve.get(this);return(e=t.keys.get(e,E))!==E&&(t.map.delete(e),t.keys.delete(e),!0)}dissoc(e){return q(this,e)}forEach(e,t){for(let r of we(this))e.call(t,r[1],r[0],this)}get(e,t){const r=ve.get(this);return(e=r.keys.get(e,E))!==E?r.map.get(e):t}has(e){return ve.get(this).keys.has(e)}set(e,t){const r=ve.get(this),n=r.keys.get(e,E);return n!==E?r.map.set(n,t):(r.keys.add(e),r.map.set(e,t)),this}into(e){return F(this,e)}entries(){return we(this).entries()}keys(){return we(this).keys()}values(){return we(this).values()}opts(){return ve.get(this).opts}}new Array(33).fill(0).map((e,t)=>Math.pow(2,t)-1);class xe{constructor(e,t,r){this.k=e,this.v=t,this.next=new Array(r+1)}}const je=new WeakMap;class Ae extends Map{constructor(e,t={}){super();const r=t.capacity||Ae.DEFAULT_CAP,n=Math.ceil(Math.log2(r));je.set(this,{head:new xe(null,null,0),cap:Math.pow(2,n),cmp:t.compare||ce,p:t.probability||Ae.DEFAULT_P,maxh:n,length:0,h:0}),e&&this.into(e)}static fromObject(e,t){const r=new Ae(null,Object.assign({capacity:Object.keys(e).length},t));for(let t in e)e.hasOwnProperty(t)&&r.set(t,e[t]);return r}get[Symbol.species](){return Ae}*[Symbol.iterator](){let e=je.get(this).head;for(;e=e.next[0];)yield[e.k,e.v]}*entries(e,t=!1){const r=je.get(this);let n=r.head;const i=r.cmp;let o;if(t){for(;n=n.next[0];)if((void 0===e||(o=i(n.k,e))<=0)&&(yield[n.k,n.v],0===o))return}else for(;n=n.next[0];)(void 0===e||(o=i(n.k,e))>=0)&&(yield[n.k,n.v])}keys(e,t=!1){return oe(e=>e[0],this.entries(e,t))}values(e,t=!1){return oe(e=>e[1],this.entries(e,t))}get size(){return je.get(this).length}clear(){const e=je.get(this);e.head=new xe(null,null,0),e.length=0,e.h=0}empty(){return new Ae(null,Object.assign(Object.assign({},this.opts()),{capacity:Ae.DEFAULT_CAP}))}copy(){return new Ae(this,this.opts())}compare(e){const t=this.size,r=e.size;if(t<r)return-1;if(t>r)return 1;const n=this.entries(),i=e.entries();let o,s,a;for(;o=n.next(),s=i.next(),!o.done&&!s.done;)if(0!==(a=ce(o.value[0],s.value[0]))||0!==(a=ce(o.value[1],s.value[1])))return a;return 0}equiv(e){return $(this,e)}first(){const e=je.get(this).head.next[0];return e?[e.k,e.v]:void 0}get(e,t){const r=this.findPredNode(e).next[0];return r&&0===je.get(this).cmp(r.k,e)?r.v:t}has(e){return this.get(e,E)!==E}set(e,t){const r=je.get(this);let n=r.head,i=r.h,o=new Array(i);const s=r.cmp;let a;for(;i>=0;){for(;n.next[i]&&(a=s(n.next[i].k,e))<0;)n=n.next[i];if(n.next[i]&&0===a){do{n.next[i].v=t}while(--i>=0);return this}o[i--]=n}const c=this.pickHeight(r.maxh,r.h,r.p);for(n=new xe(e,t,c);r.h<c;)o[++r.h]=r.head;for(let e=0;e<=c;e++)n.next[e]=o[e].next[e],o[e].next[e]=n;return r.length++,r.length>=r.cap&&(r.cap*=2,r.maxh++),this}delete(e){const t=je.get(this);let r=t.head,n=t.h,i=!1;const o=t.cmp;let s;for(;n>=0;){for(;r.next[n]&&(s=o(r.next[n].k,e))<0;)r=r.next[n];r.next[n]&&0===s&&(i=!0,r.next[n]=r.next[n].next[n],r!=t.head||r.next[n]||(t.h=Math.max(0,t.h-1))),n--}return i&&t.length--,i}into(e){return F(this,e)}dissoc(e){return q(this,e)}forEach(e,t){for(let r of this)e.call(t,r[1],r[0],this)}$reduce(e,t){let r=je.get(this).head;for(;(r=r.next[0])&&!Y(t);)t=e(t,[r.k,r.v]);return t}opts(){const e=je.get(this);return{capacity:e.cap,compare:e.cmp,probability:e.p}}findPredNode(e){const t=je.get(this),r=t.cmp;let n=t.head,i=t.h;for(;i>=0;){for(;n.next[i]&&r(n.next[i].k,e)<0;)n=n.next[i];i--}return n}pickHeight(e,t,r){const n=Math.min(e,t+1);let i=0;for(;Math.random()<r&&i<n;)i++;return i}}Ae.DEFAULT_CAP=8,Ae.DEFAULT_P=1/Math.E;const _e=Symbol(),Ee=()=>{};var ke,Se;!function(e){e[e.FINE=0]="FINE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.SEVERE=4]="SEVERE",e[e.NONE=5]="NONE"}(Se||(ke=Se={},ke));const Re=Object.freeze({level:Se.NONE,fine(){},debug(){},info(){},warn(){},severe(){}}),Pe=(e,t={})=>{const r=Reflect.ownKeys(e),n=Reflect.ownKeys(t),i=Symbol("isa");function o(t){for(let n of r){const r=Object.getOwnPropertyDescriptor(t.prototype,n);!r||r.configurable?Object.defineProperty(t.prototype,n,{value:e[n],writable:!0}):console.log(`not patching: ${t.name}.${n.toString()}`)}return Object.defineProperty(t.prototype,i,{value:!0}),t}for(let e of n)Object.defineProperty(o,e,{value:t[e],enumerable:t.propertyIsEnumerable(e)});return Object.defineProperty(o,Symbol.hasInstance,{value:e=>!!e[i]}),o},Te=(e,t)=>{if(e)for(let r,n=0,i=e.length;n<i;n++)if(r=e[n],r[0].call(r[1],t),t.canceled)return},De=Pe({addListener(e,t,r){let n=(this._listeners=this._listeners||{})[e];return!n&&(n=this._listeners[e]=[]),-1===this.__listener(n,t,r)&&(n.push([t,r]),!0)},removeListener(e,t,r){let n;if(!(n=this._listeners))return!1;const i=n[e];if(i){const o=this.__listener(i,t,r);if(-1!==o)return i.splice(o,1),!i.length&&delete n[e],!0}return!1},notify(e){let t;if(!(t=this._listeners))return!1;void 0===e.target&&(e.target=this),Te(t[e.id],e),Te(t["*"],e)},__listener(e,t,r){let n=e.length;for(;--n>=0;){const i=e[n];if(i[0]===t&&i[1]===r)break}return n}}),Ce=Pe({addWatch(e,t){return this._watches=this._watches||{},!this._watches[e]&&(this._watches[e]=t,!0)},removeWatch(e){if(this._watches)return!!this._watches[e]&&(delete this._watches[e],!0)},notifyWatches(e,t){if(!this._watches)return;const r=this._watches;for(let n in r)r[n](n,e,t)}});var Le,Ie,Ue,We;(Ie=Le||(Le={}))[Ie.IDLE=0]="IDLE",Ie[Ie.ACTIVE=1]="ACTIVE",Ie[Ie.DONE=2]="DONE",Ie[Ie.ERROR=3]="ERROR",Ie[Ie.DISABLED=4]="DISABLED",(We=Ue||(Ue={}))[We.NEVER=0]="NEVER",We[We.FIRST=1]="FIRST",We[We.LAST=2]="LAST";let Me=Re;const ze=e=>"function"==typeof e,Ne=(e,t)=>null!=e&&"function"==typeof e[t],qe=Array.isArray,$e=e=>"string"==typeof e,Fe=e=>null!=e&&"function"==typeof e[Symbol.iterator];var He={};const Ve=e=>null!=e&&"string"!=typeof e&&"function"==typeof e[Symbol.iterator],Be=e=>null!==e&&"object"==typeof e,Qe=Object.getPrototypeOf,Ge=e=>{let t;return null!=e&&"object"==typeof e&&(null===(t=Qe(e))||null===Qe(t))},Ye=e=>e instanceof Promise;class Ke{constructor(e){this.value=e}deref(){return this.value}}const Je=e=>e instanceof Ke,Xe=e=>e instanceof Ke?e:new Ke(e),Ze=e=>e instanceof Ke?e.deref():e,et=(e,t=(e=>void 0!==e?": "+e:""))=>class extends Error{constructor(r){super(e(r)+t(r))}},tt=et(()=>"illegal argument(s)"),rt=e=>{throw new tt(e)},nt=et(()=>"illegal arity"),it=e=>{throw new nt(e)},ot=et(()=>"illegal state"),st=e=>{throw new ot(e)},at=et(()=>"unsupported operation"),ct=e=>{throw new at(e)};const ut=(e,t)=>[e,e=>e,t];function lt(e){return e?[...e]:ut(()=>[],(e,t)=>(e.push(t),e))}function*ft(e,t){const r=e(lt()),n=r[1],i=r[2];for(let e of t){const t=i([],e);if(Je(t))return void(yield*Ze(n(t.deref())));t.length&&(yield*t)}yield*Ze(n([]))}function*ht(e,t){const r=e([Ee,Ee,(e,t)=>t])[2];for(let e of t){let t=r(_e,e);if(Je(t))return t=Ze(t.deref()),void(t!==_e&&(yield t));t!==_e&&(yield t)}}const dt=(e,t,r=ht)=>{const n=t.length-1;return Fe(t[n])?t.length>1?r(e.apply(null,t.slice(0,n)),t[n]):r(e(),t[0]):void 0},pt=(e,t)=>[e[0],e[1],t];function gt(e,t){return t?ht(gt(e),t):t=>{const r=t[2];return pt(t,(t,n)=>r(t,e(n)))}}function bt(...e){let[t,r,n,i,o,s,a,c,u,l]=e;switch(e.length){case 0:it(0);case 1:return t;case 2:return(...e)=>t(r(...e));case 3:return(...e)=>t(r(n(...e)));case 4:return(...e)=>t(r(n(i(...e))));case 5:return(...e)=>t(r(n(i(o(...e)))));case 6:return(...e)=>t(r(n(i(o(s(...e))))));case 7:return(...e)=>t(r(n(i(o(s(a(...e)))))));case 8:return(...e)=>t(r(n(i(o(s(a(c(...e))))))));case 9:return(...e)=>t(r(n(i(o(s(a(c(u(...e)))))))));case 10:default:const f=(...e)=>t(r(n(i(o(s(a(c(u(l(...e))))))))));return 10===e.length?f:bt(f,...e.slice(10))}}const yt=(e,t)=>e===t?0:null==e?null==t?0:-1:null==t?null==e?0:1:"function"==typeof e.compare?e.compare(t):"function"==typeof t.compare?-t.compare(e):e<t?-1:e>t?1:0;const mt=Object.getPrototypeOf({}),vt="function",wt=(e,t)=>{let r;return e===t||(null==e?e==t:typeof e.equiv===vt?e.equiv(t):null==t?e==t:typeof t.equiv===vt?t.equiv(e):"string"!=typeof e&&"string"!=typeof t&&(r=Object.getPrototypeOf(e),null!=r&&r!==mt||(r=Object.getPrototypeOf(t),null!=r&&r!==mt)?typeof e!==vt&&void 0!==e.length&&typeof t!==vt&&void 0!==t.length?Ot(e,t):e instanceof Set&&t instanceof Set?xt(e,t):e instanceof Map&&t instanceof Map?jt(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:At(e,t)))},Ot=(e,t,r=wt)=>{let n=e.length;if(n===t.length)for(;--n>=0&&r(e[n],t[n]););return n<0},xt=(e,t,r=wt)=>e.size===t.size&&r([...e.keys()].sort(),[...t.keys()].sort()),jt=(e,t,r=wt)=>e.size===t.size&&r([...e].sort(),[...t].sort()),At=(e,t,r=wt)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(!t.hasOwnProperty(n)||!r(e[n],t[n]))return!1;return!0},_t=e=>e[e.length-1],Et=1/4294967295;const kt=Math.random;new class extends class{float(e=1){return this.int()*Et*e}norm(e=1){return this.int()*Et*e*2-e}minmax(e,t){return this.float()*(t-e)+e}gaussian(e=10,t=-.5,r=1){let n=0,i=e;for(;i-- >0;)n+=this.float(r);return n/e+t}}{int(){return 4294967295*kt()>>>0}float(e=1){return kt()*e}};function St(...e){return bt.apply(null,e)}var Rt;Math.PI,Math.sqrt(5),Math.SQRT2,Math.sqrt(3);var Pt;!function(e){e[e.EQUAL=0]="EQUAL",e[e.FLAT=1]="FLAT",e[e.UNDER=2]="UNDER",e[e.OVER=3]="OVER",e[e.OTHER=4]="OTHER"}(Pt||(Rt=Pt={},Rt));Math.abs,Math.max;function Tt(...e){return e.length>2&&dt(Tt,e,ft)||(([t,r,n])=>{const[i,o,s]=e[0];let a=e.length>1&&null!=e[1]?e[1]:i();return[t,e=>{let t=o(a);return t!==a&&(e=Ze(n(e,t))),a=t,r(e)},(e,t)=>(a=s(a,t),Je(a)?Xe(n(e,a.deref())):n(e,a))]})}let Dt=0;const Ct=()=>Dt++,Lt=(e,t)=>t&&t.id?t:Object.assign(Object.assign({},t),{id:e+"-"+Ct()}),It=(e,t)=>new Ut(e,t);class Ut{constructor(e,t={}){this.state=0,this.parent=t.parent,this.closeIn=void 0!==t.closeIn?t.closeIn:2,this.closeOut=void 0!==t.closeOut?t.closeOut:2,this.cacheLast=!1!==t.cache,this.id=t.id||`sub-${Ct()}`,this.last=_e,this.subs=[],e&&this.subs.push(e),t.xform&&(this.xform=t.xform(lt()))}deref(){return this.last!==_e?this.last:void 0}getState(){return this.state}subscribe(...e){let t;this.ensureState();let r=e.length>1&&Ge(_t(e))?Object.assign({},e.pop()):{};switch(e.length){case 1:ze(e[0])?(r.xform=e[0],!r.id&&(r.id=`xform-${Ct()}`)):t=e[0];break;case 2:t=e[0],r.xform=e[1];break;default:it(e.length)}return Ne(t,"subscribe")?t.parent=this:t=It(t,Object.assign({parent:this},r)),this.last!==_e&&t.next(this.last),this.addWrapped(t)}subscribeAll(...e){const t=[];for(let r of e)t.push(this.subscribe(r));return t}transform(...e){const t=e.length-1;return Ge(e[t])?this.subscribe(St(...e.slice(0,t)),e[t]):this.subscribe(St(...e))}unsubscribe(e){if(Me.debug(this.id,"unsub start",e?e.id:"self"),!e){let e=!0;return this.parent&&(e=this.parent.unsubscribe(this)),this.state=2,this.cleanup(),e}if(this.subs){Me.debug(this.id,"unsub child",e.id);const t=this.subs.indexOf(e);if(t>=0)return this.subs.splice(t,1),(1===this.closeOut||!this.subs.length&&0!==this.closeOut)&&this.unsubscribe(),!0}return!1}next(e){if(this.state<2)if(this.xform){const t=this.xform[2]([],e),r=Ze(t),n=r.length;for(let e=0;e<n;e++)this.dispatch(r[e]);Je(t)&&this.done()}else this.dispatch(e)}done(){if(Me.debug(this.id,"entering done()"),this.state<2){if(this.xform){const e=this.xform[1]([]),t=Ze(e),r=t.length;for(let e=0;e<r;e++)this.dispatch(t[e])}this.state=2;for(let e of[...this.subs])try{e.done&&e.done()}catch(t){e.error?e.error(t):this.error(t)}this.unsubscribe(),Me.debug(this.id,"exiting done()")}}error(e){this.state=3;let t=!1;if(this.subs&&this.subs.length)for(let r of this.subs.slice())r.error&&(r.error(e),t=!0);t||(Me.warn(this.id,"unhandled error:",e),this.parent&&(Me.debug(this.id,"unsubscribing..."),this.unsubscribe(),this.state=3))}addWrapped(e){return this.subs.push(e),this.state=1,e}dispatch(e){this.cacheLast&&(this.last=e);const t=this.subs;let r;if(1===t.length){r=t[0];try{r.next&&r.next(e)}catch(e){r.error?r.error(e):this.error(e)}}else for(let n=t.length;--n>=0;){r=t[n];try{r.next&&r.next(e)}catch(e){r.error?r.error(e):this.error(e)}}}ensureState(){this.state>=2&&st(`operation not allowed in state ${this.state}`)}cleanup(){Me.debug(this.id,"cleanup"),this.subs.length=0,delete this.parent,delete this.xform,delete this.last}}function Wt(e,t){for(let r of t)e.delete(r);return e}const Mt=(e,t)=>{if(e===t)return!0;if(!(t instanceof Map)||e.size!==t.size)return!1;for(let r of e.entries())if(!wt(t.get(r[0]),r[1]))return!1;return!0};function zt(e,t){if((e=>e instanceof Map)(e))for(let r of t)e.set(r[0],r[1]);else for(let r of t)e.add(r);return e}const Nt=new WeakMap,qt=e=>Nt.get(e).vals;class $t extends Set{constructor(e,t={}){super(),Nt.set(this,{equiv:t.equiv||wt,vals:[]}),e&&this.into(e)}*[Symbol.iterator](){yield*qt(this)}get[Symbol.species](){return $t}get[Symbol.toStringTag](){return"ArraySet"}get size(){return qt(this).length}copy(){const e=Nt.get(this),t=new $t(null,{equiv:e.equiv});return Nt.get(t).vals=e.vals.slice(),t}empty(){return new $t(null,this.opts())}clear(){qt(this).length=0}first(){if(this.size)return qt(this)[0]}add(e){return!this.has(e)&&qt(this).push(e),this}into(e){return zt(this,e)}has(e){return this.get(e,_e)!==_e}get(e,t){const r=Nt.get(this),n=r.equiv,i=r.vals;for(let t=i.length;--t>=0;)if(n(i[t],e))return i[t];return t}delete(e){const t=Nt.get(this),r=t.equiv,n=t.vals;for(let t=n.length;--t>=0;)if(r(n[t],e))return n.splice(t,1),!0;return!1}disj(e){return Wt(this,e)}equiv(e){return((e,t)=>{if(e===t)return!0;if(!(t instanceof Set)||e.size!==t.size)return!1;for(let r of e.keys())if(!t.has(r))return!1;return!0})(this,e)}forEach(e,t){const r=qt(this);for(let n=r.length;--n>=0;){const i=r[n];e.call(t,i,i,this)}}*entries(){for(let e of qt(this))yield[e,e]}*keys(){yield*qt(this)}*values(){yield*qt(this)}opts(){return{equiv:Nt.get(this).equiv}}}const Ft=new WeakMap,Ht=e=>Ft.get(e).map;class Vt extends Map{static fromObject(e,t){const r=new Vt(null,Object.assign({equiv:(e,t)=>e===t},t));for(let t in e)e.hasOwnProperty(t)&&r.set(t,e[t]);return r}constructor(e,t){super();const r=Object.assign({equiv:wt,keys:$t},t);Ft.set(this,{keys:new r.keys(null,{equiv:r.equiv}),map:new Map,opts:r}),e&&this.into(e)}[Symbol.iterator](){return this.entries()}get[Symbol.species](){return Vt}get[Symbol.toStringTag](){return"EquivMap"}get size(){return Ft.get(this).keys.size}clear(){const e=Ft.get(this);e.keys.clear(),e.map.clear()}empty(){return new Vt(null,Ft.get(this).opts)}copy(){const e=Ft.get(this),t=new Vt;return Ft.set(t,{keys:e.keys.copy(),map:new Map(e.map),opts:e.opts}),t}equiv(e){return Mt(this,e)}delete(e){const t=Ft.get(this);return(e=t.keys.get(e,_e))!==_e&&(t.map.delete(e),t.keys.delete(e),!0)}dissoc(e){return Wt(this,e)}forEach(e,t){for(let r of Ht(this))e.call(t,r[1],r[0],this)}get(e,t){const r=Ft.get(this);return(e=r.keys.get(e,_e))!==_e?r.map.get(e):t}has(e){return Ft.get(this).keys.has(e)}set(e,t){const r=Ft.get(this),n=r.keys.get(e,_e);return n!==_e?r.map.set(n,t):(r.keys.add(e),r.map.set(e,t)),this}into(e){return zt(this,e)}entries(){return Ht(this).entries()}keys(){return Ht(this).keys()}values(){return Ht(this).values()}opts(){return Ft.get(this).opts}}new Array(33).fill(0).map((e,t)=>Math.pow(2,t)-1);class Bt{constructor(e,t,r){this.k=e,this.v=t,this.next=new Array(r+1)}}const Qt=new WeakMap;class Gt extends Map{constructor(e,t={}){super();const r=t.capacity||Gt.DEFAULT_CAP,n=Math.ceil(Math.log2(r));Qt.set(this,{head:new Bt(null,null,0),cap:Math.pow(2,n),cmp:t.compare||yt,p:t.probability||Gt.DEFAULT_P,maxh:n,length:0,h:0}),e&&this.into(e)}static fromObject(e,t){const r=new Gt(null,Object.assign({capacity:Object.keys(e).length},t));for(let t in e)e.hasOwnProperty(t)&&r.set(t,e[t]);return r}get[Symbol.species](){return Gt}*[Symbol.iterator](){let e=Qt.get(this).head;for(;e=e.next[0];)yield[e.k,e.v]}*entries(e,t=!1){const r=Qt.get(this);let n=r.head;const i=r.cmp;let o;if(t){for(;n=n.next[0];)if((void 0===e||(o=i(n.k,e))<=0)&&(yield[n.k,n.v],0===o))return}else for(;n=n.next[0];)(void 0===e||(o=i(n.k,e))>=0)&&(yield[n.k,n.v])}keys(e,t=!1){return gt(e=>e[0],this.entries(e,t))}values(e,t=!1){return gt(e=>e[1],this.entries(e,t))}get size(){return Qt.get(this).length}clear(){const e=Qt.get(this);e.head=new Bt(null,null,0),e.length=0,e.h=0}empty(){return new Gt(null,Object.assign(Object.assign({},this.opts()),{capacity:Gt.DEFAULT_CAP}))}copy(){return new Gt(this,this.opts())}compare(e){const t=this.size,r=e.size;if(t<r)return-1;if(t>r)return 1;const n=this.entries(),i=e.entries();let o,s,a;for(;o=n.next(),s=i.next(),!o.done&&!s.done;)if(0!==(a=yt(o.value[0],s.value[0]))||0!==(a=yt(o.value[1],s.value[1])))return a;return 0}equiv(e){return Mt(this,e)}first(){const e=Qt.get(this).head.next[0];return e?[e.k,e.v]:void 0}get(e,t){const r=this.findPredNode(e).next[0];return r&&0===Qt.get(this).cmp(r.k,e)?r.v:t}has(e){return this.get(e,_e)!==_e}set(e,t){const r=Qt.get(this);let n=r.head,i=r.h,o=new Array(i);const s=r.cmp;let a;for(;i>=0;){for(;n.next[i]&&(a=s(n.next[i].k,e))<0;)n=n.next[i];if(n.next[i]&&0===a){do{n.next[i].v=t}while(--i>=0);return this}o[i--]=n}const c=this.pickHeight(r.maxh,r.h,r.p);for(n=new Bt(e,t,c);r.h<c;)o[++r.h]=r.head;for(let e=0;e<=c;e++)n.next[e]=o[e].next[e],o[e].next[e]=n;return r.length++,r.length>=r.cap&&(r.cap*=2,r.maxh++),this}delete(e){const t=Qt.get(this);let r=t.head,n=t.h,i=!1;const o=t.cmp;let s;for(;n>=0;){for(;r.next[n]&&(s=o(r.next[n].k,e))<0;)r=r.next[n];r.next[n]&&0===s&&(i=!0,r.next[n]=r.next[n].next[n],r!=t.head||r.next[n]||(t.h=Math.max(0,t.h-1))),n--}return i&&t.length--,i}into(e){return zt(this,e)}dissoc(e){return Wt(this,e)}forEach(e,t){for(let r of this)e.call(t,r[1],r[0],this)}$reduce(e,t){let r=Qt.get(this).head;for(;(r=r.next[0])&&!Je(t);)t=e(t,[r.k,r.v]);return t}opts(){const e=Qt.get(this);return{capacity:e.cap,compare:e.cmp,probability:e.p}}findPredNode(e){const t=Qt.get(this),r=t.cmp;let n=t.head,i=t.h;for(;i>=0;){for(;n.next[i]&&r(n.next[i].k,e)<0;)n=n.next[i];i--}return n}pickHeight(e,t,r){const n=Math.min(e,t+1);let i=0;for(;Math.random()<r&&i<n;)i++;return i}}Gt.DEFAULT_CAP=8,Gt.DEFAULT_P=1/Math.E;const Yt=e=>new Kt(e);class Kt extends Ut{constructor(e){super(void 0,Lt("pubsub",{xform:(e=e||{}).xform})),this.topicfn=e.topic,this.topics=new Vt(void 0,{equiv:e.equiv})}subscribe(){return ct("use subscribeTopic() instead")}transform(){return ct("use subscribeTopic() instead")}subscribeTopic(e,t,r){let n=this.topics.get(e);return!n&&this.topics.set(e,n=It()),n.subscribe(t,r)}unsubscribeTopic(e,t){const r=this.topics.get(e);return!!r&&r.unsubscribe(t)}unsubscribe(e){if(!e){for(let e of this.topics.values())e.unsubscribe();return this.topics.clear(),super.unsubscribe()}return ct()}done(){for(let e of this.topics.values())e.done();super.done()}dispatch(e){Me.debug(this.id,"dispatch",e);const t=this.topicfn(e);if(void 0!==t){const r=this.topics.get(t);if(r)try{r.next&&r.next(e)}catch(e){r.error?r.error(e):this.error(e)}}}}class Jt extends Ut{constructor(e,t){const[r,n]=ze(e)?[e,t]:[void 0,e];super(void 0,Lt("stream",n)),this.src=r,this._inited=!1}subscribe(...e){const t=super.subscribe.apply(this,e);return this._inited||(this._cancel=this.src&&this.src(this)||(()=>{}),this._inited=!0),t}unsubscribe(e){const t=super.unsubscribe(e);return!t||e&&(this.subs&&this.subs.length||0===this.closeOut)||this.cancel(),t}done(){this.cancel(),super.done(),delete this.src,delete this._cancel}error(e){super.error(e),this.cancel()}cancel(){if(this._cancel){Me.debug(this.id,"cancel");const e=this._cancel;delete this._cancel,e()}}}class Xt extends Ut{constructor(e){super(void 0,Lt("streammerge",e=e||{})),this.sources=new Map,e.src&&this.addAll(e.src)}add(e){this.ensureState(),this.sources.set(e,e.subscribe({next:e=>{e instanceof Ut?this.add(e):this.next(e)},done:()=>this.markDone(e),__owner:this},{id:`in-${e.id}`}))}addAll(e){for(let t of e)this.add(t)}remove(e){const t=this.sources.get(e);return!!t&&(this.sources.delete(e),t.unsubscribe(),!0)}removeID(e){for(let t of this.sources)if(t[0].id===e)return this.remove(t[0]);return!1}removeAll(e){let t=!0;for(let r of e)t=this.remove(r)&&t;return t}removeAllIDs(e){let t=!0;for(let r of e)t=this.removeID(r)&&t;return t}unsubscribe(e){if(!e){for(let e of this.sources.values())e.unsubscribe();this.state=2,this.sources.clear()}return super.unsubscribe(e)}markDone(e){this.remove(e),(1===this.closeIn||2===this.closeIn&&!this.sources.size)&&this.done()}}const Zt=e=>"object"==typeof He&&"object"==typeof He.versions&&void 0!==He.versions.node?((e,t)=>(t=Lt("interval",Object.assign({num:1/0},t)),new Jt(r=>{let n=0,i=t.num;r.next(n++);let o=setInterval(()=>{r.next(n++),--i<=0&&(clearInterval(o),0!==r.closeIn&&r.done())},e);return()=>clearInterval(o)},t)))(16,e):new Jt(e=>{let t=0,r=!0,n=()=>{r&&e.next(t++),r&&(i=requestAnimationFrame(n))},i=requestAnimationFrame(n);return()=>{r=!1,cancelAnimationFrame(i)}},Lt("raf",e)),er=(e,t)=>(t=Lt("atom",Object.assign({emitFirst:!0,changed:(e,t)=>e!==t},t)),new Jt(r=>(e.addWatch(r.id,(e,n,i)=>{t.changed(n,i)&&r.next(i)}),t.emitFirst&&r.next(e.deref()),()=>e.removeWatch(r.id)),t)),tr=(e,t,r=!1,n)=>((e,t,r=!1,n)=>new Jt(n=>{let i=e=>n.next(e);return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},Lt(`event-${t}`,n)))(e,t,r,n),rr=e=>qe(e)?e:$e(e)?e.length>0?e.split("."):[]:null!=e?[e]:[];function nr(e){const t=rr(e);let[r,n,i,o]=t;switch(t.length){case 0:return e=>e;case 1:return e=>null!=e?e[r]:void 0;case 2:return e=>null!=e&&null!=(e=e[r])?e[n]:void 0;case 3:return e=>null!=e&&null!=(e=e[r])&&null!=(e=e[n])?e[i]:void 0;case 4:return e=>null!=e&&null!=(e=e[r])&&null!=(e=e[n])&&null!=(e=e[i])?e[o]:void 0;default:return e=>{const r=t.length-1;let n=e;for(let e=0;null!=n&&e<=r;e++)n=n[t[e]];return n}}}function ir(e){const t=rr(e);let[r,n,i,o]=t;switch(t.length){case 0:return(e,t)=>t;case 1:return(e,t)=>((e=or(e))[r]=t,e);case 2:return(e,t)=>{let i;return(e=or(e))[r]=i=or(e[r]),i[n]=t,e};case 3:return(e,t)=>{let o,s;return(e=or(e))[r]=o=or(e[r]),o[n]=s=or(o[n]),s[i]=t,e};case 4:return(e,t)=>{let s,a,c;return(e=or(e))[r]=s=or(e[r]),s[n]=a=or(s[n]),a[i]=c=or(a[i]),c[o]=t,e};default:let e;for(let r=t.length;--r>=0;)e=sr(t[r],e);return e}}const or=e=>qe(e)?e.slice():Object.assign({},e),sr=(e,t)=>(r,n)=>((r=or(r))[e]=t?t(r[e],n):n,r),ar=(e,t,r,...n)=>function(e,t,r,...n){return ir(t)(e,r.apply(null,(n.unshift(nr(t)(e)),n)))}(e,t,r,...n);const cr=(e,t)=>nr(t)(e),ur=(e,t,r)=>ir(t)(e,r);var lr={};let fr=0;class hr{constructor(e,t,r,n=!0,i=wt){this.parent=e,this.id=`view-${fr++}`,this.tx=r||(e=>e),this.path=rr(t),this.isDirty=!0,this.isLazy=n;const o=(e=>nr(e))(this.path),s=this.parent.deref();this.unprocessed=s?o(s):void 0,n||(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),e.addWatch(this.id,(e,t,r)=>{const s=t?o(t):t,a=r?o(r):r;i(a,s)||(n?this.unprocessed=a:this.state=this.tx(a),this.isDirty=!0)})}get value(){return this.deref()}deref(){return this.isDirty&&(this.isLazy&&(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),this.isDirty=!1),this.state}changed(){return this.isDirty}view(){return this.isDirty&&this.isLazy?this.tx(this.unprocessed):this.state}release(){return this.unprocessed=void 0,this.isLazy||(this.state=this.tx(void 0)),this.isDirty=!0,this.parent.removeWatch(this.id)}}let dr=class{constructor(e,t){t&&!t(e)&&st("initial state value did not validate"),this._value=e,this.valid=t}get value(){return this._value}set value(e){this.reset(e)}deref(){return this._value}equiv(e){return this===e}reset(e){const t=this._value;return this.valid&&!this.valid(e)?t:(this._value=e,this.notifyWatches(t,e),e)}resetIn(e,t){return this.reset(ur(this._value,e,t))}swap(e,...t){return this.reset(e.apply(null,[this._value,...t]))}swapIn(e,t,...r){return this.reset(ar(this._value,e,t,...r))}addWatch(e,t){return!1}removeWatch(e){return!1}notifyWatches(e,t){}addView(e,t,r=!0){return new hr(this,e,t,r)}release(){return delete this._watches,delete this._value,!0}};dr=(lr&&lr.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s})([Ce],dr),lr.Atom=dr,lr.Atom=dr;var pr,gr={},br=gr&&gr.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let yr=pr=class{constructor(e,t=100,r){this.state=e,this.maxLen=t,this.changed=r||((e,t)=>!wt(e,t)),this.clear()}get value(){return this.deref()}set value(e){this.reset(e)}canUndo(){return this.history.length>0}canRedo(){return this.future.length>0}clear(){this.history=[],this.future=[]}undo(){if(this.history.length){const e=this.state.deref();this.future.push(e);const t=this.state.reset(this.history.pop());return this.notify({id:pr.EVENT_UNDO,value:{prev:e,curr:t}}),t}}redo(){if(this.future.length){const e=this.state.deref();this.history.push(e);const t=this.state.reset(this.future.pop());return this.notify({id:pr.EVENT_REDO,value:{prev:e,curr:t}}),t}}reset(e){const t=this.state.deref();return this.state.reset(e),this.changed(t,this.state.deref())&&this.record(t),e}resetIn(e,t){const r=this.state.deref(),n=cr(r,e),i=ur(r,e,t);return this.state.reset(i),this.changed(n,cr(i,e))&&this.record(r),i}swap(e,...t){return this.reset(e(this.state.deref(),...t))}swapIn(e,t,...r){const n=this.state.deref(),i=cr(n,e),o=ar(this.state.deref(),e,t,...r);return this.state.reset(o),this.changed(i,cr(o,e))&&this.record(n),o}record(e){const t=this.history,r=t.length;let n=!0;arguments.length||(e=this.state.deref(),n=!r||this.changed(t[r-1],e)),n&&(r>=this.maxLen&&t.shift(),t.push(e),this.notify({id:pr.EVENT_RECORD,value:e}),this.future.length=0)}deref(){return this.state.deref()}addWatch(e,t){return this.state.addWatch(e,t)}removeWatch(e){return this.state.removeWatch(e)}notifyWatches(e,t){return this.state.notifyWatches(e,t)}addView(e,t,r=!0){return new hr(this,e,t,r)}release(){return this.state.release(),delete this.state,!0}addListener(e,t,r){return!1}removeListener(e,t,r){return!1}notify(e){}};yr.EVENT_UNDO="undo",yr.EVENT_REDO="redo",yr.EVENT_RECORD="record",yr=pr=br([De],yr),gr.History=yr,gr.History=yr;const mr=(e,t)=>new vr(e,t);class vr extends Ut{constructor(e,t){super(void 0,t=Lt("sidepart",t)),this.buf=[];const r=t.pred||(()=>!0),n=this;this.sideSub=e.subscribe({next(e){n.buf.length&&r(e)&&(n.dispatch(n.buf),n.buf=[])},done(){n.buf.length&&n.dispatch(n.buf),n.done(),delete n.buf}})}unsubscribe(e){const t=super.unsubscribe(e);return e&&this.subs.length||this.sideSub.unsubscribe(),t}next(e){this.state<2&&this.buf.push(e)}done(){this.sideSub.unsubscribe(),super.done()}}let wr,Or,xr=[],jr=[];const Ar=(e,t,r,n,i)=>{const o=t.length,s=e.linear;if(e.distance=o,0!==i){for(let e=0,r=0;e<o;e++,r+=3)s[r]=n,s[r+1]=e,s[r+2]=t[e];if(3===i){const n=e[r];for(let e=0;e<o;e++)n[e]=t[e]}}return e},_r=(e,t,r=3,n=wt)=>{const i={distance:0,adds:{},dels:{},const:{},linear:[]};if(e===t||null==e&&null==t)return i;if(null==e||0===e.length)return Ar(i,t,"adds",1,r);if(null==t||0===t.length)return Ar(i,e,"dels",-1,r);const o=e.length>=t.length;let s,a,c,u;o?(s=t,a=e):(s=e,a=t),c=s.length,u=a.length;const l=c+1,f=u-c,h=f+l,d=c+u+3,p=(e=>Or&&Or.length>=e?Or:Or=new Int32Array(e))(d).fill(-1,0,d),g=(e=>wr&&wr.length>=e?wr:wr=new Int32Array(e))(d).fill(-1,0,d),b=xr,y=jr;b.length=0,y.length=0;const m=(e,t,r)=>{const i=e+l;let o,f;t>r?(o=p[i-1],f=t):(o=p[i+1],f=r);let h=f-e;for(;h<c&&f<u&&n(s[h],a[f]);)h++,f++;return p[i]=y.length/3,y.push(h,f,o),f};let v,w,O=-1;do{for(O++,v=-O,w=v+l;v<f;v++,w++)g[w]=m(v,g[w-1]+1,g[w+1]);for(v=f+O,w=v+l;v>f;v--,w--)g[w]=m(v,g[w-1]+1,g[w+1]);g[h]=m(f,g[h-1]+1,g[h+1])}while(g[h]!==u);if(i.distance=f+2*O,0!==r){for(O=3*p[h];O>=0;)b.push(O),O=3*y[O+2];3===r?Er(b,y,i,s,a,o):kr(b,y,i,s,a,o,1===r)}return i},Er=(e,t,r,n,i,o)=>{const s=r.linear,a=r.const;let c,u,l,f,h=e.length,d=0,p=0;for(o?(c=r.dels,u=r.adds,l=-1,f=1):(c=r.adds,u=r.dels,l=1,f=-1);--h>=0;){const r=e[h],o=t[r],g=t[r+1],b=g-o;for(;d<o||p<g;){const e=p-d;b>e?(s.push(l,p,c[p]=i[p]),p++):b<e?(s.push(f,d,u[d]=n[d]),d++):(s.push(0,d,a[d]=n[d]),d++,p++)}}},kr=(e,t,r,n,i,o,s)=>{const a=r.linear,c=o?-1:1,u=o?1:-1;let l=e.length,f=0,h=0;for(;--l>=0;){const r=e[l],o=t[r],d=t[r+1],p=d-o;for(;f<o||h<d;){const e=h-f;p>e?(a.push(c,h,i[h]),h++):p<e?(a.push(u,f,n[f]),f++):(s&&a.push(0,f,n[f]),f++,h++)}}},Sr=(e,t,r)=>{e||(e={}),t||(t={});let n=0;for(let i in e){const o=t[i];(void 0===o||!r(e[i],o))&&n++}for(let r in t)!(r in e)&&n++;return{distance:n}},Rr=(e,t,r)=>{e||(e={}),t||(t={});let n=0;const i=[],o=[],s=[];for(let i in e){const a=t[i];void 0===a?(o.push(i),n++):r(e[i],a)||(s.push(i,a),n++)}for(let r in t)r in e||(i.push(r),n++);return{distance:n,adds:i,dels:o,edits:s}},Pr=Array.isArray,Tr=Math.max,Dr=Object.getPrototypeOf({}),Cr="function",Lr="string",Ir=(()=>{const e=new Array(2048);for(let t=2,r=e.length;t<r;t++)e[t]=t-2;return e})(),Ur=(e,t,r,n,i,o=0)=>{const s=i[1];if(s.__skip)return;if(!1===s.__diff)return $r(n),void t.replaceChild(e,r,o,i);const a=n[1];if(a&&a.__skip)return void t.replaceChild(e,r,o,i,!1);let c=s.__impl;if(c&&c!==t)return c.diffTree(e,c,r,n,i,o);const u=_r(n,i,1,Hr);if(0===u.distance)return;const l=u.linear,f=t.getChild(r,o);let h,d,p,g;if(0!==l[0]||n[1].key!==s.key)return $r(n),void t.replaceChild(e,r,o,i);if((g=n.__release)&&g!==i.__release&&$r(n),0!==l[3]&&(qr(t,f,n[1],i[1]),2===u.distance))return;const b=l.length,y=n.length-1,m=Fr(l),v=(e=>{if(e<=Ir.length)return Ir.slice(0,e);const t=new Array(e);for(;--e>=2;)t[e]=e-2;return t})(y+1);for(h=2,d=6;d<b;h++,d+=3)p=l[d],p&&(-1===p?Wr(e,t,f,n,i,l,d,m,v,y):Mr(e,t,f,l,d,m,v,y));(g=i.__init)&&g!=n.__init&&g.apply(i,[f,...i.__args])},Wr=(e,t,r,n,i,o,s,a,c,u)=>{const l=o[s+2];if(Pr(l)){let f=l[1].key;if(void 0!==f&&void 0!==a[f][2]){const o=a[f];f=o[0],Ur(e,t,r,n[f],i[o[2]],c[f])}else{const e=o[s+1];$r(l),t.removeChild(r,c[e]),zr(c,u,e)}}else typeof l===Lr&&t.setContent(r,"")},Mr=(e,t,r,n,i,o,s,a)=>{const c=n[i+2];if(typeof c===Lr)t.setContent(r,c);else if(Pr(c)){const u=c[1].key;if(void 0===u||void 0===o[u][0]){const o=n[i+1];t.createTree(e,r,c,s[o]),Nr(s,a,o)}}},zr=(e,t,r)=>{for(;t>r;t--)e[t]=Tr(e[t]-1,0)},Nr=(e,t,r)=>{for(;t>=r;t--)e[t]++},qr=(e,t,r,n)=>{const i=((e,t,r=3,n=wt)=>e===t?{distance:0}:0===r?Sr(e,t,n):Rr(e,t,n))(r,n,3,wt);e.removeAttribs(t,i.dels,r);let o,s,a,c=_e;for(a=i.edits,o=a.length;(o-=2)>=0;)s=a[o],0===s.indexOf("on")&&e.removeAttribs(t,[s],r),"value"!==s?e.setAttrib(t,s,a[o+1],n):c=a[o+1];for(a=i.adds,o=a.length;--o>=0;)s=a[o],"value"!==s?e.setAttrib(t,s,n[s],n):c=n[s];c!==_e&&e.setAttrib(t,"value",c,n)},$r=e=>{if(Pr(e)){let t;if((t=e[1])&&!1===t.__release)return;for(e.__release&&(e.__release.apply(e.__this,e.__args),delete e.__release),t=e.length;--t>=2;)$r(e[t])}},Fr=e=>{let t,r,n;const i={};for(let o=e.length;(o-=3)>=0;)r=e[o+2],Pr(r)&&void 0!==(t=r[1].key)&&(n=i[t],!n&&(i[t]=n=[,,]),n[e[o]+1]=e[o+1]);return i},Hr=(e,t)=>{let r;return e===t||(null==e?e==t:typeof e.equiv===Cr?e.equiv(t):null==t?e==t:typeof t.equiv===Cr?t.equiv(e):typeof e!==Lr&&typeof t!==Lr&&(r=Object.getPrototypeOf(e),null!=r&&r!==Dr||(r=Object.getPrototypeOf(t),null!=r&&r!==Dr)?typeof e!==Cr&&void 0!==e.length&&typeof t!==Cr&&void 0!==t.length?Ot(e,t,Hr):e instanceof Set&&t instanceof Set?xt(e,t,Hr):e instanceof Map&&t instanceof Map?jt(e,t,Hr):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:!(!1===e.__diff||!1===t.__diff)&&At(e,t,Hr)))},Vr=/^([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?$/,Br=(new RegExp(`[${Object.keys({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"}).join("")}]`,"g"),{button:1,option:1,text:1,textarea:1}),Qr=e=>e.split(" ").reduce((e,t)=>(e[t]=!0,e),{}),Gr=Qr("animate animateColor animateMotion animateTransform circle clipPath color-profile defs desc discard ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feDropShadow feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font foreignObject g image line linearGradient marker mask metadata mpath path pattern polygon polyline radialGradient rect set stop style svg switch symbol text textPath title tref tspan use view"),Yr=(Qr("area base br circle col command ellipse embed hr img input keygen line link meta param path polygon polyline rect source stop track use wbr ?xml"),qe),Kr=Ve,Jr=(e,t)=>t.__init&&t.__init.apply(t.__this,[e,...t.__args]),Xr=(e,t,r,n,i,o=!0)=>{if(Yr(n)){const s=n[0];if("function"==typeof s)return Xr(e,t,r,s.apply(null,[e.ctx,...n.slice(1)]),i);const a=n[1];if(a.__impl)return a.__impl.createTree(e,r,n,i,o);const c=t.createElement(r,s,a,i);if(n.length>2){const r=n.length;for(let i=2;i<r;i++)Xr(e,t,c,n[i],void 0,o)}return o&&Jr(c,n),c}if(Kr(n)){const s=[];for(let a of n)s.push(Xr(e,t,r,a,i,o));return s}return null==n?r:t.createTextElement(r,n)},Zr=(e,t,r,n,i=0)=>{if(Yr(n)){const o=t.getChild(r,i);"function"==typeof n[0]&&Zr(e,t,r,n[0].apply(null,[e.ctx,...n.slice(1)]),i);const s=n[1];if(s.__impl)return s.__impl.hydrateTree(e,r,n,i);Jr(o,n);for(let e in s)0===e.indexOf("on")&&t.setAttrib(o,e,s[e]);for(let r=n.length,i=2;i<r;i++)Zr(e,t,o,n[i],i-2)}else if(Kr(n))for(let o of n)Zr(e,t,r,o,i),i++},en=(e,t,r)=>e?void 0===r?e.appendChild(t):e.insertBefore(t,e.children[r]):t,tn=(e,t)=>{for(let r in t)rn(e,r,t[r],t);return e},rn=(e,t,r,n)=>{if(t.startsWith("__"))return;const i=0===t.indexOf("on");if(i||"function"!=typeof r||(r=r(n)),void 0!==r&&!1!==r)switch(t){case"style":on(e,r);break;case"value":nn(e,r);break;case"accesskey":e.accessKey=r;break;case"contenteditable":e.contentEditable=r;break;case"tabindex":e.tabIndex=r;break;case"align":case"autocapitalize":case"checked":case"dir":case"draggable":case"hidden":case"id":case"lang":case"namespaceURI":case"scrollTop":case"scrollLeft":case"title":e[t]=r;break;default:i?sn(e,t.substr(2),r):e.setAttribute(t,!0===r?"":r)}else null!=e[t]?e[t]=null:e.removeAttribute(t);return e},nn=(e,t)=>{let r;switch(e.type){case"text":case"textarea":case"password":case"search":case"number":case"email":case"url":case"tel":case"date":case"datetime-local":case"time":case"week":case"month":if(void 0!==(r=e.value)&&"string"==typeof t){const n=t.length-(r.length-(e.selectionStart||0));e.value=t,e.selectionStart=e.selectionEnd=n;break}default:e.value=t}},on=(e,t)=>(e.setAttribute("style",(e=>{let t,r="";for(let n in e)t=e[n],ze(t)&&(t=t(e)),null!=t&&(r+=`${n}:${t};`);return r})(t)),e),sn=(e,t,r)=>Yr(r)?e.addEventListener(t,...r):e.addEventListener(t,r),an=(e,t,r)=>Yr(r)?e.removeEventListener(t,...r):e.removeEventListener(t,r),cn=qe,un=Ve,ln=Ge,fn=(e,t,r,n,i,o)=>{if(null!=e){if(cn(e)){if(0===e.length)return;let s,a,c=e[1];if(c&&(a=c.__impl)&&(a=a.normalizeTree))return a(t,e);const u=e[0];if("function"==typeof u)return fn(u.apply(null,[r,...e.slice(1)]),t,r,n,i,o);if("function"==typeof u.render){const a=[r,...e.slice(1)];return s=fn(u.render.apply(u,a),t,r,n,i,o),cn(s)&&(s.__this=u,s.__init=u.init,s.__release=u.release,s.__args=a),s}if(s=((e,t)=>{let r,n,i,o,s,a=e[0],c=ln(e[1]);return"string"==typeof a&&(r=Vr.exec(a))||rt(`${a} is not a valid tag name`),n=r[1],a!==n||!c||t&&!e[1].key?(s=c?Object.assign({},e[1]):{},i=r[2],o=r[3],i&&(s.id=i),o&&(o=o.replace(/\./g," "),s.class?s.class+=" "+o:s.class=o),s.__skip&&e.length<3?[n,s]:[n,s,...e.slice(c?2:1)]):e})(e,i),c=s[1],!1===c.__normalize)return s;if(i&&void 0===c.key&&(c.key=n.join("-")),s.length>2){const e=s[0],a=[e,c];o=o&&!Br[e];for(let e=2,c=2,u=0,l=s.length;e<l;e++){let l=s[e];if(null!=l){const e=cn(l);if(e&&cn(l[0])||!e&&un(l))for(let e of l)e=fn(e,t,r,n.concat(u),i,o),void 0!==e&&(a[c++]=e),u++;else l=fn(l,t,r,n.concat(u),i,o),void 0!==l&&(a[c++]=l),u++}}return a}return s}return"function"==typeof e?fn(e(r),t,r,n,i,o):"function"==typeof e.toHiccup?fn(e.toHiccup(t.ctx),t,r,n,i,o):"function"==typeof e.deref?fn(e.deref(),t,r,n,i,o):o?["span",i?{key:n.join("-")}:{},e.toString()]:e.toString()}},hn={createTree(e,t,r,n,i){return Xr(e,this,t,r,n,i)},hydrateTree(e,t,r,n){return Zr(e,this,t,r,n)},diffTree(e,t,r,n,i){Ur(e,this,t,r,n,i)},normalizeTree:(e,t)=>fn(t,e,e.ctx,[0],!1!==e.keys,!1!==e.span),getElementById:e=>document.getElementById(e),getChild:(e,t)=>e.children[t],createElement:(e,t,r,n)=>{const i=Gr[t]?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return r&&tn(i,r),en(e,i,n)},createTextElement:(e,t,r)=>en(e,document.createTextNode(t),r),replaceChild(e,t,r,n,i){((e,t,r,n,i,o=!0)=>{t.removeChild(r,n),t.createTree(e,r,i,n,o)})(e,this,t,r,n,i)},removeChild:(e,t)=>{const r=e.children[t];void 0!==r&&e.removeChild(r)},setContent:(e,t)=>e.textContent=t,removeAttribs:(e,t,r)=>{for(let n=t.length;--n>=0;){const i=t[n];0===i.indexOf("on")?an(e,i.substr(2),r[i]):e.hasAttribute(i)?e.removeAttribute(i):e[i]=null}},setAttrib:rn},dn=(e={},t=hn)=>{const r=Object.assign({root:"app"},e),n=((e,t)=>$e(e)?t.getElementById(e):e)(r.root,t);return Tt([()=>[],e=>e,(i,o)=>(r.ctx=((e,t)=>{if(null==e||!t||!t.length)return e;const r=Object.assign({},e);for(let e of t){const t=r[e];Ne(t,"deref")&&(r[e]=t.deref())}return r})(e.ctx,r.autoDerefKeys),null!=(o=t.normalizeTree(r,o))?(r.hydrate?(t.hydrateTree(r,n,o),r.hydrate=!1):t.diffTree(r,n,i,o,0),o):i)])};var pn;function gn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}pn=function(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var a=e.length;s>0&&a>s&&(a=s);for(var c=0;c<a;++c){var u,l,f,h,d=e[c].replace(o,"%20"),p=d.indexOf(r);p>=0?(u=d.substr(0,p),l=d.substr(p+1)):(u=d,l=""),f=decodeURIComponent(u),h=decodeURIComponent(l),gn(i,f)?yn(i[f])?i[f].push(h):i[f]=[i[f],h]:i[f]=h}return i};var bn,yn=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},mn=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};bn=function(e,t,r,n){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?wn(jn(e),(function(n){var i=encodeURIComponent(mn(n))+r;return vn(e[n])?wn(e[n],(function(e){return i+encodeURIComponent(mn(e))})).join(t):i+encodeURIComponent(mn(e[n]))})).join(t):n?encodeURIComponent(mn(n))+r+encodeURIComponent(mn(e)):""};var vn=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function wn(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var On,xn,jn=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},An={},_n=(On=pn,An.parse=On);An.decode=_n;var En,kn=(xn=bn,An.stringify=xn);function Sn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(r),!0).forEach((function(t){Pn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}An.encode=kn;var Tn="DOM",Dn="URL",Cn="URL_path",Ln="URL_data",In="URL_page",Un="router",Wn="sub$",Mn="args",zn="reso",Nn="erro",qn="handler",$n="source$",Fn="STATE",Hn="PATH",Vn="run",Bn="_ROUTE_PATH",Qn="_ROUTE_LOADING",Gn="_PAGE_TEMPLATE",Yn=new dr((Pn(En={},Bn,null),Pn(En,Qn,!0),Pn(En,Gn,null),Pn(En,"_ROOT",null),En));function Kn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jn=e(An),Xn=function(e,t){var r,n=[],i=[],o=[],s=/(?=\?)|(?=#)/g,a=t?e.replace(t,"").split(s):e.split(s),c=a[0].split("/").filter((function(e){return""!==e}));/http/i.test(e)?(i=c[1].split(".").slice(-2),n=c[1].split(".").slice(0,-2),o=c.slice(2)):o=c;var u=a.filter((function(e){return"?"===e.slice(0,1)}))[0]||"",l=a.filter((function(e){return"#"===e.slice(0,1)}))[0]||"",f=Jn.parse(u.slice(1)),h=l.slice(1);return Kn(r={},Dn,e),Kn(r,"URL_subdomain",n),Kn(r,"URL_domain",i),Kn(r,Cn,o),Kn(r,"URL_query",f),Kn(r,"URL_hash",h),r},Zn=function(e){return ze(e)&&0===e.length?"THUNK":ze(e)&&e.length>0?"FUNCTION":Ye(e)?"PROMISE":Be(e)?"OBJECT":"type_str NOT FOUND"};function ei(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ti(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(r),!0).forEach((function(t){ri(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ei(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ri(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ni=function(e,t){return JSON.stringify(e,(function(e,t){return"function"==typeof t?t.toString().replace(/\r?\n|\r/g,"").replace(/\s\s+/g," ").slice(0,12)+"...":t}),t)},ii=function(e,t){var r=Array.from(Array(19).keys()).reduce((function(e,t){return ti({},e,ri({},t,"".concat(t+1,"th")))}),{}),n=ti({},r,{0:"1st",1:"2nd",2:"3rd"}),i=n[t];return" it was the ".concat(i," Command in a Task or ").concat(n[t-1]," in a Subtask.")},oi=function(e,t,r,n,i){var o=t.source$,s=Object.entries(t).length;return"\n\n   ".concat(e,' ERROR:\n  \n   Unrecognized Command Key(s)\n  \n  FAULTY sub$: "').concat(n,'" \n  ').concat(Object.keys(r)[0][0]?"\n  ".concat(i?ii(0,i):"","\n\n  The problematic entry/entries: \n\n   ").concat(!i&&s>3&&!o?"".concat(Object.entries(r)[0][0],": <Stream>"):ni(r,2)):""," \n\n  ACCEPTABLE ENTRY KEYS ").concat(i?"WITHIN A COMMAND":"DURING REGISTRATION",": \n\n  'sub$' \n    - optional \n    - topic key for for registering & targeting Commands \n    - signatures:\n      - \"X\"    : String: Topic key\n      - XX$    : Stream: for dispatching args to custom stream\n\n  'args' \n    - required \n    - payload or accumulator reshaping payload function (Promises OK)\n    - signatures:\n      - PRI    : primitive: static payload -> is NOT accumulated\n      - {?}    : object: static payload -> is accumulated \n      - (+) => : function (non-nullary): dispatch payload from \n                values accumulated from prior Command payloads\n      - (0) => : thunk (nullary): dispatch to custom stream\n      - {P}    : Promise or (#) => {P} Promise returning function\n      \n  'reso' \n    - required for Promise handling \n    - converts resolved Promise payloads to Command args\n    - signature:\n      - ({A: accumulator}, {P: resolved Promise}) =>  \n\n  'erro' \n    - recommended for Promise rejections \n    - handles rejected Promise payloads\n    - signature:\n      - ({A: accumulator}, {E: error object}) =>  \n  ").concat(i?"":"\n  'handler' \n    - required \n    - function that is called on payload's arrival\n    - signature: \n      - (#) => : function instruments actual side-effects/work \n  \n  'source$' \n    - advanced/optional \n    - source stream (see http://thi.ng/rstream)","\n\n  Hope that helps!\n  ")};function si(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ai(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?si(Object(r),!0).forEach((function(t){ci(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):si(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ci(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ui(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var li=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.keys(t),n=r.filter((function(t){return!e.includes(t)})),i=Object.entries(t).reduce((function(t,r){var n=ui(r,2),i=n[0],o=n[1];return e.includes(i)?t:ai({},t,ci({},i,o))}),{});return[n,i]};function fi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fi(Object(r),!0).forEach((function(t){pi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function di(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function pi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gi(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var bi="Spool Interupted",yi=function(e,t){return console.warn("\n   No sub$ included for a Command with a primitive for 'args'. \n   Ergo, nothing was done with this Command: \n  \n  ".concat(JSON.stringify(e),"\n  \n  ").concat(ii(0,t),"\n  \n  Hope that helps!\n  "))},mi=function(e){return e.reduce(function(){var e,t=(e=regeneratorRuntime.mark((function e(t,r,n){var i,o,s,a,c,u,l,f,h,d,p,g,b,y,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(o=e.sent,!ze(r)){e.next=14;break}return e.prev=4,(s=r(o)).unshift(pi({},Mn,o)),e.abrupt("return",mi(s));case 10:return e.prev=10,e.t0=e.catch(4),console.warn(bi,e.t0),e.abrupt("return");case 14:if(a=r[Wn],c=r[Mn],u=r[Nn],l=r[zn],f=li([Wn,Mn,zn,Nn,$n,qn],r),h=di(f,1),!((d=h[0]).length>0)){e.next=22;break}throw new Error(oi(bi,r,d,a,n));case 22:if(p=Zn(c),g=c,"PROMISE"!==p&&l&&(g=Promise.resolve(c)),c===Object(c)||a){e.next=28;break}return yi(r,n),e.abrupt("return",o);case 28:if("PROMISE"!==p){e.next=32;break}return e.next=31,c.catch((function(e){return e}));case 31:g=e.sent;case 32:if("THUNK"!==p){e.next=37;break}return g=c(),console.log("dispatching to ad-hoc stream: ".concat(a.id)),a.next(g),e.abrupt("return",o);case 37:if("FUNCTION"!==p){e.next=47;break}if(b=c(o),!Ye(b)){e.next=45;break}return e.next=42,b.catch((function(e){return e}));case 42:e.t1=e.sent,e.next=46;break;case 45:e.t1=b;case 46:g=e.t1;case 47:if("OBJECT"!==p){e.next=52;break}if(a){e.next=50;break}return e.abrupt("return",hi({},o,{},c));case 50:return _i.next(r),e.abrupt("return",hi({},o,{},c));case 52:if(!l){e.next=69;break}if(!(u&g instanceof Error)){e.next=59;break}if(!(y=Nn(o,g))._sub$){e.next=57;break}return e.abrupt("return",_i.next(y));case 57:console.warn(bi,"[ Promise rejected ]:",g),g=y;case 59:if(g instanceof Error){e.next=68;break}if(!(m=l(o,g))._sub$){e.next=65;break}_i.next(m),e.next=67;break;case 65:if(a){e.next=67;break}return e.abrupt("return",hi({},o,{},m));case 67:g=m;case 68:console.warn("no 'erro' (Error handler) set for ".concat(r));case 69:if(l||a){e.next=71;break}return e.abrupt("return",hi({},o,{},g));case 71:if(!(g instanceof Error)){e.next=74;break}return console.warn(bi,g),e.abrupt("return",o);case 74:if(g===Object(g)){e.next=80;break}if(a){e.next=78;break}return yi(r,n),e.abrupt("return",o);case 78:return _i.next((pi(v={},Wn,a),pi(v,Mn,g),v)),e.abrupt("return",o);case 80:return _i.next((pi(i={},Wn,a),pi(i,Mn,g),i)),e.abrupt("return",hi({},o,{},g));case 82:case"end":return e.stop()}}),e,null,[[4,10]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){gi(o,n,i,s,a,"next",e)}function a(e){gi(o,n,i,s,a,"throw",e)}s(void 0)}))});return function(e,r,n){return t.apply(this,arguments)}}(),Promise.resolve({}))};function vi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}new Jt(Oi,xi).subscribe((wi="log$ -> ",{next(e){wi?console.log(wi,e):console.log(e)},done(){wi?console.log(wi,"done"):console.log("done")},error(e){wi?console.log(wi,"error",e):console.log("error",e)}}),{id:"log$"});var wi,Oi,xi,ji=Yt({topic:function(e){return!!e.sub$},id:"run$_stream",equiv:function(e,t){return e===t||"_TRACE_STREAM"===t}}),Ai=Yt({topic:function(e){return e.sub$},id:"out$_stream",equiv:function(e,t){return e===t||"_TRACE_STREAM"===t}}),_i=ji.subscribeTopic(!0,{next:function(e){return Ai.next(e)},error:console.warn},{id:"command$_stream"}),Ei=(ji.subscribeTopic(!1,{next:mi,error:console.warn},{id:"task$_stream"}),(e=>new Xt(e))({src:[tr(window,"popstate"),tr(window,"DOMContentLoaded")]}).transform(gt((function(e){var t;return vi(t={},Dn,e.target.location.href),vi(t,Tn,e.currentTarget),t}))));function ki(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Si(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(r),!0).forEach((function(t){Ri(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ki(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ri(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pi(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ti=function(e){var t=function(e){var t,r,n,i;if(Be(e)){var o=e[Un],s=e.pre,a=e.post,c=e.prefix||null,u=/[-/\\^$*+?.()|[\]{}]/g,l=c?new RegExp(c.replace(u,"\\$&"),"g"):null;t=o,r=Be(s)?[s]:s||[],n=Be(a)?[a]:a||[],i=l}else t=e,r=[],n=[],i=null;return function(e){var o;return[].concat(Pi(r),[(o={},Ri(o,Mn,t(i?e[Dn].replace(i,""):e[Dn])),Ri(o,zn,(function(e,t){var r;return Ri(r={},In,t[In]),Ri(r,Ln,t[Ln]),r})),Ri(o,Nn,(function(e,t){return console.warn("Error in __URL__ROUTE:",t,"constructed:",e)})),o),Ri({},Mn,i?Xn(e[Dn],i):Xn(e[Dn])),Si({},yo,{args:function(e){var t;return Ri(t={},Fn,e[Cn]),Ri(t,Hn,[Bn]),t}})],Pi(n))}}(e);return function(e){var r,n;return[Si({},yo,{args:(r={},Ri(r,Hn,[Qn]),Ri(r,Fn,!0),r)}),Si({},Xi,{args:(n={},Ri(n,Dn,e[Dn]),Ri(n,Tn,e[Tn]),n)}),function(e){return t(Ri({},Dn,e[Dn]))},Si({},yo,{args:function(e){var t;return Ri(t={},Hn,[Gn]),Ri(t,Fn,e[In]),t}}),Si({},yo,{args:function(e){var t;return Ri(t={},Hn,e[Cn]),Ri(t,Fn,e[Ln].BODY||e[Ln]),t}}),Ji,Si({},yo,{args:function(e){var t;return Ri(t={},Hn,[Qn]),Ri(t,Fn,!1),t}}),Zi]}};function Di(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ci(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(r),!0).forEach((function(t){Wi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Di(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Li(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Ii(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ui(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Wi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Mi=function(e){var t,r=e[Wn],n=e[Mn],i=ze(n),o=(Wi(t={},Wn,r),Wi(t,Mn,n),t);return e[$n].subscribe(function(e){return gt(i?function(t){return e.next(function(e){var t;return Wi(t={},Wn,r),Wi(t,Mn,n(e)),t}(t))}:function(){return e.next(o)})}(_i))},zi=new Vt;function Ni(e){var t,r,n=e[Wn],i=e[Mn],o=e[Nn],s=e[zn],a=e[$n],c=e[qn],u=Ui(li([Wn,Mn,zn,Nn,$n,qn],e),1)[0];if(u.length>0)throw new Error(oi("registerCMD",e,u,n,void 0));a&&Mi(e),Ai.subscribeTopic(n,{next:c,error:console.warn},gt((function(e){return e[Mn]})));var l=s?(Wi(t={},Wn,n),Wi(t,Mn,i),Wi(t,zn,s),Wi(t,Nn,o),t):(Wi(r={},Wn,n),Wi(r,Mn,i),r);if(zi.set){if(zi.has(n))throw new Error("\n\n duplicate `sub$` value detected in Command:\n".concat(ni(l),"\nexisting registered Commands:\n").concat(JSON.stringify(Ii(zi.keys()),null,2),'\n Please use a different/unique Command `sub$` string\n\n Inspect existing Commands using js Map API `registerCMD.all`\n (`registerCMD.all.entries()`, `registerCMD.all.has("X")`, etc.)\n\n        '));zi.set(n,l)}return l}Ni.all=zi;var qi,$i,Fi,Hi,Vi=function(e){var t;console.log("DOM Router Registered");var r=Ti(e);return Ni((Wi(t={},$n,Ei),Wi(t,Wn,"_URL_NAVIGATED$_DOM"),Wi(t,Mn,(function(e){return e})),Wi(t,qn,(function(e){var t;return ji.next(r((Wi(t={},Dn,e[Dn]),Wi(t,Tn,e[Tn]),t)))})),t))},Bi=function(e,t){return console.log("no `app` component provided to `".concat(Qi.name,"({").concat("app","})`. Rendering state by route path")),["pre",JSON.stringify(t[1],null,2)]},Qi=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,n,i,o,s,a,c,u,l,f,h,d,p,g,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.root||document.body,i=t.app||Bi,o=t.draft,s=t[Un],a=t.trace,c=li(["root","app","draft",Un,"trace"],t),u=Ui(c,2),l=u[1],f=/[-/\\^$*+?.()|[\]{}]/g,h=function(e){return e.replace(f,"\\$&")},d=s.prefix||null,p=d?new RegExp(h(d||""),"g"):null,s&&Vi(s),g=er(Yn),b=function(e){return a&&console.log(a,e),e[Qn]?null:[i,[e[Gn],cr(e,e[Bn])]]},o&&Yn.swap((function(e){return Ci({},o,{},e)})),Yn.resetIn("_ROOT",n),g.subscribe(mr(Zt())).transform(gt(_t),gt(b),dn({root:n,span:!1,ctx:Ci((r={},Wi(r,Vn,(function(e){return ji.next(e)})),Wi(r,"state",Yn),Wi(r,Xn.name,(function(){return Xn(window.location.href,p)})),r),l)}));case 17:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Li(o,n,i,s,a,"next",e)}function a(e){Li(o,n,i,s,a,"throw",e)}s(void 0)}))});return function(e){return t.apply(this,arguments)}}();function Gi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Yi,Ki=Ni((Gi(qi={},Wn,"HURL"),Gi(qi,Mn,(function(e){return e})),Gi(qi,qn,(function(e){var t=e.target.href,r=window.location.href,n=Xn(r),i="/".concat(n[Cn].join("/"));if(t!==r&&t!==i)return Ei.next({target:{location:{href:t}},currentTarget:e.currentTarget}),e})),qi)),Ji=Ni((Gi($i={},Wn,"__SET_LINK_ATTRS_DOM"),Gi($i,Mn,(function(e){return Gi({},Tn,e[Tn])})),Gi($i,qn,(function(e){return t=e[Tn],document.body.querySelectorAll("a[visited]").forEach((function(e){e.href===window.location.href?e.setAttribute("active",""):e.removeAttribute("active")})),void(t.setAttribute&&(t.setAttribute("visited",""),t.setAttribute("active","")));var t})),$i)),Xi=Ni((Gi(Fi={},Wn,"__HREF_PUSHSTATE_DOM"),Gi(Fi,Mn,(function(e){var t;return Gi(t={},Dn,e[Dn]),Gi(t,Tn,e[Tn]),t})),Gi(Fi,qn,(function(e){return e[Tn].document?null:history.pushState(Xn(e[Dn]),null,e[Dn])})),Fi)),Zi=Ni((Gi(Hi={},Wn,"__NOTIFY_PRERENDER_DOM"),Gi(Hi,Mn,!0),Gi(Hi,qn,(function(){return document.dispatchEvent(new Event("rendered"))})),Hi));function eo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function to(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ro,no,io=function(e){var t=document.querySelector("link[rel*='icon']")||document.createElement("link");t.type="image/x-icon",t.rel="shortcut icon",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},oo={meta:{"og:title":"My thi.ng","og:image":"https://github.com/loganpowell/ac/raw/master/assets/thing400x400.png","og:image:width":400,"og:image:height":400,"og:description":"web app","og:type":"website"},title:"My thi.ng",favicon:"https://github.com/loganpowell/ac/raw/master/assets/favicon.ico"},so=Ni((eo(Yi={},Wn,"INJECT_HEAD"),eo(Yi,Mn,(function(e){return eo({},Ln,e[Ln])})),eo(Yi,qn,(function(e){var t=e[Ln].HEAD;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oo;Object.entries(e).forEach((function(e){var t=to(e,2),r=t[0],n=t[1];try{return{HEAD_title:function(){document.title=n},HEAD_meta:function(){Object.entries(n).forEach((function(e){var t=to(e,2),r=t[0],n=t[1];document.head.querySelector('meta[property="'.concat(r,'"]')).content=n}))},HEAD_favicon:function(){return io(n)}}[r]()}catch(e){console.warn(e)}}))}(function(e){var t=e.title,r=void 0===t?oo.meta.title:t,n=e.description,i=void 0===n?oo.meta["og:description"]:n,o=e.image,s=o.url,a=void 0===s?oo.meta["og:image"]:s,c=o.height,u=void 0===c?oo.meta["og:image:height"]:c,l=o.width,f=void 0===l?oo.meta["og:image:width"]:l,h=e.favicon,d=void 0===h?oo.favicon:h,p=e.type;return{HEAD_meta:{"og:title":r,"og:type":void 0===p?oo.meta["og:type"]:p,"og:description":i,"og:image:width":f,"og:image:height":u,"og:image":a},HEAD_title:r,HEAD_favicon:d}}({title:t.title,description:t.description,image:t.image,favicon:t.favicon,type:t.type}))})),Yi));function ao(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function co(e,t){var r=e.getBoundingClientRect(),n=r.top,i=r.bottom,o=r.left,s=r.right,a=r.width,c=r.height,u=t?t.getBoundingClientRect():null;return{top:n-(u?u.top:0),bottom:i,left:o-(u?u.left:0),right:s,width:a,height:c}}var uo,lo=function(e){return{rects:["_FLIP_zoom","rects",e],elems:["_FLIP_zoom","elems",e],clicks:["_FLIP_zoom","clicks",e],scrolls:["_FLIP_zoom","scroll",e]}},fo=function(e,t){return e.style.zIndex=t},ho=new dr({}),po=Ni((ao(ro={},Wn,"_F_LIP"),ao(ro,Mn,(function(e){return e})),ao(ro,qn,(function(e){return function(e){var t=e.state,r=e.id,n=e.target,i=lo(r),o=i.rects,s=i.clicks,a=i.scrolls,c=co(n);t.resetIn(o,c),t.resetIn(s,!0),t.resetIn(a,{y:window.scrollY,x:window.scrollX})}({id:e.id,target:e.target,state:ho})})),ro)),go=Ni((ao(no={},Wn,"F_LIP_"),ao(no,Mn,(function(e){return e})),ao(no,qn,(function(e){return function(e){var t=e.element,r=e.state,n=e.id,i=e.transition,o=void 0===i?"all .3s cubic-bezier(.54,-0.29,.17,1.11)":i;t.setAttribute("flip",n);var s=lo(n),a=s.rects,c=s.clicks,u=s.scrolls,l=cr(r.deref(),a)||null;if(l){var f=co(t);Math.abs(l.top-f.top)>window.innerHeight&&(t.scrollIntoView(),f=co(t));var h=l.left-f.left,d=l.top-f.top,p=l.width/f.width,g=l.height/f.height,b=cr(r.deref(),u),y=b.x,m=b.y;window.scrollTo(y,m),t.style.transformOrigin="top left",t.style.transition="";var v="translate(".concat(h,"px, ").concat(d,"px) scale(").concat(p,", ").concat(g,")");t.style.transform=v,requestAnimationFrame((function(){window.scrollTo(y,m),t.style.transition=o,t.style.transform="none",setTimeout((function(){return fo(t,0)}),200)})),fo(t,1),cr(r.deref(),c)||null?r.resetIn(a,f):r.resetIn(a,null),r.resetIn(c,null)}}({id:e.id,element:e.element,state:ho})})),no));function bo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yo=Ni((bo(uo={},Wn,"__SET_STATE"),bo(uo,Mn,(function(e){return e})),bo(uo,qn,(function(e){return t=e[Hn],r=e[Fn],Yn.swapIn(t,(function(e){return t.length||Ge(r)?Ge(e)&&Ge(r)?Rn({},e,{},r):r:Rn({},e,Pn({},Object.keys(r)[0],r))}));var t,r})),uo));function mo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mo(Object(r),!0).forEach((function(t){wo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Oo=function(e){return"\n  No '".concat(e,"' property found on FLIPkid firstChild. \n  Ensure you are providing FLIPkid a component with an \n  attributes object as its second argument with a ").concat(e,"\n  property for proper FLIP routing.\n")},xo=function(e){return{currentTarget:{document:null},target:{href:e}}},jo=Object.freeze({render:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return["div",{onclick:function(t){t.preventDefault();var r=t.target,n=r.getAttribute("href");if(!n)return new Error(Oo("href"));e.run([vo({},Ki,wo({},Mn,xo(n))),vo({},po,wo({},Mn,{id:n,target:r}))])}}].concat(r)},init:function(e,t){console.log("FLIPkid_init"),t.run(vo({},go,wo({},Mn,{element:e.firstChild,id:e.firstChild.getAttribute("href")})))}});function Ao(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ao(Object(r),!0).forEach((function(t){Eo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ao(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Eo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ko={transparent:"transparent",black:"#000",white:"#fff",blueCool:["#e7f2f5","#dae9ee","#adcfdc","#82b4c9","#6499af","#3a7d95","#2e6276","#224a58","#14333d","#0f191c"],blueCoolVivid:["#e1f3f8","#97d4ea","#59b9de","#28a0cb","#0d7ea2","#07648d","#074b69","#002d3f"],blueWarm:["#ecf1f7","#e1e7f1","#bbcae4","#98afd2","#7292c7","#4a77b4","#345d96","#2f4668","#252f3e","#13171f"],blueWarmVivid:["#b7caf0","#81aefc","#5994f6","#2672de","#0050d8","#1a4480","#162e51"],blue:["#eff6fb","#d9e8f6","#aacdec","#73b3e7","#4f97d1","#2378c3","#2c608a","#274863","#1f303e","#11181d"],blueVivid:["#58b4ff","#2491ff","#0076d6","#005ea2","#0b4778","#112f4e"],cyan:["#e7f6f8","#ccecf2","#9ddfeb","#6ecbdb","#449dac","#168092","#2a646d","#2c4a4e","#203133","#111819"],cyanVivid:["#a8f2ff","#52daf2","#00bde3","#009ec1"],gold:["#f5f0e6","#f1e5cd","#dec69a","#c7a97b","#ad8b65","#8e704f","#6b5947","#4d4438","#322d26","#191714"],goldVivid:["#fef0c8","#ffe396","#ffbe2e","#e5a000","#c2850c","#936f38"],grayCool:["#fbfcfd","#f7f9fa","#f5f6f7","#f1f3f6","#edeff0","#dcdee0","#c6cace","#a9aeb1","#8d9297","#71767a","#565c65","#3d4551","#2d2e2f","#1c1d1f"],grayWarm:["#fcfcfb","#f9f9f7","#f6f6f2","#f5f5f0","#f0f0ec","#e6e6e2","#cac9c0","#afaea2","#929285","#76766a","#5d5d52","#454540","#2e2e2a","#171716"],gray:["#fcfcfc","#f9f9f9","#f6f6f6","#f3f3f3","#f0f0f0","#e6e6e6","#c9c9c9","#adadad","#919191","#757575","#5c5c5c","#454545","#2e2e2e","#1b1b1b","#000000"],greenCool:["#ecf3ec","#dbebde","#b4d0b9","#86b98e","#5e9f69","#4d8055","#446443","#37493b","#28312a","#1a1f1a"],greenCoolVivid:["#e3f5e1","#b7f5bd","#70e17b","#21c834","#00a91c","#008817"],greenWarm:["#f1f4d7","#e7eab7","#cbd17a","#a6b557","#8a984b","#6f7a41","#5a5f38","#45472f","#2d2f21","#171712"],greenWarmVivid:["#f1f6a5","#e2f106","#c5d30a","#a3b72c","#7e9c1d","#6a7d00"],green:["#eaf4dd","#dfeacd","#b8d293","#9bb672","#7d9b4e","#607f35","#4c6424","#3c4a29","#293021","#161814"],greenVivid:["#ddf9c7","#c3ee90","#98d035","#7fb135","#719f2a","#538200"],indigoCool:["#eef0f9","#e1e6f9","#bbc8f5","#96abee","#6b8ee8","#496fd8","#3f57a6","#374274","#292d42","#151622"],indigoCoolVivid:["#628ef4","#4150f2"],indigoWarm:["#f1eff7","#e7e3fa","#cbc4f2","#afa5e8","#9287d8","#7665d1","#5e519e","#453c7b","#2e2c40","#18161d"],indigoWarmVivid:["#b69fff","#967efb","#745fe9","#5942d2"],indigo:["#efeff8","#e5e4fa","#c5c5f3","#a5a8eb","#8889db","#676cc8","#4d52af","#3d4076","#2b2c40","#16171f"],indigoVivid:["#c4c6f2","#a5a8e8","#656bd7","#4d52b0"],magenta:["#f9f0f2","#f6e1e8","#f0bbcc","#e895b3","#e0699f","#c84281","#8b4566","#66364b","#402731","#1b1617"],magentaVivid:["#ffddea","#ffb4cf","#ff87b2","#fd4496","#d72d79","#ab2165"],mintCool:["#e0f7f6","#c4eeeb","#9bd4cf","#6fbab3","#4f9e99","#21827f","#376462","#2a4b45","#203131","#111818"],mintCoolVivid:["#d5fbf3","#7efbe1","#29e1cb","#1dc2ae","#00a398"],mint:["#dbf6ed","#c7efe2","#92d9bb","#5abf95","#34a37e","#1f8462","#286846","#204e34","#193324","#0d1a12"],mintVivid:["#c9fbeb","#5dfdc8","#0ceda6","#04c585","#146947"],orangeWarm:["#faeee5","#fbe0d0","#f7bca2","#f3966d","#e17141","#bd5727","#914734","#633a32","#3d2925","#1c1615"],orangeWarmVivid:["#fbbaa7","#fc906d","#ff580a","#d24302"],orange:["#f6efe9","#f2e4d4","#f3bf90","#f09860","#dd7533","#a86437","#775540","#524236","#332d27","#1b1614"],orangeVivid:["#fef2e4","#fce2c5","#ffbc78","#fa9441","#e66f0e","#c05600"],redCool:["#f8eff1","#f3e1e4","#ecbec6","#e09aa6","#e16b80","#cd425b","#9e394b","#68363f","#40282c","#1e1517"],redCoolVivid:["#f8dfe2","#f8b9c5","#fd8ba0","#f45d79","#e41d3d","#b21d38","#822133"],redWarm:["#f6efea","#f4e3db","#ecc0a7","#dca081","#d27a56","#c3512c","#805039","#524236","#332d29","#1f1c18"],redWarmVivid:["#f6bd9c","#f39268","#ee601d","#d63e04"],red:["#f9eeee","#f8e1de","#f7bbb1","#f2938c","#e9695f","#d83933","#a23737","#6f3331","#3e2927","#1b1616"],redVivid:["#fde0db","#fdb8ae","#ff8d7b","#fb5a47","#e52207","#b50909","#8b0a03","#5c1111"],violetWarm:["#f8f0f9","#f6dff8","#e2bee4","#d29ad8","#bf77c8","#b04abd","#864381","#5c395a","#382936","#1b151b"],violetWarmVivid:["#fbebfd","#fbdcff","#f4b2ff","#ee83ff","#d85bef","#be32d0"],violet:["#f4f1f9","#ebe3f9","#d0c3e9","#b8a2e3","#9d84d2","#8168b3","#665190","#4c3d69","#312b3f","#18161d"],violetVivid:["#ede3ff","#d5bfff","#c39deb","#ad79e9","#9355dc","#783cb9","#562b97"],yellow:["#faf3d1","#f5e6af","#e6c74c","#c9ab48","#a88f48","#8a7237","#6b5a39","#504332","#332d27","#1a1614"],yellowVivid:["#fee685","#face00"]},So={py:2,px:3,cursor:"pointer",fontSize:"100%",lineHeight:"inherit",whiteSpace:"nowrap"},Ro={simple:_o({},So,{backgroundColor:"primary",border:"none",color:"white",fontWeight:"bold",borderRadius:"default","&:hover":{backgroundColor:"primaryHover",textDecoration:"none"}}),pill:_o({},So,{backgroundColor:"primary",border:"none",color:"white",fontWeight:"bold",borderRadius:"full","&:hover":{backgroundColor:"primaryHover"}}),outline:_o({},So,{backgroundColor:"transparent",borderWidth:"1px",borderStyle:"solid",borderColor:"primary",color:"primary",fontWeight:"semibold",borderRadius:"default","&:hover":{backgroundColor:"primary",color:"white",borderColor:"transparent"}}),bordered:_o({},So,{backgroundColor:"primary",borderWidth:"1px",borderStyle:"solid",borderColor:"primaryHover",color:"white",fontWeight:"bold",borderRadius:"default","&:hover":{backgroundColor:"primaryHover"}}),disabled:_o({},So,{backgroundColor:"primary",border:"none",opacity:.5,cursor:"not-allowed",color:"white",fontWeight:"bold",borderRadius:"default"}),"3D":_o({},So,{backgroundColor:"primary",border:"none",borderBottomWidth:"4px",borderBottomStyle:"solid",borderBottomColor:"primaryHover",color:"white",fontWeight:"bold",borderRadius:"default",transition:"transform 0.3s ease-in-out","&:hover":{transform:"translateY(-1px)"}}),elevated:_o({},So,{backgroundColor:"white",borderWidth:"1px",borderStyle:"solid",borderColor:"gray.4",color:"text",fontWeight:"bold",borderRadius:"default",boxShadow:"default","&:hover":{backgroundColor:"gray.1"}})},Po=_o({},ko,{grayDark:ko.gray[8],text:ko.gray[8],background:ko.white,primary:ko.blue[7],primaryHover:ko.blue[8],secondary:ko.gray[6],muted:ko.gray[3],success:ko.green[3],info:ko.blue[4],warning:ko.yellow[3],danger:ko.red[3],light:ko.gray[1],dark:ko.gray[8],textMuted:ko.gray[6]}),To={sans:'"Open Sans", system-ui',serif:"Merriweather, system-ui",mono:'"Fira Code",monospace'},Do=_o({},To,{body:To.sans,heading:To.serif,monospace:To.mono}),Co={hairline:"100",thin:"200",light:"300",normal:"400",medium:"500",semibold:"600",bold:"700",extrabold:"800",black:"900"},Lo=_o({},Co,{body:Co.normal,heading:Co.bold}),Io={py:2,px:3,fontSize:"100%",borderRadius:"default",appearance:"none",lineHeight:"tight"},Uo={shadow:_o({},Io,{border:"none",color:"gray.7",boxShadow:"default","&:focus":{outline:"none",boxShadow:"outline"}}),inline:_o({},Io,{backgroundColor:"gray.2",borderWidth:"2px",borderStyle:"solid",borderColor:"gray.2",color:"gray.7","&:focus":{outline:"none",borderColor:"primary",backgroundColor:"white"}}),underline:_o({},Io,{backgroundColor:"transparent",border:"none",borderBottomWidth:"2px",borderBottomStyle:"solid",borderBottomColor:"primary",borderRadius:"0px",color:"gray.7","&:focus":{outline:"none",borderColor:"primary",backgroundColor:"white"}})},Wo={none:"1",tight:"1.25",snug:"1.375",normal:"1.5",relaxed:"1.625",loose:"2"},Mo={fontFamily:"heading",fontWeight:"heading",lineHeight:"heading",mt:4},zo={borderWidths:{px:"1px",0:"0",2:"2px",4:"4px",8:"8px"},breakpoints:["640px","768px","1024px","1280px"],colors:Po,fonts:Do,fontSizes:["0.875rem","1rem","1.25rem","1.5rem","1.875rem","2.25rem","3rem","4rem","4.5rem"],fontWeights:Lo,letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:_o({},Wo,{body:Wo.relaxed,heading:Wo.tight}),sizes:{px:"1px",0:"0",1:"0.25rem",2:"0.5rem",3:"0.75rem",4:"1rem",5:"1.25rem",6:"1.5rem",8:"2rem",10:"2.5rem",12:"3rem",16:"4rem",20:"5rem",24:"6rem",32:"8rem",40:"10rem",48:"12rem",56:"14rem",64:"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%","1/12":"8.333333%","2/12":"16.666667%","3/12":"25%","4/12":"33.333333%","5/12":"41.666667%","6/12":"50%","7/12":"58.333333%","8/12":"66.666667%","9/12":"75%","10/12":"83.333333%","11/12":"91.666667%",full:"100%",screenHeight:"100vh",screenWidth:"100vw"},shadows:{default:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",inner:"inset 0 2px 0px 2px rgba(0, 0, 0, 0.03)",outline:"0 0 0 3px rgba(66, 153, 225, 0.5)",none:"none"},space:[0,"0.25rem","0.5rem","1rem","2rem","4rem","8rem","16rem","32rem"],radii:{none:"0",sm:"0.125rem",default:"0.25rem",lg:"0.5rem",full:"9999px"},zIndices:{auto:"auto",0:"0",10:"10",20:"20",30:"30",40:"40",50:"50"},styles:{root:{fontFamily:"body",lineHeight:"body",fontWeight:"body"},p:{lineHeight:[1.75,2],fontSize:[1,2],mt:[0,1]},a:{color:"primary",textDecoration:"none","&:hover":{textDecoration:"underline"}},strong:{fontWeight:"bold"},ul:{listStylePostition:"outside",mt:2,mx:0},li:{listStyleType:"disc",lineHeight:1.75,fontSize:[2,3],mt:3},h1:_o({},Mo,{fontSize:[6,7],mt:6}),h2:_o({},Mo,{fontSize:[5,6],pt:5}),h3:_o({},Mo,{fontSize:[4,5],pt:4}),h4:_o({},Mo,{fontSize:[3,4],pt:4}),h5:_o({},Mo,{fontSize:[2,3]}),h6:_o({},Mo,{fontSize:[1,2]}),pre:{lineHeight:1.75,my:4,mx:-2},code:{boxShadow:"inner",background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAJ0lEQVQIW2O8e/fufwYGBgZBQUEQxcCIIfDu3Tuwivfv30NUoAsAALHpFMMLqZlPAAAAAElFTkSuQmCC) repeat",color:"dark",fontSize:[0,1],fontFamily:"mono",borderRadius:"default",p:1},hr:{background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAJ0lEQVQIW2O8e/fufwYGBgZBQUEQxcCIIfDu3Tuwivfv30NUoAsAALHpFMMLqZlPAAAAAElFTkSuQmCC) repeat",height:1,width:"100vw",position:"relative",marginLeft:"-50vw",mt:6,left:"50%"},blockquote:{background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAICAYAAADA+m62AAAAPUlEQVQYV2NkQAN37979r6yszIgujiIAU4RNMVwhuiQ6H6wQl3XI4oy4FMHcCJPHcDS6J2A2EqUQpJhohQDexSef15DBCwAAAABJRU5ErkJggg==) repeat",fontFamily:"mono",fontStyle:"italic",fontSize:[3,4],lineHeight:1.5,mx:-4,my:4,p:5},table:{borderRadius:"default",overflow:"hidden",fontSize:[1,2],width:"100%",mt:4},tr:{backgroundColor:"muted","&:first-child":{fontWeight:"bold",backgroundColor:"dark",color:"muted"},lineHeight:[1.75,2],"&:nth-child(2n)":{backgroundColor:"background"}},td:{p:2},img:{display:"block",my:[2,3],objectFit:"cover",borderRadius:"default"}},buttons:Ro,inputs:Uo},No={};let qo=0;const $o=()=>qo++;class Fo{constructor(e,t,r,n=!0,i=U){this.parent=e,this.id=`view-${$o()}`,this.tx=r||(e=>e),this.path=l(t),this.isDirty=!0,this.isLazy=n;const o=f(this.path),s=this.parent.deref();this.unprocessed=s?o(s):void 0,n||(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),e.addWatch(this.id,(e,t,r)=>{const s=t?o(t):t,a=r?o(r):r;i(a,s)||(n?this.unprocessed=a:this.state=this.tx(a),this.isDirty=!0)})}get value(){return this.deref()}deref(){return this.isDirty&&(this.isLazy&&(this.state=this.tx(this.unprocessed),this.unprocessed=void 0),this.isDirty=!1),this.state}changed(){return this.isDirty}view(){return this.isDirty&&this.isLazy?this.tx(this.unprocessed):this.state}release(){return this.unprocessed=void 0,this.isLazy||(this.state=this.tx(void 0)),this.isDirty=!0,this.parent.removeWatch(this.id)}}var Ho=No&&No.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let Vo=class{constructor(e,t){t&&!t(e)&&(e=>{throw new A(e)})("initial state value did not validate"),this._value=e,this.valid=t}get value(){return this._value}set value(e){this.reset(e)}deref(){return this._value}equiv(e){return this===e}reset(e){const t=this._value;return this.valid&&!this.valid(e)?t:(this._value=e,this.notifyWatches(t,e),e)}resetIn(e,t){return this.reset(_(this._value,e,t))}swap(e,...t){return this.reset(e.apply(null,[this._value,...t]))}swapIn(e,t,...r){return this.reset(y(this._value,e,t,...r))}addWatch(e,t){}removeWatch(e){}notifyWatches(e,t){}addView(e,t,r=!0){return new Fo(this,e,t,r)}release(){return delete this._watches,delete this._value,!0}};Vo=Ho([C],Vo),No.Atom=Vo,No.Atom=Vo;class Bo{constructor(...e){let r,i,o,s,a,c;switch(e.length){case 1:a=e[0],c=a.id,r=a.parent,s=a.validate,a.path?n(a.path)&&t(a.path[0])?[i,o]=a.path:(i=f(a.path),o=d(a.path)):O("missing path config");break;case 2:r=e[0],i=f(e[1]),o=d(e[1]);break;case 3:[r,i,o]=e;break;default:j(e.length)}this.parent=r,this.id=c||`cursor-${$o()}`,this.selfUpdate=!1,i&&o||O(),this.local=new Vo(i(r.deref()),s),this.local.addWatch(this.id,(e,t,n)=>{t!==n&&(this.selfUpdate=!0,r.swap(e=>o(e,n)),this.selfUpdate=!1)}),r.addWatch(this.id,(e,t,r)=>{if(!this.selfUpdate){const e=i(r);e!==i(t)&&this.local.reset(e)}})}get value(){return this.deref()}set value(e){this.reset(e)}deref(){return this.local.deref()}release(){return this.local.release(),this.parent.removeWatch(this.id),delete this.local,delete this.parent,!0}reset(e){return this.local.reset(e)}resetIn(e,t){return this.local.resetIn(e,t)}swap(e,...t){return this.local.swap(e,...t)}swapIn(e,t,...r){return this.local.swapIn(e,t,...r)}addWatch(e,t){return this.local.addWatch(e,t)}removeWatch(e){return this.local.removeWatch(e)}notifyWatches(e,t){return this.local.notifyWatches(e,t)}addView(e,t,r=!0){return new Fo(this,e,t,r)}}var Qo,Go={},Yo=Go&&Go.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let Ko=Qo=class{constructor(e,t=100,r){this.state=e,this.maxLen=t,this.changed=r||((e,t)=>!U(e,t)),this.clear()}get value(){return this.deref()}set value(e){this.reset(e)}canUndo(){return this.history.length>0}canRedo(){return this.future.length>0}clear(){this.history=[],this.future=[]}undo(){if(this.history.length){const e=this.state.deref();this.future.push(e);const t=this.state.reset(this.history.pop());return this.notify({id:Qo.EVENT_UNDO,value:{prev:e,curr:t}}),t}}redo(){if(this.future.length){const e=this.state.deref();this.history.push(e);const t=this.state.reset(this.future.pop());return this.notify({id:Qo.EVENT_REDO,value:{prev:e,curr:t}}),t}}reset(e){const t=this.state.deref();return this.state.reset(e),this.changed(t,this.state.deref())&&this.record(t),e}resetIn(e,t){const r=this.state.deref(),n=m(r,e),i=_(r,e,t);return this.state.reset(i),this.changed(n,m(i,e))&&this.record(r),i}swap(e,...t){return this.reset(e(this.state.deref(),...t))}swapIn(e,t,...r){const n=this.state.deref(),i=m(n,e),o=y(this.state.deref(),e,t,...r);return this.state.reset(o),this.changed(i,m(o,e))&&this.record(n),o}record(e){const t=this.history,r=t.length;let n=!0;arguments.length||(e=this.state.deref(),n=!r||this.changed(t[r-1],e)),n&&(r>=this.maxLen&&t.shift(),t.push(e),this.notify({id:Qo.EVENT_RECORD,value:e}),this.future.length=0)}deref(){return this.state.deref()}addWatch(e,t){return this.state.addWatch(e,t)}removeWatch(e){return this.state.removeWatch(e)}notifyWatches(e,t){return this.state.notifyWatches(e,t)}addView(e,t,r=!0){return new Fo(this,e,t,r)}release(){return this.state.release(),delete this.state,!0}addListener(e,t,r){}removeListener(e,t,r){}notify(e){}};Ko.EVENT_UNDO="undo",Ko.EVENT_REDO="redo",Ko.EVENT_RECORD="record",Ko=Qo=Yo([D],Ko),Go.History=Ko,Go.History=Ko;const Jo=["-moz-","-ms-","-o-","-webkit-"];function Xo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Zo=Array.isArray,es=o,ts=function(e){var t=function(e){return Zo(e)?e:es(e)?e.length>0?e.split("."):[]:null!=e?[e]:[]}(e),r=Xo(t,4),n=r[0],i=r[1],o=r[2],s=r[3];switch(t.length){case 0:return function(e){return e};case 1:return function(e){return null!=e?e[n]:void 0};case 2:return function(e){return null!=e&&null!=(e=e[n])?e[i]:void 0};case 3:return function(e){return null!=e&&null!=(e=e[n])&&null!=(e=e[i])?e[o]:void 0};case 4:return function(e){return null!=e&&null!=(e=e[n])&&null!=(e=e[i])&&null!=(e=e[o])?e[s]:void 0};default:return function(e){for(var r=t.length-1,n=e,i=0;null!=n&&i<=r;i++)n=n[t[i]];return n}}},rs=function(e,t){return ts(t)(e)};const ns={rules:"",ruleSep:",",valSep:"",decls:"",declStart:"{",declEnd:"}",indent:"",comments:!1};var is;function os(){return(os=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ss,as=function(e,t,r,n,i){for(t=t&&t.split?t.split("."):[t],n=0;n<t.length;n++)e=e?e[t[n]]:i;return e===i?r:e},cs=[40,52,64].map((function(e){return e+"em"})),us={space:[0,4,8,16,32,64,128,256,512],fontSizes:[12,14,16,20,24,32,48,64,72]},ls={bg:"backgroundColor",m:"margin",mt:"marginTop",mr:"marginRight",mb:"marginBottom",ml:"marginLeft",mx:"marginX",my:"marginY",p:"padding",pt:"paddingTop",pr:"paddingRight",pb:"paddingBottom",pl:"paddingLeft",px:"paddingX",py:"paddingY"},fs={marginX:["marginLeft","marginRight"],marginY:["marginTop","marginBottom"],paddingX:["paddingLeft","paddingRight"],paddingY:["paddingTop","paddingBottom"],size:["width","height"]},hs=((is={color:"colors",backgroundColor:"colors",borderColor:"colors",margin:"space",marginTop:"space",marginRight:"space",marginBottom:"space",marginLeft:"space",marginX:"space",marginY:"space",padding:"space",paddingTop:"space",paddingRight:"space",paddingBottom:"space",paddingLeft:"space",paddingX:"space",paddingY:"space",top:"space",right:"space",bottom:"space",left:"space",gridGap:"space",gridColumnGap:"space",gridRowGap:"space",gap:"space",columnGap:"space",rowGap:"space",fontFamily:"fonts",fontSize:"fontSizes",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",border:"borders",borderTop:"borders",borderRight:"borders",borderBottom:"borders",borderLeft:"borders",borderWidth:"borderWidths",borderStyle:"borderStyles",borderRadius:"radii",borderTopRightRadius:"radii",borderTopLeftRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",borderTopWidth:"borderWidths",borderTopColor:"colors",borderTopStyle:"borderStyles"}).borderTopLeftRadius="radii",is.borderTopRightRadius="radii",is.borderBottomWidth="borderWidths",is.borderBottomColor="colors",is.borderBottomStyle="borderStyles",is.borderBottomLeftRadius="radii",is.borderBottomRightRadius="radii",is.borderLeftWidth="borderWidths",is.borderLeftColor="colors",is.borderLeftStyle="borderStyles",is.borderRightWidth="borderWidths",is.borderRightColor="colors",is.borderRightStyle="borderStyles",is.outlineColor="colors",is.boxShadow="shadows",is.textShadow="shadows",is.zIndex="zIndices",is.width="sizes",is.minWidth="sizes",is.maxWidth="sizes",is.height="sizes",is.minHeight="sizes",is.maxHeight="sizes",is.flexBasis="sizes",is.size="sizes",is.fill="colors",is.stroke="colors",is),ds=function(e,t){if("number"!=typeof t||t>=0)return as(e,t,t);var r=Math.abs(t),n=as(e,r,r);return"string"==typeof n?"-"+n:-1*n},ps=["margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","top","bottom","left","right"].reduce((function(e,t){var r;return os({},e,((r={})[t]=ds,r))}),{}),gs=function e(t){return function(r){void 0===r&&(r={});var n=os({},us,{},r.theme||r),i={},o=function(e){return function(t){var r={},n=as(t,"breakpoints",cs),i=[null].concat(n.map((function(e){return"@media screen and (min-width: "+e+")"})));for(var o in e){var s="function"==typeof e[o]?e[o](t):e[o];if(null!=s)if(Array.isArray(s))for(var a=0;a<s.slice(0,i.length).length;a++){var c=i[a];null!=s[a]&&(c?(r[c]=r[c]||{},r[c][o]=s[a]):r[o]=s[a])}else r[o]=s}return r}}("function"==typeof t?t(n):t)(n);for(var s in o){var a=o[s],c="function"==typeof a?a(n):a;if("variant"!==s)if(c&&"object"==typeof c)i[s]=e(c)(n);else{var u=as(ls,s,s),l=as(hs,u),f=as(n,l,as(n,u,{})),h=as(ps,u,as)(f,c,c);if(fs[u])for(var d=fs[u],p=0;p<d.length;p++)i[d[p]]=h;else i[u]=h}else i=os({},i,{},e(as(n,c))(n))}return i}};ss=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string");return t=void 0===t?"_":t,e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()};var bs;bs=function(e,t){for(var r={},n=Object.keys(e),i=0;i<n.length;i++){var o=n[i],s=t(o,e[o],e);r[s[0]]=s[1]}return r};var ys;ys=function e(t,r){return t?t instanceof Date?t:Array.isArray(t)?t.map((function(t){return e(t,r)})):"object"==typeof t?bs(t,(function(n,i){var o=ss(n,r);if(n!==o&&o in t)throw new Error("Decamelized key `"+o+"` would overwrite existing key of the given JSON object");return[o,e(i,r)]})):t:t};const ms=new Set,vs=pe(function(e){return function e(t,r){return r?re(e(t),r):e=>{const r=e[2],n=(e,i)=>{const o=t(i);if(o){for(let t of o)if(e=n(e,t),Y(e))break;return e}return r(e,i)};return ie(e,n)}}(e=>null!=e&&e[Symbol.iterator]&&"string"!=typeof e?e:void 0,e)}(),oe(e=>":[".indexOf(e.charAt(0))>=0?e:" "+e)),ws=(e,r,i,a)=>{const c=i.length,l=[];let f,h;const d=(c,p)=>{let g=null;if(n(p))ws(e,Os(r,l),p,a);else if(s(p)&&!o(p))ws(e,Os(r,l),[...p],a);else if((h=t(p))||(g=a.fns[p]))if(r.length)h?d(c,p()):O(`quoted fn ('${p}') only allowed at head position`);else{if(g)return g.apply(null,i.slice(c+1))(e,a),!0;p(e,a)}else u(p)?f=Object.assign(f||{},p):null!=p&&l.push(p)};for(let t=0;t<c;t++)if(d(t,i[t]))return e;return f&&e.push(xs(r,l,f,a)),e},Os=(e,t)=>e.length?[...me(e,t)]:t,xs=(e,t,r,i)=>{const s=i.format,a=As(i),c=i.scope?((e,t)=>pe(e,oe(e=>o(e)&&0==e.indexOf(" .")?e+t:e)))(vs,i.scope):vs;return[a,se(oe(e=>se(c,ue(),n(e)?e:[e]).trim()),ue(s.ruleSep),Os(e,t)),s.declStart,js(r,i),a,s.declEnd].join("")},js=(e,r)=>{const i=r.format,o=r.autoprefix||ms,s=As(r,r.depth+1),a=[];for(let c in e)if(e.hasOwnProperty(c)){let u=e[c];if(t(u)&&(u=u(e)),n(u)&&(u=u.map(e=>n(e)?e.join(" "):e).join(i.ruleSep)),o.has(c))for(let e of r.vendors)a.push(`${s}${e}${c}:${i.valSep}${u};`);a.push(`${s}${c}:${i.valSep}${u};`)}return a.join(i.decls)+i.decls},As=(e,t=e.depth)=>t>1?[...ye(e.format.indent,t)].join(""):t>0?e.format.indent:"",_s=e=>{if(o(e))return e;const t=[];for(let r in e)if(e.hasOwnProperty(r)){let n=e[r];!0===n?n=r:!1===n?n="not "+r:"only"===n?n+=" "+r:n=`(${r}:${n})`,t.push(n)}return t.join(" and ")},Es=(e,t)=>((e,t,r)=>(n,i)=>{const o=As(i);return n.push(`${o}${e} ${_s(t)}${i.format.declStart}`),i.depth++,ws(n,[],r,i),i.depth--,n.push(o+i.format.declEnd),n})("@media",e,t),ks=(...e)=>console.log(...e),Ss=new Vo({basics:{},pseudos:{},queries:{}}),Rs=(e,t,r,n=null)=>{const i=e.deref(),o=!!i[t],s=!!rs(i,[t,r]);n?s?e.swapIn([t,r],e=>({...e,...n})):o?e.swapIn([t],e=>({...e,[r]:n})):e.swap(e=>({...e,[t]:{[r]:n}})):o?e.swapIn([t],e=>({...e,...r})):e.swap(e=>({...e,[t]:r}))},Ps=new Bo(Ss,"queries"),Ts=new Bo(Ss,"pseudos"),Ds=new Bo(Ss,"basics"),Cs=(e,t)=>{const r=Object.entries(t);"root"===e?Rs(Ds,":root",t):r.forEach(([r,n])=>{const i="&"===r.slice(0,1),o="@media"===r.slice(0,6),s="object"!=typeof n;if(i)Rs(Ts,e,r.slice(1),n);else if(o){const t=/\(.*?\)/g,i=r.match(t)[0].slice(1,-1);Rs(Ps,i,e,n)}else{if(!s)return void ks("partition failure:",{selector:e,styles:t});Rs(Ds,e,{[r]:n})}})};var Ls=e(ys);const Is=(e,r)=>{const i=Object.entries(e.deref());let a=[];return i.forEach(([e,t])=>{let r=Object.entries(t);switch(e){case"basics":r.forEach(e=>{a.push(e)});break;case"pseudos":r.forEach(([e,t])=>{a.push([e,...Object.entries(t)])});break;case"queries":r.forEach(e=>{let[t,r]=e[0].split(":");a.push([Es({screen:!0,[t]:r},Object.entries(e[1]))])});break;default:ks("no case found for:",e)}}),((e,r)=>(r=Object.assign({format:ns,vendors:Jo,fns:{},depth:0},r),u(e)?js(e,r):(n(r.autoprefix)&&(r.autoprefix=new Set(r.autoprefix)),s(e)&&!o(e)&&(e=[...e]),n(e)?ws([],[],e,r).join(r.format.rules):t(e)?e([],r).join(r.format.rules):void 0)))(a,r)};window.addEventListener("DOMContentLoaded",()=>{((e,t=!1)=>{const r=document.getElementsByTagName("head")[0],n=document.createElement("style");n.setAttribute("type","text/css"),void 0!==n.styleSheet?n.styleSheet.cssText=e:n.textContent=e,t?r.insertBefore(n,r.firstChild):r.appendChild(n)})(Is(Ss,null))});var Us=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}((e=>{const t=Ls(gs(r=e)(r),"-");var r;const n=t.styles;return Object.entries(n).forEach(([e,t])=>Cs(e,t)),[(e=>(t,r=null,n=null)=>{const i=`${t}${$bfb2b9e0825dfea4ef241fe08b18bf7a$export$randomID(5,"_","0123456789abcdefghijklmnopqrstuvwxyz")}`,o=`.${i}`,s=rs(e,n),a={...n?Ls(gs(s)(e),"-"):{},...r?Ls(gs(r)(e),"-"):{}};return Cs(o,a),i})(e),t]})(zo),2),Ws=(Us[0],Us[1]);function Ms(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function zs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ns(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zs(Object(r),!0).forEach((function(t){qs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Fs(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Hs(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Fs(o,n,i,s,a,"next",e)}function a(e){Fs(o,n,i,s,a,"throw",e)}s(void 0)}))}}var Vs=Qi,Bs=so,Qs=Ki,Gs=Xn,Ys=jo,Ks=(console.log,function(){var e=Hs(regeneratorRuntime.mark((function e(t,r){var n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://jsonplaceholder.typicode.com/",i=function(e,t){return"https://i.picsum.photos/id/".concat(e,"/").concat(t,"/").concat(t,".jpg")},o=r?Hs(regeneratorRuntime.mark((function e(){var o,s,a,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n).concat(t,"/").concat(r)).then((function(e){return e.json()}));case 2:return o=e.sent,s=o.name,a=void 0===s?"User ".concat(m(o,"id")):s,c=void 0===(c=o.company)?{catchPhrase:o.title}:c,u=c.catchPhrase,e.abrupt("return",{HEAD:{title:"".concat(a,"'s Details"),description:"".concat(a," handles ").concat(u),image:{url:i(r,600)}},BODY:{img:i(r,600),text:o,uid:r}});case 7:case"end":return e.stop()}}),e)})))():Hs(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n).concat(t,"/")).then((function(e){return e.json()}));case 2:return r=e.sent,e.abrupt("return",{HEAD:{title:"".concat(t.replace(/^\w/,(function(e){return e.toUpperCase()}))," list"),description:"List page for ".concat(t),image:{url:i(222,200)}},BODY:r.map((function(e,t){return{img:i(t+1,200),text:e,uid:t+1}}))});case 4:case"end":return e.stop()}}),e)})))(),e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Js=function(){var e=Hs(regeneratorRuntime.mark((function e(t){var r,n,i,o,s,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gs(t),n=r.URL_path,i=$s(n,2),o=i[1],s=new Oe([[Ns({},r,{URL_path:["todos"]}),{URL_data:function(){return Ks("todos")},URL_page:ra}],[Ns({},r,{URL_path:["todos",o]}),{URL_data:function(){return Ks("todos",o)},URL_page:ta}],[Ns({},r,{URL_path:["users"]}),{URL_data:function(){return Ks("users")},URL_page:ra}],[Ns({},r,{URL_path:["users",o]}),{URL_data:function(){return Ks("users",o)},URL_page:ta}],[Ns({},r,{URL_path:[]}),{URL_data:function(){return Ks("users",1)},URL_page:ta}]]).get(r)||{URL_data:function(){return Ks("users",9)},URL_page:ta},a=s.URL_data,c=s.URL_page,e.next=6,a();case 6:return e.t0=e.sent,e.t1=c,e.abrupt("return",{URL_data:e.t0,URL_page:e.t1});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xs=function(e,t,r,n){for(var i=arguments.length,o=new Array(i>4?i-4:0),s=4;s<i;s++)o[s-4]=arguments[s];return(["img",{src:r,style:"sm"===n?{height:"100px",width:"100px",cursor:"pointer"}:{height:"600px",width:"600px"},href:"sm"===n?"/".concat(e.fURL().URL_path,"/").concat(t):"/".concat(e.fURL().URL_path.join("/"))}].concat(o))},Zs=function(e,t,r,n){return[Ys,[Xs,t,r,n]]},ea=function(e){return function(t,r,n,i){return["div",{style:{"margin-bottom":"30px"}},[Zs,r,n,e],["p",{class:"title"},i]]}},ta=function(e,t){return[ea("lg"),m(t,"uid"),m(t,"img")||"https://i.picsum.photos/id/1/600/600.jpg",m(t,"text")?oa(t.text.company||t.text):null]},ra=function(e,t){return["div"].concat(Ms(t.map((function(e){var t=e.img,r=e.text,n=e.uid;return[ea("sm"),n,t,oa(r)]}))))},na=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return(["div",3===t?{disabled:!0}:{href:"/".concat(e.fURL().URL_path,"/").concat(t),onclick:function(t){t.preventDefault(),e.run(Ns({},Qs,{args:t}))}}].concat(n))},ia=function(e,t,r){return["li",{style:{display:"flex"}},"id"===t?[na,r,r]:a(r)?["ul"].concat(Ms(Object.entries(r).map((function(e){var t=$s(e,2),r=t[0],n=t[1];return[ia,r,n]})))):["p",{style:{padding:"0 0.5rem"}},r]]},oa=function(e){return["ul"].concat(Ms(Object.entries(e).slice(0,4).map((function(e){var t=$s(e,2),r=t[0],n=t[1];return[ia,r,n]}))))},sa=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return(["a",{href:"/"+t.join("/"),onclick:function(t){return t.preventDefault(),e.run(Ns({},Qs,{args:t}))}}].concat(n))};Vs({app:function(e,t){return["div",{style:{"max-width":"30rem",margin:"auto",padding:"2rem"}}].concat(Ms([["users"],["todos"],["todos",2],["users",9]].map((function(e){return[sa,e,"/".concat(e[0]).concat(e[1]?"/"+e[1]:""),["br"]]}))),[t])},router:{prefix:"ac/",router:Js,post:Bs},root:document.getElementById("app"),prefix:"ac/",trace:"app stream ->",theme:Ws}),console.log("starting...")}();