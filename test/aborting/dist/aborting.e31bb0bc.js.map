{"version":3,"sources":["../../node_modules/node-fetch/browser.js","../../node_modules/@thi.ng/api/api.js","../../node_modules/@thi.ng/api/api/event.js","../../node_modules/@thi.ng/api/api/fn.js","../../node_modules/@thi.ng/api/api/logger.js","../../node_modules/@thi.ng/api/api/typedarray.js","../../node_modules/@thi.ng/api/assert.js","../../node_modules/@thi.ng/api/logger.js","../../node_modules/@thi.ng/api/mixin.js","../../node_modules/@thi.ng/api/decorators/configurable.js","../../node_modules/@thi.ng/api/decorators/deprecated.js","../../node_modules/@thi.ng/api/decorators/nomixin.js","../../node_modules/@thi.ng/api/decorators/sealed.js","../../node_modules/@thi.ng/api/mixins/ienable.js","../../node_modules/@thi.ng/api/mixins/inotify.js","../../node_modules/@thi.ng/api/mixins/iterable.js","../../node_modules/@thi.ng/api/mixins/iwatch.js","../../node_modules/@thi.ng/api/index.js","../../node_modules/@thi.ng/rstream/api.js","../../node_modules/@thi.ng/checks/exists-not-null.js","../../node_modules/@thi.ng/checks/exists.js","../../node_modules/@thi.ng/checks/has-crypto.js","../../node_modules/@thi.ng/checks/has-max-length.js","../../node_modules/@thi.ng/checks/has-min-length.js","../../node_modules/@thi.ng/checks/is-function.js","../../node_modules/@thi.ng/checks/has-performance.js","../../node_modules/@thi.ng/checks/has-wasm.js","../../node_modules/@thi.ng/checks/has-webgl.js","../../node_modules/@thi.ng/checks/has-websocket.js","../../node_modules/@thi.ng/checks/implements-function.js","../../node_modules/@thi.ng/checks/is-array.js","../../node_modules/@thi.ng/checks/is-arraylike.js","../../node_modules/@thi.ng/checks/is-blob.js","../../node_modules/@thi.ng/checks/is-boolean.js","../../node_modules/@thi.ng/checks/is-chrome.js","../../node_modules/@thi.ng/checks/is-date.js","../../node_modules/@thi.ng/checks/is-even.js","../../node_modules/@thi.ng/checks/is-false.js","../../node_modules/@thi.ng/checks/is-file.js","../../node_modules/@thi.ng/checks/is-firefox.js","../../node_modules/@thi.ng/checks/is-string.js","../../node_modules/@thi.ng/checks/is-hex-color.js","../../node_modules/@thi.ng/checks/is-ie.js","../../node_modules/@thi.ng/checks/is-in-range.js","../../node_modules/@thi.ng/checks/is-int32.js","../../node_modules/@thi.ng/checks/is-iterable.js","../../node_modules/@thi.ng/checks/is-map.js","../../node_modules/@thi.ng/checks/is-mobile.js","../../node_modules/@thi.ng/checks/is-nan.js","../../node_modules/@thi.ng/checks/is-negative.js","../../node_modules/@thi.ng/checks/is-nil.js","../../node_modules/@thi.ng/checks/is-node.js","../../node_modules/@thi.ng/checks/is-not-string-iterable.js","../../node_modules/@thi.ng/checks/is-null.js","../../node_modules/@thi.ng/checks/is-number.js","../../node_modules/@thi.ng/checks/is-object.js","../../node_modules/@thi.ng/checks/is-odd.js","../../node_modules/@thi.ng/checks/is-plain-object.js","../../node_modules/@thi.ng/checks/is-positive.js","../../node_modules/@thi.ng/checks/is-primitive.js","../../node_modules/@thi.ng/checks/is-promise.js","../../node_modules/@thi.ng/checks/is-promiselike.js","../../node_modules/@thi.ng/checks/is-regexp.js","../../node_modules/@thi.ng/checks/is-safari.js","../../node_modules/@thi.ng/checks/is-set.js","../../node_modules/@thi.ng/checks/is-symbol.js","../../node_modules/@thi.ng/checks/is-transferable.js","../../node_modules/@thi.ng/checks/is-true.js","../../node_modules/@thi.ng/checks/is-typedarray.js","../../node_modules/@thi.ng/checks/is-uint32.js","../../node_modules/@thi.ng/checks/is-undefined.js","../../node_modules/@thi.ng/checks/is-uuid.js","../../node_modules/@thi.ng/checks/is-uuid4.js","../../node_modules/@thi.ng/checks/is-zero.js","../../node_modules/@thi.ng/checks/index.js","../../node_modules/@thi.ng/transducers/reduced.js","../../node_modules/@thi.ng/errors/deferror.js","../../node_modules/@thi.ng/errors/illegal-arguments.js","../../node_modules/@thi.ng/errors/illegal-arity.js","../../node_modules/@thi.ng/errors/illegal-state.js","../../node_modules/@thi.ng/errors/unsupported.js","../../node_modules/@thi.ng/errors/index.js","../../node_modules/@thi.ng/transducers/reduce.js","../../node_modules/@thi.ng/transducers/rfn/push.js","../../node_modules/@thi.ng/transducers/iterator.js","../../node_modules/@thi.ng/transducers/func/compr.js","../../node_modules/@thi.ng/transducers/xform/map.js","../../node_modules/@thi.ng/transducers/transduce.js","../../node_modules/@thi.ng/transducers/run.js","../../node_modules/@thi.ng/transducers/step.js","../../node_modules/@thi.ng/transducers/internal/mathop.js","../../node_modules/@thi.ng/transducers/rfn/add.js","../../node_modules/@thi.ng/transducers/rfn/assoc-map.js","../../node_modules/@thi.ng/transducers/rfn/assoc-obj.js","../../node_modules/@thi.ng/transducers/rfn/conj.js","../../node_modules/@thi.ng/transducers/rfn/count.js","../../node_modules/@thi.ng/transducers/rfn/div.js","../../node_modules/@thi.ng/transducers/rfn/every.js","../../node_modules/@thi.ng/transducers/rfn/fill.js","../../node_modules/@thi.ng/compose/comp.js","../../node_modules/@thi.ng/compose/complement.js","../../node_modules/@thi.ng/compose/constantly.js","../../node_modules/@thi.ng/compose/delay.js","../../node_modules/@thi.ng/compose/delayed.js","../../node_modules/@thi.ng/compose/identity.js","../../node_modules/@thi.ng/compose/ifdef.js","../../node_modules/@thi.ng/compose/juxt.js","../../node_modules/@thi.ng/compose/partial.js","../../node_modules/@thi.ng/compose/thread-first.js","../../node_modules/@thi.ng/compose/thread-last.js","../../node_modules/@thi.ng/compose/trampoline.js","../../node_modules/@thi.ng/compose/index.js","../../node_modules/@thi.ng/transducers/internal/group-opts.js","../../node_modules/@thi.ng/transducers/rfn/group-by-map.js","../../node_modules/@thi.ng/transducers/rfn/frequencies.js","../../node_modules/@thi.ng/transducers/rfn/group-by-obj.js","../../node_modules/@thi.ng/transducers/rfn/group-binary.js","../../node_modules/@thi.ng/transducers/rfn/last.js","../../node_modules/@thi.ng/compare/index.js","../../node_modules/@thi.ng/transducers/rfn/max-compare.js","../../node_modules/@thi.ng/transducers/rfn/max.js","../../node_modules/@thi.ng/transducers/rfn/mean.js","../../node_modules/@thi.ng/transducers/rfn/min-compare.js","../../node_modules/@thi.ng/transducers/rfn/min.js","../../node_modules/@thi.ng/transducers/rfn/mul.js","../../node_modules/@thi.ng/transducers/rfn/push-copy.js","../../node_modules/@thi.ng/transducers/rfn/reductions.js","../../node_modules/@thi.ng/transducers/rfn/some.js","../../node_modules/@thi.ng/transducers/rfn/str.js","../../node_modules/@thi.ng/transducers/rfn/sub.js","../../node_modules/@thi.ng/transducers/xform/benchmark.js","../../node_modules/@thi.ng/transducers/xform/cat.js","../../node_modules/@thi.ng/transducers/xform/converge.js","../../node_modules/@thi.ng/transducers/iter/range.js","../../node_modules/@thi.ng/transducers/iter/range2d.js","../../node_modules/@thi.ng/transducers/iter/zip.js","../../node_modules/@thi.ng/transducers/xform/convolve.js","../../node_modules/@thi.ng/transducers/xform/dedupe.js","../../node_modules/@thi.ng/transducers/xform/delayed.js","../../node_modules/@thi.ng/transducers/xform/distinct.js","../../node_modules/@thi.ng/transducers/xform/throttle.js","../../node_modules/@thi.ng/transducers/xform/drop-nth.js","../../node_modules/@thi.ng/transducers/xform/drop-while.js","../../node_modules/@thi.ng/transducers/xform/drop.js","../../node_modules/@thi.ng/transducers/xform/duplicate.js","../../node_modules/@thi.ng/transducers/xform/filter.js","../../node_modules/@thi.ng/arrays/binary-search.js","../../node_modules/@thi.ng/equiv/index.js","../../node_modules/@thi.ng/arrays/ends-with.js","../../node_modules/@thi.ng/arrays/ensure-iterable.js","../../node_modules/@thi.ng/arrays/ensure-array.js","../../node_modules/@thi.ng/arrays/find.js","../../node_modules/@thi.ng/arrays/fuzzy-match.js","../../node_modules/@thi.ng/arrays/is-sorted.js","../../node_modules/@thi.ng/arrays/iterator.js","../../node_modules/@thi.ng/arrays/peek.js","../../node_modules/@thi.ng/arrays/swap.js","../../node_modules/@thi.ng/arrays/quicksort.js","../../node_modules/@thi.ng/random/api.js","../../node_modules/@thi.ng/random/smush32.js","../../node_modules/@thi.ng/random/system.js","../../node_modules/@thi.ng/random/xorshift128.js","../../node_modules/@thi.ng/random/xorwow.js","../../node_modules/@thi.ng/random/xsadd.js","../../node_modules/@thi.ng/random/random-id.js","../../node_modules/@thi.ng/random/weighted-random.js","../../node_modules/@thi.ng/random/index.js","../../node_modules/@thi.ng/arrays/shuffle.js","../../node_modules/@thi.ng/arrays/starts-with.js","../../node_modules/@thi.ng/arrays/swizzle.js","../../node_modules/@thi.ng/arrays/index.js","../../node_modules/@thi.ng/transducers/xform/filter-fuzzy.js","../../node_modules/@thi.ng/transducers/xform/flatten-with.js","../../node_modules/@thi.ng/transducers/xform/flatten.js","../../node_modules/@thi.ng/transducers/xform/map-indexed.js","../../node_modules/@thi.ng/transducers/xform/indexed.js","../../node_modules/@thi.ng/transducers/xform/interleave.js","../../node_modules/@thi.ng/transducers/func/comp.js","../../node_modules/@thi.ng/transducers/iter/norm-range.js","../../node_modules/@thi.ng/transducers/xform/mapcat.js","../../node_modules/@thi.ng/transducers/xform/partition.js","../../node_modules/@thi.ng/transducers/xform/interpolate.js","../../node_modules/@thi.ng/math/api.js","../../node_modules/@thi.ng/math/abs.js","../../node_modules/@thi.ng/math/angle.js","../../node_modules/@thi.ng/math/eqdelta.js","../../node_modules/@thi.ng/math/crossing.js","../../node_modules/@thi.ng/math/extrema.js","../../node_modules/@thi.ng/math/interval.js","../../node_modules/@thi.ng/math/fit.js","../../node_modules/@thi.ng/math/int.js","../../node_modules/@thi.ng/math/min-error.js","../../node_modules/@thi.ng/math/mix.js","../../node_modules/@thi.ng/math/prec.js","../../node_modules/@thi.ng/math/ratio.js","../../node_modules/@thi.ng/math/solve.js","../../node_modules/@thi.ng/math/step.js","../../node_modules/@thi.ng/math/index.js","../../node_modules/@thi.ng/transducers/xform/interpolate-hermite.js","../../node_modules/@thi.ng/transducers/xform/interpolate-linear.js","../../node_modules/@thi.ng/transducers/xform/interpose.js","../../node_modules/@thi.ng/transducers/xform/keep.js","../../node_modules/@thi.ng/transducers/xform/labeled.js","../../node_modules/@thi.ng/transducers/func/deep-transform.js","../../node_modules/@thi.ng/transducers/xform/map-deep.js","../../node_modules/@thi.ng/transducers/xform/map-keys.js","../../node_modules/@thi.ng/transducers/xform/map-nth.js","../../node_modules/@thi.ng/transducers/xform/map-vals.js","../../node_modules/@thi.ng/transducers/xform/take.js","../../node_modules/@thi.ng/transducers/xform/match-first.js","../../node_modules/@thi.ng/transducers/internal/drain.js","../../node_modules/@thi.ng/transducers/xform/take-last.js","../../node_modules/@thi.ng/transducers/xform/match-last.js","../../node_modules/@thi.ng/transducers/xform/moving-average.js","../../node_modules/@thi.ng/transducers/internal/sort-opts.js","../../node_modules/@thi.ng/transducers/xform/moving-median.js","../../node_modules/@thi.ng/transducers/xform/multiplex.js","../../node_modules/@thi.ng/transducers/func/renamer.js","../../node_modules/@thi.ng/transducers/xform/rename.js","../../node_modules/@thi.ng/transducers/xform/multiplex-obj.js","../../node_modules/@thi.ng/transducers/xform/noop.js","../../node_modules/@thi.ng/transducers/xform/pad-last.js","../../node_modules/@thi.ng/transducers/xform/page.js","../../node_modules/@thi.ng/transducers/xform/partition-by.js","../../node_modules/@thi.ng/transducers/xform/partition-of.js","../../node_modules/@thi.ng/transducers/xform/partition-sort.js","../../node_modules/@thi.ng/transducers/xform/partition-sync.js","../../node_modules/@thi.ng/transducers/xform/pluck.js","../../node_modules/@thi.ng/transducers/xform/sample.js","../../node_modules/@thi.ng/transducers/xform/scan.js","../../node_modules/@thi.ng/transducers/func/key-selector.js","../../node_modules/@thi.ng/transducers/xform/select-keys.js","../../node_modules/@thi.ng/transducers/xform/side-effect.js","../../node_modules/@thi.ng/transducers/xform/sliding-window.js","../../node_modules/@thi.ng/transducers/xform/stream-shuffle.js","../../node_modules/@thi.ng/transducers/xform/stream-sort.js","../../node_modules/@thi.ng/transducers/xform/struct.js","../../node_modules/@thi.ng/transducers/xform/swizzle.js","../../node_modules/@thi.ng/transducers/xform/take-nth.js","../../node_modules/@thi.ng/transducers/xform/take-while.js","../../node_modules/@thi.ng/transducers/xform/throttle-time.js","../../node_modules/@thi.ng/transducers/xform/toggle.js","../../node_modules/@thi.ng/transducers/xform/trace.js","../../node_modules/@thi.ng/transducers/xform/word-wrap.js","../../node_modules/@thi.ng/transducers/func/juxtr.js","../../node_modules/@thi.ng/transducers/func/lookup.js","../../node_modules/@thi.ng/transducers/iter/as-iterable.js","../../node_modules/@thi.ng/transducers/iter/repeatedly.js","../../node_modules/@thi.ng/transducers/iter/choices.js","../../node_modules/@thi.ng/transducers/iter/concat.js","../../node_modules/@thi.ng/transducers/iter/cycle.js","../../node_modules/@thi.ng/transducers/iter/repeat.js","../../node_modules/@thi.ng/transducers/iter/extend-sides.js","../../node_modules/@thi.ng/transducers/iter/iterate.js","../../node_modules/@thi.ng/transducers/iter/keys.js","../../node_modules/@thi.ng/transducers/iter/pad-sides.js","../../node_modules/@thi.ng/transducers/iter/pairs.js","../../node_modules/@thi.ng/transducers/iter/permutations.js","../../node_modules/@thi.ng/transducers/iter/range3d.js","../../node_modules/@thi.ng/transducers/iter/reverse.js","../../node_modules/@thi.ng/transducers/iter/symmetric.js","../../node_modules/@thi.ng/transducers/iter/tween.js","../../node_modules/@thi.ng/transducers/iter/vals.js","../../node_modules/@thi.ng/transducers/iter/wrap-sides.js","../../node_modules/@thi.ng/transducers/index.js","../../node_modules/@thi.ng/rstream/utils/idgen.js","../../node_modules/@thi.ng/rstream/subscription.js","../../node_modules/@thi.ng/rstream/stream-sync.js","../../node_modules/@thi.ng/rstream/utils/worker.js","../../node_modules/@thi.ng/rstream/subs/tunnel.js","../../node_modules/@thi.ng/rstream/forkjoin.js","../../node_modules/@thi.ng/rstream/metastream.js","../../node_modules/@thi.ng/associative/dissoc.js","../../node_modules/@thi.ng/associative/internal/equiv.js","../../node_modules/@thi.ng/associative/into.js","../../node_modules/@thi.ng/associative/array-set.js","../../node_modules/@thi.ng/associative/common-keys.js","../../node_modules/@thi.ng/associative/utils.js","../../node_modules/@thi.ng/associative/internal/xform-setop.js","../../node_modules/@thi.ng/associative/difference.js","../../node_modules/@thi.ng/associative/equiv-map.js","../../node_modules/@thi.ng/binary/api.js","../../node_modules/@thi.ng/binary/align.js","../../node_modules/@thi.ng/binary/count.js","../../node_modules/@thi.ng/binary/mask.js","../../node_modules/@thi.ng/binary/edit.js","../../node_modules/@thi.ng/binary/float.js","../../node_modules/@thi.ng/binary/gray.js","../../node_modules/@thi.ng/binary/logic.js","../../node_modules/@thi.ng/binary/pow.js","../../node_modules/@thi.ng/binary/rotate.js","../../node_modules/@thi.ng/binary/splat.js","../../node_modules/@thi.ng/binary/swizzle.js","../../node_modules/@thi.ng/binary/index.js","../../node_modules/@thi.ng/associative/hash-map.js","../../node_modules/@thi.ng/associative/select-keys.js","../../node_modules/@thi.ng/associative/indexed.js","../../node_modules/@thi.ng/associative/intersection.js","../../node_modules/@thi.ng/associative/invert.js","../../node_modules/@thi.ng/associative/merge.js","../../node_modules/@thi.ng/associative/rename-keys.js","../../node_modules/@thi.ng/associative/join.js","../../node_modules/@thi.ng/dcons/index.js","../../node_modules/@thi.ng/associative/ll-set.js","../../node_modules/@thi.ng/associative/merge-apply.js","../../node_modules/@thi.ng/associative/merge-with.js","../../node_modules/@thi.ng/associative/merge-deep.js","../../node_modules/@thi.ng/associative/sorted-map.js","../../node_modules/@thi.ng/associative/sorted-set.js","../../node_modules/@thi.ng/associative/sparse-set.js","../../node_modules/@thi.ng/associative/union.js","../../node_modules/@thi.ng/associative/without-keys.js","../../node_modules/@thi.ng/associative/index.js","../../node_modules/@thi.ng/rstream/pubsub.js","../../node_modules/@thi.ng/rstream/stream.js","../../node_modules/@thi.ng/rstream/stream-merge.js","../../node_modules/@thi.ng/rstream/from/iterable.js","../../node_modules/@thi.ng/rstream/trigger.js","../../node_modules/@thi.ng/rstream/from/interval.js","../../node_modules/@thi.ng/rstream/from/raf.js","../../node_modules/@thi.ng/rstream/tween.js","../../node_modules/@thi.ng/rstream/from/atom.js","../../node_modules/@thi.ng/rstream/from/event.js","../../node_modules/@thi.ng/rstream/from/promise.js","../../node_modules/@thi.ng/rstream/from/promises.js","../../node_modules/@thi.ng/paths/path.js","../../node_modules/@thi.ng/paths/getter.js","../../node_modules/@thi.ng/paths/setter.js","../../node_modules/@thi.ng/paths/update-in.js","../../node_modules/@thi.ng/paths/delete-in.js","../../node_modules/@thi.ng/paths/get-in.js","../../node_modules/@thi.ng/paths/mutator.js","../../node_modules/@thi.ng/paths/mut-in.js","../../node_modules/@thi.ng/paths/mut-in-many.js","../../node_modules/@thi.ng/paths/set-in.js","../../node_modules/@thi.ng/paths/set-in-many.js","../../node_modules/@thi.ng/paths/updater.js","../../node_modules/@thi.ng/paths/index.js","../../node_modules/@thi.ng/atom/idgen.js","../../node_modules/@thi.ng/atom/view.js","../../node_modules/@thi.ng/atom/atom.js","../../node_modules/@thi.ng/atom/cursor.js","../../node_modules/@thi.ng/atom/history.js","../../node_modules/@thi.ng/atom/transacted.js","../../node_modules/@thi.ng/atom/index.js","../../node_modules/@thi.ng/rstream/from/view.js","../../node_modules/@thi.ng/rstream/from/worker.js","../../node_modules/@thi.ng/rstream/subs/bisect.js","../../node_modules/@thi.ng/rstream/subs/post-worker.js","../../node_modules/@thi.ng/rstream/subs/resolve.js","../../node_modules/@thi.ng/rstream/subs/sidechain-partition.js","../../node_modules/@thi.ng/rstream/subs/sidechain-toggle.js","../../node_modules/@thi.ng/rstream/subs/timeout.js","../../node_modules/@thi.ng/rstream/subs/trace.js","../../node_modules/@thi.ng/rstream/subs/transduce.js","../../node_modules/@thi.ng/rstream/index.js","../src/event.mjs","../src/event-target.mjs","../src/abort-signal.ts","../src/abort-controller.ts","node_modules/abort-controller/polyfill.js","index.js","../../../../AppData/Local/nvs/node/10.16.2/x64/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["getGlobal","self","window","global","Error","module","exports","fetch","default","bind","Headers","Request","Response","DEFAULT_EPS","SEMAPHORE","Symbol","EVENT_ALL","EVENT_ENABLE","EVENT_DISABLE","NO_OP","LogLevel","Type","GLType","GL2TYPE","TYPE2GL","undefined","SIZEOF","TYPEDARRAY_CTORS","Uint8Array","Uint8ClampedArray","Int8Array","Uint16Array","Int16Array","Uint32Array","Int32Array","Float32Array","Float64Array","typedArray","type","xs","uintType","x","intType","assert","process","test","msg","NULL_LOGGER","Object","freeze","level","NONE","fine","debug","info","warn","severe","ConsoleLogger","constructor","id","FINE","args","log","DEBUG","INFO","WARN","SEVERE","console","mixin","behaviour","sharedBehaviour","instanceKeys","Reflect","ownKeys","sharedKeys","typeTag","_mixin","clazz","key","existing","getOwnPropertyDescriptor","prototype","configurable","defineProperty","value","writable","name","toString","enumerable","propertyIsEnumerable","hasInstance","state","_","__","descriptor","deprecated","target","prop","signature","fn","apply","arguments","nomixin","sealed","seal","IEnableMixin","_enabled","isEnabled","enable","notify","disable","toggle","inotify_dispatch","listeners","e","i","n","length","l","call","canceled","INotifyMixin","addListener","scope","_listeners","__listener","push","removeListener","idx","splice","f","iterable","iterator","IWatchMixin","addWatch","_watches","removeWatch","notifyWatches","oldState","newState","w","State","CloseMode","LOGGER","setLogger","logger","existsAndNotNull","exists","t","hasCrypto","hasMaxLength","len","hasMinLength","isFunction","hasPerformance","performance","now","hasWASM","hasWebGL","document","createElement","getContext","hasWebSocket","WebSocket","implementsFunction","isArray","Array","isArrayLike","isBlob","Blob","isBoolean","isChrome","isDate","Date","isEven","isFalse","isFile","File","isFirefox","isString","RE","isHexColor","isIE","navigator","userAgent","indexOf","isInRange","min","max","isInt32","isIterable","isMap","Map","isMobile","isNaN","isNegative","isNil","isNode","versions","node","isNotStringAndIterable","isNull","isNumber","isObject","isOdd","OBJP","getPrototypeOf","isPlainObject","p","isPosititve","isPrimitive","isPromise","Promise","isPromiseLike","isRegExp","RegExp","isSafari","isSet","Set","isSymbol","isTransferable","ArrayBuffer","SharedArrayBuffer","MessagePort","isTrue","isTypedArray","isUint32","isUndefined","isUUID","isUUIDv4","isZero","Reduced","val","deref","reduced","isReduced","ensureReduced","unreduced","defError","prefix","suffix","IllegalArgumentError","illegalArgs","IllegalArityError","illegalArity","IllegalStateError","illegalState","UnsupportedOperationError","unsupported","parseArgs","reduce","rfn","init","complete","acc","$reduce","reduceArray","reduceIterable","reducer","$$reduce","slice","xform","y","iterator1","$iter","impl","compR","map","src","r","transduce","NO_OP_REDUCER","run","tx","fx","step","done","__mathop","initDefault","res","add","assocMap","k","v","set","assocObj","conj","count","offset","div","every","pred","fill","start","fillN","comp","fns","a","b","c","d","g","h","j","compL","reverse","compI","complement","constantly","delay","body","Delay","realized","isRealized","delayed","resolve","setTimeout","identity","ifDef","juxt","partial","foo","threadFirst","expr","threadLast","trampoline","__groupByOpts","opts","assign","group","groupByMap","has","get","frequencies","groupByObj","_init","_reduce","branchPred","groupBinary","bits","branch","leaf","left","right","maxIndex","last","compare","compareNumAsc","compareNumDesc","maxCompare","cmp","Infinity","Math","mean","minCompare","mul","pushCopy","reductions","some","str","sep","first","join","sub","benchmark","prev","cat","converge","range","from","to","Range","range2d","fromX","toX","stepX","fromY","toY","stepY","rx","zip","iters","s","tuple","next","buildKernel1d","weights","w2","buildKernel2d","h2","kernelLookup1d","width","wrap","border","ox","xx","kernelLookup2d","height","oy","yy","kernelError","convolve1d","indices","kernel","kwidth","convolve2d","kheight","dedupe","equiv","distinct","seen","cache","throttle","_pred","dropNth","skip","dropWhile","ok","drop","m","duplicate","filter","binarySearch","buf","kx","low","high","mid","binarySearchNumeric","FN","STR","proto","equivObject","equivArrayLike","equivSet","equivMap","getTime","_equiv","size","keys","sort","hasOwnProperty","endsWith","needle","_eq","ensureIterable","ensureArray","ensureArrayLike","find","findIndex","fuzzyMatch","domain","query","nd","nq","q","isSorted","arr","end","curr","arrayIterator","peek","swap","multiSwap","quickSort","_cmp","_swap","pivot","INV_MAX","ARandom","float","norm","int","minmax","gaussian","scale","sum","DEFAULT_SEED","Smush32","seed","buffer","copy","gen","random","SystemRandom","SYSTEM","XorShift128","bytes","XorWow","XsAdd","randomID","syms","rnd","weightedRandom","choices","total","o","shuffleRange","shuffle","startsWith","swizzle","order","filterFuzzy","iter","flattenWith","flatten","mapIndexed","indexed","interleave","_sep","_comp","normRange","inclLast","mapcat","partition","all","interpolate","chunk","PI","TAU","HALF_PI","THIRD_PI","QUARTER_PI","SIXTH_PI","INV_PI","INV_TAU","INV_HALF_PI","DEG2RAD","RAD2DEG","PHI","sqrt","SQRT2","SQRT3","SQRT2_2","SQRT2_3","THIRD","TWO_THIRD","SIXTH","EPS","Crossing","absDiff","abs","sign","eps","sincos","theta","sin","cos","cossin","absTheta","absInnerAngle","angleDist","atan2Abs","atan2","quadrant","deg","rad","csc","sec","cot","tan","loc","gamma","normCos","x2","__fastCos","fastCos","fastSin","eqDelta","eqDeltaFixed","isCrossOver","a1","a2","b1","b2","isCrossUnder","classifyCrossing","isMinima","isMaxima","index","values","minimaIndex","maximaIndex","vals","minimaIndices","maximaIndices","clamp","clamp01","clamp11","wrap01","wrap11","min2id","min3id","min4id","max2id","max3id","max4id","smin","smax","ea","exp","eb","sclamp","absMin","absMax","foldback","inRange","inOpenRange","fit","fitClamped","fit01","fit10","fit11","M8","M16","signExtend8","signExtend16","addi8","divi8","muli8","subi8","andi8","ori8","xori8","noti8","lshifti8","rshifti8","addi16","divi16","muli16","subi16","andi16","ori16","xori16","noti16","lshifti16","rshifti16","addi32","divi32","muli32","subi32","andi32","ori32","xori32","lshifti32","rshifti32","noti32","addu8","divu8","mulu8","subu8","andu8","oru8","xoru8","notu8","lshiftu8","rshiftu8","addu16","divu16","mulu16","subu16","andu16","oru16","xoru16","notu16","lshiftu16","rshiftu16","addu32","divu32","mulu32","subu32","andu32","oru32","xoru32","notu32","lshiftu32","rshiftu32","minError","error","delta","minT","minE","mix","mixBilinear","u","mixQuadratic","mixCubic","t2","s2","mixHermite","y1","y2","mixCubicHermite","ta","tb","h00","h10","h01","h11","tangentCardinal","tc","tangentDiff3","tween","circular","cosine","decimated","floor","bounce","amp","tk","ease","pow","impulse","gain","parabola","cubicPulse","sinc","sigmoid","sigmoid11","fmod","fract","trunc","ceil","roundTo","prec","round","roundEps","simplifyRatio","num","denom","e1","e2","derivative","solveLinear","solveQuadratic","solveCubic","aa","bb","ba3","cbrt","acos","edge","smoothStep","edge2","smootherStep","expStep","interpolateHermite","interpolateLinear","interpose","keep","labeled","deepTransform","spec","mapfns","mapDeep","mapKeys","mapNth","off","mapVals","take","matchFirst","__drain","shift","takeLast","matchLast","movingAverage","period","__sortOpts","movingMedian","multiplex","renamer","kmap","ks","c2","c1","rename","multiplexObj","xforms","noop","padLast","rem","page","partitionBy","partitionOf","sizes","partitionSort","partitionSync","currKeys","mergeOnly","reset","backPressure","clear","requiredInputs","collect","slot","String","required","delete","pluck","sample","prob","scan","inito","completeo","reduceo","initi","completei","reducei","_acc","keySelector","selectKeys","sideEffect","slidingWindow","streamShuffle","maxSwaps","streamSort","struct","fields","takeNth","takeWhile","throttleTime","on","initial","trace","wordWrap","lineLength","delim","always","flag","juxtR","rs","aa1","ra","rb","aa2","rc","aa3","lookup1d","lookup2d","lookup3d","stridez","asIterable","repeatedly","concat","cycle","input","repeat","extendSides","numLeft","numRight","iterate","padSides","pairs","permutations","permutationsN","offsets","seqs","range3d","fromZ","toZ","stepZ","ry","z","_input","symmetric","head","stops","unshift","interval","wrapSides","_src","NEXT_ID","nextID","optsWithID","subscription","Subscription","parent","closeIn","closeOut","cacheLast","subs","getState","subscribe","ensureState","pop","addWrapped","subscribeAll","wrapped","transform","xf","unsubscribe","cleanup","uacc","dispatch","notified","sync","StreamSync","srcIDs","psync","mapv","sources","realSourceIDs","invRealSourceIDs","idSources","sourceIDs","addAll","markDone","__owner","remove","removeID","getSourceForID","removeAll","removeAllIDs","ids","getSources","inlineWorker","makeWorker","worker","Worker","URL","createObjectURL","tunnel","Tunnel","workers","maxWorkers","transferables","terminate","interrupt","addEventListener","data","postMessage","forEach","forkJoin","numWorkers","hardwareConcurrency","workerIDs","fork","results","forkBuffer","minChunkSize","chunkSize","joinBuffer","parts","metaStream","factory","MetaStream","stream","detach","dissoc","coll","dissocObj","obj","entries","into","dest","__private","WeakMap","__vals","inst","ArraySet","species","toStringTag","$this","empty","notFound","eq","disj","thisArg","commonKeysMap","out","commonKeysObj","ctor","objValues","ensureMap","ensureSet","xformSetOp","op","difference","differenceR","__map","EquivMap","fromObject","_opts","pair","MASKS","align","addr","isAligned","popCount","hammingDist","clz32","LN2","ctz32","bitSize","defMask","maskL","maskH","bitClear","bit","bitFlip","bitSet","bitSetWindow","bitClearWindow","F32","I32","U32","floatToIntBits","floatToUintBits","intBitsToFloat","uintBitsToFloat","floatToSortableInt","encodeGray32","decodeGray32","bitNot","bitAnd","bitNand","bitOr","bitNor","bitXor","bitXnor","bitImply","bitAoi21","bitOai21","bitAoi22","bitOai22","bitMux","bitDemux","isPow2","ceilPow2","floorPow2","rotateLeft","rotateRight","splat4_24","splat4_32","splat8_24","splat8_32","splat16_32","same4","same8","lane8","lane","lane4","lane2","setLane8","setLane4","setLane2","swizzle8","swizzle4","flipBytes","__iterator","bins","DEFAULT_CAP","HashMap","cap","hash","load","mask","resize","overrides","selectKeysMap","selectKeysObj","records","ik","rv","intersection","intersectionR","invertMap","invertObj","mergeMap","mergeObj","renameKeysMap","km","renameKeysObj","found","joinWith","DCons","_length","release","cell","tail","ca","cb","seq","nthCell","$seq","cons","insertBefore","newCell","insertAfter","insertBeforeNth","ensureIndex","nthCellUnsafe","insertAfterNth","insertSorted","findWith","slices","at","del","insert","removed","setHead","setTail","setNth","nth","log2","asHead","asTail","inSize","numMerges","psize","qsize","toJSON","dir","dcons","LLSet","mergeApplyMap","mergeApplyObj","mergeMapWith","mergeObjWith","mergeDeepObj","Node","SortedMap","capacity","maxh","probability","DEFAULT_P","code","findPredNode","stack","pickHeight","E","SortedSet","fail","ASparseSet","dense","sparse","__copyTo","$c","SparseSet8","SparseSet16","SparseSet32","sparseSet","union","unionR","withoutKeysMap","withoutKeysObj","pubsub","PubSub","topicfn","topic","topics","subscribeTopic","topicID","unsubscribeTopic","Stream","_inited","_cancel","cancel","merge","StreamMerge","fromIterable","setInterval","clearInterval","fromIterableSync","trigger","fromInterval","fromRAF","isActive","loop","requestAnimationFrame","cancelAnimationFrame","stop","clock","tweenNumber","speed","fromAtom","atom","emitFirst","changed","fromEvent","listenerOpts","streamOpts","listener","removeEventListener","fromDOMEvent","fromPromise","isError","err","catch","then","fromPromises","promises","toPath","path","split","getter","getterT","setter","setterT","_copy","compS","updateIn","updateInT","deleteIn","deleteInT","getIn","getInT","mutator","mutatorT","mutIn","mutInT","mutInMany","setIn","setInT","setInMany","updater","updaterT","View","lazy","isDirty","isLazy","lookup","unprocessed","pval","view","__decorate","decorators","desc","decorate","Atom","valid","_value","old","resetIn","swapIn","addView","Cursor","update","validate","selfUpdate","local","cval","History_1","History","maxLen","canUndo","history","canRedo","future","undo","EVENT_UNDO","redo","EVENT_REDO","record","prevV","EVENT_RECORD","___","Transacted","current","isTransaction","ensureTx","begin","commit","watch","fromView","fromWorker","_worker","ml","el","bisect","truthy","falsy","postWorker","transfer","Resolver","outstanding","sidechainPartition","side","SidechainPartition","sideSub","sidechainToggle","SidechainToggle","timeout","timeoutMs","Timeout","errorObj","resetTimeout","clearTimeout","timeoutId","reject","fulfilled","rejected","EventTarget","defineEventAttribute","ac","require","AbortController","AbortSignal","controller","signal","promiseAborter","promise","aborted","json","message","abort$","abort","getElementById","preventDefault","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","isParcelRequire","hostname","location","protocol","ws","onmessage","event","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","generated","js","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","overlay","createErrorOverlay","appendChild","stackTrace","innerText","innerHTML","getParents","modules","parents","dep","Function","deps","cached"],"mappings":"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AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA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AA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;A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","file":"aborting.e31bb0bc.js","sourceRoot":"..","sourcesContent":["\"use strict\";\n\n// ref: https://github.com/tc39/proposal-global\nvar getGlobal = function () {\n\t// the only reliable means to get the global object is\n\t// `Function('return this')()`\n\t// However, this causes CSP violations in Chrome apps.\n\tif (typeof self !== 'undefined') { return self; }\n\tif (typeof window !== 'undefined') { return window; }\n\tif (typeof global !== 'undefined') { return global; }\n\tthrow new Error('unable to locate global object');\n}\n\nvar global = getGlobal();\n\nmodule.exports = exports = global.fetch;\n\n// Needed for TypeScript and Webpack.\nexports.default = global.fetch.bind(global);\n\nexports.Headers = global.Headers;\nexports.Request = global.Request;\nexports.Response = global.Response;","export const DEFAULT_EPS = 1e-6;\n/**\n * Internal use only. **Do NOT use in user land code!**\n */\nexport const SEMAPHORE = Symbol();\n","export const EVENT_ALL = \"*\";\nexport const EVENT_ENABLE = \"enable\";\nexport const EVENT_DISABLE = \"disable\";\n","/**\n * No-effect placeholder function.\n */\nexport const NO_OP = () => { };\n","export var LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"FINE\"] = 0] = \"FINE\";\n    LogLevel[LogLevel[\"DEBUG\"] = 1] = \"DEBUG\";\n    LogLevel[LogLevel[\"INFO\"] = 2] = \"INFO\";\n    LogLevel[LogLevel[\"WARN\"] = 3] = \"WARN\";\n    LogLevel[LogLevel[\"SEVERE\"] = 4] = \"SEVERE\";\n    LogLevel[LogLevel[\"NONE\"] = 5] = \"NONE\";\n})(LogLevel || (LogLevel = {}));\n","/**\n * Type enums for Typedarray-backed buffers.\n *\n * @see GLType\n * @see GL2TYPE\n * @see TYPE2GL\n */\nexport var Type;\n(function (Type) {\n    Type[Type[\"U8\"] = 0] = \"U8\";\n    Type[Type[\"U8C\"] = 1] = \"U8C\";\n    Type[Type[\"I8\"] = 2] = \"I8\";\n    Type[Type[\"U16\"] = 3] = \"U16\";\n    Type[Type[\"I16\"] = 4] = \"I16\";\n    Type[Type[\"U32\"] = 5] = \"U32\";\n    Type[Type[\"I32\"] = 6] = \"I32\";\n    Type[Type[\"F32\"] = 7] = \"F32\";\n    Type[Type[\"F64\"] = 8] = \"F64\";\n})(Type || (Type = {}));\n/**\n * WebGL numeric type constants. Use `GL2TYPE` to convert, if needed.\n *\n * @see Type\n * @see GL2TYPE\n * @see TYPE2GL\n */\nexport var GLType;\n(function (GLType) {\n    GLType[GLType[\"I8\"] = 5120] = \"I8\";\n    GLType[GLType[\"U8\"] = 5121] = \"U8\";\n    GLType[GLType[\"I16\"] = 5122] = \"I16\";\n    GLType[GLType[\"U16\"] = 5123] = \"U16\";\n    GLType[GLType[\"I32\"] = 5124] = \"I32\";\n    GLType[GLType[\"U32\"] = 5125] = \"U32\";\n    GLType[GLType[\"F32\"] = 5126] = \"F32\";\n})(GLType || (GLType = {}));\n/**\n * Conversion from `GLType` to `Type` enums.\n */\nexport const GL2TYPE = {\n    [5120 /* I8 */]: 2 /* I8 */,\n    [5121 /* U8 */]: 0 /* U8 */,\n    [5122 /* I16 */]: 4 /* I16 */,\n    [5123 /* U16 */]: 3 /* U16 */,\n    [5124 /* I32 */]: 6 /* I32 */,\n    [5125 /* U32 */]: 5 /* U32 */,\n    [5126 /* F32 */]: 7 /* F32 */\n};\n/**\n * Potentially lossy conversion from `Type` to `GLType` enums.\n *\n * Not all enums are mappable:\n *\n * - `F64` maps to `undefined`, since unsupported by WebGL\n * - `U8C` maps to U8\n */\nexport const TYPE2GL = {\n    [2 /* I8 */]: 5120 /* I8 */,\n    [0 /* U8 */]: 5121 /* U8 */,\n    [1 /* U8C */]: 5121 /* U8 */,\n    [4 /* I16 */]: 5122 /* I16 */,\n    [3 /* U16 */]: 5123 /* U16 */,\n    [6 /* I32 */]: 5124 /* I32 */,\n    [6 /* I32 */]: 5124 /* I32 */,\n    [5 /* U32 */]: 5125 /* U32 */,\n    [7 /* F32 */]: 5126 /* F32 */,\n    [8 /* F64 */]: undefined\n};\n/**\n * Size information (in bytes) for `Type` enums. For `GLType`, use this\n * form, e.g. `SIZEOF[GL2TYPE[GLType.F32]]`\n */\nexport const SIZEOF = {\n    [0 /* U8 */]: 1,\n    [1 /* U8C */]: 1,\n    [2 /* I8 */]: 1,\n    [3 /* U16 */]: 2,\n    [4 /* I16 */]: 2,\n    [5 /* U32 */]: 4,\n    [6 /* I32 */]: 4,\n    [7 /* F32 */]: 4,\n    [8 /* F64 */]: 8\n};\nexport const TYPEDARRAY_CTORS = {\n    [0 /* U8 */]: Uint8Array,\n    [1 /* U8C */]: Uint8ClampedArray,\n    [2 /* I8 */]: Int8Array,\n    [3 /* U16 */]: Uint16Array,\n    [4 /* I16 */]: Int16Array,\n    [5 /* U32 */]: Uint32Array,\n    [6 /* I32 */]: Int32Array,\n    [7 /* F32 */]: Float32Array,\n    [8 /* F64 */]: Float64Array,\n    [5121 /* U8 */]: Uint8Array,\n    [5120 /* I8 */]: Int8Array,\n    [5123 /* U16 */]: Uint16Array,\n    [5122 /* I16 */]: Int16Array,\n    [5125 /* U32 */]: Uint32Array,\n    [5124 /* I32 */]: Int32Array,\n    [5126 /* F32 */]: Float32Array\n};\nexport function typedArray(type, ...xs) {\n    return new TYPEDARRAY_CTORS[type](...xs);\n}\n/**\n * Returns the smallest possible *unsigned* int type enum for given `x`.\n * E.g. if `x <= 256`, the function returns `Type.U8`.\n *\n * @param x\n */\nexport const uintType = (x) => x <= 0x100 ? 0 /* U8 */ : x <= 0x10000 ? 3 /* U16 */ : 5 /* U32 */;\n/**\n * Returns the smallest possible *signed* int type enum for given `x`.\n * E.g. if `x >= -128 && x < 128`, the function returns `Type.I8`.\n *\n * @param x\n */\nexport const intType = (x) => x >= -0x80 && x < 0x80\n    ? 2 /* I8 */\n    : x >= -0x8000 && x < 0x8000\n        ? 4 /* I16 */\n        : 6 /* I32 */;\n","import { NO_OP } from \"./api/fn\";\n/**\n * Takes a `test` result or predicate function without args and throws\n * error with given `msg` if test failed (i.e. is falsy). The function\n * is only enabled if `NODE_ENV != \"production\"` or if\n * `UMBRELLA_ASSERTS = 1`.\n */\nexport const assert = typeof process === \"undefined\" ||\n    process.env.NODE_ENV !== \"production\" ||\n    process.env.UMBRELLA_ASSERTS === \"1\"\n    ? (test, msg = \"assertion failed\") => {\n        if ((typeof test === \"function\" && !test()) || !test) {\n            throw new Error(typeof msg === \"function\" ? msg() : msg);\n        }\n    }\n    : NO_OP;\n","import { LogLevel } from \"./api/logger\";\nexport const NULL_LOGGER = Object.freeze({\n    level: LogLevel.NONE,\n    fine() { },\n    debug() { },\n    info() { },\n    warn() { },\n    severe() { }\n});\nexport class ConsoleLogger {\n    constructor(id, level = LogLevel.FINE) {\n        this.id = id;\n        this.level = level;\n    }\n    fine(...args) {\n        this.level <= LogLevel.FINE && this.log(\"FINE\", args);\n    }\n    debug(...args) {\n        this.level <= LogLevel.DEBUG && this.log(\"DEBUG\", args);\n    }\n    info(...args) {\n        this.level <= LogLevel.INFO && this.log(\"INFO\", args);\n    }\n    warn(...args) {\n        this.level <= LogLevel.WARN && this.log(\"WARN\", args);\n    }\n    severe(...args) {\n        this.level <= LogLevel.SEVERE && this.log(\"SEVERE\", args);\n    }\n    log(level, args) {\n        console.log(`[${level}] ${this.id}:`, ...args);\n    }\n}\n","/**\n * Class behavior mixin based on:\n * http://raganwald.com/2015/06/26/decorators-in-es7.html\n *\n * Additionally only injects/overwrites properties in target, which are\n * NOT marked with `@nomixin` (i.e. haven't set their `configurable`\n * property descriptor flag to `false`)\n *\n * @param behaviour to mixin\n * @param sharedBehaviour\n * @returns decorator function\n */\nexport const mixin = (behaviour, sharedBehaviour = {}) => {\n    const instanceKeys = Reflect.ownKeys(behaviour);\n    const sharedKeys = Reflect.ownKeys(sharedBehaviour);\n    const typeTag = Symbol(\"isa\");\n    function _mixin(clazz) {\n        for (let key of instanceKeys) {\n            const existing = Object.getOwnPropertyDescriptor(clazz.prototype, key);\n            if (!existing || existing.configurable) {\n                Object.defineProperty(clazz.prototype, key, {\n                    value: behaviour[key],\n                    writable: true\n                });\n            }\n            else {\n                console.log(`not patching: ${clazz.name}.${key.toString()}`);\n            }\n        }\n        Object.defineProperty(clazz.prototype, typeTag, { value: true });\n        return clazz;\n    }\n    for (let key of sharedKeys) {\n        Object.defineProperty(_mixin, key, {\n            value: sharedBehaviour[key],\n            enumerable: sharedBehaviour.propertyIsEnumerable(key)\n        });\n    }\n    Object.defineProperty(_mixin, Symbol.hasInstance, {\n        value: (x) => !!x[typeTag]\n    });\n    return _mixin;\n};\n","/**\n * Property decorator factory. Sets `configurable` flag of PropertyDescriptor\n * to given state.\n *\n * @param state\n */\nexport const configurable = (state) => function (_, __, descriptor) {\n    descriptor.configurable = state;\n};\n","import { assert } from \"../assert\";\n/**\n * Method property decorator factory. Augments original method with\n * deprecation message (via console), shown when method is invoked.\n * Accepts optional message arg. Throws error if assigned property\n * is not a function.\n *\n * @param msg deprecation message\n */\nexport const deprecated = (msg, log = console.log) => function (target, prop, descriptor) {\n    const signature = `${target.constructor.name}#${prop.toString()}`;\n    const fn = descriptor.value;\n    assert(typeof fn === \"function\", `${signature} is not a function`);\n    descriptor.value = function () {\n        log(`DEPRECATED ${signature}: ${msg || \"will be removed soon\"}`);\n        return fn.apply(this, arguments);\n    };\n    return descriptor;\n};\n","/**\n * Method property decorator. Sets `configurable` flag of\n * PropertyDescriptor to `false` (same as `@configurable(false)`).\n * Intended to be used in combination with mixin decorators to enable\n * partial implementations of mixed-in behaviors in target class and\n * avoid them being overidden by mixed-in behaviour.\n */\nexport const nomixin = (_, __, descriptor) => {\n    descriptor.configurable = false;\n};\n","/**\n * Class decorator. Seals both constructor and prototype.\n *\n * @param constructor\n */\nexport const sealed = (constructor) => {\n    Object.seal(constructor);\n    Object.seal(constructor.prototype);\n};\n","import { EVENT_DISABLE, EVENT_ENABLE } from \"../api/event\";\nimport { mixin } from \"../mixin\";\n/**\n * Mixin class decorator, injects IEnable default implementation, incl.\n * a `_enabled` property. If the target also implements the `INotify`\n * interface, `enable()` and `disable()` will automatically emit the\n * respective events.\n */\nexport const IEnableMixin = mixin({\n    _enabled: true,\n    isEnabled() {\n        return this._enabled;\n    },\n    enable() {\n        this._enabled = true;\n        if (this.notify) {\n            this.notify({ id: EVENT_ENABLE, target: this });\n        }\n    },\n    disable() {\n        this._enabled = false;\n        if (this.notify) {\n            this.notify({ id: EVENT_DISABLE, target: this });\n        }\n    },\n    toggle() {\n        this._enabled ? this.disable() : this.enable();\n        return this._enabled;\n    }\n});\n","import { EVENT_ALL } from \"../api/event\";\nimport { mixin } from \"../mixin\";\nexport const inotify_dispatch = (listeners, e) => {\n    if (!listeners)\n        return;\n    for (let i = 0, n = listeners.length, l; i < n; i++) {\n        l = listeners[i];\n        l[0].call(l[1], e);\n        if (e.canceled) {\n            return;\n        }\n    }\n};\n/**\n * Mixin class decorator, injects INotify default implementation, incl.\n * a lazily instantiated `_listeners` property object, storing\n * registered listeners.\n */\nexport const INotifyMixin = mixin({\n    addListener(id, fn, scope) {\n        let l = (this._listeners = this._listeners || {})[id];\n        !l && (l = this._listeners[id] = []);\n        if (this.__listener(l, fn, scope) === -1) {\n            l.push([fn, scope]);\n            return true;\n        }\n        return false;\n    },\n    removeListener(id, fn, scope) {\n        let listeners;\n        if (!(listeners = this._listeners))\n            return false;\n        const l = listeners[id];\n        if (l) {\n            const idx = this.__listener(l, fn, scope);\n            if (idx !== -1) {\n                l.splice(idx, 1);\n                !l.length && delete listeners[id];\n                return true;\n            }\n        }\n        return false;\n    },\n    notify(e) {\n        let listeners;\n        if (!(listeners = this._listeners))\n            return false;\n        e.target === undefined && (e.target = this);\n        inotify_dispatch(listeners[e.id], e);\n        inotify_dispatch(listeners[EVENT_ALL], e);\n    },\n    __listener(listeners, f, scope) {\n        let i = listeners.length;\n        while (--i >= 0) {\n            const l = listeners[i];\n            if (l[0] === f && l[1] === scope) {\n                break;\n            }\n        }\n        return i;\n    }\n});\n","import { mixin } from \"../mixin\";\nexport const iterable = (prop) => mixin({\n    *[Symbol.iterator]() {\n        yield* this[prop];\n    }\n});\n","import { mixin } from \"../mixin\";\nexport const IWatchMixin = mixin({\n    addWatch(id, fn) {\n        this._watches = this._watches || {};\n        if (this._watches[id]) {\n            return false;\n        }\n        this._watches[id] = fn;\n        return true;\n    },\n    removeWatch(id) {\n        if (!this._watches)\n            return;\n        if (this._watches[id]) {\n            delete this._watches[id];\n            return true;\n        }\n        return false;\n    },\n    notifyWatches(oldState, newState) {\n        if (!this._watches)\n            return;\n        const w = this._watches;\n        for (let id in w) {\n            w[id](id, oldState, newState);\n        }\n    }\n});\n","export * from \"./api\";\nexport * from \"./api/event\";\nexport * from \"./api/fn\";\nexport * from \"./api/logger\";\nexport * from \"./api/typedarray\";\nexport * from \"./assert\";\nexport * from \"./logger\";\nexport * from \"./mixin\";\nexport * from \"./decorators/configurable\";\nexport * from \"./decorators/deprecated\";\nexport * from \"./decorators/nomixin\";\nexport * from \"./decorators/sealed\";\nexport * from \"./mixins/ienable\";\nexport * from \"./mixins/inotify\";\nexport * from \"./mixins/iterable\";\nexport * from \"./mixins/iwatch\";\n","import { NULL_LOGGER } from \"@thi.ng/api\";\nexport var State;\n(function (State) {\n    State[State[\"IDLE\"] = 0] = \"IDLE\";\n    State[State[\"ACTIVE\"] = 1] = \"ACTIVE\";\n    State[State[\"DONE\"] = 2] = \"DONE\";\n    State[State[\"ERROR\"] = 3] = \"ERROR\";\n    State[State[\"DISABLED\"] = 4] = \"DISABLED\"; // TODO currently unused\n})(State || (State = {}));\n/**\n * Closing behaviors.\n */\nexport var CloseMode;\n(function (CloseMode) {\n    /**\n     * Never close, even if no more inputs/outputs.\n     */\n    CloseMode[CloseMode[\"NEVER\"] = 0] = \"NEVER\";\n    /**\n     * Close when first input/output is done / removed.\n     */\n    CloseMode[CloseMode[\"FIRST\"] = 1] = \"FIRST\";\n    /**\n     * Close when last input/output is done / removed.\n     */\n    CloseMode[CloseMode[\"LAST\"] = 2] = \"LAST\";\n})(CloseMode || (CloseMode = {}));\nexport let LOGGER = NULL_LOGGER;\nexport const setLogger = (logger) => (LOGGER = logger);\n","export const existsAndNotNull = (x) => x != null;\n","export const exists = (t) => t !== undefined;\n","export const hasCrypto = () => typeof window !== \"undefined\" && window[\"crypto\"] !== undefined;\n","export const hasMaxLength = (len, x) => x != null && x.length <= len;\n","export const hasMinLength = (len, x) => x != null && x.length >= len;\n","export const isFunction = (x) => typeof x === \"function\";\n","import { isFunction } from \"./is-function\";\nexport const hasPerformance = () => typeof performance !== \"undefined\" && isFunction(performance.now);\n","export const hasWASM = () => (typeof window !== \"undefined\" &&\n    typeof window[\"WebAssembly\"] !== \"undefined\") ||\n    (typeof global !== \"undefined\" &&\n        typeof global[\"WebAssembly\"] !== \"undefined\");\n","export const hasWebGL = () => {\n    try {\n        document.createElement(\"canvas\").getContext(\"webgl\");\n        return true;\n    }\n    catch (e) {\n        return false;\n    }\n};\n","export const hasWebSocket = () => typeof WebSocket !== \"undefined\";\n","export const implementsFunction = (x, fn) => x != null && typeof x[fn] === \"function\";\n","export const isArray = Array.isArray;\n","export const isArrayLike = (x) => x != null && typeof x !== \"function\" && x.length !== undefined;\n","export const isBlob = (x) => x instanceof Blob;\n","export const isBoolean = (x) => typeof x === \"boolean\";\n","export const isChrome = () => typeof window !== \"undefined\" && !!window[\"chrome\"];\n","export const isDate = (x) => x instanceof Date;\n","export const isEven = (x) => x % 2 === 0;\n","export const isFalse = (x) => x === false;\n","export const isFile = (x) => x instanceof File;\n","export const isFirefox = () => typeof window !== \"undefined\" && !!window[\"InstallTrigger\"];\n","export const isString = (x) => typeof x === \"string\";\n","import { isString } from \"./is-string\";\nconst RE = /^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;\nexport const isHexColor = (x) => isString(x) && RE.test(x);\n","export const isIE = () => typeof document !== \"undefined\" &&\n    (typeof document[\"documentMode\"] !== \"undefined\" ||\n        navigator.userAgent.indexOf(\"MSIE\") > 0);\n","export const isInRange = (min, max, x) => x >= min && x <= max;\n","export const isInt32 = (x) => typeof x === \"number\" && (x | 0) === x;\n","export const isIterable = (x) => x != null && typeof x[Symbol.iterator] === \"function\";\n","export const isMap = (x) => x instanceof Map;\n","export const isMobile = () => typeof navigator !== \"undefined\" &&\n    /mobile|tablet|ip(ad|hone|od)|android|silk|crios/i.test(navigator.userAgent);\n","export const isNaN = (x) => x !== x;\n","export const isNegative = (x) => typeof x === \"number\" && x < 0;\n","/**\n * Checks if x is null or undefined.\n *\n */\nexport const isNil = (x) => x == null;\n","export const isNode = () => {\n    if (typeof process === \"object\") {\n        if (typeof process.versions === \"object\") {\n            if (typeof process.versions.node !== \"undefined\") {\n                return true;\n            }\n        }\n    }\n    return false;\n};\n","export const isNotStringAndIterable = (x) => x != null &&\n    typeof x !== \"string\" &&\n    typeof x[Symbol.iterator] === \"function\";\n","export const isNull = (x) => x === null;\n","export const isNumber = (x) => typeof x === \"number\";\n","export const isObject = (x) => x !== null && typeof x === \"object\";\n","export const isOdd = (x) => x % 2 !== 0;\n","const OBJP = Object.getPrototypeOf;\n/**\n * Similar to `isObject()`, but also checks if prototype is that of\n * `Object` (or `null`).\n *\n * @param x\n */\nexport const isPlainObject = (x) => {\n    let p;\n    return (x != null &&\n        typeof x === \"object\" &&\n        ((p = OBJP(x)) === null || OBJP(p) === null));\n};\n","export const isPosititve = (x) => typeof x === \"number\" && x > 0;\n","export const isPrimitive = (x) => {\n    const t = typeof x;\n    return t === \"string\" || t === \"number\";\n};\n","export const isPromise = (x) => x instanceof Promise;\n","import { implementsFunction } from \"./implements-function\";\nexport const isPromiseLike = (x) => x instanceof Promise ||\n    (implementsFunction(x, \"then\") && implementsFunction(x, \"catch\"));\n","export const isRegExp = (x) => x instanceof RegExp;\n","import { isChrome } from \"./is-chrome\";\nexport const isSafari = () => typeof navigator !== \"undefined\" &&\n    /Safari/.test(navigator.userAgent) &&\n    !isChrome();\n","export const isSet = (x) => x instanceof Set;\n","export const isSymbol = (x) => typeof x === \"symbol\";\n","export const isTransferable = (x) => x instanceof ArrayBuffer ||\n    (typeof SharedArrayBuffer !== \"undefined\" &&\n        x instanceof SharedArrayBuffer) ||\n    (typeof MessagePort !== \"undefined\" && x instanceof MessagePort);\n","export const isTrue = (x) => x === true;\n","export const isTypedArray = (x) => x &&\n    (x.constructor === Float32Array ||\n        x.constructor === Uint32Array ||\n        x.constructor === Uint8Array ||\n        x.constructor === Uint8ClampedArray ||\n        x.constructor === Int8Array ||\n        x.constructor === Uint16Array ||\n        x.constructor === Int16Array ||\n        x.constructor === Int32Array ||\n        x.constructor === Float64Array);\n","export const isUint32 = (x) => typeof x === \"number\" && x >>> 0 === x;\n","export const isUndefined = (x) => x === undefined;\n","const RE = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\nexport const isUUID = (x) => RE.test(x);\n","const RE = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\nexport const isUUIDv4 = (x) => RE.test(x);\n","export const isZero = (x) => x === 0;\n","export * from \"./exists-not-null\";\nexport * from \"./exists\";\nexport * from \"./has-crypto\";\nexport * from \"./has-max-length\";\nexport * from \"./has-min-length\";\nexport * from \"./has-performance\";\nexport * from \"./has-wasm\";\nexport * from \"./has-webgl\";\nexport * from \"./has-websocket\";\nexport * from \"./implements-function\";\nexport * from \"./is-array\";\nexport * from \"./is-arraylike\";\nexport * from \"./is-blob\";\nexport * from \"./is-boolean\";\nexport * from \"./is-chrome\";\nexport * from \"./is-date\";\nexport * from \"./is-even\";\nexport * from \"./is-false\";\nexport * from \"./is-file\";\nexport * from \"./is-firefox\";\nexport * from \"./is-function\";\nexport * from \"./is-hex-color\";\nexport * from \"./is-ie\";\nexport * from \"./is-in-range\";\nexport * from \"./is-int32\";\nexport * from \"./is-iterable\";\nexport * from \"./is-map\";\nexport * from \"./is-mobile\";\nexport * from \"./is-nan\";\nexport * from \"./is-negative\";\nexport * from \"./is-nil\";\nexport * from \"./is-node\";\nexport * from \"./is-not-string-iterable\";\nexport * from \"./is-null\";\nexport * from \"./is-number\";\nexport * from \"./is-object\";\nexport * from \"./is-odd\";\nexport * from \"./is-plain-object\";\nexport * from \"./is-positive\";\nexport * from \"./is-primitive\";\nexport * from \"./is-promise\";\nexport * from \"./is-promiselike\";\nexport * from \"./is-regexp\";\nexport * from \"./is-safari\";\nexport * from \"./is-set\";\nexport * from \"./is-string\";\nexport * from \"./is-symbol\";\nexport * from \"./is-transferable\";\nexport * from \"./is-true\";\nexport * from \"./is-typedarray\";\nexport * from \"./is-uint32\";\nexport * from \"./is-undefined\";\nexport * from \"./is-uuid\";\nexport * from \"./is-uuid4\";\nexport * from \"./is-zero\";\n","export class Reduced {\n    constructor(val) {\n        this.value = val;\n    }\n    deref() {\n        return this.value;\n    }\n}\nexport const reduced = (x) => new Reduced(x);\nexport const isReduced = (x) => x instanceof Reduced;\nexport const ensureReduced = (x) => x instanceof Reduced ? x : new Reduced(x);\nexport const unreduced = (x) => (x instanceof Reduced ? x.deref() : x);\n","export const defError = (prefix, suffix = (msg) => (msg !== undefined ? \": \" + msg : \"\")) => class extends Error {\n    constructor(msg) {\n        super(prefix(msg) + suffix(msg));\n    }\n};\n","import { defError } from \"./deferror\";\nexport const IllegalArgumentError = defError(() => \"illegal argument(s)\");\nexport const illegalArgs = (msg) => {\n    throw new IllegalArgumentError(msg);\n};\n","import { defError } from \"./deferror\";\nexport const IllegalArityError = defError(() => \"illegal arity\");\nexport const illegalArity = (n) => {\n    throw new IllegalArityError(n);\n};\n","import { defError } from \"./deferror\";\nexport const IllegalStateError = defError(() => \"illegal state\");\nexport const illegalState = (msg) => {\n    throw new IllegalStateError(msg);\n};\n","import { defError } from \"./deferror\";\nexport const UnsupportedOperationError = defError(() => \"unsupported operation\");\nexport const unsupported = (msg) => {\n    throw new UnsupportedOperationError(msg);\n};\n","export * from \"./deferror\";\nexport * from \"./illegal-arguments\";\nexport * from \"./illegal-arity\";\nexport * from \"./illegal-state\";\nexport * from \"./unsupported\";\n","import { implementsFunction, isArrayLike, isIterable } from \"@thi.ng/checks\";\nimport { illegalArity } from \"@thi.ng/errors\";\nimport { isReduced, unreduced } from \"./reduced\";\nconst parseArgs = (args) => args.length === 2\n    ? [undefined, args[1]]\n    : args.length === 3\n        ? [args[1], args[2]]\n        : illegalArity(args.length);\nexport function reduce(...args) {\n    const rfn = args[0];\n    const init = rfn[0];\n    const complete = rfn[1];\n    const reduce = rfn[2];\n    args = parseArgs(args);\n    const acc = args[0] == null ? init() : args[0];\n    const xs = args[1];\n    return unreduced(complete(implementsFunction(xs, \"$reduce\")\n        ? xs.$reduce(reduce, acc)\n        : isArrayLike(xs)\n            ? reduceArray(reduce, acc, xs)\n            : reduceIterable(reduce, acc, xs)));\n}\nconst reduceArray = (rfn, acc, xs) => {\n    for (let i = 0, n = xs.length; i < n; i++) {\n        acc = rfn(acc, xs[i]);\n        if (isReduced(acc)) {\n            acc = acc.deref();\n            break;\n        }\n    }\n    return acc;\n};\nconst reduceIterable = (rfn, acc, xs) => {\n    for (let x of xs) {\n        acc = rfn(acc, x);\n        if (isReduced(acc)) {\n            acc = acc.deref();\n            break;\n        }\n    }\n    return acc;\n};\n/**\n * Convenience helper for building a full `Reducer` using the identity\n * function (i.e. `(x) => x`) as completion step (true for 90% of all\n * bundled transducers).\n *\n * @param init init step of reducer\n * @param rfn reduction step of reducer\n */\nexport const reducer = (init, rfn) => [init, (acc) => acc, rfn];\nexport const $$reduce = (rfn, args) => {\n    const n = args.length - 1;\n    return isIterable(args[n])\n        ? args.length > 1\n            ? reduce(rfn.apply(null, args.slice(0, n)), args[n])\n            : reduce(rfn(), args[0])\n        : undefined;\n};\n","import { reducer } from \"../reduce\";\nexport function push(xs) {\n    return xs\n        ? [...xs]\n        : reducer(() => [], (acc, x) => (acc.push(x), acc));\n}\n","import { NO_OP, SEMAPHORE } from \"@thi.ng/api\";\nimport { isIterable } from \"@thi.ng/checks\";\nimport { isReduced, unreduced } from \"./reduced\";\nimport { push } from \"./rfn/push\";\n/**\n * Takes a transducer and input iterable. Returns iterator of\n * transformed results.\n *\n * @param xform\n * @param xs\n */\nexport function* iterator(xform, xs) {\n    const rfn = xform(push());\n    const complete = rfn[1];\n    const reduce = rfn[2];\n    for (let x of xs) {\n        const y = reduce([], x);\n        if (isReduced(y)) {\n            yield* unreduced(complete(y.deref()));\n            return;\n        }\n        if (y.length) {\n            yield* y;\n        }\n    }\n    yield* unreduced(complete([]));\n}\n/**\n * Optimized version of `iterator()` for transducers which are\n * guaranteed to:\n *\n * 1) Only produce none or a single result per input\n * 2) Do not require a `completion` reduction step\n *\n * @param xform\n * @param xs\n */\nexport function* iterator1(xform, xs) {\n    const reduce = xform([NO_OP, NO_OP, (_, x) => x])[2];\n    for (let x of xs) {\n        let y = reduce(SEMAPHORE, x);\n        if (isReduced(y)) {\n            y = unreduced(y.deref());\n            if (y !== SEMAPHORE) {\n                yield y;\n            }\n            return;\n        }\n        if (y !== SEMAPHORE) {\n            yield y;\n        }\n    }\n}\n/**\n * Helper function used by various transducers to wrap themselves as\n * transforming iterators. Delegates to `iterator1()` by default.\n *\n * @param xform\n * @param args\n * @param impl\n */\nexport const $iter = (xform, args, impl = iterator1) => {\n    const n = args.length - 1;\n    return isIterable(args[n])\n        ? args.length > 1\n            ? impl(xform.apply(null, args.slice(0, n)), args[n])\n            : impl(xform(), args[0])\n        : undefined;\n};\n","/**\n * Reducer composition helper. Takes existing reducer `rfn` (a 3-tuple)\n * and a reducing function `fn`. Returns a new reducer tuple of this\n * form:\n *\n * ```\n * [rfn[0], rfn[1], fn]\n * ```\n *\n * `rfn[2]` reduces values of type `B` into an accumulator of type `A`.\n * `fn` accepts values of type `C` and produces interim results of type\n * `B`, which are then (possibly) passed to the \"inner\" `rfn[2]`\n * function. Therefore the resulting reducer takes inputs of `C` and an\n * accumulator of type `A`.\n *\n * It is assumed that `fn` internally calls `rfn[2]` to pass its own\n * results for further processing by the nested reducer `rfn`.\n *\n * @param rfn\n * @param fn\n */\nexport const compR = (rfn, fn) => [rfn[0], rfn[1], fn];\n","import { compR } from \"../func/compr\";\nimport { iterator1 } from \"../iterator\";\nexport function map(fn, src) {\n    return src\n        ? iterator1(map(fn), src)\n        : (rfn) => {\n            const r = rfn[2];\n            return compR(rfn, (acc, x) => r(acc, fn(x)));\n        };\n}\n","import { illegalArity } from \"@thi.ng/errors\";\nimport { reduce } from \"./reduce\";\nimport { map } from \"./xform/map\";\nexport function transduce(...args) {\n    let acc, xs;\n    switch (args.length) {\n        case 4:\n            xs = args[3];\n            acc = args[2];\n            break;\n        case 3:\n            xs = args[2];\n            break;\n        case 2:\n            return map((x) => transduce(args[0], args[1], x));\n        default:\n            illegalArity(args.length);\n    }\n    return reduce(args[0](args[1]), acc, xs);\n}\n","import { NO_OP } from \"@thi.ng/api\";\nimport { transduce } from \"./transduce\";\nconst NO_OP_REDUCER = [NO_OP, NO_OP, NO_OP];\nexport function run(tx, ...args) {\n    if (args.length === 1) {\n        transduce(tx, NO_OP_REDUCER, args[0]);\n    }\n    else {\n        const fx = args[0];\n        transduce(tx, [NO_OP, NO_OP, (_, x) => fx(x)], args[1]);\n    }\n}\n","import { isReduced } from \"./reduced\";\nimport { push } from \"./rfn/push\";\n/**\n * Single-step transducer execution wrapper.\n * Returns array if transducer produces multiple results\n * and undefined if there was no output. Else returns single\n * result value.\n *\n * Likewise, once a transducer has produced a final / reduced\n * value, all further invocations of the stepper function will\n * return undefined.\n *\n * ```\n * // single result\n * step(map(x => x * 10))(1);\n * // 10\n *\n * // multiple results\n * step(mapcat(x => [x, x + 1, x + 2]))(1)\n * // [ 1, 2, 3 ]\n *\n * // no result\n * f = step(filter((x) => !(x & 1)))\n * f(1); // undefined\n * f(2); // 2\n *\n * // reduced value termination\n * f = step(take(2));\n * f(1); // 1\n * f(1); // 1\n * f(1); // undefined\n * f(1); // undefined\n * ```\n *\n * @param tx\n */\nexport const step = (tx) => {\n    const [_, complete, reduce] = tx(push());\n    _;\n    let done = false;\n    return (x) => {\n        if (!done) {\n            let acc = reduce([], x);\n            done = isReduced(acc);\n            if (done) {\n                acc = complete(acc.deref());\n            }\n            return acc.length === 1 ? acc[0] : acc.length > 0 ? acc : undefined;\n        }\n    };\n};\n","import { $$reduce, reducer } from \"../reduce\";\nexport const __mathop = (rfn, fn, initDefault, args) => {\n    const res = $$reduce(rfn, args);\n    if (res !== undefined) {\n        return res;\n    }\n    const init = args[0] || initDefault;\n    return reducer(() => init, fn);\n};\n","import { __mathop } from \"../internal/mathop\";\nexport function add(...args) {\n    return __mathop(add, (acc, x) => acc + x, 0, args);\n}\n","import { reduce, reducer } from \"../reduce\";\nexport function assocMap(xs) {\n    return xs\n        ? reduce(assocMap(), xs)\n        : reducer(() => new Map(), (acc, [k, v]) => acc.set(k, v));\n}\n","import { reduce, reducer } from \"../reduce\";\nexport function assocObj(xs) {\n    return xs\n        ? reduce(assocObj(), xs)\n        : reducer(() => ({}), (acc, [k, v]) => ((acc[k] = v), acc));\n}\n","import { reduce, reducer } from \"../reduce\";\nexport function conj(xs) {\n    return xs\n        ? reduce(conj(), xs)\n        : reducer(() => new Set(), (acc, x) => acc.add(x));\n}\n","import { reducer, $$reduce } from \"../reduce\";\nexport function count(...args) {\n    const res = $$reduce(count, args);\n    if (res !== undefined) {\n        return res;\n    }\n    let offset = args[0] || 0;\n    let step = args[1] || 1;\n    return reducer(() => offset, (acc, _) => acc + step);\n}\n","import { reduce, reducer } from \"../reduce\";\nexport function div(init, xs) {\n    return xs\n        ? reduce(div(init), xs)\n        : reducer(() => init, (acc, x) => acc / x);\n}\n","import { $$reduce, reducer } from \"../reduce\";\nimport { reduced } from \"../reduced\";\nexport function every(...args) {\n    const res = $$reduce(every, args);\n    if (res !== undefined) {\n        return res;\n    }\n    const pred = args[0];\n    return reducer(() => true, pred\n        ? (acc, x) => (pred(x) ? acc : reduced(false))\n        : (acc, x) => (x ? acc : reduced(false)));\n}\n","import { $$reduce, reducer } from \"../reduce\";\nexport function fill(...args) {\n    const res = $$reduce(fill, args);\n    if (res !== undefined) {\n        return res;\n    }\n    let start = args[0] || 0;\n    return reducer(() => [], (acc, x) => ((acc[start++] = x), acc));\n}\nexport function fillN(...args) {\n    return fill(...args);\n}\n","import { illegalArity } from \"@thi.ng/errors\";\nexport function comp(...fns) {\n    let [a, b, c, d, e, f, g, h, i, j] = fns;\n    switch (fns.length) {\n        case 0:\n            illegalArity(0);\n        case 1:\n            return a;\n        case 2:\n            return (...xs) => a(b(...xs));\n        case 3:\n            return (...xs) => a(b(c(...xs)));\n        case 4:\n            return (...xs) => a(b(c(d(...xs))));\n        case 5:\n            return (...xs) => a(b(c(d(e(...xs)))));\n        case 6:\n            return (...xs) => a(b(c(d(e(f(...xs))))));\n        case 7:\n            return (...xs) => a(b(c(d(e(f(g(...xs)))))));\n        case 8:\n            return (...xs) => a(b(c(d(e(f(g(h(...xs))))))));\n        case 9:\n            return (...xs) => a(b(c(d(e(f(g(h(i(...xs)))))))));\n        case 10:\n        default:\n            const fn = (...xs) => a(b(c(d(e(f(g(h(i(j(...xs))))))))));\n            return fns.length === 10 ? fn : comp(fn, ...fns.slice(10));\n    }\n}\nexport function compL(...fns) {\n    return comp.apply(null, fns.reverse());\n}\n/**\n * @deprecated renamed to `compL`\n */\nexport const compI = compL;\n","export function complement(f) {\n    return (...xs) => !f(...xs);\n}\n","export const constantly = (x) => () => x;\n","export const delay = (body) => new Delay(body);\nexport class Delay {\n    constructor(body) {\n        this.body = body;\n        this.realized = false;\n    }\n    deref() {\n        if (!this.realized) {\n            this.value = this.body();\n            this.realized = true;\n        }\n        return this.value;\n    }\n    isRealized() {\n        return this.realized;\n    }\n}\n","export const delayed = (x, t) => new Promise((resolve) => setTimeout(() => resolve(x), t));\n","export const identity = (x) => x;\n","/**\n * Returns f(x) iff `x` is not null or undefined.\n *\n * @param f\n * @param x\n */\nexport const ifDef = (f, x) => x != null ? f(x) : undefined;\n","export function juxt(...fns) {\n    const [a, b, c, d, e, f, g, h] = fns;\n    switch (fns.length) {\n        case 1:\n            return (x) => [a(x)];\n        case 2:\n            return (x) => [a(x), b(x)];\n        case 3:\n            return (x) => [a(x), b(x), c(x)];\n        case 4:\n            return (x) => [a(x), b(x), c(x), d(x)];\n        case 5:\n            return (x) => [a(x), b(x), c(x), d(x), e(x)];\n        case 6:\n            return (x) => [a(x), b(x), c(x), d(x), e(x), f(x)];\n        case 7:\n            return (x) => [a(x), b(x), c(x), d(x), e(x), f(x), g(x)];\n        case 8:\n            return (x) => [a(x), b(x), c(x), d(x), e(x), f(x), g(x), h(x)];\n        default:\n            return (x) => {\n                let res = new Array(fns.length);\n                for (let i = fns.length; --i >= 0;) {\n                    res[i] = fns[i](x);\n                }\n                return res;\n            };\n    }\n}\n","import { illegalArgs } from \"@thi.ng/errors\";\nexport function partial(fn, ...args) {\n    let [a, b, c, d, e, f, g, h] = args;\n    switch (args.length) {\n        case 1:\n            return (...xs) => fn(a, ...xs);\n        case 2:\n            return (...xs) => fn(a, b, ...xs);\n        case 3:\n            return (...xs) => fn(a, b, c, ...xs);\n        case 4:\n            return (...xs) => fn(a, b, c, d, ...xs);\n        case 5:\n            return (...xs) => fn(a, b, c, d, e, ...xs);\n        case 6:\n            return (...xs) => fn(a, b, c, d, e, f, ...xs);\n        case 7:\n            return (...xs) => fn(a, b, c, d, e, f, g, ...xs);\n        case 8:\n            return (...xs) => fn(a, b, c, d, e, f, g, h, ...xs);\n        default:\n            illegalArgs();\n    }\n}\nexport const foo = partial((a, b) => a + b, \"a\");\n","/**\n * Takes an `init` value and a number of functions and/or function\n * tuples, consisting of: `[fn, ...args]`. Executes each function\n * (or tuple) with the return value of the previous expression inserted\n * as first argument, using `init` for the first expression.\n *\n * ```\n * const neg = (x) => -x;\n * const sub = (a, b) => a - b;\n * const div = (a, b) => a / b;\n *\n * threadFirst(\n *   5,\n *   neg,       // -5\n *   [sub, 20], // -5 - 20 = -25\n *   [div, 10]  // -25 / 10 = -2.5\n * );\n *\n * // -2.5\n * ```\n *\n * @see threadLast\n *\n * @param init\n * @param fns\n */\nexport const threadFirst = (init, ...fns) => fns.reduce((acc, expr) => typeof expr === \"function\"\n    ? expr(acc)\n    : expr[0](acc, ...expr.slice(1)), init);\n","/**\n * Takes an `init` value and a number of functions and/or function\n * tuples, consisting of: `[fn, ...args]`. Executes each function\n * (or tuple) with the return value of the previous expression inserted\n * as last argument, using `init` for the first expression.\n *\n * ```\n * const neg = (x) => -x;\n * const sub = (a, b) => a - b;\n * const div = (a, b) => a / b;\n *\n * threadLast(\n *   5,\n *   neg,       // -5\n *   [sub, 10], // 20 - (-5) = 25\n *   [div, 10]  // 10 / 25 = 0.4\n * );\n *\n * // 0.4\n * ```\n *\n * @see threadFirst\n *\n * @param init\n * @param fns\n */\nexport const threadLast = (init, ...fns) => fns.reduce((acc, expr) => typeof expr === \"function\"\n    ? expr(acc)\n    : expr[0](...expr.slice(1), acc), init);\n","/**\n * Takes a function returning either a no-arg function (thunk) or its\n * already realized (non-function) result. Re-executes thunk for as long\n * as it returns another function/thunk. Once a non-function result has\n * been produced, `trampoline` returns that value itself. If the final\n * result should be function, it needs to wrapped (e.g. as a 1-elem\n * array).\n *\n * This function should be used for non-stack consuming recursion. I.e.\n * a trampoline is a form of continuation passing style and only ever\n * consumes max. 2 extra stack frames, independent from recursion depth.\n *\n * ```\n * const countdown = (acc, x) =>\n *   x >= 0 ?\n *     () => (acc.push(x), countdown(acc, x-1)) :\n *     acc;\n *\n * trampoline(countdown([], 4))\n * // [ 4, 3, 2, 1, 0 ]\n *\n * trampoline(countdown([], -1))\n * // []\n * ```\n *\n * @param f\n */\nexport const trampoline = (f) => {\n    while (typeof f === \"function\") {\n        f = f();\n    }\n    return f;\n};\n","export * from \"./comp\";\nexport * from \"./complement\";\nexport * from \"./constantly\";\nexport * from \"./delay\";\nexport * from \"./delayed\";\nexport * from \"./identity\";\nexport * from \"./ifdef\";\nexport * from \"./juxt\";\nexport * from \"./partial\";\nexport * from \"./thread-first\";\nexport * from \"./thread-last\";\nexport * from \"./trampoline\";\n","import { identity } from \"@thi.ng/compose\";\nimport { push } from \"../rfn/push\";\n/**\n * Shared helper function for groupBy* reducers\n *\n * @param opts\n */\nexport const __groupByOpts = (opts) => (Object.assign({ key: identity, group: push() }, opts));\n","import { __groupByOpts } from \"../internal/group-opts\";\nimport { $$reduce, reducer } from \"../reduce\";\nexport function groupByMap(...args) {\n    const res = $$reduce(groupByMap, args);\n    if (res !== undefined) {\n        return res;\n    }\n    const opts = __groupByOpts(args[0]);\n    const [init, _, reduce] = opts.group;\n    _; // ignore\n    return reducer(() => new Map(), (acc, x) => {\n        const k = opts.key(x);\n        return acc.set(k, acc.has(k)\n            ? reduce(acc.get(k), x)\n            : reduce(init(), x));\n    });\n}\n","import { identity } from \"@thi.ng/compose\";\nimport { $$reduce } from \"../reduce\";\nimport { count } from \"./count\";\nimport { groupByMap } from \"./group-by-map\";\nexport function frequencies(...args) {\n    return ($$reduce(frequencies, args) ||\n        groupByMap({ key: args[0] || identity, group: count() }));\n}\n","import { __groupByOpts } from \"../internal/group-opts\";\nimport { $$reduce, reducer } from \"../reduce\";\nexport function groupByObj(...args) {\n    const res = $$reduce(groupByObj, args);\n    if (res) {\n        return res;\n    }\n    const opts = __groupByOpts(args[0]);\n    const [_init, _, _reduce] = opts.group;\n    _; // ignore\n    return reducer(() => ({}), (acc, x) => {\n        const k = opts.key(x);\n        acc[k] = acc[k]\n            ? _reduce(acc[k], x)\n            : _reduce(_init(), x);\n        return acc;\n    });\n}\n","import { groupByObj } from \"./group-by-obj\";\nimport { push } from \"./push\";\nconst branchPred = (key, b, l, r) => (x) => (key(x) & b ? r : l);\n/**\n * Creates a bottom-up, unbalanced binary tree of desired depth and\n * choice of data structures. Any value can be indexed, as long as a\n * numeric representation (key) can be obtained. This numeric key is\n * produced by the supplied `key` function. IMPORTANT: the returned\n * values MUST be unsigned and less than the provided bit length (i.e.\n * `0 .. (2^bits) - 1` range).\n *\n * By default the tree is constructed using plain objects for branches,\n * with left branches stored as \"l\" and right ones as \"r\". The original\n * values are stored at the lowest tree level using a customizable\n * nested reducer. By default leaves are collected in arrays (using the\n * `push()` reducer), but any suitable reducer can be used (e.g.\n * `conj()` to collect values into sets).\n *\n * Index by lowest 4-bits of ID value:\n *\n * ```\n * tree = reduce(\n *   groupBinary(4, x => x.id & 0xf),\n *   [{id: 3}, {id: 8}, {id: 15}, {id: 0}]\n * )\n *\n * tree.l.l.l.l\n * // [ { id: 0 } ]\n * tree.r.r.r.r\n * // [ { id: 15 } ]\n * tree.l.l.r.r\n * // [ { id: 3 } ]\n * ```\n *\n * Collecting as array:\n *\n * ```\n * tree = reduce(\n *   groupBinary(4, identity, ()=>[], push(), 0, 1),\n *   [1,2,3,4,5,6,7]\n * )\n *\n * tree[0][1][0][1] // 0101 == 5 in binary\n * // [ 5 ]\n *\n * tree[0][1][1]    // 011* == branch\n * // [ [ 6 ], [ 7 ] ]\n * ```\n *\n * Using `frequencies` as leaf reducer:\n *\n * ```\n * tree = reduce(\n *   groupBinary(3, (x: string) => x.length, null, frequencies()),\n *   \"aa bbb dddd ccccc bbb eeee fff\".split(\" \")\n * )\n * // [ [ undefined,\n * //     [ Map { 'aa' => 1 },\n * //       Map { 'bbb' => 2, 'fff' => 1 } ] ],\n * //   [ [ Map { 'dddd' => 1, 'eeee' => 1 },\n * //       Map { 'ccccc' => 1 } ] ] ]\n *\n * tree[0][1][1]\n * // Map { 'bbb' => 2, 'fff' => 1 }\n * ```\n *\n * @param bits index range (always from 0)\n * @param key key function\n * @param branch function to create a new branch container (object or\n * array)\n * @param leaf reducer for leaf collection\n * @param left key for storing left branches (e.g. `0` for arrays)\n * @param right key for storing right branches (e.g. `1` for arrays)\n */\nexport const groupBinary = (bits, key, branch, leaf, left = \"l\", right = \"r\") => {\n    const init = branch || (() => ({}));\n    let rfn = groupByObj({\n        key: branchPred(key, 1, left, right),\n        group: leaf || push()\n    });\n    for (let i = 2, maxIndex = 1 << bits; i < maxIndex; i <<= 1) {\n        rfn = groupByObj({\n            key: branchPred(key, i, left, right),\n            group: [init, rfn[1], rfn[2]]\n        });\n    }\n    return [init, rfn[1], rfn[2]];\n};\n","import { NO_OP } from \"@thi.ng/api\";\nimport { reduce, reducer } from \"../reduce\";\nexport function last(xs) {\n    return xs ? reduce(last(), xs) : reducer(NO_OP, (_, x) => x);\n}\n","export const compare = (a, b) => {\n    if (a === b) {\n        return 0;\n    }\n    if (a == null) {\n        return b == null ? 0 : -1;\n    }\n    if (b == null) {\n        return a == null ? 0 : 1;\n    }\n    if (typeof a.compare === \"function\") {\n        return a.compare(b);\n    }\n    if (typeof b.compare === \"function\") {\n        return -b.compare(a);\n    }\n    return a < b ? -1 : a > b ? 1 : 0;\n};\n/**\n * Numeric comparator (ascending order)\n *\n * @param a\n * @param b\n */\nexport const compareNumAsc = (a, b) => a - b;\n/**\n * Numeric comparator (descending order)\n *\n * @param a\n * @param b\n */\nexport const compareNumDesc = (a, b) => b - a;\n","import { compare } from \"@thi.ng/compare\";\nimport { $$reduce, reducer } from \"../reduce\";\nexport function maxCompare(...args) {\n    const res = $$reduce(maxCompare, args);\n    if (res !== undefined) {\n        return res;\n    }\n    const init = args[0];\n    const cmp = args[1] || compare;\n    return reducer(init, (acc, x) => (cmp(acc, x) >= 0 ? acc : x));\n}\n","import { reduce, reducer } from \"../reduce\";\nexport function max(xs) {\n    return xs\n        ? reduce(max(), xs)\n        : reducer(() => -Infinity, (acc, x) => Math.max(acc, x));\n}\n","import { reduce } from \"../reduce\";\nexport function mean(xs) {\n    let n = 1;\n    return xs\n        ? reduce(mean(), xs)\n        : [\n            () => (n = 0),\n            (acc) => (n > 1 ? acc / n : acc),\n            (acc, x) => (n++, acc + x)\n        ];\n}\n","import { compare } from \"@thi.ng/compare\";\nimport { $$reduce, reducer } from \"../reduce\";\nexport function minCompare(...args) {\n    const res = $$reduce(minCompare, args);\n    if (res !== undefined) {\n        return res;\n    }\n    const init = args[0];\n    const cmp = args[1] || compare;\n    return reducer(init, (acc, x) => (cmp(acc, x) <= 0 ? acc : x));\n}\n","import { reduce, reducer } from \"../reduce\";\nexport function min(xs) {\n    return xs\n        ? reduce(min(), xs)\n        : reducer(() => Infinity, (acc, x) => Math.min(acc, x));\n}\n","import { __mathop } from \"../internal/mathop\";\nexport function mul(...args) {\n    return __mathop(mul, (acc, x) => acc * x, 1, args);\n}\n","import { reducer } from \"../reduce\";\nexport const pushCopy = () => reducer(() => [], (acc, x) => ((acc = acc.slice()).push(x), acc));\n","import { reduce } from \"../reduce\";\nimport { isReduced, reduced } from \"../reduced\";\nexport function reductions(rfn, xs) {\n    const [init, complete, _reduce] = rfn;\n    return xs\n        ? reduce(reductions(rfn), xs)\n        : [\n            () => [init()],\n            (acc) => ((acc[acc.length - 1] = complete(acc[acc.length - 1])), acc),\n            (acc, x) => {\n                const res = _reduce(acc[acc.length - 1], x);\n                if (isReduced(res)) {\n                    acc.push(res.deref());\n                    return reduced(acc);\n                }\n                acc.push(res);\n                return acc;\n            }\n        ];\n}\n","import { $$reduce, reducer } from \"../reduce\";\nimport { reduced } from \"../reduced\";\nexport function some(...args) {\n    const res = $$reduce(some, args);\n    if (res !== undefined) {\n        return res;\n    }\n    const pred = args[0];\n    return reducer(() => false, pred\n        ? (acc, x) => (pred(x) ? reduced(true) : acc)\n        : (acc, x) => (x ? reduced(true) : acc));\n}\n","import { reducer } from \"../reduce\";\nexport function str(sep, xs) {\n    sep = sep || \"\";\n    let first = true;\n    return xs\n        ? [...xs].join(sep)\n        : reducer(() => \"\", (acc, x) => ((acc = first ? acc + x : acc + sep + x), (first = false), acc));\n}\n","import { __mathop } from \"../internal/mathop\";\nexport function sub(...args) {\n    return __mathop(sub, (acc, x) => acc - x, 0, args);\n}\n","import { compR } from \"../func/compr\";\nimport { iterator1 } from \"../iterator\";\nexport function benchmark(src) {\n    return src\n        ? iterator1(benchmark(), src)\n        : (rfn) => {\n            const r = rfn[2];\n            let prev = Date.now();\n            return compR(rfn, (acc, _) => {\n                const t = Date.now();\n                const x = t - prev;\n                prev = t;\n                return r(acc, x);\n            });\n        };\n}\n","import { compR } from \"../func/compr\";\nimport { ensureReduced, isReduced, unreduced } from \"../reduced\";\n/**\n * Transducer to concatenate iterable values. Iterates over each input\n * and emits individual values down stream, therefore removing one level\n * of nesting from the input. If, during processing, the transducer is\n * given a wrapped `reduced()` input iterable, it will still be\n * processed as normal, but then immediately triggers early termination\n * by wrapping its own result in `reduced()`. E.g. this behavior allows\n * a `mapcat()` user functions to benefit from `reduced` results.\n *\n * ```\n * [...iterator(comp(map((x) => [x, x]), cat()), [1, 2, 3, 4])]\n * // [ 1, 1, 2, 2, 3, 3, 4, 4 ]\n *\n * [...iterator(\n *   comp(\n *     mapIndexed((i, x) => [[i], [x, x]]),\n *     cat(),\n *     cat()\n *   ),\n *   \"abc\"\n * )]\n * // [ 0, 'a', 'a', 1, 'b', 'b', 2, 'c', 'c' ]\n *\n * [...mapcat((x)=>(x > 1 ? reduced([x, x]) : [x, x]), [1, 2, 3, 4])]\n * // [ 1, 1, 2, 2 ]\n * ```\n *\n * @see thi.ng/transducers/iter/concat\n * @see thi.ng/transducers/xform/mapcat\n */\nexport const cat = () => (rfn) => {\n    const r = rfn[2];\n    return compR(rfn, (acc, x) => {\n        if (x) {\n            for (let y of unreduced(x)) {\n                acc = r(acc, y);\n                if (isReduced(acc)) {\n                    break;\n                }\n            }\n        }\n        return isReduced(x) ? ensureReduced(acc) : acc;\n    });\n};\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nimport { ensureReduced } from \"../reduced\";\nexport function converge(...args) {\n    return ($iter(converge, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const pred = args[0];\n            let prev = SEMAPHORE;\n            let done = false;\n            return compR(rfn, (acc, x) => {\n                if (done || (prev !== SEMAPHORE && pred(prev, x))) {\n                    done = true;\n                    return ensureReduced(r(acc, x));\n                }\n                prev = x;\n                return r(acc, x);\n            });\n        }));\n}\n","import { isReduced } from \"../reduced\";\nexport function range(from, to, step) {\n    return new Range(from, to, step);\n}\n/**\n * Simple class wrapper around given range interval and implementing\n * `Iterable` and `IReducible` interfaces, the latter is used to\n * accelerate use with `reduce`.\n */\nexport class Range {\n    constructor(from, to, step) {\n        if (from === undefined) {\n            from = 0;\n            to = Infinity;\n        }\n        else if (to === undefined) {\n            to = from;\n            from = 0;\n        }\n        step = step === undefined ? (from < to ? 1 : -1) : step;\n        this.from = from;\n        this.to = to;\n        this.step = step;\n    }\n    *[Symbol.iterator]() {\n        const step = this.step;\n        const to = this.to;\n        let from = this.from;\n        if (step > 0) {\n            while (from < to) {\n                yield from;\n                from += step;\n            }\n        }\n        else if (step < 0) {\n            while (from > to) {\n                yield from;\n                from += step;\n            }\n        }\n    }\n    $reduce(rfn, acc) {\n        const step = this.step;\n        if (step > 0) {\n            for (let i = this.from, n = this.to; i < n && !isReduced(acc); i += step) {\n                acc = rfn(acc, i);\n            }\n        }\n        else {\n            for (let i = this.from, n = this.to; i > n && !isReduced(acc); i += step) {\n                acc = rfn(acc, i);\n            }\n        }\n        return acc;\n    }\n}\n","import { illegalArity } from \"@thi.ng/errors\";\nimport { range } from \"./range\";\nexport function* range2d(...args) {\n    let fromX, toX, stepX;\n    let fromY, toY, stepY;\n    switch (args.length) {\n        case 6:\n            stepX = args[4];\n            stepY = args[5];\n        case 4:\n            [fromX, toX, fromY, toY] = args;\n            break;\n        case 2:\n            [toX, toY] = args;\n            fromX = fromY = 0;\n            break;\n        default:\n            illegalArity(args.length);\n    }\n    const rx = range(fromX, toX, stepX);\n    for (let y of range(fromY, toY, stepY)) {\n        for (let x of rx) {\n            yield [x, y];\n        }\n    }\n}\n","export function* zip(...src) {\n    const iters = src.map((s) => s[Symbol.iterator]());\n    while (true) {\n        const tuple = [];\n        for (let i of iters) {\n            let v = i.next();\n            if (v.done) {\n                return;\n            }\n            tuple.push(v.value);\n        }\n        yield tuple;\n    }\n}\n","import { illegalArgs } from \"@thi.ng/errors\";\nimport { range } from \"../iter/range\";\nimport { range2d } from \"../iter/range2d\";\nimport { zip } from \"../iter/zip\";\nimport { iterator1 } from \"../iterator\";\nimport { add } from \"../rfn/add\";\nimport { transduce } from \"../transduce\";\nimport { map } from \"./map\";\nexport const buildKernel1d = (weights, w) => {\n    const w2 = w >> 1;\n    return [...zip(weights, range(-w2, w2 + 1))];\n};\nexport const buildKernel2d = (weights, w, h) => {\n    const w2 = w >> 1;\n    const h2 = h >> 1;\n    return [...zip(weights, range2d(-w2, w2 + 1, -h2, h2 + 1))];\n};\nconst kernelLookup1d = (src, x, width, wrap, border) => wrap\n    ? ({ 0: w, 1: ox }) => {\n        const xx = x < -ox ? width + ox : x >= width - ox ? ox - 1 : x + ox;\n        return w * src[xx];\n    }\n    : ({ 0: w, 1: ox }) => {\n        return x < -ox || x >= width - ox ? border : w * src[x + ox];\n    };\nconst kernelLookup2d = (src, x, y, width, height, wrap, border) => wrap\n    ? ({ 0: w, 1: { 0: ox, 1: oy } }) => {\n        const xx = x < -ox ? width + ox : x >= width - ox ? ox - 1 : x + ox;\n        const yy = y < -oy ? height + oy : y >= height - oy ? oy - 1 : y + oy;\n        return w * src[yy * width + xx];\n    }\n    : ({ 0: w, 1: { 0: ox, 1: oy } }) => {\n        return x < -ox || y < -oy || x >= width - ox || y >= height - oy\n            ? border\n            : w * src[(y + oy) * width + x + ox];\n    };\nconst kernelError = () => illegalArgs(`no kernel or kernel config`);\nexport function convolve1d(opts, indices) {\n    if (indices) {\n        return iterator1(convolve1d(opts), indices);\n    }\n    const { src, width } = opts;\n    const wrap = opts.wrap !== false;\n    const border = opts.border || 0;\n    const rfn = opts.reduce || add;\n    let kernel = opts.kernel;\n    if (!kernel) {\n        !(opts.weights && opts.kwidth) && kernelError();\n        kernel = buildKernel1d(opts.weights, opts.kwidth);\n    }\n    return map((p) => transduce(map(kernelLookup1d(src, p, width, wrap, border)), rfn(), kernel));\n}\nexport function convolve2d(opts, indices) {\n    if (indices) {\n        return iterator1(convolve2d(opts), indices);\n    }\n    const { src, width, height } = opts;\n    const wrap = opts.wrap !== false;\n    const border = opts.border || 0;\n    const rfn = opts.reduce || add;\n    let kernel = opts.kernel;\n    if (!kernel) {\n        !(opts.weights && opts.kwidth && opts.kheight) && kernelError();\n        kernel = buildKernel2d(opts.weights, opts.kwidth, opts.kheight);\n    }\n    return map((p) => transduce(map(kernelLookup2d(src, p[0], p[1], width, height, wrap, border)), rfn(), kernel));\n}\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function dedupe(...args) {\n    return ($iter(dedupe, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const equiv = args[0];\n            let prev = SEMAPHORE;\n            return compR(rfn, equiv\n                ? (acc, x) => {\n                    acc =\n                        prev !== SEMAPHORE && equiv(prev, x)\n                            ? acc\n                            : r(acc, x);\n                    prev = x;\n                    return acc;\n                }\n                : (acc, x) => {\n                    acc = prev === x ? acc : r(acc, x);\n                    prev = x;\n                    return acc;\n                });\n        }));\n}\n","import { delayed as _delayed } from \"@thi.ng/compose\";\nimport { map } from \"./map\";\n/**\n * Yields transducer which wraps incoming values in promises, which each\n * resolve after specified delay time (in ms).\n *\n * **Only to be used in async contexts and NOT with `transduce`\n * directly.**\n *\n * @param t\n */\nexport const delayed = (t) => map((x) => _delayed(x, t));\n","import { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function distinct(...args) {\n    return ($iter(distinct, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const opts = (args[0] || {});\n            const key = opts.key;\n            const seen = (opts.cache || (() => new Set()))();\n            return compR(rfn, key\n                ? (acc, x) => {\n                    const k = key(x);\n                    return !seen.has(k) ? (seen.add(k), r(acc, x)) : acc;\n                }\n                : (acc, x) => !seen.has(x) ? (seen.add(x), r(acc, x)) : acc);\n        }));\n}\n","import { compR } from \"../func/compr\";\nimport { iterator1 } from \"../iterator\";\nexport function throttle(pred, src) {\n    return src\n        ? iterator1(throttle(pred), src)\n        : (rfn) => {\n            const r = rfn[2];\n            const _pred = pred();\n            return compR(rfn, (acc, x) => (_pred(x) ? r(acc, x) : acc));\n        };\n}\n","import { throttle } from \"./throttle\";\nimport { iterator1 } from \"../iterator\";\nexport function dropNth(n, src) {\n    if (src) {\n        return iterator1(dropNth(n), src);\n    }\n    n = Math.max(0, n - 1);\n    return throttle(() => {\n        let skip = n;\n        return () => (skip-- > 0 ? true : ((skip = n), false));\n    });\n}\n","import { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function dropWhile(...args) {\n    return ($iter(dropWhile, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const pred = args[0];\n            let ok = true;\n            return compR(rfn, (acc, x) => ((ok = ok && pred(x)) ? acc : r(acc, x)));\n        }));\n}\n","import { compR } from \"../func/compr\";\nimport { iterator1 } from \"../iterator\";\nexport function drop(n, src) {\n    return src\n        ? iterator1(drop(n), src)\n        : (rfn) => {\n            const r = rfn[2];\n            let m = n;\n            return compR(rfn, (acc, x) => (m > 0 ? (m--, acc) : r(acc, x)));\n        };\n}\n","import { compR } from \"../func/compr\";\nimport { iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function duplicate(n = 1, src) {\n    return src\n        ? iterator(duplicate(n), src)\n        : (rfn) => {\n            const r = rfn[2];\n            return compR(rfn, (acc, x) => {\n                for (let i = n; i >= 0 && !isReduced(acc); i--) {\n                    acc = r(acc, x);\n                }\n                return acc;\n            });\n        };\n}\n","import { iterator1 } from \"../iterator\";\nimport { compR } from \"../func/compr\";\nexport function filter(pred, src) {\n    return src\n        ? iterator1(filter(pred), src)\n        : (rfn) => {\n            const r = rfn[2];\n            return compR(rfn, (acc, x) => (pred(x) ? r(acc, x) : acc));\n        };\n}\n","import { compare, compareNumAsc } from \"@thi.ng/compare\";\n/**\n * Returns the supposed index of `x` in pre-sorted array-like collection\n * `buf`. If `x` can't be found, returns `-index-1`, representing the\n * negative of the index, were `x` to be inserted into `buf`. E.g if the\n * return value is -3, `x` would appear/insert at index 2.\n *\n * ```\n * binarySearch([2, 4, 6], 5);\n * // -3\n * ```\n *\n * The optional `key` function is used to obtain the actual sort value\n * of `x` and each array item (default: identity).\n *\n * The optional `cmp` comparator (default: thi.ng/compare) is then used\n * to identify the index of `x`. The sort order of `buf` MUST be\n * compatible with that of `cmp`.\n *\n * @param buf\n * @param x\n * @param key\n * @param cmp\n */\nexport const binarySearch = (buf, x, key = (x) => x, cmp = compare) => {\n    const kx = key(x);\n    let low = 0;\n    let high = buf.length - 1;\n    while (low <= high) {\n        const mid = (low + high) >>> 1;\n        const c = cmp(key(buf[mid]), kx);\n        if (c < 0) {\n            low = mid + 1;\n        }\n        else if (c > 0) {\n            high = mid - 1;\n        }\n        else {\n            return mid;\n        }\n    }\n    return -low - 1;\n};\n/**\n * Similar to `binarySearch()`, but optimized for numeric arrays and\n * supporting custom comparators (default: `compareNumAsc` from\n * thi.ng/compare pkg).\n *\n * @param buf\n * @param x\n * @param cmp\n */\nexport const binarySearchNumeric = (buf, x, cmp = compareNumAsc) => {\n    let low = 0;\n    let high = buf.length - 1;\n    while (low <= high) {\n        const mid = (low + high) >>> 1;\n        const c = cmp(buf[mid], x);\n        if (c < 0) {\n            low = mid + 1;\n        }\n        else if (c > 0) {\n            high = mid - 1;\n        }\n        else {\n            return mid;\n        }\n    }\n    return -low - 1;\n};\n","const OBJP = Object.getPrototypeOf({});\nconst FN = \"function\";\nconst STR = \"string\";\nexport const equiv = (a, b) => {\n    let proto;\n    if (a === b) {\n        return true;\n    }\n    if (a != null) {\n        if (typeof a.equiv === FN) {\n            return a.equiv(b);\n        }\n    }\n    else {\n        return a == b;\n    }\n    if (b != null) {\n        if (typeof b.equiv === FN) {\n            return b.equiv(a);\n        }\n    }\n    else {\n        return a == b;\n    }\n    if (typeof a === STR || typeof b === STR) {\n        return false;\n    }\n    if (((proto = Object.getPrototypeOf(a)), proto == null || proto === OBJP) &&\n        ((proto = Object.getPrototypeOf(b)), proto == null || proto === OBJP)) {\n        return equivObject(a, b);\n    }\n    if (typeof a !== FN &&\n        a.length !== undefined &&\n        typeof b !== FN &&\n        b.length !== undefined) {\n        return equivArrayLike(a, b);\n    }\n    if (a instanceof Set && b instanceof Set) {\n        return equivSet(a, b);\n    }\n    if (a instanceof Map && b instanceof Map) {\n        return equivMap(a, b);\n    }\n    if (a instanceof Date && b instanceof Date) {\n        return a.getTime() === b.getTime();\n    }\n    if (a instanceof RegExp && b instanceof RegExp) {\n        return a.toString() === b.toString();\n    }\n    // NaN\n    return a !== a && b !== b;\n};\nexport const equivArrayLike = (a, b, _equiv = equiv) => {\n    let l = a.length;\n    if (l === b.length) {\n        while (--l >= 0 && _equiv(a[l], b[l]))\n            ;\n    }\n    return l < 0;\n};\nexport const equivSet = (a, b, _equiv = equiv) => a.size === b.size && _equiv([...a.keys()].sort(), [...b.keys()].sort());\nexport const equivMap = (a, b, _equiv = equiv) => a.size === b.size && _equiv([...a].sort(), [...b].sort());\nexport const equivObject = (a, b, _equiv = equiv) => {\n    if (Object.keys(a).length !== Object.keys(b).length) {\n        return false;\n    }\n    for (let k in a) {\n        if (!b.hasOwnProperty(k) || !_equiv(a[k], b[k])) {\n            return false;\n        }\n    }\n    return true;\n};\n","import { equiv as _eq } from \"@thi.ng/equiv\";\n/**\n * Returns true if the last items of `buf` are the same items as in\n * `needle`. This means `buf` should have at least the same length as\n * `needle` for this to be true.\n *\n * By default, uses thi.ng/equiv for equality checking.\n *\n * @see startsWith\n *\n * @param buf\n * @param needle\n * @param equiv\n */\nexport const endsWith = (buf, needle, equiv = _eq) => {\n    let i = buf.length;\n    let j = needle.length;\n    if (i < j)\n        return false;\n    while ((--i, --j >= 0 && equiv(buf[i], needle[j]))) { }\n    return j < 0;\n};\n","import { illegalArgs } from \"@thi.ng/errors\";\n/**\n * Attempts to obtain an iterator from `x` and throws error if `x` is\n * not iterable.\n *\n * @param x\n */\nexport const ensureIterable = (x) => {\n    (x == null || !x[Symbol.iterator]) &&\n        illegalArgs(`value is not iterable: ${x}`);\n    return x;\n};\n","import { isArray, isArrayLike } from \"@thi.ng/checks\";\nimport { ensureIterable } from \"./ensure-iterable\";\n/**\n * Helper function to avoid unnecessary copying if `x` is already an\n * array. First checks if `x` is an array and if so returns it. Else\n * attempts to obtain an iterator from `x` and if successful collects it\n * as array and returns it. Throws error if `x` isn't iterable.\n *\n * @param x\n */\nexport const ensureArray = (x) => isArray(x) ? x : [...ensureIterable(x)];\n/**\n * Similar to `ensureArray()`, but for `ArrayLike` types.\n *\n * @see ensureArray\n *\n * @param x\n */\nexport const ensureArrayLike = (x) => isArrayLike(x) ? x : [...ensureIterable(x)];\n","import { equiv as _equiv } from \"@thi.ng/equiv\";\n/**\n * Similar to `Array.find()`, but uses thi.ng/equiv as default\n * predicate.\n *\n * @param src\n * @param x\n * @param equiv\n */\nexport const find = (src, x, equiv = _equiv) => {\n    const i = findIndex(src, x, equiv);\n    return i !== -1 ? src[i] : undefined;\n};\n/**\n * Similar to `Array.findIndex()`, but uses thi.ng/equiv as default\n * predicate.\n *\n * @param src\n * @param x\n * @param equiv\n */\nexport const findIndex = (src, x, equiv = _equiv) => {\n    for (let i = src.length; --i >= 0;) {\n        if (equiv(x, src[i]))\n            return i;\n    }\n    return -1;\n};\n","import { equiv as _eq } from \"@thi.ng/equiv\";\n/**\n * Performs a fuzzy search of `query` in `domain` and returns `true` if\n * successful.\n *\n * The optional `equiv` predicate can be used to customize\n * item equality checking. Uses @thi.ng/equiv by default.\n *\n * Adapted and generalized from:\n * https://github.com/bevacqua/fufuzzyzzysearch (MIT)\n *\n * @see thi.ng/transducers/xform/filterFuzzy\n *\n * @param domain\n * @param query\n * @param equiv\n */\nexport const fuzzyMatch = (domain, query, equiv = _eq) => {\n    const nd = domain.length;\n    const nq = query.length;\n    if (nq > nd) {\n        return false;\n    }\n    if (nq === nd) {\n        return equiv(query, domain);\n    }\n    next: for (let i = 0, j = 0; i < nq; i++) {\n        const q = query[i];\n        while (j < nd) {\n            if (equiv(domain[j++], q)) {\n                continue next;\n            }\n        }\n        return false;\n    }\n    return true;\n};\n","import { compare } from \"@thi.ng/compare\";\n/**\n * Returns true if the given array and its elements in the selected\n * index range (entire array, by default) are in the order defined by\n * the given comparator (thi.ng/compare by default). Always returns\n * true, if effective index range (or array length) has less than two\n * elements. No bounds checking.\n *\n * ```\n * isSorted([3, 2, 1])\n * // false\n *\n * // w/ custom comparator\n * isSorted([3, 2, 1], (a, b) => b - a)\n * // true\n * ```\n *\n * @param arr\n * @param cmp\n * @param start\n * @param end\n */\nexport const isSorted = (arr, cmp = compare, start = 0, end = arr.length) => {\n    let prev = arr[start];\n    while (++start < end) {\n        const curr = arr[start];\n        if (cmp(prev, curr) > 0)\n            return false;\n        prev = curr;\n    }\n    return true;\n};\n","/**\n * Returns iterator of nullable array w/ optional index range support\n * and/or reverse iteration order. The default range covers the entire\n * array.\n *\n * @remarks\n * If `start` > `end`, yields values in reverse order. No bounds\n * checking is performed.\n *\n * @param buf - array or null\n * @param start - start index\n * @param end - end index (excluded)\n */\nexport function* arrayIterator(buf, start = 0, end) {\n    if (!buf)\n        return;\n    start = start;\n    end === undefined && (end = buf.length);\n    const step = start <= end ? 1 : -1;\n    for (; start !== end; start += step) {\n        yield buf[start];\n    }\n}\n","/**\n * Returns last element of given array or `undefined` if array is empty.\n *\n * @param x\n */\nexport const peek = (x) => x[x.length - 1];\n","/**\n * Swaps values at index `x`/`y` in given array.\n *\n * @param arr\n * @param x\n * @param y\n */\nexport const swap = (arr, x, y) => {\n    const t = arr[x];\n    arr[x] = arr[y];\n    arr[y] = t;\n};\n/**\n * Higher-order version of `swap` for swapping elements in multiple\n * arrays at once. The returned function takes the same args as `swap`,\n * and when called swaps 2 elements in the array given to that function\n * AND in the arrays given to `multiSwap` itself. Provides fast routes\n * for up to 3 extra arrays, then falls back to a loop-based approach.\n *\n * ```\n * a = [2, 1];\n * b = [20, 10];\n * c = [40, 30];\n *\n * ms = multiSwap(b, c);\n * ms(a, 0, 1);\n *\n * // a: [1, 2]\n * // b: [10, 20]\n * // c: [30, 40]\n * ```\n *\n * @param xs\n */\nexport const multiSwap = (...xs) => {\n    const [b, c, d] = xs;\n    const n = xs.length;\n    switch (n) {\n        case 0:\n            return swap;\n        case 1:\n            return (a, x, y) => {\n                swap(a, x, y);\n                swap(b, x, y);\n            };\n        case 2:\n            return (a, x, y) => {\n                swap(a, x, y);\n                swap(b, x, y);\n                swap(c, x, y);\n            };\n        case 3:\n            return (a, x, y) => {\n                swap(a, x, y);\n                swap(b, x, y);\n                swap(c, x, y);\n                swap(d, x, y);\n            };\n        default:\n            return (a, x, y) => {\n                swap(a, x, y);\n                for (let i = n; --i >= 0;)\n                    swap(xs[i], x, y);\n            };\n    }\n};\n","import { compare } from \"@thi.ng/compare\";\nimport { swap } from \"./swap\";\n// prettier-ignore\nexport function quickSort(arr, _cmp = compare, _swap = swap, start = 0, end = arr.length - 1) {\n    if (start < end) {\n        const pivot = arr[start + ((end - start) >> 1)];\n        let s = start - 1;\n        let e = end + 1;\n        while (true) {\n            do {\n                s++;\n            } while (_cmp(arr[s], pivot) < 0);\n            do {\n                e--;\n            } while (_cmp(arr[e], pivot) > 0);\n            if (s >= e)\n                break;\n            _swap(arr, s, e);\n        }\n        quickSort(arr, _cmp, _swap, start, e);\n        quickSort(arr, _cmp, _swap, e + 1, end);\n    }\n    return arr;\n}\n","const INV_MAX = 1 / 0xffffffff;\nexport class ARandom {\n    float(norm = 1) {\n        return this.int() * INV_MAX * norm;\n    }\n    norm(norm = 1) {\n        return this.int() * INV_MAX * norm * 2 - norm;\n    }\n    minmax(min, max) {\n        return this.float() * (max - min) + min;\n    }\n    /**\n     * Returns approx. normal distribution using CLT.\n     *\n     * https://en.wikipedia.org/wiki/Central_limit_theorem\n     *\n     * @param n\n     * @param offset\n     * @param scale\n     */\n    gaussian(n = 10, offset = -0.5, scale = 1) {\n        let sum = 0;\n        let m = n;\n        while (m-- > 0)\n            sum += this.float(scale);\n        return sum / n + offset;\n    }\n}\n","import { ARandom } from \"./api\";\n// https://github.com/thi-ng/ct-head/blob/master/random.h\n// https://gist.github.com/voidqk/d112165a26b45244a65298933c0349a4\nconst DEFAULT_SEED = 0xdecafbad;\nexport class Smush32 extends ARandom {\n    constructor(seed = DEFAULT_SEED) {\n        super();\n        this.buffer = new Uint32Array([seed, 0]);\n    }\n    copy() {\n        const gen = new Smush32();\n        gen.buffer.set(this.buffer);\n        return gen;\n    }\n    seed(s) {\n        this.buffer.set([s, 0]);\n        return this;\n    }\n    int() {\n        const b = this.buffer;\n        const m = 0x5bd1e995;\n        const k = (b[1]++ * m) >>> 0;\n        const s = (b[0] = ((k ^ (k >> 24) ^ ((b[0] * m) >>> 0)) * m) >>> 0);\n        return (s ^ (s >>> 13)) >>> 0;\n    }\n}\n","import { ARandom } from \"./api\";\nconst random = Math.random;\nexport class SystemRandom extends ARandom {\n    int() {\n        return (random() * 0xffffffff) >>> 0;\n    }\n    float(norm = 1) {\n        return random() * norm;\n    }\n}\nexport const SYSTEM = new SystemRandom();\n","import { ARandom } from \"./api\";\n// https://en.wikipedia.org/wiki/Xorshift\nconst DEFAULT_SEED = [0xdecafbad, 0x2fa9d75b, 0xe41f67e3, 0x5c83ec1a];\nexport class XorShift128 extends ARandom {\n    constructor(seed = DEFAULT_SEED) {\n        super();\n        this.buffer = new Uint32Array(4);\n        this.seed(seed);\n    }\n    copy() {\n        return new XorShift128(this.buffer);\n    }\n    bytes() {\n        return new Uint8Array(this.buffer.buffer);\n    }\n    seed(seed) {\n        this.buffer.set(seed);\n        return this;\n    }\n    int() {\n        const s = this.buffer;\n        let t = s[3];\n        let w;\n        t ^= t << 11;\n        t ^= t >>> 8;\n        s[3] = s[2];\n        s[2] = s[1];\n        w = s[1] = s[0];\n        return (s[0] = (t ^ w ^ (w >>> 19)) >>> 0);\n    }\n}\n","import { ARandom } from \"./api\";\n// https://en.wikipedia.org/wiki/Xorshift#xorwow\nconst DEFAULT_SEED = [\n    0xdecafbad,\n    0x2fa9d75b,\n    0xe41f67e3,\n    0x5c83ec1a,\n    0xf69a5c71\n];\nexport class XorWow extends ARandom {\n    constructor(seed = DEFAULT_SEED) {\n        super();\n        this.buffer = new Uint32Array(5);\n        this.seed(seed);\n    }\n    copy() {\n        return new XorWow(this.buffer);\n    }\n    seed(seed) {\n        this.buffer.set(seed);\n        return this;\n    }\n    bytes() {\n        return new Uint8Array(this.buffer.buffer);\n    }\n    int() {\n        const s = this.buffer;\n        let t = s[3];\n        let w;\n        t ^= t >>> 2;\n        t ^= t << 1;\n        s[3] = s[2];\n        s[2] = s[1];\n        w = s[1] = s[0];\n        t ^= w;\n        t ^= w << 4;\n        s[0] = t;\n        return (t + (s[4] += 0x587c5)) >>> 0;\n    }\n}\n","import { ARandom } from \"./api\";\n// https://github.com/MersenneTwister-Lab/XSadd/blob/master/xsadd.h\nconst DEFAULT_SEED = 0xdecafbad;\nexport class XsAdd extends ARandom {\n    constructor(seed = DEFAULT_SEED) {\n        super();\n        this.buffer = new Uint32Array(4);\n        this.seed(seed);\n    }\n    bytes() {\n        return new Uint8Array(this.buffer.buffer);\n    }\n    copy() {\n        const gen = new XsAdd();\n        gen.buffer.set(this.buffer);\n        return gen;\n    }\n    seed(seed) {\n        const s = this.buffer;\n        s.set([seed, 0, 0, 0]);\n        for (let j = 0, i = 1; i < 8; j = i++) {\n            let x = (s[j & 3] ^ (s[j & 3] >>> 30)) >>> 0;\n            x = (0x8965 * x + (((0x6c07 * x) & 0xffff) << 16)) >>> 0;\n            s[i & 3] ^= (i + x) >>> 0;\n        }\n        return this;\n    }\n    int() {\n        const s = this.buffer;\n        let t = s[0];\n        t ^= t << 15;\n        t ^= t >>> 18;\n        t ^= s[3] << 11;\n        s[0] = s[1];\n        s[1] = s[2];\n        s[2] = s[3];\n        s[3] = t;\n        return (t + s[2]) >>> 0;\n    }\n}\n","import { SYSTEM } from \"./system\";\n/**\n * Generates and returns a random string of `len` characters (default\n * 4), plus optional given `prefix` and using only provided `syms`\n * characters (default lowercase a-z).\n *\n * ```\n * randomID()\n * \"qgdt\"\n *\n * randomID(8, \"id-\", \"0123456789ABCDEF\")\n * \"id-94EF6E1A\"\n * ```\n *\n * @param len\n * @param prefix\n * @param syms\n * @param rnd\n */\nexport const randomID = (len = 4, prefix = \"\", syms = \"abcdefghijklmnopqrstuvwxyz\", rnd = SYSTEM) => {\n    for (const n = syms.length; --len >= 0;) {\n        prefix += syms[rnd.float(n) | 0];\n    }\n    return prefix;\n};\n","import { assert } from \"@thi.ng/api\";\nimport { SYSTEM } from \"./system\";\n/**\n * Returns a no-arg function which produces a random choice of given\n * weighted `choices` and using given `IRandom` instance (default:\n * `SYSTEM`). If `weights` are given, it must be the same size as\n * `choices`. If omitted, each choice will have same probability.\n *\n * https://www.electricmonk.nl/log/2009/12/23/weighted-random-distribution/\n *\n * @param choices\n * @param weights\n */\nexport const weightedRandom = (choices, weights, rnd = SYSTEM) => {\n    const n = choices.length;\n    assert(n > 0, \"no choices given\");\n    const opts = choices\n        .map(weights\n        ? (x, i) => [x, weights[i]]\n        : (x) => [x, 1])\n        .sort((a, b) => b[1] - a[1]);\n    const total = opts.reduce((acc, o) => acc + o[1], 0);\n    assert(total > 0, \"no choices given\");\n    return () => {\n        const r = rnd.float(total);\n        let sum = total;\n        for (let i = 0; i < n; i++) {\n            sum -= opts[i][1];\n            if (sum <= r) {\n                return opts[i][0];\n            }\n        }\n        return undefined;\n    };\n};\n","export * from \"./api\";\nexport * from \"./smush32\";\nexport * from \"./system\";\nexport * from \"./xorshift128\";\nexport * from \"./xorwow\";\nexport * from \"./xsadd\";\nexport * from \"./random-id\";\nexport * from \"./weighted-random\";\n","import { assert } from \"@thi.ng/api\";\nimport { SYSTEM } from \"@thi.ng/random\";\n/**\n * Shuffles the items in the given index range of array `buf` using\n * Fisher-yates and optional `rnd` PRNG. If neither `start` / `end` are\n * given, the entire array will be shuffled. Mutates original array.\n *\n * @param buf\n * @param n\n * @param rnd\n */\nexport const shuffleRange = (buf, start = 0, end = buf.length, rnd = SYSTEM) => {\n    assert(start >= 0 && end >= start && end <= buf.length, `illegal range ${start}..${end}`);\n    let n = end - start;\n    const l = n;\n    if (l > 1) {\n        while (--n >= 0) {\n            const a = (start + rnd.float(l)) | 0;\n            const b = (start + rnd.float(l)) | 0;\n            const t = buf[a];\n            buf[a] = buf[b];\n            buf[b] = t;\n        }\n    }\n    return buf;\n};\n/**\n * Applies `shuffleRange()` to the given array. If `n` is given, only\n * the first `n` items are shuffled. Mutates original array.\n *\n * @see shuffleRange\n *\n * @param buf\n * @param n\n * @param rnd\n */\nexport const shuffle = (buf, n = buf.length, rnd = SYSTEM) => shuffleRange(buf, 0, n, rnd);\n","import { equiv as _eq } from \"@thi.ng/equiv\";\n/**\n * Returns true if the first items of `buf` are the same items as in\n * `needle`. This means `buf` should have at least the same length as\n * `needle` for this to be true.\n *\n * By default, uses thi.ng/equiv for equality checking.\n *\n * @see endsWith\n *\n * @param buf\n * @param needle\n * @param equiv\n */\nexport const startsWith = (buf, needle, equiv = _eq) => {\n    let i = buf.length;\n    let j = needle.length;\n    if (i < j)\n        return false;\n    while (-j >= 0 && equiv(buf[j], needle[j])) { }\n    return j < 0;\n};\n","/**\n * Returns optimized function to immutably select, repeat, reshape and /\n * or reorder array / object values in the specified index order. Fast\n * paths for up to 8 indices are provided, before a loop based approach\n * is used.\n *\n * ```\n * swizzle([0, 0, 0])([1, 2, 3, 4])    // [ 1, 1, 1 ]\n * swizzle([1, 1, 3, 3])([1, 2, 3, 4]) // [ 2, 2, 4, 4 ]\n * swizzle([2, 0])([1, 2, 3])          // [ 3, 1 ]\n * ```\n *\n * Objects can be used as input to the generated function, but the\n * result will always be in array form.\n *\n * ```\n * swizzle([\"a\", \"c\", \"b\"])({a: 1, b: 2, c: 3}) // [ 1, 3, 2 ]\n * ```\n *\n * @param order indices\n */\nexport const swizzle = (order) => {\n    const [a, b, c, d, e, f, g, h] = order;\n    switch (order.length) {\n        case 0:\n            return () => [];\n        case 1:\n            return (x) => [x[a]];\n        case 2:\n            return (x) => [x[a], x[b]];\n        case 3:\n            return (x) => [x[a], x[b], x[c]];\n        case 4:\n            return (x) => [x[a], x[b], x[c], x[d]];\n        case 5:\n            return (x) => [x[a], x[b], x[c], x[d], x[e]];\n        case 6:\n            return (x) => [x[a], x[b], x[c], x[d], x[e], x[f]];\n        case 7:\n            return (x) => [x[a], x[b], x[c], x[d], x[e], x[f], x[g]];\n        case 8:\n            return (x) => [x[a], x[b], x[c], x[d], x[e], x[f], x[g], x[h]];\n        default:\n            return (x) => {\n                const res = [];\n                for (let i = order.length; --i >= 0;) {\n                    res[i] = x[order[i]];\n                }\n                return res;\n            };\n    }\n};\n","export * from \"./binary-search\";\nexport * from \"./ends-with\";\nexport * from \"./ensure-array\";\nexport * from \"./ensure-iterable\";\nexport * from \"./find\";\nexport * from \"./fuzzy-match\";\nexport * from \"./is-sorted\";\nexport * from \"./iterator\";\nexport * from \"./peek\";\nexport * from \"./quicksort\";\nexport * from \"./shuffle\";\nexport * from \"./starts-with\";\nexport * from \"./swap\";\nexport * from \"./swizzle\";\n","import { fuzzyMatch } from \"@thi.ng/arrays\";\nimport { $iter } from \"../iterator\";\nimport { filter } from \"./filter\";\nexport function filterFuzzy(...args) {\n    const iter = args.length > 1 && $iter(filterFuzzy, args);\n    if (iter) {\n        return iter;\n    }\n    const query = args[0];\n    const { key, equiv } = (args[1] || {});\n    return filter((x) => fuzzyMatch(key != null ? key(x) : x, query, equiv));\n}\n","import { compR } from \"../func/compr\";\nimport { iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function flattenWith(fn, src) {\n    return src\n        ? iterator(flattenWith(fn), src)\n        : (rfn) => {\n            const reduce = rfn[2];\n            const flatten = (acc, x) => {\n                const xx = fn(x);\n                if (xx) {\n                    for (let y of xx) {\n                        acc = flatten(acc, y);\n                        if (isReduced(acc)) {\n                            break;\n                        }\n                    }\n                    return acc;\n                }\n                return reduce(acc, x);\n            };\n            return compR(rfn, flatten);\n        };\n}\n","import { flattenWith } from \"./flatten-with\";\nexport function flatten(src) {\n    return flattenWith((x) => x != null && x[Symbol.iterator] && typeof x !== \"string\"\n        ? x\n        : undefined, src);\n}\n","import { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function mapIndexed(...args) {\n    return ($iter(mapIndexed, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const fn = args[0];\n            let i = args[1] || 0;\n            return compR(rfn, (acc, x) => r(acc, fn(i++, x)));\n        }));\n}\n","import { $iter } from \"../iterator\";\nimport { mapIndexed } from \"./map-indexed\";\nexport function indexed(...args) {\n    const iter = $iter(indexed, args);\n    if (iter) {\n        return iter;\n    }\n    const from = args[0] || 0;\n    return mapIndexed((i, x) => [from + i, x]);\n}\n","import { compR } from \"../func/compr\";\nimport { iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function interleave(sep, src) {\n    return src\n        ? iterator(interleave(sep), src)\n        : (rfn) => {\n            const r = rfn[2];\n            const _sep = typeof sep === \"function\" ? sep : () => sep;\n            return compR(rfn, (acc, x) => {\n                acc = r(acc, _sep());\n                return isReduced(acc) ? acc : r(acc, x);\n            });\n        };\n}\n","import { comp as _comp } from \"@thi.ng/compose\";\nexport function comp(...fns) {\n    return _comp.apply(null, fns);\n}\n","/**\n * Yields sequence of `n+1` monotonically increasing numbers in the\n * closed interval (0.0 .. 1.0). If `n <= 0`, yields nothing.\n *\n * ```\n * [...normRange(4)]\n * // [0, 0.25, 0.5, 0.75, 1.0]\n * ```\n *\n * @param n number of steps\n * @param inclLast include last value (i.e. `1.0`)\n */\nexport function* normRange(n, inclLast = true) {\n    if (n > 0) {\n        for (let i = 0, m = inclLast ? n + 1 : n; i < m; i++) {\n            yield i / n;\n        }\n    }\n}\n","import { comp } from \"../func/comp\";\nimport { iterator } from \"../iterator\";\nimport { cat } from \"./cat\";\nimport { map } from \"./map\";\nexport function mapcat(fn, src) {\n    return src ? iterator(mapcat(fn), src) : comp(map(fn), cat());\n}\n","import { $iter, iterator } from \"../iterator\";\nexport function partition(...args) {\n    const iter = $iter(partition, args, iterator);\n    if (iter) {\n        return iter;\n    }\n    let size = args[0], all, step;\n    if (typeof args[1] == \"number\") {\n        step = args[1];\n        all = args[2];\n    }\n    else {\n        step = size;\n        all = args[1];\n    }\n    return ([init, complete, reduce]) => {\n        let buf = [];\n        let skip = 0;\n        return [\n            init,\n            (acc) => {\n                if (all && buf.length > 0) {\n                    acc = reduce(acc, buf);\n                    buf = [];\n                }\n                return complete(acc);\n            },\n            (acc, x) => {\n                if (skip <= 0) {\n                    if (buf.length < size) {\n                        buf.push(x);\n                    }\n                    if (buf.length === size) {\n                        acc = reduce(acc, buf);\n                        buf = step < size ? buf.slice(step) : [];\n                        skip = step - size;\n                    }\n                }\n                else {\n                    skip--;\n                }\n                return acc;\n            }\n        ];\n    };\n}\n","import { comp } from \"../func/comp\";\nimport { normRange } from \"../iter/norm-range\";\nimport { iterator } from \"../iterator\";\nimport { map } from \"./map\";\nimport { mapcat } from \"./mapcat\";\nimport { partition } from \"./partition\";\n// prettier-ignore\nexport function interpolate(fn, window, n, src) {\n    return src\n        ? iterator(interpolate(fn, window, n), src)\n        : comp(partition(window, 1), mapcat((chunk) => map((t) => fn(chunk, t), normRange(n, false))));\n}\n","export const PI = Math.PI;\nexport const TAU = PI * 2;\nexport const HALF_PI = PI / 2;\nexport const THIRD_PI = PI / 3;\nexport const QUARTER_PI = PI / 4;\nexport const SIXTH_PI = PI / 6;\nexport const INV_PI = 1 / PI;\nexport const INV_TAU = 1 / TAU;\nexport const INV_HALF_PI = 1 / HALF_PI;\nexport const DEG2RAD = PI / 180;\nexport const RAD2DEG = 180 / PI;\nexport const PHI = (1 + Math.sqrt(5)) / 2;\nexport const SQRT2 = Math.SQRT2;\nexport const SQRT3 = Math.sqrt(3);\nexport const SQRT2_2 = SQRT2 / 2;\nexport const SQRT2_3 = SQRT3 / 2;\nexport const THIRD = 1 / 3;\nexport const TWO_THIRD = 2 / 3;\nexport const SIXTH = 1 / 6;\nexport let EPS = 1e-6;\nexport var Crossing;\n(function (Crossing) {\n    /**\n     * lines A & B are equal\n     */\n    Crossing[Crossing[\"EQUAL\"] = 0] = \"EQUAL\";\n    /**\n     * lines A & B are flat (all same values)\n     */\n    Crossing[Crossing[\"FLAT\"] = 1] = \"FLAT\";\n    /**\n     * line A crossed under B\n     */\n    Crossing[Crossing[\"UNDER\"] = 2] = \"UNDER\";\n    /**\n     * line A crossed over B\n     */\n    Crossing[Crossing[\"OVER\"] = 3] = \"OVER\";\n    Crossing[Crossing[\"OTHER\"] = 4] = \"OTHER\";\n})(Crossing || (Crossing = {}));\n","import { EPS } from \"./api\";\nexport const absDiff = (x, y) => Math.abs(x - y);\nexport const sign = (x, eps = EPS) => (x > eps ? 1 : x < -eps ? -1 : 0);\n","import { DEG2RAD, HALF_PI, INV_HALF_PI, PI, RAD2DEG, TAU } from \"./api\";\n/**\n * Returns vector of `[sin(theta)*n, cos(theta)*n]`.\n *\n * @param theta\n * @param n\n */\nexport const sincos = (theta, n = 1) => [\n    Math.sin(theta) * n,\n    Math.cos(theta) * n\n];\n/**\n * Returns vector of `[cos(theta)*n, sin(theta)*n]`.\n *\n * @param theta\n * @param n\n */\nexport const cossin = (theta, n = 1) => [\n    Math.cos(theta) * n,\n    Math.sin(theta) * n\n];\n/**\n * Projects `theta` into [0 .. 2] interval.\n *\n * @param theta\n */\nexport const absTheta = (theta) => ((theta %= TAU), theta < 0 ? TAU + theta : theta);\nexport const absInnerAngle = (theta) => ((theta = Math.abs(theta)), theta > PI ? TAU - theta : theta);\n/**\n * Returns smallest absolute angle difference between `a` and `b`.\n * Result will be in [0 .. ] interval.\n *\n * @param a\n * @param b\n */\nexport const angleDist = (a, b) => absInnerAngle(absTheta((b % TAU) - (a % TAU)));\n/**\n * Like `Math.atan2`, but always returns angle in [0 .. TAU) interval.\n *\n * @param y\n * @param x\n */\nexport const atan2Abs = (y, x) => absTheta(Math.atan2(y, x));\n/**\n * Returns quadrant ID (0-3) of given angle (in radians).\n *\n * @param theta\n */\nexport const quadrant = (theta) => (absTheta(theta) * INV_HALF_PI) | 0;\n/**\n * Converts angle to degrees.\n *\n * @param theta angle in radians\n */\nexport const deg = (theta) => theta * RAD2DEG;\n/**\n * Converts angle to radians.\n *\n * @param theta angle in degrees\n */\nexport const rad = (theta) => theta * DEG2RAD;\n/**\n * Cosecant. Approaches `Infinity` for `theta` near multiples of .\n *\n * @param theta angle in radians\n */\nexport const csc = (theta) => 1 / Math.sin(theta);\n/**\n * Secant. Approaches `Infinity` for `theta` near /2  n\n *\n * @param theta angle in radians\n */\nexport const sec = (theta) => 1 / Math.cos(theta);\n/**\n * Cotangent. Approaches `Infinity` for `theta` near multiples of .\n *\n * @param theta angle in radians\n */\nexport const cot = (theta) => 1 / Math.tan(theta);\n/**\n * Law of Cosines. Takes length of two sides of a triangle and the inner\n * angle (in radians) between them. Returns length of third side.\n *\n * @param a\n * @param b\n * @param gamma\n */\nexport const loc = (a, b, gamma) => Math.sqrt(a * a + b * b - 2 * a * b * Math.cos(gamma));\n/**\n * Approximates cos(x) for x in [-1,1]\n *\n * @param x\n */\nexport const normCos = (x) => {\n    const x2 = x * x;\n    return 1.0 + x2 * (-4 + 2 * x2);\n};\nconst __fastCos = (x) => {\n    const x2 = x * x;\n    return 0.99940307 + x2 * (-0.49558072 + 0.03679168 * x2);\n};\n/**\n * Fast cosine approximation using `normCos()` (polynomial). Max. error\n * ~0.00059693\n *\n * In [0 .. 2] interval, approx. 18-20% faster than `Math.cos` on V8.\n *\n * @param theta in radians\n */\nexport const fastCos = (theta) => {\n    theta %= TAU;\n    theta < 0 && (theta = -theta);\n    switch ((theta * INV_HALF_PI) | 0) {\n        case 0:\n            return __fastCos(theta);\n        case 1:\n            return -__fastCos(PI - theta);\n        case 2:\n            return -__fastCos(theta - PI);\n        default:\n            return __fastCos(TAU - theta);\n    }\n};\n/**\n * @see fastCos\n *\n * @param theta in radians\n */\nexport const fastSin = (theta) => fastCos(HALF_PI - theta);\n","import { EPS } from \"./api\";\nconst abs = Math.abs;\nconst max = Math.max;\n/**\n * Checks if `|a - b| <= ` and adapts given epsilon value to the given\n * arguments:\n *\n *  is factored with the largest absolute value of `a` or `b` (but\n * never lesser than the given `eps` value):\n *\n * ` =  * max(1, |a|, |b|)`\n *\n * @param a left value\n * @param b right value\n * @param eps epsilon / tolerance, default `1e-6`\n */\nexport const eqDelta = (a, b, eps = EPS) => abs(a - b) <= eps * max(1, abs(a), abs(b));\n/**\n * Similar to `eqDelta()`, but used given `eps` as is.\n *\n * @param a left value\n * @param b right value\n * @param eps epsilon / tolerance, default `1e-6`\n */\nexport const eqDeltaFixed = (a, b, eps = EPS) => abs(a - b) <= eps;\n","import { EPS } from \"./api\";\nimport { eqDelta } from \"./eqdelta\";\n/**\n * Returns true if line A rises up over B.\n *\n * ```\n * b1  a2\n *   \\/\n *   /\\\n * a1  b2\n * ```\n *\n * @param a1\n * @param a2\n * @param b1\n * @param b2\n */\nexport const isCrossOver = (a1, a2, b1, b2) => a1 < b1 && a2 > b2;\n/**\n * Returns true if line A rises up over B.\n *\n * ```\n * a1  b2\n *   \\/\n *   /\\\n * b1  a2\n * ```\n *\n * @param a1\n * @param a2\n * @param b1\n * @param b2\n */\nexport const isCrossUnder = (a1, a2, b1, b2) => a1 > b1 && a2 < b2;\n/**\n * Returns `Crossing` classifier indicating the relationship of line A\n * to line B. The optional epsilon value is used to determine if both\n * lines are considered equal or flat.\n *\n * @see isCrossUp\n * @see isCrossDown\n * @see Crossing\n *\n * @param a1\n * @param a2\n * @param b1\n * @param b2\n * @param eps\n */\nexport const classifyCrossing = (a1, a2, b1, b2, eps = EPS) => {\n    if (isCrossOver(a1, a2, b1, b2)) {\n        return 3 /* OVER */;\n    }\n    else if (isCrossUnder(a1, a2, b1, b2)) {\n        return 2 /* UNDER */;\n    }\n    return eqDelta(a1, b1, eps) && eqDelta(a2, b2, eps)\n        ? eqDelta(a1, b2, eps)\n            ? 1 /* FLAT */\n            : 0 /* EQUAL */\n        : 4 /* OTHER */;\n};\n","/**\n * Returns true if `b` is a local minima, i.e. iff a > b and b < c.\n *\n * @param a\n * @param b\n * @param c\n */\nexport const isMinima = (a, b, c) => a > b && b < c;\n/**\n * Returns true if `b` is a local maxima, i.e. iff a < b and b > c.\n *\n * @param a\n * @param b\n * @param c\n */\nexport const isMaxima = (a, b, c) => a < b && b > c;\nconst index = (pred, values, from = 0, to = values.length) => {\n    to--;\n    for (let i = from + 1; i < to; i++) {\n        if (pred(values[i - 1], values[i], values[i + 1])) {\n            return i;\n        }\n    }\n    return -1;\n};\n/**\n * Returns index of the first local & internal minima found in given\n * `values` array, or -1 if no such minima exists. The search range can\n * be optionally defined via semi-open [from, to) index interval.\n *\n * @param values\n * @param from\n * @param to\n */\nexport const minimaIndex = (values, from = 0, to = values.length) => index(isMinima, values, from, to);\n/**\n * Returns index of the first local & internal maxima found in given\n * `values` array, or -1 if no such maxima exists. The search range can\n * be optionally defined via semi-open [from, to) index interval.\n *\n * @param values\n * @param from\n * @param to\n */\nexport const maximaIndex = (values, from = 0, to = values.length) => index(isMaxima, values, from, to);\nfunction* indices(fn, vals, from = 0, to = vals.length) {\n    while (from < to) {\n        const i = fn(vals, from, to);\n        if (i < 0)\n            return;\n        yield i;\n        from = i + 1;\n    }\n}\n/**\n * Returns an iterator yielding all minima indices in given `values`\n * array. The search range can be optionally defined via semi-open\n * [from, to) index interval.\n *\n * @param values\n * @param from\n * @param to\n */\nexport const minimaIndices = (values, from = 0, to = values.length) => indices(minimaIndex, values, from, to);\n/**\n * Returns an iterator yielding all maxima indices in given `values`\n * array. The search range can be optionally defined via semi-open\n * [from, to) index interval.\n *\n * @param values\n * @param from\n * @param to\n */\nexport const maximaIndices = (values, from = 0, to = values.length) => indices(minimaIndex, values, from, to);\n","/**\n * Clamps value `x` to given closed interval.\n *\n * @param x value to clamp\n * @param min lower bound\n * @param max upper bound\n */\nexport const clamp = (x, min, max) => x < min ? min : x > max ? max : x;\nexport const clamp01 = (x) => (x < 0 ? 0 : x > 1 ? 1 : x);\nexport const clamp11 = (x) => (x < -1 ? -1 : x > 1 ? 1 : x);\nexport const wrap = (x, min, max) => x < min ? x - min + max : x >= max ? x - max + min : x;\nexport const wrap01 = (x) => (x < 0 ? x + 1 : x >= 1 ? x - 1 : x);\nexport const wrap11 = (x) => (x < -1 ? x + 2 : x >= 1 ? x - 2 : x);\nexport const min2id = (a, b) => (a <= b ? 0 : 1);\nexport const min3id = (a, b, c) => a <= b ? (a <= c ? 0 : 2) : b <= c ? 1 : 2;\nexport const min4id = (a, b, c, d) => a <= b\n    ? a <= c\n        ? a <= d\n            ? 0\n            : 3\n        : c <= d\n            ? 2\n            : 3\n    : b <= c\n        ? b <= d\n            ? 1\n            : 3\n        : c <= d\n            ? 2\n            : 3;\nexport const max2id = (a, b) => (a >= b ? 0 : 1);\nexport const max3id = (a, b, c) => a >= b ? (a >= c ? 0 : 2) : b >= c ? 1 : 2;\nexport const max4id = (a, b, c, d) => a >= b\n    ? a >= c\n        ? a >= d\n            ? 0\n            : 3\n        : c >= d\n            ? 2\n            : 3\n    : b >= c\n        ? b >= d\n            ? 1\n            : 3\n        : c >= d\n            ? 2\n            : 3;\n/**\n * See `smax()`.\n *\n * @param a\n * @param b\n * @param k smooth exponent (MUST be > 0)\n */\nexport const smin = (a, b, k) => smax(a, b, -k);\n/**\n * Smooth maximum. Note: Result values will be slightly larger than max\n * value near max(a,b) + eps due to exponential decay. Higher `k` values\n * reduce the error, but also reduce the smoothing. Recommended k=16.\n *\n * https://en.wikipedia.org/wiki/Smooth_maximum\n *\n * @param a\n * @param b\n * @param k smooth exponent (MUST be > 0)\n */\nexport const smax = (a, b, k) => {\n    const ea = Math.exp(a * k);\n    const eb = Math.exp(b * k);\n    return (a * ea + b * eb) / (ea + eb);\n};\n/**\n * Same as `smin(smax(x, min, k), max, k)`.\n *\n * @param x\n * @param min\n * @param max\n * @param k\n */\nexport const sclamp = (x, min, max, k) => smin(smax(x, min, k), max, k);\nexport const absMin = (a, b) => Math.abs(a) < Math.abs(b) ? a : b;\nexport const absMax = (a, b) => Math.abs(a) > Math.abs(b) ? a : b;\n/**\n * http://www.musicdsp.org/showone.php?id=203\n *\n * @param e\n * @param x\n */\nexport const foldback = (e, x) => x < -e || x > e ? Math.abs(Math.abs((x - e) % (4 * e)) - 2 * e) - e : x;\n/**\n * Returns true iff `x` is in closed interval `[min .. max]`\n *\n * @param x\n * @param min\n * @param max\n */\nexport const inRange = (x, min, max) => x >= min && x <= max;\n/**\n * Returns true iff `x` is in open interval `(min .. max)`\n *\n * @param x\n * @param min\n * @param max\n */\nexport const inOpenRange = (x, min, max) => x > min && x < max;\n","import { clamp01, clamp11 } from \"./interval\";\n/**\n * Returns normalized value of `x` WRT to interval `a .. b`. If `a`\n * equals `b`, returns 0.\n *\n * @param x\n * @param a\n * @param b\n */\nexport const norm = (x, a, b) => b !== a ? (x - a) / (b - a) : 0;\nexport const fit = (x, a, b, c, d) => c + (d - c) * norm(x, a, b);\nexport const fitClamped = (x, a, b, c, d) => c + (d - c) * clamp01(norm(x, a, b));\nexport const fit01 = (x, a, b) => a + (b - a) * clamp01(x);\nexport const fit10 = (x, a, b) => b + (a - b) * clamp01(x);\nexport const fit11 = (x, a, b) => a + (b - a) * (0.5 + 0.5 * clamp11(x));\n","const M8 = 0xff;\nconst M16 = 0xffff;\nexport const signExtend8 = (a) => ((a &= M8), a & 0x80 ? a | ~M8 : a);\nexport const signExtend16 = (a) => ((a &= M16), a & 0x8000 ? a | ~M16 : a);\nexport const addi8 = (a, b) => signExtend8((a | 0) + (b | 0));\nexport const divi8 = (a, b) => signExtend8((a | 0) / (b | 0));\nexport const muli8 = (a, b) => signExtend8((a | 0) * (b | 0));\nexport const subi8 = (a, b) => signExtend8((a | 0) - (b | 0));\nexport const andi8 = (a, b) => signExtend8((a | 0) & (b | 0));\nexport const ori8 = (a, b) => signExtend8(a | 0 | (b | 0));\nexport const xori8 = (a, b) => signExtend8((a | 0) ^ (b | 0));\nexport const noti8 = (a) => signExtend8(~a);\n// prettier-ignore\nexport const lshifti8 = (a, b) => signExtend8((a | 0) << (b | 0));\n// prettier-ignore\nexport const rshifti8 = (a, b) => signExtend8((a | 0) >> (b | 0));\nexport const addi16 = (a, b) => signExtend16((a | 0) + (b | 0));\nexport const divi16 = (a, b) => signExtend16((a | 0) / (b | 0));\nexport const muli16 = (a, b) => signExtend16((a | 0) * (b | 0));\nexport const subi16 = (a, b) => signExtend16((a | 0) - (b | 0));\nexport const andi16 = (a, b) => signExtend16((a | 0) & (b | 0));\nexport const ori16 = (a, b) => signExtend16(a | 0 | (b | 0));\nexport const xori16 = (a, b) => signExtend16((a | 0) ^ (b | 0));\nexport const noti16 = (a) => signExtend16(~a);\n// prettier-ignore\nexport const lshifti16 = (a, b) => signExtend16((a | 0) << (b | 0));\n// prettier-ignore\nexport const rshifti16 = (a, b) => signExtend16((a | 0) >> (b | 0));\nexport const addi32 = (a, b) => ((a | 0) + (b | 0)) | 0;\nexport const divi32 = (a, b) => ((a | 0) / (b | 0)) | 0;\nexport const muli32 = (a, b) => ((a | 0) * (b | 0)) | 0;\nexport const subi32 = (a, b) => ((a | 0) - (b | 0)) | 0;\nexport const andi32 = (a, b) => (a | 0) & (b | 0);\nexport const ori32 = (a, b) => a | 0 | (b | 0);\nexport const xori32 = (a, b) => (a | 0) ^ (b | 0);\nexport const lshifti32 = (a, b) => (a | 0) << (b | 0);\nexport const rshifti32 = (a, b) => (a | 0) >> (b | 0);\nexport const noti32 = (a) => ~a;\n// prettier-ignore\nexport const addu8 = (a, b) => ((a & M8) + (b & M8)) & M8;\n// prettier-ignore\nexport const divu8 = (a, b) => ((a & M8) / (b & M8)) & M8;\n// prettier-ignore\nexport const mulu8 = (a, b) => ((a & M8) * (b & M8)) & M8;\n// prettier-ignore\nexport const subu8 = (a, b) => ((a & M8) - (b & M8)) & M8;\n// prettier-ignore\nexport const andu8 = (a, b) => ((a & M8) & (b & M8)) & M8;\n// prettier-ignore\nexport const oru8 = (a, b) => ((a & M8) | (b & M8)) & M8;\n// prettier-ignore\nexport const xoru8 = (a, b) => ((a & M8) ^ (b & M8)) & M8;\nexport const notu8 = (a) => ~a & M8;\nexport const lshiftu8 = (a, b) => ((a & M8) << (b & M8)) & M8;\nexport const rshiftu8 = (a, b) => ((a & M8) >>> (b & M8)) & M8;\n// prettier-ignore\nexport const addu16 = (a, b) => ((a & M16) + (b & M16)) & M16;\n// prettier-ignore\nexport const divu16 = (a, b) => ((a & M16) / (b & M16)) & M16;\n// prettier-ignore\nexport const mulu16 = (a, b) => ((a & M16) * (b & M16)) & M16;\n// prettier-ignore\nexport const subu16 = (a, b) => ((a & M16) - (b & M16)) & M16;\n// prettier-ignore\nexport const andu16 = (a, b) => ((a & M16) & (b & M16)) & M16;\n// prettier-ignore\nexport const oru16 = (a, b) => ((a & M16) | (b & M16)) & M16;\n// prettier-ignore\nexport const xoru16 = (a, b) => ((a & M16) ^ (b & M16)) & M16;\nexport const notu16 = (a) => ~a & M16;\n// prettier-ignore\nexport const lshiftu16 = (a, b) => ((a & M16) << (b & M16)) & M16;\n// prettier-ignore\nexport const rshiftu16 = (a, b) => ((a & M16) >>> (b & M16)) & M16;\nexport const addu32 = (a, b) => ((a >>> 0) + (b >>> 0)) >>> 0;\nexport const divu32 = (a, b) => ((a >>> 0) / (b >>> 0)) >>> 0;\nexport const mulu32 = (a, b) => ((a >>> 0) * (b >>> 0)) >>> 0;\nexport const subu32 = (a, b) => ((a >>> 0) - (b >>> 0)) >>> 0;\nexport const andu32 = (a, b) => ((a >>> 0) & (b >>> 0)) >>> 0;\nexport const oru32 = (a, b) => ((a >>> 0) | (b >>> 0)) >>> 0;\nexport const xoru32 = (a, b) => ((a >>> 0) ^ (b >>> 0)) >>> 0;\nexport const notu32 = (a) => ~a >>> 0;\n// prettier-ignore\nexport const lshiftu32 = (a, b) => ((a >>> 0) << (b >>> 0)) >>> 0;\n// prettier-ignore\nexport const rshiftu32 = (a, b) => ((a >>> 0) >>> (b >>> 0)) >>> 0;\n","import { EPS } from \"./api\";\n/**\n * Recursively evaluates function `fn` for `res` uniformly spaced values\n * `t` in the closed parametric interval `[start,end]` and computes\n * corresponding sample values `p`. For each `p` then calls `error`\n * function to compute the error to query target value `q` and\n * eventually returns the `t` producing the overall minimum error. At\n * each level of recursion the search interval is increasingly narrowed\n * / centered around the best `t` of the current iteration.\n *\n * The search is terminated early if the best error value is less than\n * `eps`.\n *\n * The interval end points `start` and `end` MUST be normalized values\n * in the closed [0,1] interval.\n *\n * @param fn function to evaluate\n * @param error error function\n * @param q target value\n * @param res number of samples per interval\n * @param iter max number of iterations / recursion limit\n * @param start interval start\n * @param end interval end\n */\nexport const minError = (fn, error, q, res = 16, iter = 8, start = 0, end = 1, eps = EPS) => {\n    if (iter <= 0)\n        return (start + end) / 2;\n    const delta = (end - start) / res;\n    let minT = start;\n    let minE = Infinity;\n    for (let i = 0; i <= res; i++) {\n        const t = start + i * delta;\n        const e = error(q, fn(t));\n        if (e < minE) {\n            if (e <= eps)\n                return t;\n            minE = e;\n            minT = t;\n        }\n    }\n    return minError(fn, error, q, res, iter - 1, Math.max(minT - delta, 0), Math.min(minT + delta, 1));\n};\n","import { HALF_PI, PI } from \"./api\";\nexport const mix = (a, b, t) => a + (b - a) * t;\n/**\n * ```\n * c    d\n * +----+\n * |    |\n * +----+\n * a    b\n * ```\n *\n * @param a BL value\n * @param b BR value\n * @param c TL value\n * @param d TR value\n * @param u 1st interpolation factor\n * @param v 2nd interpolation factor\n */\nexport const mixBilinear = (a, b, c, d, u, v) => mix(mix(a, b, u), mix(c, d, u), v);\nexport const mixQuadratic = (a, b, c, t) => {\n    const s = 1 - t;\n    return a * s * s + b * 2 * s * t + c * t * t;\n};\nexport const mixCubic = (a, b, c, d, t) => {\n    const t2 = t * t;\n    const s = 1 - t;\n    const s2 = s * s;\n    return a * s2 * s + b * 3 * s2 * t + c * 3 * t2 * s + d * t2 * t;\n};\n/**\n * Returns hermite interpolation of `a, b, c, d` at normalized position\n * `t`, where `a` and `d` are used as predecessor/successor of `b` / `c`\n * and only inform the tangent of the interpolation curve. The\n * interpolated result is that of `b` and `c`.\n *\n * Assumes all inputs are uniformly spaced. If that's not the case, use\n * `mixCubicHermite()` with one of the tangent generators supporting\n * non-uniform spacing of points.\n *\n * See: https://www.desmos.com/calculator/j4gf8g9vkr\n *\n * Source:\n * https://www.musicdsp.org/en/latest/Other/93-hermite-interpollation.html\n *\n * @see mixCubicHermite\n * @see tangentCardinal\n * @see tangentDiff3\n *\n * @param a\n * @param b\n * @param c\n * @param d\n * @param t\n */\nexport const mixHermite = (a, b, c, d, t) => {\n    const y1 = 0.5 * (c - a);\n    const y2 = 1.5 * (b - c) + 0.5 * (d - a);\n    return ((y2 * t + a - b + y1 - y2) * t + y1) * t + b;\n};\n/**\n * Computes cubic-hermite interpolation between `a` / `b` at normalized\n * time `t` and using respective tangents `ta` / `tb`.\n *\n * https://en.wikipedia.org/wiki/Cubic_Hermite_spline\n *\n * @see mixHermite\n * @see tangentCardinal\n * @see tangentDiff3\n *\n * @param a\n * @param ta\n * @param b\n * @param tb\n * @param t\n */\nexport const mixCubicHermite = (a, ta, b, tb, t) => {\n    const s = t - 1;\n    const t2 = t * t;\n    const s2 = s * s;\n    const h00 = (1 + 2 * t) * s2;\n    const h10 = t * s2;\n    const h01 = t2 * (3 - 2 * t);\n    const h11 = t2 * s;\n    return h00 * a + h10 * ta + h01 * b + h11 * tb;\n};\n/**\n * Helper function for `mixCubicHermite()`. Computes cardinal tangents\n * based on point neighbors of a point B (not given), i.e. `a`\n * (predecessor) and `c` (successor) and their times (defaults to\n * uniformly spaced). The optional `tension` parameter can be used to\n * scale the tangent where 0.0 produces a Cardinal spline tangent and\n * 1.0 a Catmull-Rom (opposite to the Wikipedia ref).\n *\n * https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Cardinal_spline\n *\n * @param prev\n * @param next\n * @param scale\n * @param ta\n * @param tc\n */\nexport const tangentCardinal = (prev, next, scale = 0.5, ta = 0, tc = 2) => scale * ((next - prev) / (tc - ta));\n/**\n * Helper function for `mixCubicHermite()`. Computes tangent for `curr`,\n * based on 3-point finite difference, where `prev` & `next` are\n * `curr`'s neighbors and the `tX` the three points' respective time\n * values. The latter are equally spaced by default (each 1.0 apart).\n *\n * Using this function with equal spacing of 1.0 and together with\n * `mixCubicHermite()` will produce same results as the somewhat\n * optimized variant `mixHermite()`.\n *\n * https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Finite_difference\n *\n * @param prev\n * @param curr\n * @param next\n * @param ta\n * @param tb\n * @param tc\n */\nexport const tangentDiff3 = (prev, curr, next, ta = 0, tb = 1, tc = 2) => 0.5 * ((next - curr) / (tc - tb) + (curr - prev) / (tb - ta));\n/**\n * HOF interpolator. Takes a timing function `f` and interval `[from,\n * to]`. Returns function which takes normalized time as single arg and\n * returns interpolated value.\n *\n * @param f\n * @param from\n * @param to\n */\nexport const tween = (f, from, to) => (t) => mix(from, to, f(t));\n/**\n * Circular interpolation: `sqrt(1 - (1 - t)^2)`\n *\n * @param t interpolation factor (0.0 .. 1.0)\n */\nexport const circular = (t) => {\n    t = 1 - t;\n    return Math.sqrt(1 - t * t);\n};\nexport const cosine = (t) => 1 - (Math.cos(t * PI) * 0.5 + 0.5);\nexport const decimated = (n, t) => Math.floor(t * n) / n;\nexport const bounce = (k, amp, t) => {\n    const tk = t * k;\n    return 1 - ((amp * Math.sin(tk)) / tk) * Math.cos(t * HALF_PI);\n};\n/**\n * HOF exponential easing.\n *\n * - `ease = 1` -> linear\n * - `ease > 1` -> ease in\n * - `ease < 1` -> ease out\n *\n * @param ease easing behavior [0.0 .. ]\n * @param t\n */\nexport const ease = (ease, t) => Math.pow(t, ease);\n/**\n * HOF impulse generator. Peaks at `t=1/k`\n *\n * @param k impulse width (higher values => shorter impulse)\n */\nexport const impulse = (k, t) => {\n    const h = k * t;\n    return h * Math.exp(1 - h);\n};\nexport const gain = (k, t) => t < 0.5 ? 0.5 * Math.pow(2 * t, k) : 1 - 0.5 * Math.pow(2 - 2 * t, k);\nexport const parabola = (k, t) => Math.pow(4.0 * t * (1.0 - t), k);\nexport const cubicPulse = (w, c, t) => {\n    t = Math.abs(t - c);\n    return t > w ? 0 : ((t /= w), 1 - t * t * (3 - 2 * t));\n};\nexport const sinc = (k, t) => {\n    t = PI * (k * t - 1.0);\n    return Math.sin(t) / t;\n};\n/**\n * Sigmoid function for inputs in [0..1] interval.\n *\n * @param k\n * @param t\n */\nexport const sigmoid = (k, t) => 1 / (1 + Math.exp(-k * (2 * t - 1)));\n/**\n * Sigmoid function for inputs in [-1..+1] interval.\n *\n * @param k\n * @param t\n */\nexport const sigmoid11 = (k, t) => 1 / (1 + Math.exp(-k * t));\n","import { EPS } from \"./api\";\n/**\n * Returns `a - b * floor(a/b)`\n *\n * @param a\n * @param b\n */\nexport const fmod = (a, b) => a - b * Math.floor(a / b);\nexport const fract = (x) => x - Math.floor(x);\nexport const trunc = (x) => (x < 0 ? Math.ceil(x) : Math.floor(x));\nexport const roundTo = (x, prec = 1) => Math.round(x / prec) * prec;\n/**\n * Only rounds `x` to nearest int if `fract(x)` < `eps` or > `1-eps`.\n *\n * @param x\n * @param eps\n */\nexport const roundEps = (x, eps = EPS) => {\n    const f = fract(x);\n    return f <= eps || f >= 1 - eps ? Math.round(x) : x;\n};\n","export const simplifyRatio = (num, denom) => {\n    let e1 = Math.abs(num);\n    let e2 = Math.abs(denom);\n    while (true) {\n        if (e1 < e2) {\n            const t = e1;\n            e1 = e2;\n            e2 = t;\n        }\n        const r = e1 % e2;\n        if (r) {\n            e1 = r;\n        }\n        else {\n            return [num / e2, denom / e2];\n        }\n    }\n};\n","import { EPS } from \"./api\";\n/**\n * Produces a new function which computes derivative of the given\n * single-arg function. The extra optional arg `eps` is used to\n * define the step width for computing derived values:\n *\n * `f'(x) = (f(x + eps) - f(x)) / eps`\n *\n * The original function is assumed to be fully differentiable\n * in the interval the returned function is going to be used.\n * No validity checks of any form are done.\n *\n * https://en.wikipedia.org/wiki/Derivative#Continuity_and_differentiability\n *\n * @param fn\n * @param eps\n */\nexport const derivative = (f, eps = EPS) => (x) => (f(x + eps) - f(x)) / eps;\n/**\n * Computes solution for linear equation: `ax + b = 0`.\n *\n * Note: `a` MUST NOT be zero.\n *\n * @param a slope\n * @param b constant offset\n */\nexport const solveLinear = (a, b) => -b / a;\n/**\n * Computes solutions for quadratic equation: `ax^2 + bx + c = 0`.\n * Returns array of real solutions.\n * Note: `a` MUST NOT be zero. If the quadratic term is missing,\n * use `solveLinear` instead.\n *\n * https://en.wikipedia.org/wiki/Quadratic_function\n * https://en.wikipedia.org/wiki/Quadratic_equation\n *\n * @param a quadratic coefficient\n * @param b linear coefficient\n * @param c constant offset\n * @param eps tolerance to determine multiple roots\n */\nexport const solveQuadratic = (a, b, c, eps = 1e-9) => {\n    const d = 2 * a;\n    let r = b * b - 4 * a * c;\n    return r < 0\n        ? []\n        : r < eps\n            ? [-b / d]\n            : ((r = Math.sqrt(r)), [(-b - r) / d, (-b + r) / d]);\n};\n/**\n * Computes solutions for quadratic equation: `ax^3 + bx^2 + c*x + d = 0`.\n * Returns array of solutions, both real & imaginary.\n * Note: `a` MUST NOT be zero. If the cubic term is missing (i.e. zero),\n * use `solveQuadratic` or `solveLinear` instead.\n *\n * https://en.wikipedia.org/wiki/Cubic_function\n *\n * @param a cubic coefficient\n * @param b quadratic coefficient\n * @param c linear coefficient\n * @param d constant offset\n * @param eps tolerance to determine multiple roots\n */\nexport const solveCubic = (a, b, c, d, eps = 1e-9) => {\n    const aa = a * a;\n    const bb = b * b;\n    const ba3 = b / (3 * a);\n    const p = (3 * a * c - bb) / (3 * aa);\n    const q = (2 * bb * b - 9 * a * b * c + 27 * aa * d) / (27 * aa * a);\n    if (Math.abs(p) < eps) {\n        return [Math.cbrt(-q) - ba3];\n    }\n    else if (Math.abs(q) < eps) {\n        return p < 0\n            ? [-Math.sqrt(-p) - ba3, -ba3, Math.sqrt(-p) - ba3]\n            : [-ba3];\n    }\n    else {\n        const denom = (q * q) / 4 + (p * p * p) / 27;\n        if (Math.abs(denom) < eps) {\n            return [(-1.5 * q) / p - ba3, (3 * q) / p - ba3];\n        }\n        else if (denom > 0) {\n            const u = Math.cbrt(-q / 2 - Math.sqrt(denom));\n            return [u - p / (3 * u) - ba3];\n        }\n        else {\n            const u = 2 * Math.sqrt(-p / 3), t = Math.acos((3 * q) / p / u) / 3, k = (2 * Math.PI) / 3;\n            return [\n                u * Math.cos(t) - ba3,\n                u * Math.cos(t - k) - ba3,\n                u * Math.cos(t - 2 * k) - ba3\n            ];\n        }\n    }\n};\n","import { clamp01 } from \"./interval\";\n/**\n * Step/threshold function.\n *\n * @param edge threshold\n * @param x test value\n * @returns 0, if `x < e`, else 1\n */\nexport const step = (edge, x) => (x < edge ? 0 : 1);\n/**\n * GLSL-style smoothStep threshold function.\n *\n * @param edge lower threshold\n * @param edge2 upper threshold\n * @param x test value\n * @returns 0, if `x < edge1`, 1 if `x > edge2`, else sigmoid interpolation\n */\nexport const smoothStep = (edge, edge2, x) => {\n    x = clamp01((x - edge) / (edge2 - edge));\n    return (3 - 2 * x) * x * x;\n};\n/**\n * Similar to `smoothStep()` but using different polynomial.\n *\n * @param edge\n * @param edge2\n * @param x\n */\nexport const smootherStep = (edge, edge2, x) => {\n    x = clamp01((x - edge) / (edge2 - edge));\n    return x * x * x * (x * (x * 6 - 15) + 10);\n};\n/**\n * Exponential ramp with variable shape, e.g.\n *\n * - S-curve: k=8, n=4\n * - Step near 1.0: k=8, n=20\n * - Pulse: k=0.005, n=-10\n * - Ease-in: k=0.5, n=0.25\n *\n * @param k\n * @param n\n * @param x\n */\nexport const expStep = (k, n, x) => 1 - Math.exp(-k * Math.pow(x, n));\n","export * from \"./api\";\nexport * from \"./abs\";\nexport * from \"./angle\";\nexport * from \"./crossing\";\nexport * from \"./eqdelta\";\nexport * from \"./extrema\";\nexport * from \"./fit\";\nexport * from \"./int\";\nexport * from \"./interval\";\nexport * from \"./min-error\";\nexport * from \"./mix\";\nexport * from \"./prec\";\nexport * from \"./ratio\";\nexport * from \"./solve\";\nexport * from \"./step\";\n","import { mixHermite } from \"@thi.ng/math\";\nimport { interpolate } from \"./interpolate\";\nexport function interpolateHermite(n, src) {\n    return interpolate((chunk, t) => mixHermite(...chunk, t), 4, n, src);\n}\n","import { mix } from \"@thi.ng/math\";\nimport { interpolate } from \"./interpolate\";\nexport function interpolateLinear(n, src) {\n    return interpolate((chunk, t) => mix(...chunk, t), 2, n, src);\n}\n","import { compR } from \"../func/compr\";\nimport { iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function interpose(sep, src) {\n    return src\n        ? iterator(interpose(sep), src)\n        : (rfn) => {\n            const r = rfn[2];\n            const _sep = typeof sep === \"function\" ? sep : () => sep;\n            let first = true;\n            return compR(rfn, (acc, x) => {\n                if (first) {\n                    first = false;\n                    return r(acc, x);\n                }\n                acc = r(acc, _sep());\n                return isReduced(acc) ? acc : r(acc, x);\n            });\n        };\n}\n","import { identity } from \"@thi.ng/compose\";\nimport { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function keep(...args) {\n    return ($iter(keep, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const pred = args[0] || identity;\n            return compR(rfn, (acc, x) => pred(x) != null ? r(acc, x) : acc);\n        }));\n}\n","import { isFunction } from \"@thi.ng/checks\";\nimport { iterator1 } from \"../iterator\";\nimport { map } from \"./map\";\nexport function labeled(id, src) {\n    return src\n        ? iterator1(labeled(id), src)\n        : map(isFunction(id) ? (x) => [id(x), x] : (x) => [id, x]);\n}\n","import { isFunction } from \"@thi.ng/checks\";\n/**\n * Higher-order deep object transformer. Accepts a nested `spec`\n * array reflecting same key structure as the object to be mapped,\n * but with functions or sub-specs as their values.\n * Returns a new function, which when called, recursively applies\n * nested transformers in post-order traversal (child transformers\n * are run first) and returns the result of the root transformer.\n *\n * The transform specs are given as arrays in this format:\n *\n * ```\n * [tx-function, {key1: [tx-function, {...}], key2: tx-fn}]\n * ```\n *\n * If a key in the spec has no further sub maps, its transform\n * function can be given directly without having to wrap it into\n * the usual array structure.\n *\n * ```\n * // source object to be transformed\n * src = {\n *    meta: {\n *      author: { name: \"Alice\", email: \"a@b.com\" },\n *      date: 1041510896000\n *    },\n *    type: \"post\",\n *    title: \"Hello world\",\n *    body: \"Ratione necessitatibus doloremque itaque.\"\n * };\n *\n * // deep transformation spec\n * spec = [\n *    // root transform (called last)\n *    ({type, meta, title, body}) => [\"div\", {class: type}, title, meta, body],\n *    // object of transform sub-specs\n *    {\n *      meta: [\n *        ({author, date}) => [\"div.meta\", author, `(${date})`],\n *        {\n *          author: ({email, name}) => [\"a\", {href: `mailto:${email}`}, name],\n *          date: (d) => new Date(d).toLocaleString()\n *        }\n *      ],\n *      title: (title) => [\"h1\", title]\n *    }\n * ];\n *\n * // build transformer & apply to src\n * deepTransform(spec)(src);\n *\n * // [ \"div\",\n * //   { class: \"article\" },\n * //   [ \"h1\", \"Hello world\" ],\n * //   [ \"div.meta\",\n * //     [ \"a\", { href: \"mailto:a@.b.com\" }, \"Alice\" ],\n * //     \"(1/2/2003, 12:34:56 PM)\" ],\n * //   \"Ratione necessitatibus doloremque itaque.\" ]\n * ```\n *\n * @param spec transformation spec\n */\nexport const deepTransform = (spec) => {\n    if (isFunction(spec)) {\n        return spec;\n    }\n    const mapfns = Object.keys(spec[1] || {}).reduce((acc, k) => ((acc[k] = deepTransform(spec[1][k])), acc), {});\n    return (x) => {\n        const res = Object.assign({}, x);\n        for (let k in mapfns) {\n            res[k] = mapfns[k](res[k]);\n        }\n        return spec[0](res);\n    };\n};\n","import { deepTransform } from \"../func/deep-transform\";\nimport { iterator1 } from \"../iterator\";\nimport { map } from \"./map\";\nexport function mapDeep(spec, src) {\n    return src ? iterator1(mapDeep(spec), src) : map(deepTransform(spec));\n}\n","import { $iter } from \"../iterator\";\nimport { map } from \"./map\";\nexport function mapKeys(...args) {\n    const iter = $iter(mapKeys, args);\n    if (iter) {\n        return iter;\n    }\n    const keys = args[0];\n    const copy = args[1] !== false;\n    return map((x) => {\n        const res = copy ? Object.assign({}, x) : x;\n        for (let k in keys) {\n            res[k] = keys[k](x[k]);\n        }\n        return res;\n    });\n}\n","import { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function mapNth(...args) {\n    const iter = $iter(mapNth, args);\n    if (iter) {\n        return iter;\n    }\n    let n = args[0] - 1;\n    let offset;\n    let fn;\n    if (typeof args[1] === \"number\") {\n        offset = args[1];\n        fn = args[2];\n    }\n    else {\n        fn = args[1];\n        offset = 0;\n    }\n    return (rfn) => {\n        const r = rfn[2];\n        let skip = 0, off = offset;\n        return compR(rfn, (acc, x) => {\n            if (off === 0) {\n                if (skip === 0) {\n                    skip = n;\n                    return r(acc, fn(x));\n                }\n                skip--;\n            }\n            else {\n                off--;\n            }\n            return r(acc, x);\n        });\n    };\n}\n","import { $iter } from \"../iterator\";\nimport { map } from \"./map\";\nexport function mapVals(...args) {\n    const iter = $iter(mapVals, args);\n    if (iter) {\n        return iter;\n    }\n    const fn = args[0];\n    const copy = args[1] !== false;\n    return map((x) => {\n        const res = copy ? {} : x;\n        for (let k in x) {\n            res[k] = fn(x[k]);\n        }\n        return res;\n    });\n}\n","import { compR } from \"../func/compr\";\nimport { iterator } from \"../iterator\";\nimport { ensureReduced, reduced } from \"../reduced\";\nexport function take(n, src) {\n    return src\n        ? iterator(take(n), src)\n        : (rfn) => {\n            const r = rfn[2];\n            let m = n;\n            return compR(rfn, (acc, x) => --m > 0\n                ? r(acc, x)\n                : m === 0\n                    ? ensureReduced(r(acc, x))\n                    : reduced(acc));\n        };\n}\n","import { comp } from \"../func/comp\";\nimport { iterator1 } from \"../iterator\";\nimport { filter } from \"./filter\";\nimport { take } from \"./take\";\nexport function matchFirst(pred, src) {\n    return src\n        ? [...iterator1(matchFirst(pred), src)][0]\n        : comp(filter(pred), take(1));\n}\n","import { isReduced } from \"../reduced\";\n/**\n * Helper HOF yielding a buffer drain completion function for some\n * transducers.\n *\n * @param buf\n * @param complete\n * @param reduce\n */\nexport const __drain = (buf, complete, reduce) => (acc) => {\n    while (buf.length && !isReduced(acc)) {\n        acc = reduce(acc, buf.shift());\n    }\n    return complete(acc);\n};\n","import { __drain } from \"../internal/drain\";\nimport { iterator } from \"../iterator\";\nexport function takeLast(n, src) {\n    return src\n        ? iterator(takeLast(n), src)\n        : ([init, complete, reduce]) => {\n            const buf = [];\n            return [\n                init,\n                __drain(buf, complete, reduce),\n                (acc, x) => {\n                    if (buf.length === n) {\n                        buf.shift();\n                    }\n                    buf.push(x);\n                    return acc;\n                }\n            ];\n        };\n}\n","import { comp } from \"../func/comp\";\nimport { iterator } from \"../iterator\";\nimport { filter } from \"./filter\";\nimport { takeLast } from \"./take-last\";\nexport function matchLast(pred, src) {\n    return src\n        ? [...iterator(matchLast(pred), src)][0]\n        : comp(filter(pred), takeLast(1));\n}\n","import { illegalArgs } from \"@thi.ng/errors\";\nimport { compR } from \"../func/compr\";\nimport { iterator1 } from \"../iterator\";\nexport function movingAverage(period, src) {\n    return src\n        ? iterator1(movingAverage(period), src)\n        : (rfn) => {\n            period |= 0;\n            period < 2 && illegalArgs(\"period must be >= 2\");\n            const reduce = rfn[2];\n            const window = [];\n            let sum = 0;\n            return compR(rfn, (acc, x) => {\n                const n = window.push(x);\n                sum += x;\n                n > period && (sum -= window.shift());\n                return n >= period ? reduce(acc, sum / period) : acc;\n            });\n        };\n}\n","import { compare } from \"@thi.ng/compare\";\nimport { identity } from \"@thi.ng/compose\";\nexport const __sortOpts = (opts) => (Object.assign({ key: identity, compare }, opts));\n","import { comp } from \"../func/comp\";\nimport { __sortOpts } from \"../internal/sort-opts\";\nimport { $iter } from \"../iterator\";\nimport { map } from \"./map\";\nimport { partition } from \"./partition\";\nexport function movingMedian(...args) {\n    const iter = $iter(movingMedian, args);\n    if (iter) {\n        return iter;\n    }\n    const { key, compare } = __sortOpts(args[1]);\n    const n = args[0];\n    const m = n >> 1;\n    return comp(partition(n, 1, true), map((window) => window.slice().sort((a, b) => compare(key(a), key(b)))[m]));\n}\n","import { juxt } from \"@thi.ng/compose\";\nimport { step } from \"../step\";\nimport { map } from \"./map\";\nexport function multiplex(...args) {\n    return map(juxt.apply(null, args.map(step)));\n}\n","export const renamer = (kmap) => {\n    const ks = Object.keys(kmap);\n    const [a2, b2, c2] = ks;\n    const [a1, b1, c1] = ks.map((k) => kmap[k]);\n    switch (ks.length) {\n        case 3:\n            return (x) => {\n                const res = {};\n                let v;\n                (v = x[c1]), v !== undefined && (res[c2] = v);\n                (v = x[b1]), v !== undefined && (res[b2] = v);\n                (v = x[a1]), v !== undefined && (res[a2] = v);\n                return res;\n            };\n        case 2:\n            return (x) => {\n                const res = {};\n                let v;\n                (v = x[b1]), v !== undefined && (res[b2] = v);\n                (v = x[a1]), v !== undefined && (res[a2] = v);\n                return res;\n            };\n        case 1:\n            return (x) => {\n                const res = {};\n                let v = x[a1];\n                v !== undefined && (res[a2] = v);\n                return res;\n            };\n        default:\n            return (x) => {\n                let k, v;\n                const res = {};\n                for (let i = ks.length - 1; i >= 0; i--) {\n                    (k = ks[i]),\n                        (v = x[kmap[k]]),\n                        v !== undefined && (res[k] = v);\n                }\n                return res;\n            };\n    }\n};\n","import { isArray } from \"@thi.ng/checks\";\nimport { comp } from \"../func/comp\";\nimport { renamer } from \"../func/renamer\";\nimport { $iter } from \"../iterator\";\nimport { transduce } from \"../transduce\";\nimport { filter } from \"./filter\";\nimport { map } from \"./map\";\nexport function rename(...args) {\n    const iter = args.length > 2 && $iter(rename, args);\n    if (iter) {\n        return iter;\n    }\n    let kmap = args[0];\n    if (isArray(kmap)) {\n        kmap = kmap.reduce((acc, k, i) => ((acc[k] = i), acc), {});\n    }\n    if (args[1]) {\n        const ks = Object.keys(kmap);\n        return map((y) => transduce(comp(map((k) => [k, y[kmap[k]]]), filter((x) => x[1] !== undefined)), args[1], ks));\n    }\n    else {\n        return map(renamer(kmap));\n    }\n}\n","import { comp } from \"../func/comp\";\nimport { $iter } from \"../iterator\";\nimport { multiplex } from \"./multiplex\";\nimport { rename } from \"./rename\";\nexport function multiplexObj(...args) {\n    const iter = $iter(multiplexObj, args);\n    if (iter) {\n        return iter;\n    }\n    const [xforms, rfn] = args;\n    const ks = Object.keys(xforms);\n    return comp(multiplex.apply(null, ks.map((k) => xforms[k])), rename(ks, rfn));\n}\n","/**\n * No-op / pass-through transducer, essentially the same as:\n * `map(identity)`, but faster. Useful for testing and / or to keep\n * existing values in a `multiplex()` tuple lane.\n */\nexport const noop = () => (rfn) => rfn;\n","import { iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function padLast(n, fill, src) {\n    return src\n        ? iterator(padLast(n, fill), src)\n        : ([init, complete, reduce]) => {\n            let m = 0;\n            return [\n                init,\n                (acc) => {\n                    let rem = m % n;\n                    if (rem > 0) {\n                        while (++rem <= n && !isReduced(acc)) {\n                            acc = reduce(acc, fill);\n                        }\n                    }\n                    return complete(acc);\n                },\n                (acc, x) => (m++, reduce(acc, x))\n            ];\n        };\n}\n","import { comp } from \"../func/comp\";\nimport { $iter } from \"../iterator\";\nimport { drop } from \"./drop\";\nimport { take } from \"./take\";\nexport function page(...args) {\n    return ($iter(page, args) ||\n        comp(drop(args[0] * (args[1] || 10)), take(args[1] || 10)));\n}\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { $iter, iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function partitionBy(...args) {\n    return ($iter(partitionBy, args, iterator) ||\n        (([init, complete, reduce]) => {\n            const fn = args[0];\n            const f = args[1] === true ? fn() : fn;\n            let prev = SEMAPHORE;\n            let chunk;\n            return [\n                init,\n                (acc) => {\n                    if (chunk && chunk.length) {\n                        acc = reduce(acc, chunk);\n                        chunk = null;\n                    }\n                    return complete(acc);\n                },\n                (acc, x) => {\n                    const curr = f(x);\n                    if (prev === SEMAPHORE) {\n                        prev = curr;\n                        chunk = [x];\n                    }\n                    else if (curr === prev) {\n                        chunk.push(x);\n                    }\n                    else {\n                        chunk && (acc = reduce(acc, chunk));\n                        chunk = isReduced(acc) ? null : [x];\n                        prev = curr;\n                    }\n                    return acc;\n                }\n            ];\n        }));\n}\n","import { iterator } from \"../iterator\";\nimport { partitionBy } from \"./partition-by\";\nexport function partitionOf(sizes, src) {\n    return src\n        ? iterator(partitionOf(sizes), src)\n        : partitionBy(() => {\n            let i = 0, j = 0;\n            return () => {\n                if (i++ === sizes[j]) {\n                    i = 1;\n                    j = (j + 1) % sizes.length;\n                }\n                return j;\n            };\n        }, true);\n}\n","import { comp } from \"../func/comp\";\nimport { __sortOpts } from \"../internal/sort-opts\";\nimport { $iter, iterator } from \"../iterator\";\nimport { mapcat } from \"./mapcat\";\nimport { partition } from \"./partition\";\nexport function partitionSort(...args) {\n    const iter = $iter(partitionSort, args, iterator);\n    if (iter) {\n        return iter;\n    }\n    const { key, compare } = __sortOpts(args[1]);\n    return comp(partition(args[0], true), mapcat((window) => window.slice().sort((a, b) => compare(key(a), key(b)))));\n}\n","import { isArray } from \"@thi.ng/checks\";\nimport { identity } from \"@thi.ng/compose\";\nimport { illegalState } from \"@thi.ng/errors\";\nimport { $iter, iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function partitionSync(...args) {\n    return ($iter(partitionSync, args, iterator) ||\n        (([init, complete, reduce]) => {\n            let curr = {};\n            let first = true;\n            const currKeys = new Set();\n            const { key, mergeOnly, reset, all, backPressure } = Object.assign({ key: identity, mergeOnly: false, reset: true, all: true, backPressure: 0 }, args[1]);\n            const ks = isArray(args[0])\n                ? new Set(args[0])\n                : args[0];\n            if (mergeOnly || backPressure < 1) {\n                return [\n                    init,\n                    (acc) => {\n                        if ((reset && all && currKeys.size > 0) ||\n                            (!reset && first)) {\n                            acc = reduce(acc, curr);\n                            curr = {};\n                            currKeys.clear();\n                            first = false;\n                        }\n                        return complete(acc);\n                    },\n                    (acc, x) => {\n                        const k = key(x);\n                        if (ks.has(k)) {\n                            curr[k] = x;\n                            currKeys.add(k);\n                            if (mergeOnly || requiredInputs(ks, currKeys)) {\n                                acc = reduce(acc, curr);\n                                first = false;\n                                if (reset) {\n                                    curr = {};\n                                    currKeys.clear();\n                                }\n                                else {\n                                    curr = Object.assign({}, curr);\n                                }\n                            }\n                        }\n                        return acc;\n                    }\n                ];\n            }\n            else {\n                // with backpressure / caching...\n                const cache = new Map();\n                return [\n                    init,\n                    (acc) => {\n                        if (all && currKeys.size > 0) {\n                            acc = reduce(acc, collect(cache, currKeys));\n                            currKeys.clear();\n                        }\n                        return complete(acc);\n                    },\n                    (acc, x) => {\n                        const k = key(x);\n                        if (ks.has(k)) {\n                            let slot = cache.get(k);\n                            !slot && cache.set(k, (slot = []));\n                            slot.length >= backPressure &&\n                                illegalState(`max back pressure (${backPressure}) exceeded for input: ${String(k)}`);\n                            slot.push(x);\n                            currKeys.add(k);\n                            while (requiredInputs(ks, currKeys)) {\n                                acc = reduce(acc, collect(cache, currKeys));\n                                first = false;\n                                if (isReduced(acc))\n                                    break;\n                            }\n                        }\n                        return acc;\n                    }\n                ];\n            }\n        }));\n}\nconst requiredInputs = (required, curr) => {\n    if (curr.size < required.size)\n        return false;\n    for (let id of required) {\n        if (!curr.has(id))\n            return false;\n    }\n    return true;\n};\nconst collect = (cache, currKeys) => {\n    const curr = {};\n    for (let id of currKeys) {\n        const slot = cache.get(id);\n        curr[id] = slot.shift();\n        !slot.length && currKeys.delete(id);\n    }\n    return curr;\n};\n","import { iterator1 } from \"../iterator\";\nimport { map } from \"./map\";\nexport function pluck(key, src) {\n    return src ? iterator1(pluck(key), src) : map((x) => x[key]);\n}\n","import { SYSTEM } from \"@thi.ng/random\";\nimport { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function sample(...args) {\n    const iter = $iter(sample, args);\n    if (iter) {\n        return iter;\n    }\n    const prob = args[0];\n    const rnd = args[1] || SYSTEM;\n    return (rfn) => {\n        const r = rfn[2];\n        return compR(rfn, (acc, x) => (rnd.float() < prob ? r(acc, x) : acc));\n    };\n}\n","import { $iter, iterator } from \"../iterator\";\nimport { ensureReduced, isReduced, unreduced } from \"../reduced\";\nexport function scan(...args) {\n    return ((args.length > 2 && $iter(scan, args, iterator)) ||\n        (([inito, completeo, reduceo]) => {\n            const [initi, completei, reducei] = args[0];\n            let acc = args.length > 1 && args[1] != null ? args[1] : initi();\n            return [\n                inito,\n                (_acc) => {\n                    let a = completei(acc);\n                    if (a !== acc) {\n                        _acc = unreduced(reduceo(_acc, a));\n                    }\n                    acc = a;\n                    return completeo(_acc);\n                },\n                (_acc, x) => {\n                    acc = reducei(acc, x);\n                    if (isReduced(acc)) {\n                        return ensureReduced(reduceo(_acc, acc.deref()));\n                    }\n                    return reduceo(_acc, acc);\n                }\n            ];\n        }));\n}\n","import { renamer } from \"./renamer\";\nexport const keySelector = (keys) => renamer(keys.reduce((acc, x) => ((acc[x] = x), acc), {}));\n","import { keySelector } from \"../func/key-selector\";\nimport { iterator1 } from \"../iterator\";\nimport { map } from \"./map\";\nexport function selectKeys(keys, src) {\n    return src ? iterator1(selectKeys(keys), src) : map(keySelector(keys));\n}\n","import { map } from \"./map\";\n/**\n * Helper transducer. Applies given `fn` to each input value, presumably\n * for side effects. Discards function's result and yields original\n * inputs.\n *\n * @param fn side effect\n */\nexport const sideEffect = (fn) => map((x) => (fn(x), x));\n","import { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function slidingWindow(...args) {\n    const iter = $iter(slidingWindow, args);\n    if (iter) {\n        return iter;\n    }\n    const size = args[0];\n    const partial = args[1] !== false;\n    return (rfn) => {\n        const reduce = rfn[2];\n        let buf = [];\n        return compR(rfn, (acc, x) => {\n            buf.push(x);\n            if (partial || buf.length === size) {\n                acc = reduce(acc, buf);\n                buf = buf.slice(buf.length === size ? 1 : 0);\n            }\n            return acc;\n        });\n    };\n}\n","import { shuffle } from \"@thi.ng/arrays\";\nimport { $iter, iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function streamShuffle(...args) {\n    return ($iter(streamShuffle, args, iterator) ||\n        (([init, complete, reduce]) => {\n            const n = args[0];\n            const maxSwaps = args[1] || n;\n            const buf = [];\n            return [\n                init,\n                (acc) => {\n                    while (buf.length && !isReduced(acc)) {\n                        shuffle(buf, maxSwaps);\n                        acc = reduce(acc, buf.shift());\n                    }\n                    acc = complete(acc);\n                    return acc;\n                },\n                (acc, x) => {\n                    buf.push(x);\n                    shuffle(buf, maxSwaps);\n                    if (buf.length === n) {\n                        acc = reduce(acc, buf.shift());\n                    }\n                    return acc;\n                }\n            ];\n        }));\n}\n","import { binarySearch } from \"@thi.ng/arrays\";\nimport { __drain } from \"../internal/drain\";\nimport { __sortOpts } from \"../internal/sort-opts\";\nimport { $iter, iterator } from \"../iterator\";\nexport function streamSort(...args) {\n    const iter = $iter(streamSort, args, iterator);\n    if (iter) {\n        return iter;\n    }\n    const { key, compare } = __sortOpts(args[1]);\n    const n = args[0];\n    return ([init, complete, reduce]) => {\n        const buf = [];\n        return [\n            init,\n            __drain(buf, complete, reduce),\n            (acc, x) => {\n                const idx = binarySearch(buf, x, key, compare);\n                buf.splice(idx < 0 ? -(idx + 1) : idx, 0, x);\n                if (buf.length === n) {\n                    acc = reduce(acc, buf.shift());\n                }\n                return acc;\n            }\n        ];\n    };\n}\n","import { comp } from \"../func/comp\";\nimport { iterator } from \"../iterator\";\nimport { mapKeys } from \"./map-keys\";\nimport { partition } from \"./partition\";\nimport { partitionOf } from \"./partition-of\";\nimport { rename } from \"./rename\";\nexport function struct(fields, src) {\n    return src\n        ? iterator(struct(fields), src)\n        : comp(partitionOf(fields.map((f) => f[1])), partition(fields.length), rename(fields.map((f) => f[0])), mapKeys(fields.reduce((acc, f) => (f[2] ? ((acc[f[0]] = f[2]), acc) : acc), {}), false));\n}\n","import { swizzle as _swizzle } from \"@thi.ng/arrays\";\nimport { iterator1 } from \"../iterator\";\nimport { map } from \"./map\";\nexport function swizzle(order, src) {\n    return src ? iterator1(swizzle(order), src) : map(_swizzle(order));\n}\n","import { iterator1 } from \"../iterator\";\nimport { throttle } from \"./throttle\";\nexport function takeNth(n, src) {\n    if (src) {\n        return iterator1(takeNth(n), src);\n    }\n    n = Math.max(0, n - 1);\n    return throttle(() => {\n        let skip = 0;\n        return () => (skip === 0 ? ((skip = n), true) : (skip--, false));\n    });\n}\n","import { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nimport { reduced } from \"../reduced\";\nexport function takeWhile(...args) {\n    return ($iter(takeWhile, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const pred = args[0];\n            let ok = true;\n            return compR(rfn, (acc, x) => ((ok = ok && pred(x)) ? r(acc, x) : reduced(acc)));\n        }));\n}\n","import { iterator1 } from \"../iterator\";\nimport { throttle } from \"./throttle\";\nexport function throttleTime(delay, src) {\n    return src\n        ? iterator1(throttleTime(delay), src)\n        : throttle(() => {\n            let last = 0;\n            return () => {\n                const t = Date.now();\n                return t - last >= delay ? ((last = t), true) : false;\n            };\n        });\n}\n","import { iterator1 } from \"../iterator\";\nexport function toggle(on, off, initial = false, src) {\n    return src\n        ? iterator1(toggle(on, off, initial), src)\n        : ([init, complete, reduce]) => {\n            let state = initial;\n            return [\n                init,\n                complete,\n                (acc) => reduce(acc, (state = !state) ? on : off)\n            ];\n        };\n}\n","import { sideEffect } from \"./side-effect\";\nexport const trace = (prefix = \"\") => sideEffect((x) => console.log(prefix, x));\n","import { $iter, iterator } from \"../iterator\";\nimport { partitionBy } from \"./partition-by\";\nexport function wordWrap(...args) {\n    const iter = $iter(wordWrap, args, iterator);\n    if (iter) {\n        return iter;\n    }\n    const lineLength = args[0];\n    const { delim, always } = Object.assign({ delim: 1, always: true }, args[1]);\n    return partitionBy(() => {\n        let n = 0;\n        let flag = false;\n        return (w) => {\n            n += w.length + delim;\n            if (n > lineLength + (always ? 0 : delim)) {\n                flag = !flag;\n                n = w.length + delim;\n            }\n            return flag;\n        };\n    }, true);\n}\n","import { isReduced, reduced, unreduced } from \"../reduced\";\nexport function juxtR(...rs) {\n    let [a, b, c] = rs;\n    const n = rs.length;\n    switch (n) {\n        case 1: {\n            const r = a[2];\n            return [\n                () => [a[0]()],\n                (acc) => [a[1](acc[0])],\n                (acc, x) => {\n                    const aa1 = r(acc[0], x);\n                    if (isReduced(aa1)) {\n                        return reduced([unreduced(aa1)]);\n                    }\n                    return [aa1];\n                }\n            ];\n        }\n        case 2: {\n            const ra = a[2];\n            const rb = b[2];\n            return [\n                () => [a[0](), b[0]()],\n                (acc) => [a[1](acc[0]), b[1](acc[1])],\n                (acc, x) => {\n                    const aa1 = ra(acc[0], x);\n                    const aa2 = rb(acc[1], x);\n                    if (isReduced(aa1) || isReduced(aa2)) {\n                        return reduced([unreduced(aa1), unreduced(aa2)]);\n                    }\n                    return [aa1, aa2];\n                }\n            ];\n        }\n        case 3: {\n            const ra = a[2];\n            const rb = b[2];\n            const rc = c[2];\n            return [\n                () => [a[0](), b[0](), c[0]()],\n                (acc) => [a[1](acc[0]), b[1](acc[1]), c[1](acc[2])],\n                (acc, x) => {\n                    const aa1 = ra(acc[0], x);\n                    const aa2 = rb(acc[1], x);\n                    const aa3 = rc(acc[2], x);\n                    if (isReduced(aa1) || isReduced(aa2) || isReduced(aa3)) {\n                        return reduced([\n                            unreduced(aa1),\n                            unreduced(aa2),\n                            unreduced(aa3)\n                        ]);\n                    }\n                    return [aa1, aa2, aa3];\n                }\n            ];\n        }\n        default:\n            return [\n                () => rs.map((r) => r[0]()),\n                (acc) => rs.map((r, i) => r[1](acc[i])),\n                (acc, x) => {\n                    let done = false;\n                    const res = [];\n                    for (let i = 0; i < n; i++) {\n                        let a = rs[i][2](acc[i], x);\n                        if (isReduced(a)) {\n                            done = true;\n                            a = unreduced(a);\n                        }\n                        res[i] = a;\n                    }\n                    return done ? reduced(res) : res;\n                }\n            ];\n    }\n}\n","/**\n * Returns function accepting a single index arg used to\n * lookup value in given array. No bounds checks are done.\n *\n * ```\n * [...map(lookup1d([10, 20, 30]), [2,0,1])]\n * // [ 30, 10, 20 ]\n * ```\n *\n * @param src source data\n */\nexport const lookup1d = (src) => (i) => src[i];\n/**\n * Returns function accepting a single `[x, y]` index tuple,\n * used to lookup value in given array. Useful for transducers\n * processing 2D data. **Note**: The source data MUST be in\n * row major linearized format, i.e. 1D representation of 2D data\n * (pixel buffer). No bounds checks are done.\n *\n * ```\n * [...map(lookup2d([...range(9)], 3), range2d(2, -1, 0, 3))]\n * // [ 2, 1, 0, 5, 4, 3, 8, 7, 6 ]\n * ```\n *\n * @param src source data\n * @param width number of items along X (columns)\n */\nexport const lookup2d = (src, width) => (i) => src[i[0] + i[1] * width];\n/**\n * Same as `lookup2d()`, but for 3D data. The index ordering of the\n * source data MUST be in Z, Y, X order (i.e. a stack of row major 2D slices).\n * No bounds checks are done.\n *\n * @param src source data\n * @param width number of items along X (columns)\n * @param height number of items along Y (rows)\n */\nexport const lookup3d = (src, width, height) => {\n    const stridez = width * height;\n    return (i) => src[i[0] + i[1] * width + i[2] * stridez];\n};\n","/**\n * Helper function to (re)provide given iterable in iterator form.\n *\n * @param src\n */\nexport function* asIterable(src) {\n    yield* src;\n}\n","export function* repeatedly(fn, n = Infinity) {\n    while (n-- > 0) {\n        yield fn();\n    }\n}\n","import { ensureArray } from \"@thi.ng/arrays\";\nimport { SYSTEM, weightedRandom } from \"@thi.ng/random\";\nimport { repeatedly } from \"./repeatedly\";\n/**\n * Returns an infinite iterator of random choices and their (optional)\n * weights. If `weights` is given, it must have at least the same size\n * as `choices`. If omitted, each choice will have same probability.\n *\n * ```\n * transduce(take(1000), frequencies(), choices(\"abcd\", [1, 0.5, 0.25, 0.125]))\n * // Map { 'c' => 132, 'a' => 545, 'b' => 251, 'd' => 72 }\n * ```\n *\n * @see weightedRandom\n *\n * @param choices\n * @param weights\n */\nexport const choices = (choices, weights, rnd = SYSTEM) => repeatedly(weights\n    ? weightedRandom(ensureArray(choices), weights, rnd)\n    : () => choices[rnd.float(choices.length) | 0]);\n","import { ensureIterable } from \"@thi.ng/arrays\";\n/**\n * Yields iterator producing concatenation of given iterables.\n * Undefined & null inputs are silently ignored, however any\n * such values produced or contained in an input will remain.\n *\n * ```\n * [...concat([1, 2, 3], null, [4, 5])]\n * // [ 1, 2, 3, 4, 5 ]\n *\n * [...concat([1, 2, 3, undefined], null, [4, 5])]\n * // [ 1, 2, 3, undefined, 4, 5 ]\n * ```\n *\n * @param xs\n */\nexport function* concat(...xs) {\n    for (let x of xs) {\n        x != null && (yield* ensureIterable(x));\n    }\n}\n","export function* cycle(input) {\n    let cache = [];\n    for (let i of input) {\n        cache.push(i);\n        yield i;\n    }\n    if (cache.length > 0) {\n        while (true) {\n            yield* cache;\n        }\n    }\n}\n","export function* repeat(x, n = Infinity) {\n    while (n-- > 0) {\n        yield x;\n    }\n}\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { repeat } from \"./repeat\";\n/**\n * Yields iterator of given iterable which repeats the first and/or last\n * value(s) `numLeft`/`numRight` times (default: 1). By default both\n * sides are repeated, but can be adjusted by setting either of them to\n * zero. `numRight` defaults to same value as `numLeft`.\n *\n * ```\n * [...extendSides([1, 2, 3])]\n * // [ 1,  1, 2, 3,  3]\n *\n * [...extendSides([1, 2, 3], 3)]\n * // [ 1, 1, 1,  1, 2, 3,  3, 3, 3 ]\n *\n * [...extendSides([1, 2, 3], 0, 3)]\n * // [ 1, 2, 3,  3, 3, 3 ]\n * ```\n *\n * @see padSides\n * @see wrapSides\n *\n * @param src\n * @param numLeft\n * @param numRight\n */\nexport function* extendSides(src, numLeft = 1, numRight = numLeft) {\n    let prev = SEMAPHORE;\n    for (let x of src) {\n        if (numLeft > 0 && prev === SEMAPHORE) {\n            yield* repeat(x, numLeft);\n            numLeft = 0;\n        }\n        yield x;\n        prev = x;\n    }\n    if (numRight > 0 && prev !== SEMAPHORE) {\n        yield* repeat(prev, numRight);\n    }\n}\n","/**\n * Yields an infinite iterator of the inductive sequence:\n *\n * f(x+1) = f(f(x))\n *\n * The first value emitted always is `seed` itself, then f(seed),\n * f(f(seed)) etc. The given function is called with the current\n * iteration counter as 2nd arg.\n *\n * ```\n * [...take(5, iterate((x) => x * 2, 1))]\n * // [ 1, 2, 4, 8, 16 ]\n *\n * [...take(8, iterate((x, i) => x * 10 + i, 0))]\n * // [ 0, 1, 12, 123, 1234, 12345, 123456, 1234567 ]\n * ```\n *\n * @param fn\n * @param seed\n */\nexport function* iterate(fn, seed) {\n    let i = 0;\n    while (true) {\n        yield seed;\n        seed = fn(seed, ++i);\n    }\n}\n","export function* keys(x) {\n    for (let k in x) {\n        if (x.hasOwnProperty(k)) {\n            yield k;\n        }\n    }\n}\n","import { concat } from \"./concat\";\nimport { repeat } from \"./repeat\";\n/**\n * Returns iterator of `src` padded with value `x`, repeated\n * `numLeft`/`numRight` times (default: 1). By default both sides are\n * padded, but can be adjusted by setting either of them to zero.\n * `numRight` defaults to same value as `numLeft`.\n *\n * Essentially, syntax sugar for:\n *\n * ```\n * // default\n * concat(repeat(x, numLeft), src, repeat(x, numRight))\n *\n * // left only\n * concat(repeat(x, numLeft), src)\n *\n * // right only\n * concat(src, repeat(x, numRight))\n * ```\n *\n * @see extendsSides\n * @see wrapSides\n *\n * @param src\n * @param x\n * @param numLeft\n * @param numRight\n */\nexport const padSides = (src, x, numLeft = 1, numRight = numLeft) => numLeft > 0\n    ? numRight > 0\n        ? concat(repeat(x, numLeft), src, repeat(x, numRight))\n        : concat(repeat(x, numLeft), src)\n    : numRight > 0\n        ? concat(src, repeat(x, numRight))\n        : concat(src);\n","export function* pairs(x) {\n    for (let k in x) {\n        if (x.hasOwnProperty(k)) {\n            yield [k, x[k]];\n        }\n    }\n}\n","import { ensureArrayLike } from \"@thi.ng/arrays\";\nimport { illegalArgs } from \"@thi.ng/errors\";\nimport { range } from \"./range\";\nexport function* permutations(...src) {\n    const n = src.length - 1;\n    if (n < 0) {\n        return;\n    }\n    const step = new Array(n + 1).fill(0);\n    const realized = src.map(ensureArrayLike);\n    const total = realized.reduce((acc, x) => acc * x.length, 1);\n    for (let i = 0; i < total; i++) {\n        const tuple = [];\n        for (let j = n; j >= 0; j--) {\n            const r = realized[j];\n            let s = step[j];\n            if (s === r.length) {\n                step[j] = s = 0;\n                j > 0 && step[j - 1]++;\n            }\n            tuple[j] = r[s];\n        }\n        step[n]++;\n        yield tuple;\n    }\n}\n/**\n * Iterator yielding the Cartesian Product for `n` items of `m` values\n * each. If `m` is not given, defaults to value of `n`. The range of `m`\n * is `0..m-1`. The optional `offsets` array can be used to define start\n * values for each dimension.\n *\n * ```\n * [...permutationsN(2)]\n * // [ [0, 0], [0, 1], [1, 0], [1, 1] ]\n *\n * [...permutationsN(2, 3)]\n * // [ [0, 0], [0, 1], [0, 2],\n * //   [1, 0], [1, 1], [1, 2],\n * //   [2, 0], [2, 1], [2, 2] ]\n *\n * [...permutationsN(2, 3, [10, 20])]\n * // [ [ 10, 20 ], [ 10, 21 ], [ 11, 20 ], [ 11, 21 ] ]\n * ```\n *\n * @param n\n * @param m\n * @param offsets\n */\nexport const permutationsN = (n, m = n, offsets) => {\n    if (offsets && offsets.length < n) {\n        illegalArgs(`insufficient offsets, got ${offsets.length}, needed ${n}`);\n    }\n    const seqs = [];\n    while (--n >= 0) {\n        const o = offsets ? offsets[n] : 0;\n        seqs[n] = range(o, o + m);\n    }\n    return permutations.apply(null, seqs);\n};\n","import { illegalArity } from \"@thi.ng/errors\";\nimport { range } from \"./range\";\nexport function* range3d(...args) {\n    let fromX, toX, stepX;\n    let fromY, toY, stepY;\n    let fromZ, toZ, stepZ;\n    switch (args.length) {\n        case 9:\n            stepX = args[6];\n            stepY = args[7];\n            stepZ = args[8];\n        case 6:\n            [fromX, toX, fromY, toY, fromZ, toZ] = args;\n            break;\n        case 3:\n            [toX, toY, toZ] = args;\n            fromX = fromY = fromZ = 0;\n            break;\n        default:\n            illegalArity(args.length);\n    }\n    const rx = range(fromX, toX, stepX);\n    const ry = range(fromY, toY, stepY);\n    for (let z of range(fromZ, toZ, stepZ)) {\n        for (let y of ry) {\n            for (let x of rx) {\n                yield [x, y, z];\n            }\n        }\n    }\n}\n","import { ensureArray } from \"@thi.ng/arrays\";\n/**\n * Yields iterator which consumes input and yield its values in reverse\n * order. Important: Input MUST be finite.\n *\n * ```\n * [...tx.reverse(\"hello world\")]\n * // [ \"d\", \"l\", \"r\", \"o\", \"w\", \" \", \"o\", \"l\", \"l\", \"e\", \"h\" ]\n * ```\n *\n * @param input\n */\nexport function* reverse(input) {\n    const _input = ensureArray(input);\n    let n = _input.length;\n    while (--n >= 0) {\n        yield _input[n];\n    }\n}\n","/**\n * Yields an iterator of all `src` values, followed by the same values\n * in reverse order. Efficiently builds the reversed order via an\n * internal linked list.\n *\n * ```\n * [...symmetric([1, 2, 3])]\n * // [ 1, 2, 3, 3, 2, 1 ]\n * ```\n *\n * @param src\n */\nexport function* symmetric(src) {\n    let head = undefined;\n    for (let x of src) {\n        head = { x, n: head };\n        yield x;\n    }\n    while (head) {\n        yield head.x;\n        head = head.n;\n    }\n}\n","import { normRange } from \"./norm-range\";\nimport { repeat } from \"./repeat\";\n/**\n * Keyframe based interpolator. Yields a sequence of `num+1` equally\n * spaced, tweened values from given keyframe tuples (`stops`).\n * Keyframes are defined as `[time, value]` tuples. Only values in the\n * closed `[min..max]` time interval will be computed.\n *\n * Interpolation happens in two stages: First the given `init` function\n * is called to transform/prepare pairs of consecutive keyframes into a\n * single interval (user defined). Then, to produce each tweened value\n * calls `mix` with the currently active interval and interpolation time\n * value `t` (re-normalized and relative to current interval). The\n * iterator yields results of these `mix()` function calls.\n *\n * Depending on the overall `num`ber of samples requested and the\n * distance between keyframes, some keyframes MIGHT be skipped. E.g. if\n * requesting 10 samples within [0,1], the interval between two\n * successive keyframes at 0.12 and 0.19 would be skipped entirely,\n * since samples will only be taken at multiples of `1/num` (i.e. 0.0,\n * 0.1, 0.2... in this example).\n *\n * The given keyframe times can lie outside the `min`/`max` range and\n * also don't need to cover the range fully. In the latter case, tweened\n * values before the first or after the last keyframe will yield the\n * value of the first/last keyframe. If only a single keyframe is given\n * in total, all `num` yielded samples will be that keyframe's\n * transformed value.\n *\n * ```\n * [...tween({\n *   num: 10,\n *   min: 0,\n *   max: 100,\n *   init: (a, b) => [a, b],\n *   mix: ([a, b], t) => Math.floor(a + (b - a) * t),\n *   stops: [[20, 100], [50, 200], [80, 0]]\n * })]\n * // [ 100, 100, 100, 133, 166, 200, 133, 66, 0, 0, 0 ]\n * ```\n *\n * Using easing functions (e.g. from thi.ng/math), non-linear\n * interpolation within each keyframe interval can be achieved:\n *\n * ```\n * import { mix, smoothStep } from \"@thi.ng/math\"\n *\n * [...tween({\n *   num: 10,\n *   min: 0,\n *   max: 100,\n *   init: (a, b) => [a, b],\n *   mix: ([a, b], t) => Math.floor(mix(a, b, smoothStep(0.1, 0.9, t))),\n *   stops: [[20, 100], [50, 200], [80, 0]]\n * })]\n * // [ 100, 100, 100, 120, 179, 200, 158, 41, 0, 0, 0 ]\n * ```\n * @see TweenOpts\n * @see interpolate\n * @see interpolateHermite\n * @see interpolateLinear\n *\n * @param opts\n */\nexport function* tween(opts) {\n    const { min, max, num, init, mix, stops } = opts;\n    let l = stops.length;\n    if (l < 1)\n        return;\n    if (l === 1) {\n        yield* repeat(mix(init(stops[0][1], stops[0][1]), 0), num);\n    }\n    stops.sort((a, b) => a[0] - b[0]);\n    stops[l - 1][0] < max && stops.push([max, stops[l - 1][1]]);\n    stops[0][0] > min && stops.unshift([min, stops[0][1]]);\n    const range = max - min;\n    let start = stops[0][0];\n    let end = stops[1][0];\n    let delta = end - start;\n    let interval = init(stops[0][1], stops[1][1]);\n    let i = 1;\n    l = stops.length;\n    for (let t of normRange(num)) {\n        t = min + range * t;\n        if (t > end) {\n            while (i < l && t > stops[i][0])\n                i++;\n            start = stops[i - 1][0];\n            end = stops[i][0];\n            delta = end - start;\n            interval = init(stops[i - 1][1], stops[i][1]);\n        }\n        yield mix(interval, delta !== 0 ? (t - start) / delta : 0);\n    }\n}\n","export function* vals(x) {\n    for (let k in x) {\n        if (x.hasOwnProperty(k)) {\n            yield x[k];\n        }\n    }\n}\n","import { ensureArray } from \"@thi.ng/arrays\";\nimport { illegalArgs } from \"@thi.ng/errors\";\nimport { inRange } from \"@thi.ng/math\";\n/**\n * Yields iterator of `src` with the last `numLeft` values of `src`\n * prepended at the beginning and/or the first `numRight` values\n * appended at the end. `numLeft` defaults to 1 and `numRight` defaults\n * to same value as `numLeft`, therefore wraps both sides by default and\n * throws error if either `nXXX` < 0 or larger than `src.length`.\n *\n * @see extendSides\n * @see padSides\n *\n * @param src\n * @param numLeft\n * @param numRight\n */\nexport function* wrapSides(src, numLeft = 1, numRight = numLeft) {\n    const _src = ensureArray(src);\n    !(inRange(numLeft, 0, _src.length) && inRange(numRight, 0, _src.length)) &&\n        illegalArgs(`allowed wrap range: [0..${_src.length}]`);\n    if (numLeft > 0) {\n        for (let m = _src.length, i = m - numLeft; i < m; i++) {\n            yield _src[i];\n        }\n    }\n    yield* _src;\n    if (numRight > 0) {\n        for (let i = 0; i < numRight; i++) {\n            yield _src[i];\n        }\n    }\n}\n","export * from \"./iterator\";\nexport * from \"./reduce\";\nexport * from \"./reduced\";\nexport * from \"./run\";\nexport * from \"./step\";\nexport * from \"./transduce\";\nexport * from \"./rfn/add\";\nexport * from \"./rfn/assoc-map\";\nexport * from \"./rfn/assoc-obj\";\nexport * from \"./rfn/conj\";\nexport * from \"./rfn/count\";\nexport * from \"./rfn/div\";\nexport * from \"./rfn/every\";\nexport * from \"./rfn/fill\";\nexport * from \"./rfn/frequencies\";\nexport * from \"./rfn/group-binary\";\nexport * from \"./rfn/group-by-map\";\nexport * from \"./rfn/group-by-obj\";\nexport * from \"./rfn/last\";\nexport * from \"./rfn/max-compare\";\nexport * from \"./rfn/max\";\nexport * from \"./rfn/mean\";\nexport * from \"./rfn/min-compare\";\nexport * from \"./rfn/min\";\nexport * from \"./rfn/mul\";\nexport * from \"./rfn/push-copy\";\nexport * from \"./rfn/push\";\nexport * from \"./rfn/reductions\";\nexport * from \"./rfn/some\";\nexport * from \"./rfn/str\";\nexport * from \"./rfn/sub\";\nexport * from \"./xform/benchmark\";\nexport * from \"./xform/cat\";\nexport * from \"./xform/converge\";\nexport * from \"./xform/convolve\";\nexport * from \"./xform/dedupe\";\nexport * from \"./xform/delayed\";\nexport * from \"./xform/distinct\";\nexport * from \"./xform/drop-nth\";\nexport * from \"./xform/drop-while\";\nexport * from \"./xform/drop\";\nexport * from \"./xform/duplicate\";\nexport * from \"./xform/filter\";\nexport * from \"./xform/filter-fuzzy\";\nexport * from \"./xform/flatten-with\";\nexport * from \"./xform/flatten\";\nexport * from \"./xform/indexed\";\nexport * from \"./xform/interleave\";\nexport * from \"./xform/interpolate\";\nexport * from \"./xform/interpolate-hermite\";\nexport * from \"./xform/interpolate-linear\";\nexport * from \"./xform/interpose\";\nexport * from \"./xform/keep\";\nexport * from \"./xform/labeled\";\nexport * from \"./xform/map-deep\";\nexport * from \"./xform/map-indexed\";\nexport * from \"./xform/map-keys\";\nexport * from \"./xform/map-nth\";\nexport * from \"./xform/map-vals\";\nexport * from \"./xform/map\";\nexport * from \"./xform/mapcat\";\nexport * from \"./xform/match-first\";\nexport * from \"./xform/match-last\";\nexport * from \"./xform/moving-average\";\nexport * from \"./xform/moving-median\";\nexport * from \"./xform/multiplex\";\nexport * from \"./xform/multiplex-obj\";\nexport * from \"./xform/noop\";\nexport * from \"./xform/pad-last\";\nexport * from \"./xform/page\";\nexport * from \"./xform/partition-by\";\nexport * from \"./xform/partition-of\";\nexport * from \"./xform/partition-sort\";\nexport * from \"./xform/partition-sync\";\nexport * from \"./xform/partition\";\nexport * from \"./xform/pluck\";\nexport * from \"./xform/rename\";\nexport * from \"./xform/sample\";\nexport * from \"./xform/scan\";\nexport * from \"./xform/select-keys\";\nexport * from \"./xform/side-effect\";\nexport * from \"./xform/sliding-window\";\nexport * from \"./xform/stream-shuffle\";\nexport * from \"./xform/stream-sort\";\nexport * from \"./xform/struct\";\nexport * from \"./xform/swizzle\";\nexport * from \"./xform/take-nth\";\nexport * from \"./xform/take-last\";\nexport * from \"./xform/take-while\";\nexport * from \"./xform/take\";\nexport * from \"./xform/throttle\";\nexport * from \"./xform/throttle-time\";\nexport * from \"./xform/toggle\";\nexport * from \"./xform/trace\";\nexport * from \"./xform/word-wrap\";\nexport * from \"./func/comp\";\nexport * from \"./func/compr\";\nexport * from \"./func/deep-transform\";\nexport * from \"./func/juxtr\";\nexport * from \"./func/key-selector\";\nexport * from \"./func/lookup\";\nexport * from \"./func/renamer\";\nexport * from \"./iter/as-iterable\";\nexport * from \"./iter/choices\";\nexport * from \"./iter/concat\";\nexport * from \"./iter/cycle\";\nexport * from \"./iter/extend-sides\";\nexport * from \"./iter/iterate\";\nexport * from \"./iter/keys\";\nexport * from \"./iter/norm-range\";\nexport * from \"./iter/pad-sides\";\nexport * from \"./iter/pairs\";\nexport * from \"./iter/permutations\";\nexport * from \"./iter/range\";\nexport * from \"./iter/range2d\";\nexport * from \"./iter/range3d\";\nexport * from \"./iter/repeat\";\nexport * from \"./iter/repeatedly\";\nexport * from \"./iter/reverse\";\nexport * from \"./iter/symmetric\";\nexport * from \"./iter/tween\";\nexport * from \"./iter/vals\";\nexport * from \"./iter/wrap-sides\";\nexport * from \"./iter/zip\";\n","let NEXT_ID = 0;\nexport const nextID = () => NEXT_ID++;\nexport const optsWithID = (prefix, opts) => ((!opts || !opts.id ? Object.assign(Object.assign({}, opts), { id: prefix + \"-\" + nextID() }) : opts));\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { peek } from \"@thi.ng/arrays\";\nimport { implementsFunction, isFunction, isPlainObject } from \"@thi.ng/checks\";\nimport { illegalArity, illegalState } from \"@thi.ng/errors\";\nimport { comp, isReduced, push, unreduced } from \"@thi.ng/transducers\";\nimport { LOGGER } from \"./api\";\nimport { nextID } from \"./utils/idgen\";\n/**\n * Creates a new {@link Subscription} instance, the fundamental datatype\n * and building block provided by this package.\n *\n * @remarks\n * Most other types in rstream, including {@link Stream}s, are\n * `Subscription`s and all can be:\n *\n * - linked into directed graphs (sync or async & not necessarily DAGs)\n * - transformed using transducers (incl. support for early termination)\n * - can have any number of subscribers (optionally each w/ their own\n *   transducers)\n * - recursively unsubscribe themselves from parent after their last\n *   subscriber unsubscribed (configurable)\n * - will go into a non-recoverable error state if none of the\n *   subscribers has an error handler itself\n * - implement the {@link @thi.ng/api#IDeref} interface\n *\n * Subscription behavior can be customized via the additional (optional)\n * options arg. See `CommonOpts` and `SubscriptionOpts` for further\n * details.\n *\n * @example\n * ```ts\n * // as reactive value mechanism (same as with stream() above)\n * s = subscription();\n * s.subscribe(trace(\"s1\"));\n * s.subscribe(trace(\"s2\"), { xform: tx.filter((x) => x > 25) });\n *\n * // external trigger\n * s.next(23);\n * // s1 23\n * s.next(42);\n * // s1 42\n * // s2 42\n * ```\n *\n * @param sub\n * @param opts\n */\nexport const subscription = (sub, opts) => new Subscription(sub, opts);\nexport class Subscription {\n    constructor(sub, opts = {}) {\n        this.state = 0 /* IDLE */;\n        this.parent = opts.parent;\n        this.closeIn =\n            opts.closeIn !== undefined ? opts.closeIn : 2 /* LAST */;\n        this.closeOut =\n            opts.closeOut !== undefined ? opts.closeOut : 2 /* LAST */;\n        this.cacheLast = opts.cache !== false;\n        this.id = opts.id || `sub-${nextID()}`;\n        this.last = SEMAPHORE;\n        this.subs = [];\n        if (sub) {\n            this.subs.push(sub);\n        }\n        if (opts.xform) {\n            this.xform = opts.xform(push());\n        }\n    }\n    deref() {\n        return this.last !== SEMAPHORE ? this.last : undefined;\n    }\n    getState() {\n        return this.state;\n    }\n    subscribe(...args) {\n        this.ensureState();\n        let sub;\n        let opts = args.length > 1 && isPlainObject(peek(args))\n            ? Object.assign({}, args.pop()) : {};\n        switch (args.length) {\n            case 1:\n                if (isFunction(args[0])) {\n                    opts.xform = args[0];\n                    !opts.id && (opts.id = `xform-${nextID()}`);\n                }\n                else {\n                    sub = args[0];\n                }\n                break;\n            case 2:\n                sub = args[0];\n                opts.xform = args[1];\n                break;\n            default:\n                illegalArity(args.length);\n        }\n        if (implementsFunction(sub, \"subscribe\")) {\n            sub.parent = this;\n        }\n        else {\n            // FIXME inherit options from this sub or defaults?\n            sub = subscription(sub, Object.assign({ parent: this }, opts));\n        }\n        this.last !== SEMAPHORE && sub.next(this.last);\n        return this.addWrapped(sub);\n    }\n    /**\n     * Returns array of new child subscriptions for all given\n     * subscribers.\n     *\n     * @param subs\n     */\n    subscribeAll(...subs) {\n        const wrapped = [];\n        for (let s of subs) {\n            wrapped.push(this.subscribe(s));\n        }\n        return wrapped;\n    }\n    transform(...xf) {\n        const n = xf.length - 1;\n        return isPlainObject(xf[n])\n            ? this.subscribe(comp(...xf.slice(0, n)), xf[n])\n            : this.subscribe(comp(...xf));\n    }\n    /**\n     * If called without arg, removes this subscription from parent (if\n     * any), cleans up internal state and goes into DONE state. If\n     * called with arg, removes the sub from internal pool and if no\n     * other subs are remaining also cleans up itself and goes into DONE\n     * state.\n     *\n     * @param sub\n     */\n    unsubscribe(sub) {\n        LOGGER.debug(this.id, \"unsub start\", sub ? sub.id : \"self\");\n        if (!sub) {\n            let res = true;\n            if (this.parent) {\n                res = this.parent.unsubscribe(this);\n            }\n            this.state = 2 /* DONE */;\n            this.cleanup();\n            return res;\n        }\n        if (this.subs) {\n            LOGGER.debug(this.id, \"unsub child\", sub.id);\n            const idx = this.subs.indexOf(sub);\n            if (idx >= 0) {\n                this.subs.splice(idx, 1);\n                if (this.closeOut === 1 /* FIRST */ ||\n                    (!this.subs.length && this.closeOut !== 0 /* NEVER */)) {\n                    this.unsubscribe();\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n    next(x) {\n        if (this.state < 2 /* DONE */) {\n            if (this.xform) {\n                const acc = this.xform[2]([], x);\n                const uacc = unreduced(acc);\n                const n = uacc.length;\n                for (let i = 0; i < n; i++) {\n                    this.dispatch(uacc[i]);\n                }\n                if (isReduced(acc)) {\n                    this.done();\n                }\n            }\n            else {\n                this.dispatch(x);\n            }\n        }\n    }\n    done() {\n        LOGGER.debug(this.id, \"entering done()\");\n        if (this.state < 2 /* DONE */) {\n            if (this.xform) {\n                const acc = this.xform[1]([]);\n                const uacc = unreduced(acc);\n                const n = uacc.length;\n                for (let i = 0; i < n; i++) {\n                    this.dispatch(uacc[i]);\n                }\n            }\n            this.state = 2 /* DONE */;\n            for (let s of [...this.subs]) {\n                try {\n                    s.done && s.done();\n                }\n                catch (e) {\n                    s.error ? s.error(e) : this.error(e);\n                }\n            }\n            this.unsubscribe();\n            LOGGER.debug(this.id, \"exiting done()\");\n        }\n    }\n    error(e) {\n        this.state = 3 /* ERROR */;\n        let notified = false;\n        if (this.subs && this.subs.length) {\n            for (let s of this.subs.slice()) {\n                if (s.error) {\n                    s.error(e);\n                    notified = true;\n                }\n            }\n        }\n        if (!notified) {\n            LOGGER.warn(this.id, \"unhandled error:\", e);\n            if (this.parent) {\n                LOGGER.debug(this.id, \"unsubscribing...\");\n                this.unsubscribe();\n                this.state = 3 /* ERROR */;\n            }\n        }\n    }\n    addWrapped(wrapped) {\n        this.subs.push(wrapped);\n        this.state = 1 /* ACTIVE */;\n        return wrapped;\n    }\n    dispatch(x) {\n        // LOGGER.debug(this.id, \"dispatch\", x);\n        this.cacheLast && (this.last = x);\n        const subs = this.subs;\n        let s;\n        if (subs.length === 1) {\n            s = subs[0];\n            try {\n                s.next && s.next(x);\n            }\n            catch (e) {\n                s.error ? s.error(e) : this.error(e);\n            }\n        }\n        else {\n            for (let i = subs.length; --i >= 0;) {\n                s = subs[i];\n                try {\n                    s.next && s.next(x);\n                }\n                catch (e) {\n                    s.error ? s.error(e) : this.error(e);\n                }\n            }\n        }\n    }\n    ensureState() {\n        if (this.state >= 2 /* DONE */) {\n            illegalState(`operation not allowed in state ${this.state}`);\n        }\n    }\n    cleanup() {\n        LOGGER.debug(this.id, \"cleanup\");\n        this.subs.length = 0;\n        delete this.parent;\n        delete this.xform;\n        delete this.last;\n    }\n}\n","import { isPlainObject } from \"@thi.ng/checks\";\nimport { comp, labeled, mapVals, partitionSync } from \"@thi.ng/transducers\";\nimport { LOGGER } from \"./api\";\nimport { Subscription } from \"./subscription\";\nimport { optsWithID } from \"./utils/idgen\";\n/**\n * Similar to {@link StreamMerge}, but with extra synchronization of\n * inputs. Before emitting any new values, {@link StreamSync} collects\n * values until at least one has been received from *all* inputs. Once\n * that's the case, the collected values are sent as labeled tuple\n * object to downstream subscribers.\n *\n * @remarks\n * Each value in the emitted tuple objects is stored under their input\n * stream's ID. Only the last value received from each input is passed\n * on. After the initial tuple has been emitted, you can choose from two\n * possible behaviors:\n *\n * 1) Any future change in any input will produce a new result tuple.\n *    These tuples will retain the most recently read values from other\n *    inputs. This behavior is the default and illustrated in the above\n *    schematic.\n * 2) If the `reset` option is `true`, every input will have to provide\n *    at least one new value again until another result tuple is\n *    produced.\n *\n * Any done inputs are automatically removed. By default, `StreamSync`\n * calls {@link ISubscriber.done} when the last active input is done,\n * but this behavior can be overridden via the provided options.\n *\n * Input streams can be added and removed dynamically and the emitted\n * tuple size adjusts to the current number of inputs (the next time a\n * value is received from any input).\n *\n * If the `reset` option is enabled, the last emitted tuple is allowed\n * to be incomplete, by default. To only allow complete tuples, also set\n * the `all` option to `false`.\n *\n * The synchronization is done via the `partitionSync()` transducer from\n * the @thi.ng/transducers package. See this function's docs for further\n * details.\n *\n * @example\n * ```ts\n * const a = rs.stream();\n * const b = rs.stream();\n * s = sync({ src: { a, b } }).subscribe(trace(\"result: \"));\n * a.next(1);\n * b.next(2);\n * // result: { a: 1, b: 2 }\n * ```\n *\n * @see StreamSyncOpts\n *\n * @param opts\n */\nexport const sync = (opts) => new StreamSync(opts);\nexport class StreamSync extends Subscription {\n    constructor(opts) {\n        const srcIDs = new Set();\n        const psync = partitionSync(srcIDs, {\n            key: (x) => x[0],\n            mergeOnly: opts.mergeOnly === true,\n            reset: opts.reset === true,\n            all: opts.all !== false,\n            backPressure: opts.backPressure || 0\n        });\n        const mapv = mapVals((x) => x[1]);\n        super(undefined, optsWithID(\"streamsync\", Object.assign(Object.assign({}, opts), { xform: opts.xform\n                ? comp(psync, mapv, opts.xform)\n                : comp(psync, mapv) })));\n        this.sources = new Map();\n        this.realSourceIDs = new Map();\n        this.invRealSourceIDs = new Map();\n        this.idSources = new Map();\n        this.sourceIDs = srcIDs;\n        opts.src && this.addAll(opts.src);\n    }\n    add(src, id) {\n        id || (id = src.id);\n        this.ensureState();\n        this.sourceIDs.add(id);\n        this.realSourceIDs.set(id, src.id);\n        this.invRealSourceIDs.set(src.id, id);\n        this.idSources.set(src.id, src);\n        this.sources.set(src, src.subscribe({\n            next: (x) => {\n                if (x[1] instanceof Subscription) {\n                    this.add(x[1]);\n                }\n                else {\n                    this.next(x);\n                }\n            },\n            done: () => this.markDone(src),\n            __owner: this\n        }, labeled(id), { id: `in-${id}` }));\n    }\n    addAll(src) {\n        if (isPlainObject(src)) {\n            // pre-add all source ids for partitionSync\n            for (let id in src) {\n                this.sourceIDs.add(id);\n            }\n            for (let id in src) {\n                this.add(src[id], id);\n            }\n        }\n        else {\n            // pre-add all source ids for partitionSync\n            for (let s of src) {\n                this.sourceIDs.add(s.id);\n            }\n            for (let s of src) {\n                this.add(s);\n            }\n        }\n    }\n    remove(src) {\n        const sub = this.sources.get(src);\n        if (sub) {\n            const id = this.invRealSourceIDs.get(src.id);\n            LOGGER.info(`removing src: ${src.id} (${id})`);\n            this.sourceIDs.delete(id);\n            this.realSourceIDs.delete(id);\n            this.invRealSourceIDs.delete(src.id);\n            this.idSources.delete(src.id);\n            this.sources.delete(src);\n            sub.unsubscribe();\n            return true;\n        }\n        return false;\n    }\n    removeID(id) {\n        const src = this.getSourceForID(id);\n        return src ? this.remove(src) : false;\n    }\n    removeAll(src) {\n        // pre-remove all source ids for partitionSync\n        for (let s of src) {\n            this.sourceIDs.delete(this.invRealSourceIDs.get(s.id));\n        }\n        let ok = true;\n        for (let s of src) {\n            ok = this.remove(s) && ok;\n        }\n        return ok;\n    }\n    removeAllIDs(ids) {\n        let ok = true;\n        for (let id of ids) {\n            ok = this.removeID(id) && ok;\n        }\n        return ok;\n    }\n    getSourceForID(id) {\n        return this.idSources.get(this.realSourceIDs.get(id));\n    }\n    getSources() {\n        const res = {};\n        for (let [id, src] of this.idSources) {\n            res[this.invRealSourceIDs.get(id)] = src;\n        }\n        return res;\n    }\n    unsubscribe(sub) {\n        if (!sub) {\n            for (let s of this.sources.values()) {\n                s.unsubscribe();\n            }\n            this.state = 2 /* DONE */;\n            this.sources.clear();\n            this.sourceIDs.clear();\n            this.realSourceIDs.clear();\n            this.invRealSourceIDs.clear();\n            this.idSources.clear();\n        }\n        return super.unsubscribe(sub);\n    }\n    markDone(src) {\n        this.remove(src);\n        if (this.closeIn === 1 /* FIRST */ ||\n            (this.closeIn === 2 /* LAST */ && !this.sources.size)) {\n            this.done();\n        }\n    }\n}\n","export const inlineWorker = (src) => makeWorker(new Blob([src], { type: \"text/javascript\" }));\nexport const makeWorker = (worker) => worker instanceof Worker\n    ? worker\n    : new Worker(worker instanceof Blob ? URL.createObjectURL(worker) : worker);\n","import { LOGGER } from \"../api\";\nimport { Subscription } from \"../subscription\";\nimport { nextID } from \"../utils/idgen\";\nimport { makeWorker } from \"../utils/worker\";\n/**\n * Returns a {@link Subscription} which processes received values via\n * the configured worker(s) and then passes values received back from\n * the worker(s) downstream, thereby allowing workers to be used\n * transparently for stream processing.\n *\n * @remarks\n * Multiple worker instances are supported for concurrent processing.\n * See the {@link TunnelOpts} for details.\n *\n * Also see {@link forkJoin} and {@link postWorker}.\n *\n * @param opts\n */\nexport const tunnel = (opts) => new Tunnel(opts);\nexport class Tunnel extends Subscription {\n    constructor(opts) {\n        super(undefined, { id: opts.id || `tunnel-${nextID()}` });\n        this.src = opts.src;\n        this.workers = new Array(opts.maxWorkers || 1);\n        this.transferables = opts.transferables;\n        this.terminate = opts.terminate || 1000;\n        this.interrupt = opts.interrupt || false;\n        this.index = 0;\n    }\n    next(x) {\n        if (this.state < 2 /* DONE */) {\n            let tx;\n            if (this.transferables) {\n                tx = this.transferables(x);\n            }\n            let worker = this.workers[this.index];\n            if (this.interrupt && worker) {\n                worker.terminate();\n                worker = null;\n            }\n            if (!worker) {\n                this.workers[this.index++] = worker = makeWorker(this.src);\n                this.index %= this.workers.length;\n                worker.addEventListener(\"message\", (e) => this.dispatch(e.data));\n                worker.addEventListener(\"error\", (e) => this.error(e));\n            }\n            worker.postMessage(x, tx || []);\n        }\n    }\n    done() {\n        super.done();\n        if (this.terminate > 0) {\n            setTimeout(() => {\n                LOGGER.info(\"terminating workers...\");\n                this.workers.forEach((worker) => worker && worker.terminate());\n                delete this.workers;\n            }, this.terminate);\n        }\n    }\n}\n","import { comp, map, mapcat, range } from \"@thi.ng/transducers\";\nimport { sync } from \"./stream-sync\";\nimport { tunnel } from \"./subs/tunnel\";\n/**\n * Returns a {@link StreamSync} instance which creates & attaches\n * multiple subscriptions to given `src` input stream, processes each\n * received value in parallel via web workers, then recombines partial\n * results and passes the resulting transformed value downstream.\n *\n * @remarks\n * See {@link ForkJoinOpts} for further details & behavior options and\n * the {@link forkBuffer} and {@link joinBuffer} helpers for array-based\n * value processing (most likely use case).\n *\n * @param src input stream\n * @param opts\n */\nexport const forkJoin = (opts) => {\n    const numWorkers = opts.numWorkers || navigator.hardwareConcurrency || 4;\n    const workerIDs = range(numWorkers);\n    return sync({\n        src: [\n            ...map((id) => opts.src\n                .transform(map((x) => opts.fork(id, numWorkers, x)))\n                .subscribe(tunnel({\n                src: opts.worker,\n                transferables: opts.transferables,\n                interrupt: opts.interrupt === true,\n                terminate: opts.terminate,\n                id: String(id)\n            })), workerIDs)\n        ],\n        xform: comp(\n        // form result tuple in original order\n        map((results) => [...map((id) => results[id], workerIDs)]), \n        // apply user join function\n        map(opts.join)),\n        reset: true,\n        backPressure: opts.backPressure\n    });\n};\n/**\n * Higher-order fork function for scenarios involving the split-parallel\n * processing of a large buffer.\n *\n * @remarks\n * The returned function is meant to be used as `fork` function in a\n * {@link ForkJoinOpts} config and extracts a workload slice of the\n * original buffer for a single worker. The HOF itself takes a minimum\n * chunk size as optional parameter (default: 1).\n *\n * **Note:** Depending on the configured `minChunkSize` and the size of\n * the input buffer to be partitioned, the returned fork function might\n * produce empty sub-arrays for some workers, iff the configured number\n * of workers exceeds the resulting number of chunks / input values.\n * E.g. If the number of workers = 8, buffer size = 10 and min chunk\n * size = 2, then the last 3 (i.e. 8 - 10 / 2) workers will only receive\n * empty workloads.\n *\n * More generally, if the input buffer size is not equally distributable\n * over the given number of workers, the last worker(s) might receive a\n * larger, smaller or empty chunk.\n *\n * Also see {@link forkJoin} and {@link joinBuffer}.\n *\n * @example\n * ```ts\n * forkJoin<number[], number[], number[], number[]>({\n *     src,\n *     // job definition / split buffer into chunks (min size 256 values)\n *     fork: forkBuffer(256),\n *     // re-join partial results\n *     join: joinBuffer(),\n *     worker: \"./worker.js\",\n * })\n * ```\n *\n * @param minChunkSize\n */\nexport const forkBuffer = (minChunkSize = 1) => (id, numWorkers, buf) => {\n    const chunkSize = Math.max(minChunkSize, (buf.length / numWorkers) | 0);\n    return id < numWorkers - 1\n        ? buf.slice(id * chunkSize, (id + 1) * chunkSize)\n        : buf.slice(id * chunkSize);\n};\n/**\n * Higher-order join function for scenarios involving the split-parallel\n * processing of a large buffer.\n *\n * @remarks\n * The returned function is meant to be used as `join` function in a\n * {@link ForkJoinOpts} config, receives the processed result chunks\n * from all workers (ordered by worker ID) and concatenates them back\n * into a single result array.\n *\n * The optional `fn` arg can be used to pick the actual result chunk\n * from each worker result. This is useful if the worker result type is\n * not an array and includes other data points (e.g. execution metrics\n * etc.). If `fn` is not given, it defaults to the identity function\n * (i.e. each worker's result is assumed to be an array).\n *\n * Also see {@link forkJoin} and {@link forkBuffer}.\n *\n * @param fn\n */\nexport const joinBuffer = (fn) => fn\n    ? (parts) => [...mapcat(fn, parts)]\n    : (parts) => Array.prototype.concat.apply([], parts);\n","import { assert } from \"@thi.ng/api\";\nimport { Subscription } from \"./subscription\";\nimport { optsWithID } from \"./utils/idgen\";\n/**\n * Returns a {@link Subscription} which transforms each incoming value\n * into a new {@link Stream}, subscribes to it (via an hidden / internal\n * subscription) and then only passes values from that stream to its own\n * subscribers.\n *\n * @remarks\n * If a new value is received, the metastream first unsubscribes from\n * any still active stream, before creating and subscribing to the new\n * stream. Hence this stream type is useful for cases where streams need\n * to be dynamically created & inserted into an existing dataflow\n * topology.\n *\n * The user supplied `factory` function will be called for each incoming\n * value and is responsible for creating the new stream instances. If\n * the function returns null/undefined, no further action will be taken\n * (acts like a filter transducer).\n *\n * The factory function does NOT need to create *new* streams, but can\n * merely return other existing streams, and so making the meta stream\n * act like a switch with arbitrary criteria.\n *\n * If the meta stream itself is the only subscriber to existing input\n * streams, you'll need to configure the input's\n * {@link CommonOpts.closeOut} option to keep them alive and support\n * dynamic switching between them.\n *\n * @example\n * ```ts\n * // transform each received odd number into a stream\n * // producing 3 copies of that number in the metastream\n * // even numbers are ignored\n * a = metastream(\n *   (x) => (x & 1)\n *     ? fromIterable(tx.repeat(x, 3), { delay: 100 })\n *     : null\n * );\n *\n * a.subscribe(trace())\n * a.next(23)\n *\n * // 23\n * // 23\n * // 23\n *\n * a.next(42) // ignored by factory fn\n *\n * a.next(43)\n * // 43\n * // 43\n * // 43\n * ```\n *\n * @example\n * ```ts\n * // infinite inputs\n * a = fromIterable(\n *   tx.repeat(\"a\"),\n *   { delay: 1000, closeOut: CloseMode.NEVER }\n * );\n * b = fromIterable(\n *   tx.repeat(\"b\"),\n *   { delay: 1000, closeOut: CloseMode.NEVER }\n * );\n *\n * // stream selector / switch\n * m = metaStream((x) => x ? a : b);\n * m.subscribe(trace(\"meta from: \"));\n *\n * m.next(true);\n * // meta from: a\n *\n * m.next(false);\n * // meta from: b\n *\n * m.next(true);\n * // meta from: a\n * ```\n *\n * @param factory\n * @param id\n */\nexport const metaStream = (factory, opts) => new MetaStream(factory, opts);\nexport class MetaStream extends Subscription {\n    constructor(factory, opts) {\n        super(undefined, optsWithID(\"metastram\", opts));\n        this.factory = factory;\n    }\n    next(x) {\n        if (this.state < 2 /* DONE */) {\n            if (this.stream) {\n                this.stream.unsubscribe(this.sub);\n            }\n            let stream = this.factory(x);\n            if (stream) {\n                this.stream = stream;\n                this.sub = this.stream.subscribe({\n                    next: (x) => {\n                        stream === this.stream && super.dispatch(x);\n                    },\n                    done: () => {\n                        this.stream.unsubscribe(this.sub);\n                        if (stream === this.stream) {\n                            this.stream = undefined;\n                            this.sub = undefined;\n                        }\n                    },\n                    error: (e) => super.error(e),\n                    __owner: this\n                });\n            }\n        }\n    }\n    done() {\n        if (this.stream) {\n            this.detach();\n        }\n        super.done();\n    }\n    unsubscribe(sub) {\n        if (this.stream && (!sub || this.subs.length === 1)) {\n            this.detach();\n        }\n        return super.unsubscribe();\n    }\n    detach() {\n        assert(!!this.stream, \"input stream already removed\");\n        this.stream.unsubscribe(this.sub);\n        delete this.stream;\n        delete this.sub;\n    }\n}\n","export function dissoc(coll, keys) {\n    for (let k of keys) {\n        coll.delete(k);\n    }\n    return coll;\n}\nexport const dissocObj = (obj, keys) => {\n    for (let k of keys) {\n        delete obj[k];\n    }\n    return obj;\n};\n","import { equiv } from \"@thi.ng/equiv\";\nexport const equivMap = (a, b) => {\n    if (a === b) {\n        return true;\n    }\n    if (!(b instanceof Map) || a.size !== b.size) {\n        return false;\n    }\n    for (let p of a.entries()) {\n        if (!equiv(b.get(p[0]), p[1])) {\n            return false;\n        }\n    }\n    return true;\n};\nexport const equivSet = (a, b) => {\n    if (a === b) {\n        return true;\n    }\n    if (!(b instanceof Set) || a.size !== b.size) {\n        return false;\n    }\n    for (let k of a.keys()) {\n        if (!b.has(k)) {\n            return false;\n        }\n    }\n    return true;\n};\n","import { isMap } from \"@thi.ng/checks\";\nexport function into(dest, src) {\n    if (isMap(dest)) {\n        for (let x of src) {\n            dest.set(x[0], x[1]);\n        }\n    }\n    else {\n        for (let x of src) {\n            dest.add(x);\n        }\n    }\n    return dest;\n}\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { equiv } from \"@thi.ng/equiv\";\nimport { dissoc } from \"./dissoc\";\nimport { equivSet } from \"./internal/equiv\";\nimport { into } from \"./into\";\nconst __private = new WeakMap();\nconst __vals = (inst) => __private.get(inst).vals;\n/**\n * An alternative set implementation to the native ES6 Set type. Uses\n * customizable equality/equivalence predicate and so is more useful\n * when dealing with structured data. Implements full API of native Set\n * and by the default uses `@thi.ng/equiv` for equivalence checking.\n *\n * Additionally, the type also implements the `ICopy`, `IEmpty` and\n * `IEquiv` interfaces itself.\n */\nexport class ArraySet extends Set {\n    constructor(vals, opts = {}) {\n        super();\n        __private.set(this, { equiv: opts.equiv || equiv, vals: [] });\n        vals && this.into(vals);\n    }\n    *[Symbol.iterator]() {\n        yield* __vals(this);\n    }\n    get [Symbol.species]() {\n        return ArraySet;\n    }\n    get [Symbol.toStringTag]() {\n        return \"ArraySet\";\n    }\n    get size() {\n        return __vals(this).length;\n    }\n    copy() {\n        const $this = __private.get(this);\n        const s = new ArraySet(null, { equiv: $this.equiv });\n        __private.get(s).vals = $this.vals.slice();\n        return s;\n    }\n    empty() {\n        return new ArraySet(null, this.opts());\n    }\n    clear() {\n        __vals(this).length = 0;\n    }\n    first() {\n        if (this.size) {\n            return __vals(this)[0];\n        }\n    }\n    add(key) {\n        !this.has(key) && __vals(this).push(key);\n        return this;\n    }\n    into(keys) {\n        return into(this, keys);\n    }\n    has(key) {\n        return this.get(key, SEMAPHORE) !== SEMAPHORE;\n    }\n    /**\n     * Returns the canonical value for `x`, if present. If the set\n     * contains no equivalent for `x`, returns `notFound`.\n     *\n     * @param key\n     * @param notFound\n     */\n    get(key, notFound) {\n        const $this = __private.get(this);\n        const eq = $this.equiv;\n        const vals = $this.vals;\n        for (let i = vals.length; --i >= 0;) {\n            if (eq(vals[i], key)) {\n                return vals[i];\n            }\n        }\n        return notFound;\n    }\n    delete(key) {\n        const $this = __private.get(this);\n        const eq = $this.equiv;\n        const vals = $this.vals;\n        for (let i = vals.length; --i >= 0;) {\n            if (eq(vals[i], key)) {\n                vals.splice(i, 1);\n                return true;\n            }\n        }\n        return false;\n    }\n    disj(keys) {\n        return dissoc(this, keys);\n    }\n    equiv(o) {\n        return equivSet(this, o);\n    }\n    forEach(fn, thisArg) {\n        const vals = __vals(this);\n        for (let i = vals.length; --i >= 0;) {\n            const v = vals[i];\n            fn.call(thisArg, v, v, this);\n        }\n    }\n    *entries() {\n        for (let v of __vals(this)) {\n            yield [v, v];\n        }\n    }\n    *keys() {\n        yield* __vals(this);\n    }\n    *values() {\n        yield* __vals(this);\n    }\n    opts() {\n        return { equiv: __private.get(this).equiv };\n    }\n}\n","/**\n * Like `commonKeysObj()`, but for ES6 Maps.\n *\n * @param a\n * @param b\n * @param out\n */\nexport const commonKeysMap = (a, b, out = []) => {\n    for (let k of a.keys()) {\n        b.has(k) && out.push(k);\n    }\n    return out;\n};\n/**\n * Returns array of keys present in both args, i.e. the set intersection\n * of the given objects' key / property sets.\n *\n * ```\n * commonKeys({ a: 1, b: 2 }, { c: 10, b: 20, a: 30 })\n * // [ \"a\", \"b\" ]\n * ```\n *\n * @param a\n * @param b\n * @param out\n */\nexport const commonKeysObj = (a, b, out = []) => {\n    for (let k in a) {\n        b.hasOwnProperty(k) && out.push(k);\n    }\n    return out;\n};\n","import { implementsFunction, isMap, isSet } from \"@thi.ng/checks\";\nexport const empty = (x, ctor) => implementsFunction(x, \"empty\")\n    ? x.empty()\n    : new (x[Symbol.species] || ctor)();\nexport const copy = (x, ctor) => implementsFunction(x, \"copy\")\n    ? x.copy()\n    : new (x[Symbol.species] || ctor)(x);\nexport const first = (x) => x[Symbol.iterator]().next().value;\nexport const objValues = (src) => {\n    const vals = [];\n    for (let k in src) {\n        src.hasOwnProperty(k) && vals.push(src[k]);\n    }\n    return vals;\n};\nexport const ensureMap = (x) => isMap(x) ? x : new Map(x);\nexport const ensureSet = (x) => isSet(x) ? x : new Set(x);\n","import { reduce } from \"@thi.ng/transducers\";\nimport { ensureSet } from \"../utils\";\nexport const xformSetOp = (rfn, op, src) => src\n    ? reduce(rfn(), src)\n    : [\n        () => null,\n        (acc) => acc || new Set(),\n        (acc, x) => (!acc ? ensureSet(x) : op(acc, ensureSet(x)))\n    ];\n","import { xformSetOp } from \"./internal/xform-setop\";\nimport { into } from \"./into\";\nimport { copy, empty } from \"./utils\";\n/**\n * Computes the difference of sets `a - b` and writes results to new set\n * or optionally given set `out` (assumed to be empty for correct\n * results).\n *\n * @param a\n * @param b\n * @param out\n */\nexport const difference = (a, b, out) => {\n    if (a === b) {\n        return out || empty(a, Set);\n    }\n    out = out ? into(out, a) : copy(a, Set);\n    for (let i of b) {\n        out.delete(i);\n    }\n    return out;\n};\nexport function differenceR(src) {\n    return xformSetOp(differenceR, difference, src);\n}\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { equiv } from \"@thi.ng/equiv\";\nimport { ArraySet } from \"./array-set\";\nimport { dissoc } from \"./dissoc\";\nimport { equivMap } from \"./internal/equiv\";\nimport { into } from \"./into\";\nconst __private = new WeakMap();\nconst __map = (map) => __private.get(map).map;\nexport class EquivMap extends Map {\n    /**\n     * Converts given vanilla object into an `EquivMap` instance with\n     * default (or optionally provided) options and returns it. By\n     * default uses strict `===` equality check for `equiv` option.\n     *\n     * @param obj\n     * @param opts\n     */\n    static fromObject(obj, opts) {\n        const m = new EquivMap(null, Object.assign({ equiv: (a, b) => a === b }, opts));\n        for (let k in obj) {\n            obj.hasOwnProperty(k) && m.set(k, obj[k]);\n        }\n        return m;\n    }\n    /**\n     * Creates a new instance with optional initial key-value pairs and\n     * provided options. If no `opts` are given, uses `ArraySet` for\n     * storing canonical keys and `@thi.ng/equiv` for checking key\n     * equivalence.\n     *\n     * @param pairs\n     * @param opts\n     */\n    constructor(pairs, opts) {\n        super();\n        const _opts = Object.assign({ equiv, keys: ArraySet }, opts);\n        __private.set(this, {\n            keys: new _opts.keys(null, { equiv: _opts.equiv }),\n            map: new Map(),\n            opts: _opts\n        });\n        if (pairs) {\n            this.into(pairs);\n        }\n    }\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    get [Symbol.species]() {\n        return EquivMap;\n    }\n    get [Symbol.toStringTag]() {\n        return \"EquivMap\";\n    }\n    get size() {\n        return __private.get(this).keys.size;\n    }\n    clear() {\n        const $this = __private.get(this);\n        $this.keys.clear();\n        $this.map.clear();\n    }\n    empty() {\n        return new EquivMap(null, __private.get(this).opts);\n    }\n    copy() {\n        const $this = __private.get(this);\n        const m = new EquivMap();\n        __private.set(m, {\n            keys: $this.keys.copy(),\n            map: new Map($this.map),\n            opts: $this.opts\n        });\n        return m;\n    }\n    equiv(o) {\n        return equivMap(this, o);\n    }\n    delete(key) {\n        const $this = __private.get(this);\n        key = $this.keys.get(key, SEMAPHORE);\n        if (key !== SEMAPHORE) {\n            $this.map.delete(key);\n            $this.keys.delete(key);\n            return true;\n        }\n        return false;\n    }\n    dissoc(keys) {\n        return dissoc(this, keys);\n    }\n    forEach(fn, thisArg) {\n        for (let pair of __map(this)) {\n            fn.call(thisArg, pair[1], pair[0], this);\n        }\n    }\n    get(key, notFound) {\n        const $this = __private.get(this);\n        key = $this.keys.get(key, SEMAPHORE);\n        if (key !== SEMAPHORE) {\n            return $this.map.get(key);\n        }\n        return notFound;\n    }\n    has(key) {\n        return __private.get(this).keys.has(key);\n    }\n    set(key, value) {\n        const $this = __private.get(this);\n        const k = $this.keys.get(key, SEMAPHORE);\n        if (k !== SEMAPHORE) {\n            $this.map.set(k, value);\n        }\n        else {\n            $this.keys.add(key);\n            $this.map.set(key, value);\n        }\n        return this;\n    }\n    into(pairs) {\n        return into(this, pairs);\n    }\n    entries() {\n        return __map(this).entries();\n    }\n    keys() {\n        return __map(this).keys();\n    }\n    values() {\n        return __map(this).values();\n    }\n    opts() {\n        return __private.get(this).opts;\n    }\n}\n","export const MASKS = new Array(33).fill(0).map((_, i) => Math.pow(2, i) - 1);\n","/**\n * Aligns `addr` to next multiple of `size`. The latter must be a power\n * of 2.\n *\n * @param addr\n * @param size\n */\nexport const align = (addr, size) => (size--, (addr + size) & ~size);\n/**\n * Returns true if `addr` is aligned to wordsize `size`.\n */\nexport const isAligned = (addr, size) => !(addr & (size - 1));\n","/**\n * Returns number of 1 bits in `x`.\n *\n * @param x\n */\nexport const popCount = (x) => ((x = x - ((x >>> 1) & 0x55555555)),\n    (x = (x & 0x33333333) + ((x >>> 2) & 0x33333333)),\n    (((x + (x >>> 4)) & 0xf0f0f0f) * 0x1010101) >>> 24);\n/**\n * https://en.wikipedia.org/wiki/Hamming_distance\n *\n * @param x\n * @param y\n */\nexport const hammingDist = (x, y) => popCount(x ^ y);\n/**\n * Math.clz32() polyfill (corrected).\n *\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/clz32$revision/1426816\n *\n * @param x\n */\nexport const clz32 = (x) => x !== 0 ? 31 - ((Math.log(x >>> 0) / Math.LN2) | 0) : 32;\nexport const ctz32 = (x) => {\n    let c = 32;\n    x &= -x;\n    x && c--;\n    x & 0x0000ffff && (c -= 16);\n    x & 0x00ff00ff && (c -= 8);\n    x & 0x0f0f0f0f && (c -= 4);\n    x & 0x33333333 && (c -= 2);\n    x & 0x55555555 && (c -= 1);\n    return c;\n};\n/**\n * Returns the number of bits required to encode `x` (MUST be > 0).\n *\n * @param x\n */\nexport const bitSize = (x) => Math.ceil(Math.log(x) / Math.LN2);\n","import { MASKS } from \"./api\";\n/**\n * Creates bit mask by enabling bit `a` to bit `b-1`, both in range\n * 0-32. `b` MUST be >= `a`.\n *\n * ```\n * defMask(1,31).toString(16) // 7ffffffe\n * defMask(3,8).toString(16)  // f8\n * ```\n *\n * @param a\n * @param b\n */\nexport const defMask = (a, b) => (~MASKS[a] & MASKS[b]) >>> 0;\n/**\n * Returns unsigned version of `x` with only lowest `n` bits.\n *\n * @param n\n * @param x\n */\nexport const maskL = (n, x) => (x & MASKS[n]) >>> 0;\n/**\n * Returns unsigned version of `x` with only highest `n` bits.\n *\n * @param n\n * @param x\n */\nexport const maskH = (n, x) => (x & ~MASKS[n]) >>> 0;\n","import { defMask } from \"./mask\";\n/**\n * Clears bit in given uint `x`.\n *\n * @param x value\n * @param bit bit number (0..31)\n */\nexport const bitClear = (x, bit) => (x & ~(1 << bit)) >>> 0;\n/**\n * Toggles bit in given uint `x`.\n *\n * @param x\n * @param bit\n */\nexport const bitFlip = (x, bit) => (x ^ (1 << bit)) >>> 0;\n/**\n * Sets bit in given uint `x`.\n *\n * @param x value\n * @param bit bit number (0..31)\n */\nexport const bitSet = (x, bit) => (x | (1 << bit)) >>> 0;\nexport const bitSetWindow = (x, y, from, to) => {\n    const m = defMask(from, to);\n    return (x & ~m) | ((y << (1 << from)) & m);\n};\nexport const bitClearWindow = (x, from, to) => x & ~defMask(from, to);\n","const F32 = new Float32Array(1);\nconst I32 = new Int32Array(F32.buffer);\nconst U32 = new Uint32Array(F32.buffer);\nexport const floatToIntBits = (x) => ((F32[0] = x), I32[0]);\nexport const floatToUintBits = (x) => ((F32[0] = x), U32[0]);\nexport const intBitsToFloat = (x) => ((I32[0] = x), F32[0]);\nexport const uintBitsToFloat = (x) => ((U32[0] = x), F32[0]);\n/**\n * Converts given float into a sortable integer representation, using\n * raw bitwise conversion via `floatToIntBits()`.\n *\n * https://github.com/tzaeschke/phtree/blob/master/PhTreeRevisited.pdf\n * (page 3)\n *\n * @param x\n */\nexport const floatToSortableInt = (x) => {\n    if (x === -0)\n        x = 0;\n    const i = floatToIntBits(x);\n    return x < 0 ? ~i | (1 << 31) : i;\n};\n","/**\n * Converts 32bit unsigned int to Gray code (reflected binary). Gray\n * codes of successive values always have a Hamming distance of 1 (i.e.\n * only 1 bit changes at a time).\n *\n * https://en.wikipedia.org/wiki/Gray_code\n *\n * @param x u32\n */\nexport const encodeGray32 = (x) => (x ^ (x >>> 1)) >>> 0;\n/**\n * Converts 32bit Gray code to binary / unsigned int.\n *\n * https://en.wikipedia.org/wiki/Gray_code\n */\nexport const decodeGray32 = (x) => {\n    x = x ^ (x >>> 16);\n    x = x ^ (x >>> 8);\n    x = x ^ (x >>> 4);\n    x = x ^ (x >>> 2);\n    x = x ^ (x >>> 1);\n    return x >>> 0;\n};\n","import { maskL } from \"./mask\";\nexport const bitNot = (n, x) => maskL(n, ~x);\nexport const bitAnd = (n, a, b) => maskL(n, a & b);\nexport const bitNand = (n, a, b) => maskL(n, ~(a & b));\nexport const bitOr = (n, a, b) => maskL(n, a | b);\nexport const bitNor = (n, a, b) => maskL(n, ~(a & b));\nexport const bitXor = (n, a, b) => maskL(n, a ^ b);\nexport const bitXnor = (n, a, b) => maskL(n, ~(a ^ b));\nexport const bitImply = (n, a, b) => maskL(n, ~a | b);\nexport const bitAoi21 = (n, a, b, c) => maskL(n, ~(a | (b & c)));\nexport const bitOai21 = (n, a, b, c) => maskL(n, ~(a & (b | c)));\nexport const bitAoi22 = (n, a, b, c, d) => maskL(n, ~((a & b) | (c & d)));\nexport const bitOai22 = (n, a, b, c, d) => maskL(n, ~((a | b) & (c | d)));\nexport const bitMux = (n, a, b, s) => maskL(n, (a & ~s) | (b & s));\nexport const bitDemux = (n, a, b, s) => [maskL(n, a & ~s), maskL(n, b & s)];\n","// http://graphics.stanford.edu/~seander/bithacks.html\nexport const isPow2 = (x) => !!x && !(x & (x - 1));\nexport const ceilPow2 = (x) => {\n    x += (x === 0);\n    --x;\n    x |= x >>> 1;\n    x |= x >>> 2;\n    x |= x >>> 4;\n    x |= x >>> 8;\n    x |= x >>> 16;\n    return x + 1;\n};\nexport const floorPow2 = (x) => {\n    x |= x >>> 1;\n    x |= x >>> 2;\n    x |= x >>> 4;\n    x |= x >>> 8;\n    x |= x >>> 16;\n    return x - (x >>> 1);\n};\n","/**\n * Rotates `x` `n` bits to the left.\n *\n * @param x\n * @param n\n */\nexport const rotateLeft = (x, n) => ((x << n) | (x >>> (32 - n))) >>> 0;\n/**\n * Rotates `x` `n` bits to the right.\n *\n * @param x\n * @param n\n */\nexport const rotateRight = (x, n) => ((x >>> n) | (x << (32 - n))) >>> 0;\n","/**\n * Repeats lowest nibble of `x` as 24 bit uint.\n *\n * @param x\n */\nexport const splat4_24 = (x) => (x & 0xf) * 0x111111;\n/**\n * Repeats lowest nibble of `x` as 32 bit uint.\n *\n * @param x\n */\nexport const splat4_32 = (x) => ((x & 0xf) * 0x11111111) >>> 0;\n/**\n * Repeats lowest byte of `x` as 24 bit uint.\n *\n * @param x\n */\nexport const splat8_24 = (x) => (x & 0xff) * 0x010101;\n/**\n * Repeats lowest byte of `x` as 32 bit uint.\n *\n * @param x\n */\nexport const splat8_32 = (x) => ((x & 0xff) * 0x01010101) >>> 0;\n/**\n * Repeats lowest 16bit of `x` as 32 bit uint.\n *\n * @param x\n */\nexport const splat16_32 = (x) => ((x &= 0xffff), ((x << 16) | x) >>> 0);\n/**\n * Returns true if bits 0-3 are same as bits 4-7.\n *\n * @param x\n */\nexport const same4 = (x) => ((x >> 4) & 0xf) === (x & 0xf);\n/**\n * Returns true if bits 0-7 are same as bits 8-15.\n *\n * @param x\n */\nexport const same8 = (x) => ((x >> 8) & 0xff) === (x & 0xff);\n","/**\n * Extracts 8-bit lane from given 32bit uint.\n *\n * - Lane #0: bits 24-31\n * - Lane #1: bits 16-23\n * - Lane #2: bits 8-15\n * - Lane #3: bits 0-7\n *\n * @param x\n * @param lane\n */\nexport const lane8 = (x, lane) => (x >>> ((3 - lane) << 3)) & 0xff;\n/**\n * Extracts 4-bit lane from given 32bit uint.\n *\n * - Lane #0: bits 28-31\n * - Lane #1: bits 24-27\n * - Lane #2: bits 20-23\n * - Lane #3: bits 16-19\n * - Lane #4: bits 12-15\n * - Lane #5: bits 8-11\n * - Lane #6: bits 4-7\n * - Lane #7: bits 0-3\n *\n * @param x\n * @param lane\n */\nexport const lane4 = (x, lane) => (x >>> ((7 - lane) << 2)) & 0xf;\nexport const lane2 = (x, lane) => (x >>> ((15 - lane) << 1)) & 0x3;\n/**\n * Sets 8-bit `lane` with value`y` in `x`.\n *\n * @see lane8\n *\n * @param x\n * @param y\n * @param lane\n */\nexport const setLane8 = (x, y, lane) => {\n    const l = (3 - lane) << 3;\n    return ((~(0xff << l) & x) | ((y & 0xff) << l)) >>> 0;\n};\n/**\n * Sets 4-bit `lane` with value `y` in `x`.\n *\n * @see lane4\n *\n * @param x\n * @param y\n * @param lane\n */\nexport const setLane4 = (x, y, lane) => {\n    const l = (7 - lane) << 2;\n    return ((~(0xf << l) & x) | ((y & 0xf) << l)) >>> 0;\n};\n/**\n * Sets 2-bit `lane` with value `y` in `x`.\n *\n * @see lane2\n *\n * @param x\n * @param y\n * @param lane\n */\nexport const setLane2 = (x, y, lane) => {\n    const l = (15 - lane) << 1;\n    return ((~(0x3 << l) & x) | ((y & 0x3) << l)) >>> 0;\n};\n/**\n * Re-orders byte lanes in given order (MSB).\n *\n * ```\n * swizzle(0x12345678, 3, 2, 1, 0) // 0x78563412\n * swizzle(0x12345678, 1, 0, 3, 2) // 0x34127856\n * swizzle(0x12345678, 2, 2, 0, 0) // 0x56561212\n * ```\n *\n * @param x\n * @param a\n * @param b\n * @param c\n * @param d\n */\nexport const swizzle8 = (x, a, b, c, d) => ((lane8(x, a) << 24) |\n    (lane8(x, b) << 16) |\n    (lane8(x, c) << 8) |\n    lane8(x, d)) >>>\n    0;\n/**\n *\n * @param x\n * @param a\n * @param b\n * @param c\n * @param d\n * @param e\n * @param f\n * @param g\n * @param h\n */\nexport const swizzle4 = (x, a, b, c, d, e, f, g, h) => ((lane4(x, a) << 28) |\n    (lane4(x, b) << 24) |\n    (lane4(x, c) << 20) |\n    (lane4(x, d) << 16) |\n    (lane4(x, e) << 12) |\n    (lane4(x, f) << 8) |\n    (lane4(x, g) << 4) |\n    lane4(x, h)) >>>\n    0;\n/**\n * Same as `swizzle8(x, 3, 2, 1, 0)`, but faster.\n *\n * @param x\n */\nexport const flipBytes = (x) => ((x >>> 24) | ((x >> 8) & 0xff00) | ((x & 0xff00) << 8) | (x << 24)) >>> 0;\n","export * from \"./api\";\nexport * from \"./align\";\nexport * from \"./count\";\nexport * from \"./edit\";\nexport * from \"./float\";\nexport * from \"./gray\";\nexport * from \"./logic\";\nexport * from \"./mask\";\nexport * from \"./pow\";\nexport * from \"./rotate\";\nexport * from \"./splat\";\nexport * from \"./swizzle\";\n","import { ceilPow2 } from \"@thi.ng/binary\";\nimport { equiv } from \"@thi.ng/equiv\";\nimport { dissoc } from \"./dissoc\";\nimport { equivMap } from \"./internal/equiv\";\nimport { into } from \"./into\";\nconst __private = new WeakMap();\nconst __iterator = (map, id) => function* () {\n    for (let p of __private.get(map).bins) {\n        if (p)\n            yield p[id];\n    }\n};\nconst DEFAULT_CAP = 16;\n/**\n * Configurable hash map implementation w/ ES6 Map API. Uses open\n * addressing / linear probing to resolve key collisions. Supports any\n * key types via mandatory user supplied hash function.\n *\n * See `HashMapOpts` for further configuration & behavior details.\n *\n * ```\n * import { HashMap } from \"@thi.ng/associative\"\n * import { hash } from \"@thi.ng/vectors\"\n *\n * m = new HashMap([], { hash })\n * m.set([1, 2], \"a\");\n * m.set([3, 4], \"b\");\n * m.set([1, 2], \"c\");\n * // HashMap { [ 1, 2 ] => 'c', [ 3, 4 ] => 'b' }\n * ```\n *\n */\nexport class HashMap extends Map {\n    constructor(pairs, opts) {\n        super();\n        const m = ceilPow2(Math.min(opts.cap || DEFAULT_CAP, 4)) - 1;\n        __private.set(this, {\n            hash: opts.hash,\n            equiv: opts.equiv || equiv,\n            load: opts.load || 0.75,\n            mask: m,\n            bins: new Array(m + 1),\n            size: 0\n        });\n        if (pairs) {\n            this.into(pairs);\n        }\n    }\n    get [Symbol.species]() {\n        return HashMap;\n    }\n    get [Symbol.toStringTag]() {\n        return \"HashMap\";\n    }\n    get size() {\n        return __private.get(this).size;\n    }\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    *entries() {\n        for (let p of __private.get(this).bins) {\n            if (p)\n                yield [p[0], p[1]];\n        }\n    }\n    keys() {\n        return __iterator(this, 0)();\n    }\n    values() {\n        return __iterator(this, 1)();\n    }\n    forEach(fn, thisArg) {\n        for (let pair of __private.get(this).bins) {\n            fn.call(thisArg, pair[1], pair[0], this);\n        }\n    }\n    clear() {\n        const $this = __private.get(this);\n        $this.bins = new Array(DEFAULT_CAP);\n        $this.mask = 15;\n        $this.size = 0;\n    }\n    empty() {\n        return new HashMap(null, this.opts({ cap: DEFAULT_CAP }));\n    }\n    copy() {\n        const $this = __private.get(this);\n        const m = new HashMap(null, this.opts({ cap: 4 }));\n        Object.assign(__private.get(m), {\n            bins: $this.bins.slice(),\n            mask: $this.mask,\n            size: $this.size\n        });\n        return m;\n    }\n    equiv(o) {\n        return equivMap(this, o);\n    }\n    has(key) {\n        const $this = __private.get(this);\n        const i = this.find(key, $this);\n        return i >= 0 && $this.bins[i] != undefined;\n    }\n    get(key, notFound) {\n        const $this = __private.get(this);\n        const i = this.find(key, $this);\n        return i >= 0 && $this.bins[i] ? $this.bins[i][1] : notFound;\n    }\n    set(key, val) {\n        const $this = __private.get(this);\n        let i = this.find(key, $this);\n        if (i >= 0 && $this.bins[i]) {\n            $this.bins[i][1] = val;\n            return this;\n        }\n        if ($this.size > $this.mask * $this.load) {\n            this.resize($this);\n            i = this.find(key, $this);\n        }\n        $this.bins[i] = [key, val];\n        $this.size++;\n        return this;\n    }\n    delete(key) {\n        const $this = __private.get(this);\n        let i = this.find(key, $this);\n        const bins = $this.bins;\n        if (i >= 0 && !bins[i]) {\n            return false;\n        }\n        $this.size--;\n        const m = $this.mask;\n        let j = i;\n        let k;\n        while (true) {\n            delete bins[i];\n            do {\n                j = (j + 1) & m;\n                if (!bins[j])\n                    return true;\n                k = $this.hash(bins[j][0]) & m;\n            } while (i <= j ? i < k && k <= j : i < k || k <= j);\n            bins[i] = bins[j];\n            i = j;\n        }\n    }\n    into(pairs) {\n        return into(this, pairs);\n    }\n    dissoc(keys) {\n        return dissoc(this, keys);\n    }\n    opts(overrides) {\n        const $this = __private.get(this);\n        return Object.assign({ hash: $this.hash, equiv: $this.equiv, load: $this.load, cap: $this.mask + 1 }, overrides);\n    }\n    find(key, $this) {\n        const m = $this.mask;\n        const bins = $this.bins;\n        const equiv = $this.equiv;\n        let i = m;\n        let h = $this.hash(key) & m;\n        while (bins[h] && !equiv(bins[h][0], key)) {\n            i--;\n            if (i < 0)\n                return -1;\n            h = (h + 1) & $this.mask;\n        }\n        return h;\n    }\n    resize($this) {\n        const src = $this.bins;\n        const cap = ($this.mask + 1) * 2;\n        $this.bins = new Array(cap);\n        $this.mask = cap - 1;\n        $this.size = 0;\n        for (let p of src) {\n            if (p)\n                this.set(p[0], p[1]);\n        }\n    }\n}\n","import { empty } from \"./utils\";\n/**\n * Returns a new map of same type as input only containing given keys\n * (and only if they existed in the original map).\n *\n * @param src\n * @param ks selected keys\n */\nexport const selectKeysMap = (src, ks) => {\n    const dest = empty(src, Map);\n    for (let k of ks) {\n        src.has(k) && dest.set(k, src.get(k));\n    }\n    return dest;\n};\n/**\n * Returns a new object only containing given keys (and only if they\n * existed in the original).\n *\n * @param src\n * @param ks\n */\nexport const selectKeysObj = (src, ks) => {\n    const dest = {};\n    for (let k of ks) {\n        src.hasOwnProperty(k) && (dest[k] = src[k]);\n    }\n    return dest;\n};\n","import { EquivMap } from \"./equiv-map\";\nimport { selectKeysObj } from \"./select-keys\";\nimport { empty } from \"./utils\";\n/**\n * Takes an iterable of plain objects and array of indexing keys. Calls\n * `selectKeysObj` on each value and uses returned objects as new keys\n * to group original values. Returns a new `EquivMap` of sets.\n *\n * ```\n * indexed(\n *   new Set([{a: 1, b: 1}, {a: 1, b: 2}, {a: 1, b: 1, c: 2}]),\n *   [\"a\",\"b\"]\n * )\n * // EquivMap {\n * //   { a: 1, b: 1 } => Set { { a: 1, b: 1 }, { a: 1, b: 1, c: 2 } },\n * //   { a: 1, b: 2 } => Set { { a: 1, b: 2 } } }\n * ```\n *\n * @param records objects to index\n * @param ks keys used for indexing\n */\nexport const indexed = (records, ks) => {\n    const res = new EquivMap();\n    let x, ik, rv;\n    for (x of records) {\n        ik = selectKeysObj(x, ks);\n        rv = res.get(ik);\n        !rv && res.set(ik, (rv = empty(records, Set)));\n        rv.add(x);\n    }\n    return res;\n};\n","import { xformSetOp } from \"./internal/xform-setop\";\nimport { into } from \"./into\";\nimport { empty } from \"./utils\";\n/**\n * Computes the intersection of sets `a` and `b` and writes results into\n * new set or optionally given set `out` (assumed to be empty for\n * correct results). If `out` is *not* given, the returned Set type will\n * be that of `a` (provided it defines `Symbol.species`).\n *\n * @param a\n * @param b\n * @param out\n */\nexport const intersection = (a, b, out) => {\n    out = out || empty(a, Set);\n    if (a === b) {\n        return into(out, a);\n    }\n    if (b.size < a.size) {\n        return intersection(b, a, out);\n    }\n    for (let i of b) {\n        if (a.has(i)) {\n            out.add(i);\n        }\n    }\n    return out;\n};\nexport function intersectionR(src) {\n    return xformSetOp(intersectionR, intersection, src);\n}\n","/**\n * Returns a new map in which the original values are used as keys and\n * original keys as values. If `dest` is given, writes results in that\n * map instead. Depending on the value type of `src` and/or if the\n * inverted map should use custom key equality semantics as provided by\n * the Map types in this package, you MUST provide a `dest` map, since\n * the default `dest` will only be a standard ES6 Map.\n *\n * ```\n * invertMap(new Map(), new Map([[\"a\", 1], [\"b\", 2]]));\n * // Map { 1 => 'a', 2 => 'b' }\n * ```\n *\n * @param src\n * @param dest\n */\nexport const invertMap = (src, dest) => {\n    dest = dest || new Map();\n    for (let p of src) {\n        dest.set(p[1], p[0]);\n    }\n    return dest;\n};\n/**\n * Returns a new object in which the original values are used as keys\n * and original keys as values. If `dest` is given, writes results in\n * that object instead.\n *\n * ```\n * invertObj({a: 1, b: 2})\n * // { '1': 'a', '2': 'b' }\n * ```\n *\n * @param src\n * @param dest\n */\nexport const invertObj = (src, dest = {}) => {\n    for (let k in src) {\n        dest[src[k]] = k;\n    }\n    return dest;\n};\n","/**\n * Merges all given maps in left-to-right order into `dest`.\n * Returns `dest`.\n *\n * @param dest\n * @param xs\n */\nexport const mergeMap = (dest, ...xs) => {\n    for (let x of xs) {\n        for (let pair of x) {\n            dest.set(pair[0], pair[1]);\n        }\n    }\n    return dest;\n};\n/**\n * Merges all given objects in left-to-right order into `dest`.\n * Returns `dest`.\n *\n * @param dest\n * @param xs\n */\nexport const mergeObj = (dest, ...xs) => Object.assign(dest, ...xs);\n","import { empty } from \"./utils\";\n/**\n * Renames keys in `src` using mapping provided by key map `km`. Does\n * support key swapping / swizzling. Does not modify original.\n *\n * @param src\n * @param km\n * @param out\n */\nexport const renameKeysMap = (src, km, out) => {\n    out = out || empty(src, Map);\n    for (let [k, v] of src) {\n        out.set(km.has(k) ? km.get(k) : k, v);\n    }\n    return out;\n};\n/**\n * Renames keys in `src` using mapping provided by key map `km`. Does\n * support key swapping / swizzling. Does not modify original.\n *\n * ```\n * // swap a & b, rename c\n * renameKeysObj({a: 1, b: 2, c: 3}, {a: \"b\", b: \"a\", c: \"cc\"})\n * // {b: 1, a: 2, cc: 3}\n * ```\n *\n * @param src\n * @param km\n */\nexport const renameKeysObj = (src, km, out = {}) => {\n    for (let k in src) {\n        out[km.hasOwnProperty(k) ? km[k] : k] = src[k];\n    }\n    return out;\n};\n","import { commonKeysObj } from \"./common-keys\";\nimport { indexed } from \"./indexed\";\nimport { invertObj } from \"./invert\";\nimport { mergeObj } from \"./merge\";\nimport { renameKeysObj } from \"./rename-keys\";\nimport { selectKeysObj } from \"./select-keys\";\nimport { empty, first, objValues } from \"./utils\";\n/**\n * Computes the natural join between the two sets of relations. Each set\n * is assumed to have plain objects as values with at least one of the\n * keys present in both sides. Furthermore the objects in each set are\n * assumed to have the same internal structure (i.e. sets of keys).\n * Returns new set of same type as `a`.\n *\n * ```\n * join(\n *   new Set([\n *     {id: 1, name: \"foo\"},\n *     {id: 2, name: \"bar\"},\n *     {id: 3, name: \"baz\"}]),\n *   new Set([\n *     {id: 1, color: \"red\"},\n *     {id: 2, color: \"blue\"}])\n * )\n * // Set {\n * //   { id: 1, color: 'red', name: 'foo' },\n * //   { id: 2, color: 'blue', name: 'bar' }\n * // }\n * ```\n *\n * @param a\n * @param b\n */\nexport const join = (a, b) => {\n    if (a.size && b.size) {\n        const ks = commonKeysObj(first(a) || {}, first(b) || {});\n        let aa, bb;\n        if (a.size <= b.size) {\n            aa = a;\n            bb = b;\n        }\n        else {\n            aa = b;\n            bb = a;\n        }\n        const idx = indexed(aa, ks);\n        const res = empty(a, Set);\n        for (let x of bb) {\n            const found = idx.get(selectKeysObj(x, ks));\n            if (found) {\n                for (let f of found) {\n                    res.add(mergeObj(Object.assign({}, f), x));\n                }\n            }\n        }\n        return res;\n    }\n    return empty(a, Set);\n};\n/**\n * Similar to `join()`, computes the join between two sets of relations,\n * using the given keys in `kmap` only for joining and ignoring others.\n * `kmap` can also be used to translate join keys in `b` where\n * needed. Else, if no renaming is desired, the values in `kmap` should\n * be the same as their respective keys, e.g. `{id: \"id\"}`. Returns new\n * set of same type as `a`.\n *\n * ```\n * joinWith(\n *   new Set([\n *     {id: 1, name: \"foo\"},\n *     {id: 2, name: \"bar\"},\n *     {id: 3, name: \"baz\"}]),\n *   new Set([\n *     {type: 1, color: \"red\"},\n *     {type: 2, color: \"blue\"}]),\n *   {id: \"type\"}\n * )\n * // Set {\n * //   { type: 1, color: 'red', id: 1, name: 'foo' },\n * //   { type: 2, color: 'blue', id: 2, name: 'bar' } }\n * ```\n *\n * @param a\n * @param b\n * @param kmap keys to compute join for\n */\nexport const joinWith = (a, b, kmap) => {\n    if (a.size && b.size) {\n        let aa, bb;\n        let k;\n        if (a.size <= b.size) {\n            aa = a;\n            bb = b;\n            k = invertObj(kmap);\n        }\n        else {\n            aa = b;\n            bb = a;\n            k = kmap;\n        }\n        const idx = indexed(aa, objValues(k));\n        const ks = Object.keys(k);\n        const res = empty(a, Set);\n        for (let x of bb) {\n            const found = idx.get(renameKeysObj(selectKeysObj(x, ks), k));\n            if (found) {\n                for (let f of found) {\n                    res.add(mergeObj(Object.assign({}, f), x));\n                }\n            }\n        }\n        return res;\n    }\n    return empty(a, Set);\n};\njoinWith(new Set([{ a: 1, b: 2 }]), new Set([{ id: 1, c: 2 }]), { a: \"id\" });\n","import { assert } from \"@thi.ng/api\";\nimport { isArrayLike } from \"@thi.ng/checks\";\nimport { compare } from \"@thi.ng/compare\";\nimport { equiv } from \"@thi.ng/equiv\";\nimport { illegalArgs } from \"@thi.ng/errors\";\nimport { SYSTEM } from \"@thi.ng/random\";\nimport { isReduced } from \"@thi.ng/transducers\";\nexport class DCons {\n    constructor(src) {\n        this._length = 0;\n        if (src) {\n            this.into(src);\n        }\n    }\n    get length() {\n        return this._length;\n    }\n    copy() {\n        return new DCons(this);\n    }\n    empty() {\n        return new DCons();\n    }\n    clear() {\n        this.release();\n    }\n    release() {\n        let cell = this.head, next;\n        while (cell) {\n            next = cell.next;\n            delete cell.value;\n            delete cell.prev;\n            delete cell.next;\n            cell = next;\n        }\n        delete this.head;\n        delete this.tail;\n        this._length = 0;\n        return true;\n    }\n    compare(o) {\n        const n = this._length;\n        if (n < o._length) {\n            return -1;\n        }\n        else if (n > o._length) {\n            return 1;\n        }\n        else if (n === 0) {\n            return 0;\n        }\n        else {\n            let ca = this.head;\n            let cb = o.head;\n            let res = 0;\n            while (ca && res == 0) {\n                res = compare(ca.value, cb.value);\n                ca = ca.next;\n                cb = cb.next;\n            }\n            return res;\n        }\n    }\n    equiv(o) {\n        if ((o instanceof DCons || isArrayLike(o)) &&\n            this._length === o.length) {\n            if (this._length === 0) {\n                return true;\n            }\n            let cell = this.head;\n            for (let x of o) {\n                if (!equiv(cell.value, x)) {\n                    return false;\n                }\n                cell = cell.next;\n            }\n            return true;\n        }\n        return false;\n    }\n    *[Symbol.iterator]() {\n        let cell = this.head;\n        while (cell) {\n            yield cell.value;\n            cell = cell.next;\n        }\n    }\n    /** {@inheritDoc @thi.ng/api#ISeqable.seq} */\n    seq(start = 0, end = this.length) {\n        if (start >= end || start < 0)\n            return;\n        let cell = this.nthCell(start);\n        const last = this.nthCell(end - 1);\n        const $seq = (cell) => ({\n            first() {\n                return cell.value;\n            },\n            next() {\n                return cell !== last && cell.next ? $seq(cell.next) : undefined;\n            }\n        });\n        return cell ? $seq(cell) : undefined;\n    }\n    *cycle() {\n        while (true) {\n            yield* this;\n        }\n    }\n    /** {@inheritDoc @thi.ng/transducers#IReducible.$reduce} */\n    $reduce(rfn, acc) {\n        let cell = this.head;\n        while (cell && !isReduced(acc)) {\n            acc = rfn(acc, cell.value);\n            cell = cell.next;\n        }\n        return acc;\n    }\n    drop() {\n        const cell = this.head;\n        if (cell) {\n            this.head = cell.next;\n            if (this.head) {\n                delete this.head.prev;\n            }\n            else {\n                delete this.tail;\n            }\n            this._length--;\n            return cell.value;\n        }\n    }\n    cons(value) {\n        const cell = { value, next: this.head };\n        if (this.head) {\n            this.head.prev = cell;\n        }\n        else {\n            this.tail = cell;\n        }\n        this.head = cell;\n        this._length++;\n        return this;\n    }\n    insertBefore(cell, value) {\n        if (!cell) {\n            illegalArgs(\"cell is undefined\");\n        }\n        const newCell = { value, next: cell, prev: cell.prev };\n        if (cell.prev) {\n            cell.prev.next = newCell;\n        }\n        else {\n            this.head = newCell;\n        }\n        cell.prev = newCell;\n        this._length++;\n        return this;\n    }\n    insertAfter(cell, value) {\n        if (!cell) {\n            illegalArgs(\"cell is undefined\");\n        }\n        const newCell = { value, next: cell.next, prev: cell };\n        if (cell.next) {\n            cell.next.prev = newCell;\n        }\n        else {\n            this.tail = newCell;\n        }\n        cell.next = newCell;\n        this._length++;\n        return this;\n    }\n    insertBeforeNth(n, x) {\n        if (n < 0) {\n            n += this._length;\n        }\n        if (n <= 0) {\n            return this.cons(x);\n        }\n        else {\n            this.ensureIndex(n);\n            return this.insertBefore(this.nthCellUnsafe(n), x);\n        }\n    }\n    insertAfterNth(n, x) {\n        if (n < 0) {\n            n += this._length;\n        }\n        if (n >= this._length - 1) {\n            return this.push(x);\n        }\n        else {\n            this.ensureIndex(n);\n            return this.insertAfter(this.nthCellUnsafe(n), x);\n        }\n    }\n    insertSorted(value, cmp) {\n        cmp = cmp || compare;\n        let cell = this.head;\n        while (cell) {\n            if (cmp(value, cell.value) <= 0) {\n                return this.insertBefore(cell, value);\n            }\n            cell = cell.next;\n        }\n        return this.push(value);\n    }\n    find(value) {\n        let cell = this.head;\n        while (cell) {\n            if (cell.value === value) {\n                return cell;\n            }\n            cell = cell.next;\n        }\n    }\n    findWith(fn) {\n        let cell = this.head;\n        while (cell) {\n            if (fn(cell.value)) {\n                return cell;\n            }\n            cell = cell.next;\n        }\n    }\n    concat(...slices) {\n        const res = this.copy();\n        for (let slice of slices) {\n            res.into(slice);\n        }\n        return res;\n    }\n    into(src) {\n        for (let x of src) {\n            this.push(x);\n        }\n    }\n    slice(from = 0, to = this.length) {\n        let a = from < 0 ? from + this._length : from;\n        let b = to < 0 ? to + this._length : to;\n        if (a < 0 || b < 0) {\n            illegalArgs(\"invalid indices: ${from} / ${to}\");\n        }\n        const res = new DCons();\n        let cell = this.nthCell(a);\n        while (cell && ++a <= b) {\n            res.push(cell.value);\n            cell = cell.next;\n        }\n        return res;\n    }\n    splice(at, del = 0, insert) {\n        let cell;\n        if (typeof at === \"number\") {\n            if (at < 0) {\n                at += this._length;\n            }\n            this.ensureIndex(at);\n            cell = this.nthCellUnsafe(at);\n        }\n        else {\n            cell = at;\n        }\n        const removed = new DCons();\n        if (del > 0) {\n            while (cell && del-- > 0) {\n                this.remove(cell);\n                removed.push(cell.value);\n                cell = cell.next;\n            }\n        }\n        else if (cell) {\n            cell = cell.next;\n        }\n        if (insert) {\n            if (cell) {\n                for (let i of insert) {\n                    this.insertBefore(cell, i);\n                }\n            }\n            else {\n                for (let i of insert) {\n                    this.push(i);\n                }\n            }\n        }\n        return removed;\n    }\n    remove(cell) {\n        if (cell.prev) {\n            cell.prev.next = cell.next;\n        }\n        else {\n            this.head = cell.next;\n        }\n        if (cell.next) {\n            cell.next.prev = cell.prev;\n        }\n        else {\n            this.tail = cell.prev;\n        }\n        this._length--;\n        return this;\n    }\n    swap(a, b) {\n        if (a !== b) {\n            const t = a.value;\n            a.value = b.value;\n            b.value = t;\n        }\n        return this;\n    }\n    push(value) {\n        if (this.tail) {\n            const cell = { value, prev: this.tail };\n            this.tail.next = cell;\n            this.tail = cell;\n            this._length++;\n            return this;\n        }\n        else {\n            return this.cons(value);\n        }\n    }\n    pop() {\n        const cell = this.tail;\n        if (!cell) {\n            return;\n        }\n        this.tail = cell.prev;\n        if (this.tail) {\n            delete this.tail.next;\n        }\n        else {\n            delete this.head;\n        }\n        this._length--;\n        return cell.value;\n    }\n    first() {\n        return this.head && this.head.value;\n    }\n    peek() {\n        return this.tail && this.tail.value;\n    }\n    setHead(v) {\n        if (this.head) {\n            this.head.value = v;\n            return this;\n        }\n        return this.cons(v);\n    }\n    setTail(v) {\n        if (this.tail) {\n            this.tail.value = v;\n            return this;\n        }\n        return this.push(v);\n    }\n    setNth(n, v) {\n        const cell = this.nthCell(n);\n        !cell && illegalArgs(`index out of bounds: ${n}`);\n        cell.value = v;\n        return this;\n    }\n    nth(n, notFound) {\n        const cell = this.nthCell(n);\n        return cell ? cell.value : notFound;\n    }\n    nthCell(n) {\n        if (n < 0) {\n            n += this._length;\n        }\n        if (n < 0 || n >= this._length) {\n            return;\n        }\n        return this.nthCellUnsafe(n);\n    }\n    rotateLeft() {\n        switch (this._length) {\n            case 0:\n            case 1:\n                return this;\n            case 2:\n                return this.swap(this.head, this.tail);\n            default:\n                return this.push(this.drop());\n        }\n    }\n    rotateRight() {\n        switch (this._length) {\n            case 0:\n            case 1:\n                return this;\n            case 2:\n                return this.swap(this.head, this.tail);\n            default:\n                const x = this.peek();\n                this.pop();\n                return this.cons(x);\n        }\n    }\n    map(fn) {\n        const res = new DCons();\n        let cell = this.head;\n        while (cell) {\n            res.push(fn(cell.value));\n            cell = cell.next;\n        }\n        return res;\n    }\n    filter(pred) {\n        const res = new DCons();\n        let cell = this.head;\n        while (cell) {\n            pred(cell.value) && res.push(cell.value);\n            cell = cell.next;\n        }\n        return res;\n    }\n    reduce(rfn, initial) {\n        let acc = initial;\n        let cell = this.head;\n        while (cell) {\n            // TODO add early termination support\n            acc = rfn(acc, cell.value);\n            cell = cell.next;\n        }\n        return acc;\n    }\n    /**\n     * Shuffles list by probabilistically moving cells to head or tail\n     * positions.\n     *\n     * @remarks\n     * Supports configurable iterations and custom PRNG via\n     * {@link @thi.ng/random#IRandom} (default:\n     * {@link @thi.ng/random#SYSTEM}).\n     *\n     * Default iterations: `ceil(3/2 * log2(n))`\n     *\n     * @param iter\n     * @param rnd\n     */\n    shuffle(iter, rnd = SYSTEM) {\n        if (this._length < 2)\n            return this;\n        for (iter = (iter !== null && iter !== void 0 ? iter : Math.ceil(1.5 * Math.log2(this._length))); iter > 0; iter--) {\n            let cell = this.head;\n            while (cell) {\n                const next = cell.next;\n                rnd.float() < 0.5 ? this.asHead(cell) : this.asTail(cell);\n                cell = next;\n            }\n        }\n        return this;\n    }\n    /**\n     * Merge sort implementation based on Simon Tatham's algorithm:\n     * https://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\n     *\n     * @remarks\n     * Uses {@link @thi.ng/compare#compare} as default comparator.\n     *\n     * @param cmp\n     */\n    sort(cmp = compare) {\n        if (!this._length)\n            return this;\n        let inSize = 1;\n        while (true) {\n            let p = this.head;\n            this.head = undefined;\n            this.tail = undefined;\n            let numMerges = 0;\n            while (p) {\n                numMerges++;\n                let q = p;\n                let psize = 0;\n                for (let i = 0; i < inSize; i++) {\n                    psize++;\n                    q = q.next;\n                    if (!q)\n                        break;\n                }\n                let qsize = inSize;\n                while (psize > 0 || (qsize > 0 && q)) {\n                    let e;\n                    if (psize === 0) {\n                        e = q;\n                        q = q.next;\n                        qsize--;\n                    }\n                    else if (!q || qsize === 0) {\n                        e = p;\n                        p = p.next;\n                        psize--;\n                    }\n                    else if (cmp(p.value, q.value) <= 0) {\n                        e = p;\n                        p = p.next;\n                        psize--;\n                    }\n                    else {\n                        e = q;\n                        q = q.next;\n                        qsize--;\n                    }\n                    if (this.tail) {\n                        this.tail.next = e;\n                    }\n                    else {\n                        this.head = e;\n                    }\n                    e.prev = this.tail;\n                    this.tail = e;\n                }\n                p = q;\n            }\n            this.tail.next = undefined;\n            if (numMerges <= 1) {\n                return this;\n            }\n            inSize *= 2;\n        }\n    }\n    reverse() {\n        let head = this.head;\n        let tail = this.tail;\n        let n = (this._length >>> 1) + (this._length & 1);\n        while (head && tail && n > 0) {\n            const t = head.value;\n            head.value = tail.value;\n            tail.value = t;\n            head = head.next;\n            tail = tail.prev;\n            n--;\n        }\n        return this;\n    }\n    asHead(cell) {\n        if (cell === this.head) {\n            return this;\n        }\n        this.remove(cell);\n        this.head.prev = cell;\n        cell.next = this.head;\n        cell.prev = undefined;\n        this.head = cell;\n        this._length++;\n        return this;\n    }\n    asTail(cell) {\n        if (cell === this.tail) {\n            return this;\n        }\n        this.remove(cell);\n        this.tail.next = cell;\n        cell.prev = this.tail;\n        cell.next = undefined;\n        this.tail = cell;\n        this._length++;\n        return this;\n    }\n    toString() {\n        let res = [];\n        let cell = this.head;\n        while (cell) {\n            res.push(cell.value != null\n                ? String(cell.value)\n                : cell.value === undefined\n                    ? \"undefined\"\n                    : \"null\");\n            cell = cell.next;\n        }\n        return res.join(\", \");\n    }\n    toJSON() {\n        return [...this];\n    }\n    ensureIndex(i) {\n        assert(i >= 0 && i < this._length, `index out of range: ${i}`);\n    }\n    nthCellUnsafe(n) {\n        let cell, dir;\n        if (n <= this._length >> 1) {\n            cell = this.head;\n            dir = \"next\";\n        }\n        else {\n            cell = this.tail;\n            dir = \"prev\";\n            n = this._length - n - 1;\n        }\n        while (n-- > 0 && cell) {\n            cell = cell[dir];\n        }\n        return cell;\n    }\n}\n/**\n * Functional syntax sugar for `new DCons(src?)`.\n *\n * @param src\n */\nexport const dcons = (src) => new DCons(src);\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { DCons } from \"@thi.ng/dcons\";\nimport { equiv } from \"@thi.ng/equiv\";\nimport { dissoc } from \"./dissoc\";\nimport { equivSet } from \"./internal/equiv\";\nimport { into } from \"./into\";\nconst __private = new WeakMap();\nconst __vals = (inst) => __private.get(inst).vals;\n/**\n * Similar to `ArraySet`, this class is an alternative implementation of\n * the native ES6 Set API using a @thi.ng/dcons linked list as backing\n * store and a customizable value equality / equivalence predicate. By\n * the default uses `@thi.ng/equiv` for equivalence checking.\n *\n * Additionally, the type also implements the `ICopy`, `IEmpty` and\n * `IEquiv` interfaces itself.\n */\nexport class LLSet extends Set {\n    constructor(vals, opts = {}) {\n        super();\n        __private.set(this, {\n            equiv: opts.equiv || equiv,\n            vals: new DCons()\n        });\n        vals && this.into(vals);\n    }\n    *[Symbol.iterator]() {\n        yield* __vals(this);\n    }\n    get [Symbol.species]() {\n        return LLSet;\n    }\n    get [Symbol.toStringTag]() {\n        return \"LLSet\";\n    }\n    get size() {\n        return __vals(this).length;\n    }\n    copy() {\n        const $this = __private.get(this);\n        const s = new LLSet(null, this.opts());\n        __private.get(s).vals = $this.vals.copy();\n        return s;\n    }\n    empty() {\n        return new LLSet(null, this.opts());\n    }\n    clear() {\n        __vals(this).clear();\n    }\n    first() {\n        if (this.size) {\n            return __vals(this).head.value;\n        }\n    }\n    add(key) {\n        !this.has(key) && __vals(this).push(key);\n        return this;\n    }\n    into(keys) {\n        return into(this, keys);\n    }\n    has(key) {\n        return this.get(key, SEMAPHORE) !== SEMAPHORE;\n    }\n    /**\n     * Returns the canonical (stored) value for `key`, if present. If\n     * the set contains no equivalent for `key`, returns `notFound`.\n     *\n     * @param key\n     * @param notFound\n     */\n    get(key, notFound) {\n        const $this = __private.get(this);\n        const eq = $this.equiv;\n        let i = $this.vals.head;\n        while (i) {\n            if (eq(i.value, key)) {\n                return i.value;\n            }\n            i = i.next;\n        }\n        return notFound;\n    }\n    delete(key) {\n        const $this = __private.get(this);\n        const eq = $this.equiv;\n        let i = $this.vals.head;\n        while (i) {\n            if (eq(i.value, key)) {\n                $this.vals.splice(i, 1);\n                return true;\n            }\n            i = i.next;\n        }\n        return false;\n    }\n    disj(keys) {\n        return dissoc(this, keys);\n    }\n    equiv(o) {\n        return equivSet(this, o);\n    }\n    forEach(fn, thisArg) {\n        let i = __vals(this).head;\n        while (i) {\n            fn.call(thisArg, i.value, i.value, this);\n            i = i.next;\n        }\n    }\n    *entries() {\n        for (let v of __vals(this)) {\n            yield [v, v];\n        }\n    }\n    *keys() {\n        yield* __vals(this);\n    }\n    *values() {\n        yield* __vals(this);\n    }\n    opts() {\n        return { equiv: __private.get(this).equiv };\n    }\n}\n","import { isFunction } from \"@thi.ng/checks\";\nimport { copy } from \"./utils\";\n/**\n * Similar to `mergeApplyObj()`, but for ES6 Maps instead of plain objects.\n *\n * @param src\n * @param xs\n */\nexport const mergeApplyMap = (src, xs) => {\n    const res = copy(src, Map);\n    for (let [k, v] of xs) {\n        res.set(k, isFunction(v) ? v(res.get(k)) : v);\n    }\n    return res;\n};\n/**\n * Similar to `mergeObjWith()`, but only supports 2 args and any\n * function values in `xs` will be called with respective value in `src`\n * to produce a new / derived value for that key, i.e.\n *\n * ```\n * dest[k] = xs[k](src[k])\n * ```\n *\n * Returns new merged object and does not modify any of the inputs.\n *\n * ```\n * mergeApplyObj(\n *   {a: \"hello\", b: 23, c: 12},\n *   {a: (x) => x + \" world\", b: 42}\n * );\n * // { a: 'hello world', b: 42, c: 12 }\n * ```\n *\n * @param src\n * @param xs\n */\nexport const mergeApplyObj = (src, xs) => {\n    const res = Object.assign({}, src);\n    for (let k in xs) {\n        const v = xs[k];\n        res[k] = isFunction(v) ? v(res[k]) : v;\n    }\n    return res;\n};\n","import { copy } from \"./utils\";\nexport const mergeMapWith = (f, dest, ...xs) => {\n    const res = copy(dest, Map);\n    for (let x of xs) {\n        for (let [k, v] of x) {\n            res.set(k, res.has(k) ? f(res.get(k), v) : v);\n        }\n    }\n    return res;\n};\nexport const mergeObjWith = (f, dest, ...xs) => {\n    const res = Object.assign({}, dest);\n    for (let x of xs) {\n        for (let k in x) {\n            const v = x[k];\n            res[k] = res.hasOwnProperty(k) ? f(dest[k], v) : v;\n        }\n    }\n    return res;\n};\n","import { isPlainObject } from \"@thi.ng/checks\";\nimport { mergeObjWith } from \"./merge-with\";\nexport const mergeDeepObj = (dest, ...xs) => mergeObjWith((a, b) => isPlainObject(a) && isPlainObject(b) ? mergeDeepObj(a, b) : b, dest, ...xs);\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { compare } from \"@thi.ng/compare\";\nimport { isReduced, map } from \"@thi.ng/transducers\";\nimport { dissoc } from \"./dissoc\";\nimport { equivMap } from \"./internal/equiv\";\nimport { into } from \"./into\";\nclass Node {\n    constructor(k, v, h) {\n        this.k = k;\n        this.v = v;\n        this.next = new Array(h + 1);\n    }\n}\n// stores private properties for all instances\n// http://fitzgeraldnick.com/2014/01/13/hiding-implementation-details-with-e6-weakmaps.html\nconst __private = new WeakMap();\nexport class SortedMap extends Map {\n    /**\n     * Creates new `SortedMap` instance with optionally given pairs\n     * and/or options.\n     *\n     * @param pairs\n     * @param opts\n     */\n    constructor(pairs, opts = {}) {\n        super();\n        const cap = opts.capacity || SortedMap.DEFAULT_CAP;\n        const maxh = Math.ceil(Math.log2(cap));\n        __private.set(this, {\n            head: new Node(null, null, 0),\n            cap: Math.pow(2, maxh),\n            cmp: opts.compare || compare,\n            p: opts.probability || SortedMap.DEFAULT_P,\n            maxh,\n            length: 0,\n            h: 0\n        });\n        if (pairs) {\n            this.into(pairs);\n        }\n    }\n    /**\n     * Creates new `SortedMap` instance from given object's key-value\n     * pairs.\n     *\n     * @param obj\n     * @param opts\n     */\n    static fromObject(obj, opts) {\n        const m = new SortedMap(null, Object.assign({ capacity: Object.keys(obj).length }, opts));\n        for (let k in obj) {\n            obj.hasOwnProperty(k) && m.set(k, obj[k]);\n        }\n        return m;\n    }\n    get [Symbol.species]() {\n        return SortedMap;\n    }\n    *[Symbol.iterator]() {\n        let node = __private.get(this).head;\n        while ((node = node.next[0])) {\n            yield [node.k, node.v];\n        }\n    }\n    *entries(key, max = false) {\n        const $this = __private.get(this);\n        let node = $this.head;\n        const cmp = $this.cmp;\n        let code;\n        if (max) {\n            while ((node = node.next[0])) {\n                if (key === undefined || (code = cmp(node.k, key)) <= 0) {\n                    yield [node.k, node.v];\n                    if (code === 0)\n                        return;\n                }\n            }\n        }\n        else {\n            while ((node = node.next[0])) {\n                if (key === undefined || (code = cmp(node.k, key)) >= 0) {\n                    yield [node.k, node.v];\n                }\n            }\n        }\n    }\n    keys(key, max = false) {\n        return map((p) => p[0], this.entries(key, max));\n    }\n    values(key, max = false) {\n        return map((p) => p[1], this.entries(key, max));\n    }\n    get size() {\n        return __private.get(this).length;\n    }\n    clear() {\n        const $this = __private.get(this);\n        $this.head = new Node(null, null, 0);\n        $this.length = 0;\n        $this.h = 0;\n    }\n    empty() {\n        return new SortedMap(null, Object.assign(Object.assign({}, this.opts()), { capacity: SortedMap.DEFAULT_CAP }));\n    }\n    copy() {\n        return new SortedMap(this, this.opts());\n    }\n    compare(o) {\n        const n = this.size;\n        const m = o.size;\n        if (n < m)\n            return -1;\n        if (n > m)\n            return 1;\n        const i = this.entries();\n        const j = o.entries();\n        let x, y;\n        let c;\n        while (((x = i.next()), (y = j.next()), !x.done && !y.done)) {\n            if ((c = compare(x.value[0], y.value[0])) !== 0 ||\n                (c = compare(x.value[1], y.value[1])) !== 0) {\n                return c;\n            }\n        }\n        return 0;\n    }\n    equiv(o) {\n        return equivMap(this, o);\n    }\n    first() {\n        const node = __private.get(this).head.next[0];\n        return node ? [node.k, node.v] : undefined;\n    }\n    get(k, notFound) {\n        const node = this.findPredNode(k).next[0];\n        return node && __private.get(this).cmp(node.k, k) === 0\n            ? node.v\n            : notFound;\n    }\n    has(key) {\n        return this.get(key, SEMAPHORE) !== SEMAPHORE;\n    }\n    set(k, v) {\n        const $this = __private.get(this);\n        let node = $this.head;\n        let level = $this.h;\n        let stack = new Array(level);\n        const cmp = $this.cmp;\n        let code;\n        while (level >= 0) {\n            while (node.next[level] &&\n                (code = cmp(node.next[level].k, k)) < 0) {\n                node = node.next[level];\n            }\n            if (node.next[level] && code === 0) {\n                do {\n                    node.next[level].v = v;\n                } while (--level >= 0);\n                return this;\n            }\n            stack[level--] = node;\n        }\n        const h = this.pickHeight($this.maxh, $this.h, $this.p);\n        node = new Node(k, v, h);\n        while ($this.h < h) {\n            stack[++$this.h] = $this.head;\n        }\n        for (let i = 0; i <= h; i++) {\n            node.next[i] = stack[i].next[i];\n            stack[i].next[i] = node;\n        }\n        $this.length++;\n        if ($this.length >= $this.cap) {\n            $this.cap *= 2;\n            $this.maxh++;\n        }\n        return this;\n    }\n    delete(k) {\n        const $this = __private.get(this);\n        let node = $this.head;\n        let level = $this.h;\n        let removed = false;\n        const cmp = $this.cmp;\n        let code;\n        while (level >= 0) {\n            while (node.next[level] &&\n                (code = cmp(node.next[level].k, k)) < 0) {\n                node = node.next[level];\n            }\n            if (node.next[level] && code === 0) {\n                removed = true;\n                node.next[level] = node.next[level].next[level];\n                if (node == $this.head && !node.next[level]) {\n                    $this.h = Math.max(0, $this.h - 1);\n                }\n            }\n            level--;\n        }\n        if (removed)\n            $this.length--;\n        return removed;\n    }\n    into(pairs) {\n        return into(this, pairs);\n    }\n    dissoc(keys) {\n        return dissoc(this, keys);\n    }\n    forEach(fn, thisArg) {\n        for (let p of this) {\n            fn.call(thisArg, p[1], p[0], this);\n        }\n    }\n    $reduce(rfn, acc) {\n        let node = __private.get(this).head;\n        while ((node = node.next[0]) && !isReduced(acc)) {\n            acc = rfn(acc, [node.k, node.v]);\n        }\n        return acc;\n    }\n    opts() {\n        const $this = __private.get(this);\n        return {\n            capacity: $this.cap,\n            compare: $this.cmp,\n            probability: $this.p\n        };\n    }\n    findPredNode(k) {\n        const $this = __private.get(this);\n        const cmp = $this.cmp;\n        let node = $this.head;\n        let level = $this.h;\n        while (level >= 0) {\n            while (node.next[level] && cmp(node.next[level].k, k) < 0) {\n                node = node.next[level];\n            }\n            level--;\n        }\n        return node;\n    }\n    pickHeight(maxh, h, p) {\n        const max = Math.min(maxh, h + 1);\n        let level = 0;\n        while (Math.random() < p && level < max) {\n            level++;\n        }\n        return level;\n    }\n}\nSortedMap.DEFAULT_CAP = 8;\nSortedMap.DEFAULT_P = 1 / Math.E;\n","import { compare } from \"@thi.ng/compare\";\nimport { map } from \"@thi.ng/transducers\";\nimport { dissoc } from \"./dissoc\";\nimport { equivSet } from \"./internal/equiv\";\nimport { into } from \"./into\";\nimport { SortedMap } from \"./sorted-map\";\nconst __private = new WeakMap();\n/**\n * Sorted set implementation with standard ES6 Set API, customizable\n * value equality and comparison semantics and additional functionality:\n *\n * - range queries (via `entries`, `keys`, `values`)\n * - multiple value addition/deletion via `into()` and `disj()`\n *\n * Furthermore, this class implements the `ICopy`, IEmpty`, `ICompare`\n * and `IEquiv` interfaces defined by `@thi.ng/api`. The latter two\n * allow instances to be used as keys themselves in other data types\n * defined in this (and other) package(s).\n *\n * This set uses a `SortedMap` as backing store and therefore has the\n * same resizing characteristics.\n */\nexport class SortedSet extends Set {\n    /**\n     * Creates new instance with optional given values and/or\n     * implementation options. The options are the same as used by\n     * `SortedMap`.\n     *\n     * @param values\n     * @param opts\n     */\n    constructor(values, opts) {\n        super();\n        __private.set(this, new SortedMap(values ? map((x) => [x, x], values) : null, opts));\n    }\n    [Symbol.iterator]() {\n        return this.keys();\n    }\n    get [Symbol.species]() {\n        return SortedSet;\n    }\n    get [Symbol.toStringTag]() {\n        return \"SortedSet\";\n    }\n    get size() {\n        return __private.get(this).size;\n    }\n    copy() {\n        return new SortedSet(this.keys(), this.opts());\n    }\n    empty() {\n        return new SortedSet(null, Object.assign(Object.assign({}, this.opts()), { capacity: SortedMap.DEFAULT_CAP }));\n    }\n    compare(o) {\n        const n = this.size;\n        const m = o.size;\n        if (n < m)\n            return -1;\n        if (n > m)\n            return 1;\n        const i = this.entries();\n        const j = o.entries();\n        let x, y;\n        let c;\n        while (((x = i.next()), (y = j.next()), !x.done && !y.done)) {\n            if ((c = compare(x.value[0], y.value[0])) !== 0) {\n                return c;\n            }\n        }\n        return 0;\n    }\n    equiv(o) {\n        return equivSet(this, o);\n    }\n    $reduce(rfn, acc) {\n        return __private.get(this).$reduce((_acc, x) => rfn(_acc, x[0]), acc);\n    }\n    entries(key, max = false) {\n        return __private.get(this).entries(key, max);\n    }\n    keys(key, max = false) {\n        return __private.get(this).keys(key, max);\n    }\n    values(key, max = false) {\n        return __private.get(this).values(key, max);\n    }\n    add(key) {\n        __private.get(this).set(key, key);\n        return this;\n    }\n    into(keys) {\n        return into(this, keys);\n    }\n    clear() {\n        __private.get(this).clear();\n    }\n    first() {\n        const first = __private.get(this).first();\n        return first ? first[0] : undefined;\n    }\n    delete(key) {\n        return __private.get(this).delete(key);\n    }\n    disj(keys) {\n        return dissoc(this, keys);\n    }\n    forEach(fn, thisArg) {\n        for (let p of this) {\n            fn.call(thisArg, p, p, this);\n        }\n    }\n    has(key) {\n        return __private.get(this).has(key);\n    }\n    get(key, notFound) {\n        return __private.get(this).get(key, notFound);\n    }\n    opts() {\n        return __private.get(this).opts();\n    }\n}\n","import { isNumber } from \"@thi.ng/checks\";\nimport { illegalArgs } from \"@thi.ng/errors\";\nimport { dissoc } from \"./dissoc\";\nimport { into } from \"./into\";\nconst __private = new WeakMap();\nconst fail = () => illegalArgs(`dense & sparse arrays must be of same size`);\n/**\n * After \"An Efficient Representation for Sparse Sets\"\n * Preston Briggs and Linda Torczon (1993)\n *\n * https://research.swtch.com/sparse\n * https://programmingpraxis.com/2012/03/09/sparse-sets/\n * https://blog.molecular-matters.com/2013/07/24/adventures-in-data-oriented-design-part-3c-external-references/\n */\nexport class ASparseSet extends Set {\n    constructor(dense, sparse) {\n        super();\n        __private.set(this, { dense, sparse, n: 0 });\n    }\n    [Symbol.iterator]() {\n        return this.keys();\n    }\n    get size() {\n        return __private.get(this).n;\n    }\n    get capacity() {\n        return __private.get(this).dense.length;\n    }\n    clear() {\n        __private.get(this).n = 0;\n    }\n    equiv(o) {\n        if (this === o) {\n            return true;\n        }\n        if (!(o instanceof Set) || this.size !== o.size) {\n            return false;\n        }\n        const $this = __private.get(this);\n        const d = $this.dense;\n        for (let i = $this.n; --i >= 0;) {\n            if (!o.has(d[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    add(key) {\n        const $this = __private.get(this);\n        const dense = $this.dense;\n        const sparse = $this.sparse;\n        const max = dense.length;\n        const i = sparse[key];\n        const n = $this.n;\n        if (key < max && n < max && !(i < n && dense[i] === key)) {\n            dense[n] = key;\n            sparse[key] = n;\n            $this.n++;\n        }\n        return this;\n    }\n    delete(key) {\n        const $this = __private.get(this);\n        const dense = $this.dense;\n        const sparse = $this.sparse;\n        const i = sparse[key];\n        if (i < $this.n && dense[i] === key) {\n            const j = dense[--$this.n];\n            dense[i] = j;\n            sparse[j] = i;\n            return true;\n        }\n        return false;\n    }\n    has(key) {\n        const $this = __private.get(this);\n        const i = $this.sparse[key];\n        return i < $this.n && $this.dense[i] === key;\n    }\n    get(key, notFound = -1) {\n        return this.has(key) ? key : notFound;\n    }\n    first() {\n        const $this = __private.get(this);\n        return $this.n ? $this.dense[0] : undefined;\n    }\n    into(keys) {\n        return into(this, keys);\n    }\n    disj(keys) {\n        return dissoc(this, keys);\n    }\n    forEach(fn, thisArg) {\n        const $this = __private.get(this);\n        const d = $this.dense;\n        const n = $this.n;\n        for (let i = 0; i < n; i++) {\n            const v = d[i];\n            fn.call(thisArg, v, v, this);\n        }\n    }\n    *entries() {\n        const $this = __private.get(this);\n        const d = $this.dense;\n        const n = $this.n;\n        for (let i = 0; i < n; i++) {\n            yield [d[i], d[i]];\n        }\n    }\n    *keys() {\n        const $this = __private.get(this);\n        const d = $this.dense;\n        const n = $this.n;\n        for (let i = 0; i < n; i++) {\n            yield d[i];\n        }\n    }\n    values() {\n        return this.keys();\n    }\n    __copyTo(dest) {\n        const $this = __private.get(this);\n        const $c = __private.get(dest);\n        $c.dense = $this.dense.slice();\n        $c.sparse = $this.sparse.slice();\n        $c.n = $this.n;\n        return dest;\n    }\n}\nexport class SparseSet8 extends ASparseSet {\n    constructor(n, sparse) {\n        isNumber(n)\n            ? super(new Uint8Array(n), new Uint8Array(n))\n            : n.length === sparse.length\n                ? super(n, sparse)\n                : fail();\n    }\n    get [Symbol.species]() {\n        return SparseSet8;\n    }\n    get [Symbol.toStringTag]() {\n        return \"SparseSet8\";\n    }\n    copy() {\n        return this.__copyTo(new SparseSet8(0));\n    }\n    empty() {\n        return new SparseSet8(this.capacity);\n    }\n}\nexport class SparseSet16 extends ASparseSet {\n    constructor(n, sparse) {\n        isNumber(n)\n            ? super(new Uint16Array(n), new Uint16Array(n))\n            : n.length === sparse.length\n                ? super(n, sparse)\n                : fail();\n    }\n    get [Symbol.species]() {\n        return SparseSet16;\n    }\n    get [Symbol.toStringTag]() {\n        return \"SparseSet16\";\n    }\n    copy() {\n        return this.__copyTo(new SparseSet16(0));\n    }\n    empty() {\n        return new SparseSet16(this.capacity);\n    }\n}\nexport class SparseSet32 extends ASparseSet {\n    constructor(n, sparse) {\n        isNumber(n)\n            ? super(new Uint32Array(n), new Uint32Array(n))\n            : n.length === sparse.length\n                ? super(n, sparse)\n                : fail();\n    }\n    get [Symbol.species]() {\n        return SparseSet32;\n    }\n    get [Symbol.toStringTag]() {\n        return \"SparseSet32\";\n    }\n    copy() {\n        return this.__copyTo(new SparseSet32(0));\n    }\n    empty() {\n        return new SparseSet32(this.capacity);\n    }\n}\n/**\n * Creates a new sparse set with given max. capacity (max ID + 1) and\n * chooses most memory efficient implementation, e.g. if `n` <= 256\n * returns a `SparseSet8` instance.\n *\n * @param n\n */\nexport const sparseSet = (n) => n <= 0x100\n    ? new SparseSet8(n)\n    : n <= 0x10000\n        ? new SparseSet16(n)\n        : new SparseSet32(n);\n","import { xformSetOp } from \"./internal/xform-setop\";\nimport { into } from \"./into\";\nimport { copy } from \"./utils\";\n/**\n * Computes union of sets `a` and `b` and writes results to new set or\n * optionally given set `out` (assumed to be empty for correct results).\n *\n * @param a\n * @param b\n * @param out\n */\nexport const union = (a, b, out) => {\n    if (a.size < b.size) {\n        const t = a;\n        a = b;\n        b = t;\n    }\n    out = out ? into(out, a) : copy(a, Set);\n    return a === b ? out : into(out, b);\n};\nexport function unionR(src) {\n    return xformSetOp(unionR, union, src);\n}\n","import { empty, ensureSet } from \"./utils\";\nexport const withoutKeysMap = (src, keys) => {\n    const ks = ensureSet(keys);\n    const dest = empty(src, Map);\n    for (let p of src.entries()) {\n        const k = p[0];\n        !ks.has(k) && dest.set(k, p[1]);\n    }\n    return dest;\n};\nexport const withoutKeysObj = (src, keys) => {\n    const ks = ensureSet(keys);\n    const dest = {};\n    for (let k in src) {\n        src.hasOwnProperty(k) && !ks.has(k) && (dest[k] = src[k]);\n    }\n    return dest;\n};\n","export * from \"./array-set\";\nexport * from \"./common-keys\";\nexport * from \"./difference\";\nexport * from \"./dissoc\";\nexport * from \"./equiv-map\";\nexport * from \"./hash-map\";\nexport * from \"./indexed\";\nexport * from \"./intersection\";\nexport * from \"./into\";\nexport * from \"./invert\";\nexport * from \"./join\";\nexport * from \"./ll-set\";\nexport * from \"./merge-apply\";\nexport * from \"./merge-deep\";\nexport * from \"./merge-with\";\nexport * from \"./merge\";\nexport * from \"./rename-keys\";\nexport * from \"./select-keys\";\nexport * from \"./sorted-map\";\nexport * from \"./sorted-set\";\nexport * from \"./sparse-set\";\nexport * from \"./union\";\nexport * from \"./without-keys\";\n","import { EquivMap } from \"@thi.ng/associative\";\nimport { unsupported } from \"@thi.ng/errors\";\nimport { LOGGER } from \"./api\";\nimport { Subscription, subscription } from \"./subscription\";\nimport { optsWithID } from \"./utils/idgen\";\n/**\n * Topic based stream splitter. Applies `topic` function to each\n * received value and only forwards it to the child subscriptions of the\n * returned topic.\n *\n * @remarks\n * The actual topic (return value from `topic` fn) can be of any type,\n * apart from `undefined`. Complex topics (e.g objects / arrays) are\n * allowed and they're matched with registered topics using\n * @thi.ng/equiv by default (but customizable via `equiv` option). Each\n * topic can have any number of subscribers.\n *\n * If a `xform` transducer is given, it is always applied prior to\n * passing the input to the topic function. I.e. in this case the topic\n * function will receive the transformed inputs.\n *\n * {@link PubSub} supports dynamic topic subscriptions and\n * unsubscriptions via {@link PubSub.subscribeTopic} and\n * {@link PubSub.unsubscribeTopic}. However, the standard\n * {@link ISubscribable.subscribe} / {@link ISubscribable.unsubscribe}\n * methods are NOT supported (since meaningless) and will throw an\n * error! `unsubscribe()` can only be called WITHOUT argument to\n * unsubscribe the entire `PubSub` instance (incl. all topic\n * subscriptions) from the parent stream.\n *\n * @param opts\n */\nexport const pubsub = (opts) => new PubSub(opts);\nexport class PubSub extends Subscription {\n    constructor(opts) {\n        opts = opts || {};\n        super(undefined, optsWithID(\"pubsub\", {\n            xform: opts.xform\n        }));\n        this.topicfn = opts.topic;\n        this.topics = new EquivMap(undefined, {\n            equiv: opts.equiv\n        });\n    }\n    /**\n     * Unsupported. Use `subscribeTopic()` instead.\n     */\n    subscribe() {\n        return unsupported(`use subscribeTopic() instead`);\n    }\n    /**\n     * Unsupported. Use `subscribeTopic()` instead.\n     */\n    transform() {\n        return unsupported(`use subscribeTopic() instead`);\n    }\n    subscribeTopic(topicID, sub, opts) {\n        let t = this.topics.get(topicID);\n        !t && this.topics.set(topicID, (t = subscription()));\n        return t.subscribe(sub, opts);\n    }\n    unsubscribeTopic(topicID, sub) {\n        const t = this.topics.get(topicID);\n        return t ? t.unsubscribe(sub) : false;\n    }\n    unsubscribe(sub) {\n        if (!sub) {\n            for (let t of this.topics.values()) {\n                t.unsubscribe();\n            }\n            this.topics.clear();\n            return super.unsubscribe();\n        }\n        return unsupported();\n    }\n    done() {\n        for (let t of this.topics.values()) {\n            t.done();\n        }\n        super.done();\n    }\n    dispatch(x) {\n        LOGGER.debug(this.id, \"dispatch\", x);\n        const t = this.topicfn(x);\n        if (t !== undefined) {\n            const sub = this.topics.get(t);\n            if (sub) {\n                try {\n                    sub.next && sub.next(x);\n                }\n                catch (e) {\n                    sub.error ? sub.error(e) : this.error(e);\n                }\n            }\n        }\n    }\n}\n","import { isFunction } from \"@thi.ng/checks\";\nimport { LOGGER } from \"./api\";\nimport { Subscription } from \"./subscription\";\nimport { optsWithID } from \"./utils/idgen\";\nexport function stream(src, opts) {\n    return new Stream(src, opts);\n}\nexport class Stream extends Subscription {\n    // prettier-ignore\n    constructor(src, opts) {\n        const [_src, _opts] = isFunction(src) ? [src, opts] : [undefined, src];\n        super(undefined, optsWithID(\"stream\", _opts));\n        this.src = _src;\n        this._inited = false;\n    }\n    subscribe(...args) {\n        const wrapped = super.subscribe.apply(this, args);\n        if (!this._inited) {\n            this._cancel = (this.src && this.src(this)) || (() => void 0);\n            this._inited = true;\n        }\n        return wrapped;\n    }\n    unsubscribe(sub) {\n        const res = super.unsubscribe(sub);\n        if (res &&\n            (!sub ||\n                ((!this.subs || !this.subs.length) &&\n                    this.closeOut !== 0 /* NEVER */))) {\n            this.cancel();\n        }\n        return res;\n    }\n    done() {\n        this.cancel();\n        super.done();\n        delete this.src;\n        delete this._cancel;\n    }\n    error(e) {\n        super.error(e);\n        this.cancel();\n    }\n    cancel() {\n        if (this._cancel) {\n            LOGGER.debug(this.id, \"cancel\");\n            const f = this._cancel;\n            delete this._cancel;\n            f();\n        }\n    }\n}\n","import { Subscription } from \"./subscription\";\nimport { optsWithID } from \"./utils/idgen\";\n/**\n * Returns a new {@link StreamMerge} subscription, consuming values from\n * multiple inputs and passing received values on to any subscribers.\n *\n * @remarks\n * Input streams can be added and removed dynamically. By default,\n * `StreamMerge` calls {@link ISubscriber.done} when the last active\n * input is done, but this behavior can be overridden via the provided\n * {@link StreamMergeOpts | options}.\n *\n * @example\n * ```ts\n * merge({\n *     // input streams w/ different frequencies\n *     src: [\n *         fromIterable([1, 2, 3], { delay: 10 }),\n *         fromIterable([10, 20, 30], { delay: 21 }),\n *         fromIterable([100, 200, 300], { delay: 7 })\n *     ]\n * }).subscribe(trace());\n * // 100\n * // 1\n * // 200\n * // 10\n * // 2\n * // 300\n * // 3\n * // 20\n * // 30\n * ```\n *\n * @example\n * Use the {@link @thi.ng/transducers#labeled} transducer for each\n * input to create a stream of labeled values and track their provenance:\n *\n * ```ts\n * merge({\n *     src: [\n *         fromIterable([1, 2, 3]).transform(tx.labeled(\"a\")),\n *         fromIterable([10, 20, 30]).transform(tx.labeled(\"b\")),\n *     ]\n * }).subscribe(trace());\n * // [\"a\", 1]\n * // [\"b\", 10]\n * // [\"a\", 2]\n * // [\"b\", 20]\n * // [\"a\", 3]\n * // [\"b\", 30]\n * ```\n *\n * @param opts\n */\nexport const merge = (opts) => new StreamMerge(opts);\nexport class StreamMerge extends Subscription {\n    constructor(opts) {\n        opts = opts || {};\n        super(undefined, optsWithID(\"streammerge\", opts));\n        this.sources = new Map();\n        opts.src && this.addAll(opts.src);\n    }\n    add(src) {\n        this.ensureState();\n        this.sources.set(src, src.subscribe({\n            next: (x) => {\n                if (x instanceof Subscription) {\n                    this.add(x);\n                }\n                else {\n                    this.next(x);\n                }\n            },\n            done: () => this.markDone(src),\n            __owner: this\n        }, { id: `in-${src.id}` }));\n    }\n    addAll(src) {\n        for (let s of src) {\n            this.add(s);\n        }\n    }\n    remove(src) {\n        const sub = this.sources.get(src);\n        if (sub) {\n            this.sources.delete(src);\n            sub.unsubscribe();\n            return true;\n        }\n        return false;\n    }\n    removeID(id) {\n        for (let s of this.sources) {\n            if (s[0].id === id) {\n                return this.remove(s[0]);\n            }\n        }\n        return false;\n    }\n    removeAll(src) {\n        let ok = true;\n        for (let s of src) {\n            ok = this.remove(s) && ok;\n        }\n        return ok;\n    }\n    removeAllIDs(ids) {\n        let ok = true;\n        for (let id of ids) {\n            ok = this.removeID(id) && ok;\n        }\n        return ok;\n    }\n    unsubscribe(sub) {\n        if (!sub) {\n            for (let s of this.sources.values()) {\n                s.unsubscribe();\n            }\n            this.state = 2 /* DONE */;\n            this.sources.clear();\n        }\n        return super.unsubscribe(sub);\n    }\n    markDone(src) {\n        this.remove(src);\n        if (this.closeIn === 1 /* FIRST */ ||\n            (this.closeIn === 2 /* LAST */ && !this.sources.size)) {\n            this.done();\n        }\n    }\n}\n","import { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Returns a {@link Stream} of values from provided iterable, emitted at\n * the given `delay` interval.\n *\n * @remarks\n * Asynchronously starts pulling values from source iterable when the\n * first subscriber becomes available. The values are processed &\n * emitted via `setInterval()`, using the given `delay` value (default:\n * 0). By default, once the iterable is exhausted (if finite), calls\n * {@link ISubscriber.done} to close the stream, but this can be\n * re-configured via provided {@link CommonOpts | options}.\n *\n * @param src\n * @param opts\n */\nexport const fromIterable = (src, opts = {}) => new Stream((stream) => {\n    const iter = src[Symbol.iterator]();\n    const id = setInterval(() => {\n        let val;\n        if ((val = iter.next()).done) {\n            clearInterval(id);\n            stream.closeIn !== 0 /* NEVER */ && stream.done();\n        }\n        else {\n            stream.next(val.value);\n        }\n    }, opts.delay || 0);\n    return () => clearInterval(id);\n}, optsWithID(\"iterable\", opts));\n/**\n * Creates a new `Stream` of given iterable which synchronously calls\n * `.next()` for each item of the iterable when the first (and in this\n * case the only one) subscriber becomes available. Once the iterable is\n * exhausted (MUST be finite!), then calls `.done()` by default, but can\n * be avoided by passing `false` as last argument.\n *\n * @param src\n * @param opts\n */\nexport const fromIterableSync = (src, opts) => new Stream((stream) => {\n    for (let s of src) {\n        stream.next(s);\n    }\n    stream.closeIn !== 0 /* NEVER */ && stream.done();\n}, optsWithID(\"iterable-sync\", opts));\n","import { fromIterable } from \"./from/iterable\";\nimport { optsWithID } from \"./utils/idgen\";\nexport function trigger(x = true) {\n    return fromIterable([x], optsWithID(\"trigger\"));\n}\n","import { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Returns a {@link Stream} of monotonically increasing counter values,\n * emitted at given `delay` interval and up to the optionally defined\n * max value (default: ), after which the stream is closed.\n *\n * @remarks\n * The stream only starts when the first subscriber becomes available.\n *\n * @param delay\n * @param opts\n */\nexport const fromInterval = (delay, opts) => {\n    opts = optsWithID(\"interval\", Object.assign({ num: Infinity }, opts));\n    return new Stream((stream) => {\n        let i = 0;\n        let count = opts.num;\n        stream.next(i++);\n        let id = setInterval(() => {\n            stream.next(i++);\n            if (--count <= 0) {\n                clearInterval(id);\n                stream.closeIn !== 0 /* NEVER */ && stream.done();\n            }\n        }, delay);\n        return () => clearInterval(id);\n    }, opts);\n};\n","import { isNode } from \"@thi.ng/checks\";\nimport { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\nimport { fromInterval } from \"./interval\";\n/**\n * Yields {@link Stream} of a monotonically increasing counter,\n * triggered by a `requestAnimationFrame()` loop (only available in\n * browser environments).\n *\n * @remarks\n * In NodeJS, this function falls back to {@link fromInterval}, yielding\n * a similar (approx. 60Hz) stream.\n *\n * All subscribers to this stream will be processed during that same\n * loop iteration.\n */\nexport const fromRAF = (opts) => isNode()\n    ? fromInterval(16, opts)\n    : new Stream((stream) => {\n        let i = 0;\n        let isActive = true;\n        let loop = () => {\n            isActive && stream.next(i++);\n            isActive && (id = requestAnimationFrame(loop));\n        };\n        let id = requestAnimationFrame(loop);\n        return () => {\n            isActive = false;\n            cancelAnimationFrame(id);\n        };\n    }, optsWithID(\"raf\", opts));\n","import { isNumber } from \"@thi.ng/checks\";\nimport { dedupe, reducer, scan } from \"@thi.ng/transducers\";\nimport { fromInterval } from \"./from/interval\";\nimport { fromRAF } from \"./from/raf\";\nimport { sync } from \"./stream-sync\";\n/**\n * Takes an existing stream/subscription `src` and attaches new\n * subscription which interpolates between incoming values from `src`\n * using the given `mix` function.\n *\n * @remarks\n * The returned construct produces values at a rate controlled by the\n * `clock` stream or frequency. If omitted, `clock` defaults to\n * {@link fromRAF} (~60Hz). If the `clock` is given as number, creates a\n * {@link fromInterval} or else uses the given `clock` stream directly.\n * In general, the frequency of the `clock` should always be higher than\n * that of `src` or else interpolation will have undefined behavior.\n *\n * If `stop` is given as well, no values will be passed downstream if\n * that function returns true. This can be used to limit traffic once\n * the tween target value has been reached.\n *\n * The returned subscription closes automatically when either `src` or\n * `clock` are exhausted.\n *\n * @example\n * ```ts\n * val = stream();\n *\n * tween(\n *   // consume from `val` stream\n *   val,\n *   // initial start value to interpolate from\n *   0,\n *   // interpolation fn (LERP)\n *   (a, b) => a + (b - a) * 0.5,\n *   // stop emitting values if difference to previous result < 0.01\n *   (a, b) => Math.abs(a - b) < 0.01\n * ).subscribe(trace(\"tweened\"))\n *\n * a.next(10)\n * // 5\n * // 7.5\n * // ...\n * // 9.98046875\n *\n * a.next(100)\n * // 55\n * // 77.5\n * // ...\n * // 99.989013671875\n * ```\n *\n * @param src\n * @param initial\n * @param mix\n * @param stop\n * @param clock\n */\nexport const tween = (src, initial, mix, stop, clock) => sync({\n    src: {\n        src,\n        _: clock == null\n            ? fromRAF()\n            : isNumber(clock)\n                ? fromInterval(clock)\n                : clock\n    },\n    closeIn: 1 /* FIRST */\n}).transform(scan(reducer(() => initial, (acc, { src }) => mix(acc, src))), dedupe(stop || (() => false)));\n/**\n * Convenience version of `tween` for its most common use case, tweening\n * of numeric streams.\n *\n * @param src\n * @param init\n * @param speed\n * @param eps\n * @param clock\n */\nexport const tweenNumber = (src, init = 0, speed = 0.05, eps = 1e-3, clock) => tween(src, init, (a, b) => a + (b - a) * speed, (a, b) => Math.abs(a - b) < eps, clock);\n","import { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Yields {@link Stream} of value changes in given\n * {@link @thi.ng/atom# | Atom-like state container}.\n *\n * @remarks\n * Attaches a {@link @thi.ng/api#IWatch.addWatch | watch} to the atom\n * and checks for value changes with given `changed` predicate (`!==` by\n * default). If the predicate returns truthy result, the new value is\n * emitted on the stream. If `emitFirst` is true (default), also emits\n * atom's current value when first subscriber attaches to stream.\n *\n * Also see {@link fromView}\n *\n * @example\n * ```ts\n * db = new Atom({ a: 23, b: 88 });\n * cursor = new Cursor(db, \"a\")\n *\n * rs.fromAtom(cursor).subscribe(rs.trace(\"cursor val:\"))\n * // cursor val: 23\n *\n * cursor.reset(42);\n * // cursor val: 42\n *\n * db.reset({a: 66})\n * // cursor val: 66\n * ```\n *\n * @param atom\n * @param opts\n */\nexport const fromAtom = (atom, opts) => {\n    opts = optsWithID(\"atom\", Object.assign({ emitFirst: true, changed: (a, b) => a !== b }, opts));\n    return new Stream((stream) => {\n        atom.addWatch(stream.id, (_, prev, curr) => {\n            if (opts.changed(prev, curr)) {\n                stream.next(curr);\n            }\n        });\n        opts.emitFirst && stream.next(atom.deref());\n        return () => atom.removeWatch(stream.id);\n    }, opts);\n};\n","import { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Creates a {@link Stream} of events attached to given element / event\n * target and using given event listener options (same as supported by\n * `addEventListener()`, default: false).\n *\n * @param src event target\n * @param name event name\n * @param listenerOpts listener opts\n * @param streamOpts stream opts\n */\nexport const fromEvent = (src, name, listenerOpts = false, streamOpts) => new Stream((stream) => {\n    let listener = (e) => stream.next(e);\n    src.addEventListener(name, listener, listenerOpts);\n    return () => src.removeEventListener(name, listener, listenerOpts);\n}, optsWithID(`event-${name}`, streamOpts));\n/**\n * Same as `fromEvent`, however only supports well-known DOM event\n * names. Returned stream instance will use corresponding concrete event\n * type in its type signature, whereas `fromEvent` will only use the\n * generic `Event`.\n *\n * ```\n * fromDOMEvent(document.body, \"mousemove\"); // Stream<MouseEvent>\n * fromEvent(document.body, \"mousemove\"); // Stream<Event>\n * ```\n *\n * @see fromEvent\n *\n * @param src\n * @param name\n * @param listenerOpts\n * @param streamOpts\n */\nexport const fromDOMEvent = (src, name, listenerOpts = false, streamOpts) => fromEvent(src, name, listenerOpts, streamOpts);\n","import { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Yields a single-value {@link Stream} of the resolved promise and then\n * automatically marks itself done.\n *\n * @remarks\n * It doesn't matter if the promise resolves before the first subscriber\n * has attached.\n *\n * @param src\n * @param opts\n */\nexport const fromPromise = (src, opts) => {\n    let canceled = false;\n    let isError = false;\n    let err = {};\n    src.catch((e) => {\n        err = e;\n        isError = true;\n    });\n    return new Stream((stream) => {\n        src.then((x) => {\n            if (!canceled && stream.getState() < 2 /* DONE */) {\n                if (isError) {\n                    stream.error(err);\n                    err = null;\n                }\n                else {\n                    stream.next(x);\n                    stream.closeIn !== 0 /* NEVER */ && stream.done();\n                }\n            }\n        }, (e) => stream.error(e));\n        return () => {\n            canceled = true;\n        };\n    }, optsWithID(\"promise\", opts));\n};\n","import { mapcat } from \"@thi.ng/transducers\";\nimport { optsWithID } from \"../utils/idgen\";\nimport { fromPromise } from \"./promise\";\n/**\n * Wraps given iterable in `Promise.all()` to yield {@link Stream} of\n * results in same order as arguments, then closes.\n *\n * @remarks\n * If any of the promises rejects, all others will do so too. In this\n * case the stream calls {@link ISubscriber.error} in all of its\n * subscribers.\n *\n * @example\n * ```ts\n * fromPromises([\n *     Promise.resolve(1),\n *     Promise.resolve(2),\n *     Promise.resolve(3)\n * ]).subscribe(trace())\n * // 1\n * // 2\n * // 3\n * // done\n * ```\n *\n * @example\n * If individual error handling is required, an alternative is below\n * (however this approach provides no ordering guarantees):\n *\n * ```ts\n * fromIterable([\n *     Promise.resolve(1),\n *     new Promise(() => setTimeout(() => { throw new Error(\"eeek\"); }, 10)),\n *     Promise.resolve(3)\n * ]).subscribe(resolve()).subscribe(trace())\n * ```\n *\n * @param promises\n */\nexport const fromPromises = (promises, opts) => fromPromise(Promise.all(promises), optsWithID(\"promises\", opts)).transform(mapcat((x) => x));\n","import { isArray, isString } from \"@thi.ng/checks\";\n/**\n * Converts the given key path to canonical form (array).\n *\n * ```\n * toPath(\"a.b.c\");\n * // [\"a\", \"b\", \"c\"]\n *\n * toPath(0)\n * // [0]\n *\n * toPath([\"a\", \"b\", \"c\"])\n * // [\"a\", \"b\", \"c\"]\n * ```\n *\n * @param path\n */\nexport const toPath = (path) => isArray(path)\n    ? path\n    : isString(path)\n        ? path.length > 0\n            ? path.split(\".\")\n            : []\n        : path != null\n            ? [path]\n            : [];\n/**\n * Takes an arbitrary object and lookup path. Descends into object along\n * path and returns true if the full path exists (even if final leaf\n * value is `null` or `undefined`). Checks are performed using\n * `hasOwnProperty()`.\n *\n * @param obj\n * @param path\n */\nexport const exists = (obj, path) => {\n    if (obj == null) {\n        return false;\n    }\n    path = toPath(path);\n    for (let n = path.length - 1, i = 0; i <= n; i++) {\n        const k = path[i];\n        if (!obj.hasOwnProperty(k)) {\n            return false;\n        }\n        obj = obj[k];\n        if (obj == null && i < n) {\n            return false;\n        }\n    }\n    return true;\n};\n","import { toPath } from \"./path\";\n/**\n * Composes a getter function for given nested lookup path. Optimized\n * fast execution paths are provided for path lengths <= 4.\n *\n * @remarks\n * Supports any `[]`-indexable data structure (arrays, objects,\n * strings).\n *\n * If `path` is given as string, it will be split using `.`. Returns\n * function which accepts single object and when called, returns value\n * at given path.\n *\n * If any intermediate key is not present in the given obj, descent\n * stops and the function returns `undefined`.\n *\n * If `path` is an empty string or array, the returned getter will\n * simply return the given state arg (identity function).\n *\n * Also see: `getIn()`\n *\n * @example\n * ```ts\n * interface Foo {\n *   a: { b: { c: number; } }\n * }\n *\n * // fully typed getter\n * g = getter<Foo, \"a\", \"b\", \"c\">([\"a\",\"b\",\"c\"]);\n *\n * // error (wrong `d` key)\n * g = getter<Foo, \"a\", \"b\", \"d\">([\"a\",\"b\",\"d\"]);\n *\n * // unchecked (accepts any, returns any)\n * g = getter(\"a.b.c\");\n *\n * g({ a: { b: { c: 23} } }) // 23\n * g({ x: 23 }) // undefined\n * g() // undefined\n * ```\n *\n * @param path\n */\nexport const getter = (path) => getterT(path);\nexport function getterT(path) {\n    const ks = toPath(path);\n    let [a, b, c, d] = ks;\n    switch (ks.length) {\n        case 0:\n            return (s) => s;\n        case 1:\n            return (s) => (s != null ? s[a] : undefined);\n        case 2:\n            return (s) => s != null ? ((s = s[a]) != null ? s[b] : undefined) : undefined;\n        case 3:\n            return (s) => s != null\n                ? (s = s[a]) != null\n                    ? (s = s[b]) != null\n                        ? s[c]\n                        : undefined\n                    : undefined\n                : undefined;\n        case 4:\n            return (s) => s != null\n                ? (s = s[a]) != null\n                    ? (s = s[b]) != null\n                        ? (s = s[c]) != null\n                            ? s[d]\n                            : undefined\n                        : undefined\n                    : undefined\n                : undefined;\n        default:\n            return (s) => {\n                const n = ks.length - 1;\n                let res = s;\n                for (let i = 0; res != null && i <= n; i++) {\n                    res = res[ks[i]];\n                }\n                return res;\n            };\n    }\n}\n","import { isArray } from \"@thi.ng/checks\";\nimport { toPath } from \"./path\";\n/**\n * Composes a setter function for given nested update path. Optimized\n * fast execution paths are provided for path lengths less up to 4.\n *\n * @remarks\n * Supports both arrays and objects and creates intermediate shallow\n * copies at each level of the path. Thus provides structural sharing\n * with the original data for any branches not being updated by the\n * setter.\n *\n * If `path` is given as string, it will be split using `.`. Returns\n * function which accepts single object and when called, **immutably**\n * updates value at given path, i.e. produces a partial deep copy of obj\n * up until given path.\n *\n * If any intermediate key is not present in the given obj, creates a\n * plain empty object for that key and descends further.\n *\n * If `path` is an empty string or array, the returned setter will\n * simply return the new value.\n *\n * Only keys in the path will be modified, all other keys present in the\n * given object retain their original values to provide efficient\n * structural sharing / re-use.\n *\n * Also see: {@link setIn}, {@link updateIn}, {@link deleteIn}\n *\n * @example\n * ```\n * s = setter(\"a.b.c\");\n * // or\n * s = setter([\"a\",\"b\",\"c\"]);\n *\n * s({ a: { b: { c: 23} } }, 24)\n * // { a: { b: { c: 24} } }\n *\n * s({ x: 23 }, 24)\n * // { x: 23, a: { b: { c: 24 } } }\n *\n * s(null, 24)\n * // { a: { b: { c: 24 } } }\n * ```\n *\n * @example\n * ```ts\n * s = setter(\"a.b.c\");\n *\n * a = {x: {y: {z: 1}}};\n * b = s(a, 2);\n * // { x: { y: { z: 1 } }, a: { b: { c: 2 } } }\n *\n * a.x === b.x // true\n * a.x.y === b.x.y // true\n * ```\n *\n * @param path\n */\nexport const setter = (path) => setterT(path);\nexport function setterT(path) {\n    const ks = toPath(path);\n    let [a, b, c, d] = ks;\n    switch (ks.length) {\n        case 0:\n            return (_, v) => v;\n        case 1:\n            return (s, v) => ((s = _copy(s)), (s[a] = v), s);\n        case 2:\n            return (s, v) => {\n                let x;\n                s = _copy(s);\n                s[a] = x = _copy(s[a]);\n                x[b] = v;\n                return s;\n            };\n        case 3:\n            return (s, v) => {\n                let x, y;\n                s = _copy(s);\n                s[a] = x = _copy(s[a]);\n                x[b] = y = _copy(x[b]);\n                y[c] = v;\n                return s;\n            };\n        case 4:\n            return (s, v) => {\n                let x, y, z;\n                s = _copy(s);\n                s[a] = x = _copy(s[a]);\n                x[b] = y = _copy(x[b]);\n                y[c] = z = _copy(y[c]);\n                z[d] = v;\n                return s;\n            };\n        default:\n            let f;\n            for (let i = ks.length; --i >= 0;) {\n                f = compS(ks[i], f);\n            }\n            return f;\n    }\n}\nconst _copy = (s) => (isArray(s) ? s.slice() : Object.assign({}, s));\nconst compS = (k, f) => (s, v) => ((s = _copy(s)), (s[k] = f ? f(s[k], v) : v), s);\n","import { getterT } from \"./getter\";\nimport { setterT } from \"./setter\";\n/**\n * Similar to {@link setIn}, but applies given function to current path\n * value (incl. any additional/optional arguments passed to `updateIn`)\n * and uses result as new value. Does not modify original state (unless\n * given function does so itself).\n *\n * ```\n * add = (x, y) => x + y;\n * updateIn({ a: { b: { c: 23 } } }, \"a.b.c\", add, 10);\n * // { a: { b: { c: 33 } } }\n * ```\n *\n * @param state - state to update\n * @param path - update path\n * @param fn - update function\n * @param args - optional args for `fn`\n */\nexport const updateIn = (state, path, fn, ...args) => updateInT(state, path, fn, ...args);\nexport function updateInT(state, path, fn, ...args) {\n    return setterT(path)(state, fn.apply(null, (args.unshift(getterT(path)(state)), args)));\n}\n","import { toPath } from \"./path\";\nimport { updateInT } from \"./update-in\";\n/**\n * Uses {@link updateIn} and returns updated state with key for given\n * path removed. Does not modify original state.Returns `undefined` if\n * `path` is an empty string or array.\n *\n * ```\n * deleteIn({ a: { b: { c: 23 } } }, \"a.b.c\");\n * // { a: { b: { } } }\n * ```\n *\n * @param state\n * @param path\n */\nexport const deleteIn = (state, path) => deleteInT(state, path);\nexport function deleteInT(state, path) {\n    const ks = [...toPath(path)];\n    if (ks.length > 0) {\n        const k = ks.pop();\n        return updateInT(state, ks, (x) => ((x = Object.assign({}, x)), delete x[k], x));\n    }\n}\n","import { getterT } from \"./getter\";\n/**\n * Immediate use getter, i.e. same as: `getter(path)(state)`.\n *\n * @remarks\n * Supports type checked paths and values for path lengths <= 8. String\n * paths are always unchecked (i.e. `state` is `any`).\n *\n * @example\n * ```ts\n * // checked path and inferred return type\n * getIn({ a: { b: { c: 23 } } }, [\"a\",\"b\",\"c\"]);\n * // 23\n *\n * // unchecked path\n * getIn({ a: { b: { c: 23 } } }, \"a.b.c\");\n * // 23\n * ```\n *\n * @param state\n * @param path\n */\nexport const getIn = (state, path) => getterT(path)(state);\nexport function getInT(state, path) {\n    return getterT(path)(state);\n}\n","import { toPath } from \"./path\";\n/**\n * Higher-order function, similar to {@link setter}. Returns function\n * which when called mutates given object/array at given path location.\n *\n * @remarks\n * The returned function bails if any intermediate path values are\n * non-indexable (only the very last path element can be missing in the\n * actual object structure). If successful, returns original (mutated)\n * object, else `undefined`. This function provides optimized versions\n * for path lengths <= 4. Type checking is supported for path lengths <=\n * 8.\n *\n * @param path\n */\nexport const mutator = (path) => mutatorT(path);\nexport function mutatorT(path) {\n    const ks = toPath(path);\n    let [a, b, c, d] = ks;\n    switch (ks.length) {\n        case 0:\n            return (_, x) => x;\n        case 1:\n            return (s, x) => (s ? ((s[a] = x), s) : undefined);\n        case 2:\n            return (s, x) => {\n                let t;\n                return s\n                    ? (t = s[a])\n                        ? ((t[b] = x), s)\n                        : undefined\n                    : undefined;\n            };\n        case 3:\n            return (s, x) => {\n                let t;\n                return s\n                    ? (t = s[a])\n                        ? (t = t[b])\n                            ? ((t[c] = x), s)\n                            : undefined\n                        : undefined\n                    : undefined;\n            };\n        case 4:\n            return (s, x) => {\n                let t;\n                return s\n                    ? (t = s[a])\n                        ? (t = t[b])\n                            ? (t = t[c])\n                                ? ((t[d] = x), s)\n                                : undefined\n                            : undefined\n                        : undefined\n                    : undefined;\n            };\n        default:\n            return (s, x) => {\n                let t = s;\n                const n = ks.length - 1;\n                for (let k = 0; k < n; k++) {\n                    if (!(t = t[ks[k]]))\n                        return;\n                }\n                t[ks[n]] = x;\n                return s;\n            };\n    }\n}\n","import { mutatorT } from \"./mutator\";\n/**\n * Immediate use mutator, i.e. same as: `mutator(path)(state, val)`.\n *\n * @remarks\n * Also see {@link setIn}, {@link updateIn}, {@link deleteIn}.\n *\n * @example\n * ```ts\n * interface Foo {\n *   a: { b: number[]; }\n * }\n *\n * // fully type checked\n * mutIn({ a: { b: [10, 20] } }, [\"a\", \"b\", 1], 23)\n * // { a: { b: [ 10, 23 ] } }\n *\n * // unchecked\n * mutIn({ a: { b: [10, 20] } }, \"a.b.1\", 23);\n * // { a: { b: [ 10, 23 ] } }\n *\n * // fails (see `mutator` docs)\n * mutIn({}, \"a.b.c\", 23);\n * // undefined\n * ```\n *\n * @param state\n * @param path\n * @param val\n */\nexport const mutIn = (state, path, val) => mutInT(state, path, val);\nexport function mutInT(state, path, val) {\n    return mutatorT(path)(state, val);\n}\n","import { illegalArgs } from \"@thi.ng/errors\";\nimport { mutInT } from \"./mut-in\";\n/**\n * Similar to {@link mutIn}, but takes any number of path-value pairs as\n * args and applies them in sequence using `mutIn()`. All key paths must\n * already be present in the given data structure until their\n * penultimate key.\n *\n * @remarks\n * Unlike {@link mutIn}, this function does not use type checked paths.\n *\n * @example\n * ```ts\n * mutInMany(\n *   { a: { b: 1 }, x: { y: { z: 2 } } },\n *   \"a.b\", 10,\n *   \"x.y.z\", 20\n * )\n * // { a: { b: 10 }, x: { y: { z: 20 } } }\n * ```\n *\n * @param state\n * @param pairs\n */\nexport const mutInMany = (state, ...pairs) => {\n    const n = pairs.length;\n    n & 1 && illegalArgs(`require even number of args (got ${pairs.length})`);\n    for (let i = 0; i < n && state; i += 2) {\n        state = mutInT(state, pairs[i], pairs[i + 1]);\n    }\n    return state;\n};\n","import { setterT } from \"./setter\";\n/**\n * Immediate use setter, i.e. same as: `setter(path)(state, val)`.\n *\n * @remarks\n * Supports type checked paths and values for path lengths <= 8. String\n * paths are always unchecked (i.e. `state` is `any`).\n *\n * @example\n * ```ts\n *\n * setIn({}, \"a.b.c\", 23);\n * // { a: { b: { c: 23} } }\n * ```\n *\n * @param state\n * @param path\n */\nexport const setIn = (state, path, val) => setterT(path)(state, val);\nexport function setInT(state, path, val) {\n    return setterT(path)(state, val);\n}\n","import { illegalArgs } from \"@thi.ng/errors\";\nimport { setInT } from \"./set-in\";\n/**\n * Similar to {@link setIn}, but takes any number of path-value pairs as\n * args and applies them in sequence by calling `setIn()` for each.\n *\n * @remarks\n * Any key paths missing in the data structure will be created. Does\n * *not* mutate original (instead use {@link mutInMany} for this\n * purpose).\n *\n * Unlike {@link setIn}, this function does not use type checked paths.\n *\n * ```\n * setInMany({}, \"a.b\", 10, \"x.y.z\", 20)\n * // { a: { b: 10 }, x: { y: { z: 20 } } }\n * ```\n *\n * @param state\n * @param pairs\n */\nexport const setInMany = (state, ...pairs) => {\n    const n = pairs.length;\n    n & 1 &&\n        illegalArgs(`require even number of KV args (got ${pairs.length})`);\n    for (let i = 0; i < n; i += 2) {\n        state = setInT(state, pairs[i], pairs[i + 1]);\n    }\n    return state;\n};\n","import { getterT } from \"./getter\";\nimport { setterT } from \"./setter\";\n/**\n * Similar to {@link setter}, returns a function to update values at\n * given `path` using provided update `fn`.\n *\n * @remarks\n * The returned function accepts a single object / array and applies\n * `fn` to current path value (incl. any additional/optional arguments\n * passed) and uses result as new value. Does not modify original state\n * (unless given function does so itself).\n *\n * ```\n * add = updater(\"a.b\", (x, n) => x + n);\n *\n * add({a: {b: 10}}, 13);\n * // { a: { b: 23 } }\n * ```\n *\n * @param path\n * @param fn\n */\nexport const updater = (path, fn) => updaterT(path, fn);\nexport function updaterT(path, fn) {\n    const g = getterT(path);\n    const s = setterT(path);\n    return (state, ...args) => s(state, fn.apply(null, (args.unshift(g(state)), args)));\n}\n","export * from \"./delete-in\";\nexport * from \"./getter\";\nexport * from \"./get-in\";\nexport * from \"./mut-in\";\nexport * from \"./mut-in-many\";\nexport * from \"./mutator\";\nexport * from \"./path\";\nexport * from \"./setter\";\nexport * from \"./set-in\";\nexport * from \"./set-in-many\";\nexport * from \"./updater\";\nexport * from \"./update-in\";\n","let NEXT_ID = 0;\nexport const nextID = () => NEXT_ID++;\n","import { equiv as _equiv } from \"@thi.ng/equiv\";\nimport { getter, toPath } from \"@thi.ng/paths\";\nimport { nextID } from \"./idgen\";\n/**\n * This class implements readonly access to a deeply nested value with\n * in an Atom/Cursor. An optional transformer function can be supplied\n * at creation time to produce a derived/materialized view of the actual\n * value held in the atom. Views can be created directly or via the\n * `.addView()` method of the parent state. Views can be `deref()`'d\n * like atoms and polled for value changes using `changed()`. The\n * transformer is only applied once per value change and its result\n * cached until the next change.\n *\n * If the optional `lazy` is true (default), the transformer will only\n * be executed with the first `deref()` after each value change. If\n * `lazy` is false, the transformer function will be executed\n * immediately after a value change occurred and so can be used like a\n * watch which only triggers if there was an actual value change (in\n * contrast to normal watches, which execute with each update,\n * regardless of value change).\n *\n * Related, the actual value change predicate can be customized. If not\n * given, the default `@thi.ng/equiv` will be used.\n *\n * ```\n * a = new Atom({a: {b: 1}});\n * v = a.addView(\"a.b\", (x) => x * 10);\n *\n * v.deref()\n * // 10\n *\n * // update atom state\n * a.swap((state) => setIn(state, \"a.b\", 2));\n * // {a: {b: 2}}\n *\n * v.changed()\n * // true\n * v.deref()\n * // 20\n *\n * v.release()\n * // remove view from parent state\n * ```\n */\nexport class View {\n    constructor(parent, path, tx, lazy = true, equiv = _equiv) {\n        this.parent = parent;\n        this.id = `view-${nextID()}`;\n        this.tx = tx || ((x) => x);\n        this.path = toPath(path);\n        this.isDirty = true;\n        this.isLazy = lazy;\n        const lookup = getter(this.path);\n        const state = this.parent.deref();\n        this.unprocessed = state ? lookup(state) : undefined;\n        if (!lazy) {\n            this.state = this.tx(this.unprocessed);\n            this.unprocessed = undefined;\n        }\n        parent.addWatch(this.id, (_, prev, curr) => {\n            const pval = prev ? lookup(prev) : prev;\n            const val = curr ? lookup(curr) : curr;\n            if (!equiv(val, pval)) {\n                if (lazy) {\n                    this.unprocessed = val;\n                }\n                else {\n                    this.state = this.tx(val);\n                }\n                this.isDirty = true;\n            }\n        });\n    }\n    get value() {\n        return this.deref();\n    }\n    /**\n     * Returns view's value. If the view has a transformer, the\n     * transformed value is returned. The transformer is only run once\n     * per value change. See class comments about difference between\n     * lazy/eager behaviors.\n     */\n    deref() {\n        if (this.isDirty) {\n            if (this.isLazy) {\n                this.state = this.tx(this.unprocessed);\n                this.unprocessed = undefined;\n            }\n            this.isDirty = false;\n        }\n        return this.state;\n    }\n    /**\n     * Returns true, if the view's value has changed since last\n     * `deref()`.\n     */\n    changed() {\n        return this.isDirty;\n    }\n    /**\n     * Like `deref()`, but doesn't update view's cached state and dirty\n     * flag if value has changed. If there's an unprocessed value\n     * change, returns result of this sub's transformer or else the\n     * cached value.\n     *\n     * **Important:** Use this function only if the view has none or or\n     * a stateless transformer. Else might cause undefined/inconsistent\n     * behavior when calling `view()` or `deref()` subsequently.\n     */\n    view() {\n        return this.isDirty && this.isLazy\n            ? this.tx(this.unprocessed)\n            : this.state;\n    }\n    /**\n     * Disconnects this view from parent state, marks itself\n     * dirty/changed and sets its unprocessed raw value to `undefined`.\n     */\n    release() {\n        this.unprocessed = undefined;\n        if (!this.isLazy) {\n            this.state = this.tx(undefined);\n        }\n        this.isDirty = true;\n        return this.parent.removeWatch(this.id);\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { IWatchMixin } from \"@thi.ng/api\";\nimport { illegalState } from \"@thi.ng/errors\";\nimport { setIn, updateIn } from \"@thi.ng/paths\";\nimport { View } from \"./view\";\n/**\n * Mutable wrapper for an (usually) immutable value. Support for\n * watches.\n */\nlet Atom = class Atom {\n    constructor(val, valid) {\n        if (valid && !valid(val)) {\n            illegalState(\"initial state value did not validate\");\n        }\n        this._value = val;\n        this.valid = valid;\n    }\n    get value() {\n        return this._value;\n    }\n    set value(val) {\n        this.reset(val);\n    }\n    deref() {\n        return this._value;\n    }\n    equiv(o) {\n        return this === o;\n    }\n    reset(val) {\n        const old = this._value;\n        if (this.valid && !this.valid(val)) {\n            return old;\n        }\n        this._value = val;\n        this.notifyWatches(old, val);\n        return val;\n    }\n    resetIn(path, val) {\n        return this.reset(setIn(this._value, path, val));\n    }\n    swap(fn, ...args) {\n        return this.reset(fn.apply(null, [this._value, ...args]));\n    }\n    swapIn(path, fn, ...args) {\n        return this.reset(updateIn(this._value, path, fn, ...args));\n    }\n    // mixin stub\n    /* istanbul ignore next */\n    addWatch(_, __) {\n        return false;\n    }\n    // mixin stub\n    /* istanbul ignore next */\n    removeWatch(_) {\n        return false;\n    }\n    // mixin stub\n    /* istanbul ignore next */\n    notifyWatches(_, __) { }\n    addView(path, tx, lazy = true) {\n        return new View(this, path, tx, lazy);\n    }\n    release() {\n        delete this._watches;\n        delete this._value;\n        return true;\n    }\n};\nAtom = __decorate([\n    IWatchMixin\n], Atom);\nexport { Atom };\n","import { isArray, isFunction } from \"@thi.ng/checks\";\nimport { illegalArgs, illegalArity } from \"@thi.ng/errors\";\nimport { getter, setter } from \"@thi.ng/paths\";\nimport { Atom } from \"./atom\";\nimport { nextID } from \"./idgen\";\nimport { View } from \"./view\";\n/**\n * A cursor provides read/write access to a path location within a\n * nested parent state (Atom or another Cursor). Cursors behave like\n * Atoms for all practical purposes, i.e. support `deref()`, `reset()`,\n * `swap()`, `addWatch()` etc. However, when updating a cursor's value,\n * the parent state will be updated at the cursor's path as well (incl.\n * triggering any watches and/or validators) attached to the parent.\n * Likewise, when the parent state is modified externally, the cursor's\n * value will automatically update as well. The update order of cursor's\n * sharing a common parent is undefined, but can be overridden by\n * extending this class with a custom `notifyWatches()` implementation.\n *\n * If creating multiple cursors w/ a shared parent and each cursor\n * configured with a custom ID (provided via config object to ctor),\n * it's the user's responsibility to ensure the given IDs are unique.\n * Cursors are implemented by attaching a watch to the parent and the ID\n * is used to identify each watch.\n *\n * When using the optional validator predicate (also specified via\n * config object to ctor), the cursor's validator MUST NOT conflict with\n * the one assigned to the parent or else both will go out-of-sync.\n * Therefore, when requiring validation and updating values via cursors\n * it's recommended to only specify validators for leaf-level cursors in\n * the hierarchy.\n */\nexport class Cursor {\n    constructor(...args) {\n        let parent;\n        let lookup;\n        let update;\n        let validate;\n        let opts;\n        let id;\n        switch (args.length) {\n            case 1:\n                opts = args[0];\n                id = opts.id;\n                parent = opts.parent;\n                validate = opts.validate;\n                if (opts.path) {\n                    if (isArray(opts.path) && isFunction(opts.path[0])) {\n                        [lookup, update] = opts.path;\n                    }\n                    else {\n                        lookup = getter(opts.path);\n                        update = setter(opts.path);\n                    }\n                }\n                else {\n                    illegalArgs(\"missing path config\");\n                }\n                break;\n            case 2:\n                parent = args[0];\n                lookup = getter(args[1]);\n                update = setter(args[1]);\n                break;\n            case 3:\n                [parent, lookup, update] = args;\n                break;\n            default:\n                illegalArity(args.length);\n        }\n        this.parent = parent;\n        this.id = id || `cursor-${nextID()}`;\n        this.selfUpdate = false;\n        if (!lookup || !update) {\n            illegalArgs();\n        }\n        this.local = new Atom(lookup(parent.deref()), validate);\n        this.local.addWatch(this.id, (_, prev, curr) => {\n            if (prev !== curr) {\n                this.selfUpdate = true;\n                parent.swap((state) => update(state, curr));\n                this.selfUpdate = false;\n            }\n        });\n        parent.addWatch(this.id, (_, prev, curr) => {\n            if (!this.selfUpdate) {\n                const cval = lookup(curr);\n                if (cval !== lookup(prev)) {\n                    this.local.reset(cval);\n                }\n            }\n        });\n    }\n    get value() {\n        return this.deref();\n    }\n    set value(val) {\n        this.reset(val);\n    }\n    deref() {\n        return this.local.deref();\n    }\n    release() {\n        this.local.release();\n        this.parent.removeWatch(this.id);\n        delete this.local;\n        delete this.parent;\n        return true;\n    }\n    reset(val) {\n        return this.local.reset(val);\n    }\n    resetIn(path, val) {\n        return this.local.resetIn(path, val);\n    }\n    swap(fn, ...args) {\n        return this.local.swap(fn, ...args);\n    }\n    swapIn(path, fn, ...args) {\n        return this.local.swapIn(path, fn, ...args);\n    }\n    addWatch(id, fn) {\n        return this.local.addWatch(id, fn);\n    }\n    removeWatch(id) {\n        return this.local.removeWatch(id);\n    }\n    /* istanbul ignore next */\n    notifyWatches(oldState, newState) {\n        return this.local.notifyWatches(oldState, newState);\n    }\n    addView(path, tx, lazy = true) {\n        return new View(this, path, tx, lazy);\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar History_1;\nimport { INotifyMixin } from \"@thi.ng/api\";\nimport { equiv } from \"@thi.ng/equiv\";\nimport { getIn, setIn, updateIn } from \"@thi.ng/paths\";\nimport { View } from \"./view\";\n/**\n * Undo/redo history stack wrapper for atoms and cursors. Implements\n * `IAtom` interface and so can be used directly in place and delegates\n * to wrapped atom/cursor. Value changes are only recorded in history if\n * `changed` predicate returns truthy value, or else by calling\n * `record()` directly. This class too implements the @thi.ng/api\n * `INotify` interface to support event listeners for `undo()`, `redo()`\n * and `record()`.\n */\nlet History = History_1 = class History {\n    /**\n     * @param state parent state\n     * @param maxLen max size of undo stack\n     * @param changed predicate to determine changed values (default `!equiv(a,b)`)\n     */\n    constructor(state, maxLen = 100, changed) {\n        this.state = state;\n        this.maxLen = maxLen;\n        this.changed = changed || ((a, b) => !equiv(a, b));\n        this.clear();\n    }\n    get value() {\n        return this.deref();\n    }\n    set value(val) {\n        this.reset(val);\n    }\n    canUndo() {\n        return this.history.length > 0;\n    }\n    canRedo() {\n        return this.future.length > 0;\n    }\n    /**\n     * Clears history & future stacks\n     */\n    clear() {\n        this.history = [];\n        this.future = [];\n    }\n    /**\n     * Attempts to re-apply most recent historical value to atom and\n     * returns it if successful (i.e. there's a history). Before the\n     * switch, first records the atom's current value into the future\n     * stack (to enable `redo()` feature). Returns `undefined` if\n     * there's no history.\n     *\n     * If undo was possible, the `History.EVENT_UNDO` event is emitted\n     * after the restoration with both the `prev` and `curr` (restored)\n     * states provided as event value (and object with these two keys).\n     * This allows for additional state handling to be executed, e.g.\n     * application of the \"Command pattern\". See `addListener()` for\n     * registering event listeners.\n     */\n    undo() {\n        if (this.history.length) {\n            const prev = this.state.deref();\n            this.future.push(prev);\n            const curr = this.state.reset(this.history.pop());\n            this.notify({ id: History_1.EVENT_UNDO, value: { prev, curr } });\n            return curr;\n        }\n    }\n    /**\n     * Attempts to re-apply most recent value from future stack to atom\n     * and returns it if successful (i.e. there's a future). Before the\n     * switch, first records the atom's current value into the history\n     * stack (to enable `undo()` feature). Returns `undefined` if\n     * there's no future (so sad!).\n     *\n     * If redo was possible, the `History.EVENT_REDO` event is emitted\n     * after the restoration with both the `prev` and `curr` (restored)\n     * states provided as event value (and object with these two keys).\n     * This allows for additional state handling to be executed, e.g.\n     * application of the \"Command pattern\". See `addListener()` for\n     * registering event listeners.\n     */\n    redo() {\n        if (this.future.length) {\n            const prev = this.state.deref();\n            this.history.push(prev);\n            const curr = this.state.reset(this.future.pop());\n            this.notify({ id: History_1.EVENT_REDO, value: { prev, curr } });\n            return curr;\n        }\n    }\n    /**\n     * `IAtom.reset()` implementation. Delegates to wrapped atom/cursor,\n     * but too applies `changed` predicate to determine if there was a\n     * change and if the previous value should be recorded.\n     *\n     * @param val\n     */\n    reset(val) {\n        const prev = this.state.deref();\n        this.state.reset(val);\n        const changed = this.changed(prev, this.state.deref());\n        if (changed) {\n            this.record(prev);\n        }\n        return val;\n    }\n    resetIn(path, val) {\n        const prev = this.state.deref();\n        const prevV = getIn(prev, path);\n        const curr = setIn(prev, path, val);\n        this.state.reset(curr);\n        this.changed(prevV, getIn(curr, path)) && this.record(prev);\n        return curr;\n    }\n    /**\n     * `IAtom.swap()` implementation. Delegates to wrapped atom/cursor,\n     * but too applies `changed` predicate to determine if there was a\n     * change and if the previous value should be recorded.\n     *\n     * @param val\n     */\n    swap(fn, ...args) {\n        return this.reset(fn(this.state.deref(), ...args));\n    }\n    swapIn(path, fn, ...args) {\n        const prev = this.state.deref();\n        const prevV = getIn(prev, path);\n        const curr = updateIn(this.state.deref(), path, fn, ...args);\n        this.state.reset(curr);\n        this.changed(prevV, getIn(curr, path)) && this.record(prev);\n        return curr;\n    }\n    /**\n     * Records given state in history. This method is only needed when\n     * manually managing snapshots, i.e. when applying multiple swaps on\n     * the wrapped atom directly, but not wanting to create an history\n     * entry for each change. **DO NOT call this explicitly if using\n     * `History.reset()` / `History.swap()` etc.**\n     *\n     * If no `state` is given, uses the wrapped atom's current state\n     * value (user code SHOULD always call without arg).\n     *\n     * If recording succeeded, the `History.EVENT_RECORD` event is\n     * emitted with the recorded state provided as event value.\n     *\n     * @param state\n     */\n    record(state) {\n        const history = this.history;\n        const n = history.length;\n        let ok = true;\n        // check for arg given and not if `state == null` we want to\n        // allow null/undefined as possible values\n        if (!arguments.length) {\n            state = this.state.deref();\n            ok = !n || this.changed(history[n - 1], state);\n        }\n        if (ok) {\n            if (n >= this.maxLen) {\n                history.shift();\n            }\n            history.push(state);\n            this.notify({ id: History_1.EVENT_RECORD, value: state });\n            this.future.length = 0;\n        }\n    }\n    /**\n     * Returns wrapped atom's **current** value.\n     */\n    deref() {\n        return this.state.deref();\n    }\n    /**\n     * `IWatch.addWatch()` implementation. Delegates to wrapped\n     * atom/cursor.\n     *\n     * @param id\n     * @param fn\n     */\n    addWatch(id, fn) {\n        return this.state.addWatch(id, fn);\n    }\n    /**\n     * `IWatch.removeWatch()` implementation. Delegates to wrapped\n     * atom/cursor.\n     *\n     * @param id\n     */\n    removeWatch(id) {\n        return this.state.removeWatch(id);\n    }\n    /**\n     * `IWatch.notifyWatches()` implementation. Delegates to wrapped\n     * atom/cursor.\n     *\n     * @param oldState\n     * @param newState\n     */\n    notifyWatches(oldState, newState) {\n        return this.state.notifyWatches(oldState, newState);\n    }\n    addView(path, tx, lazy = true) {\n        return new View(this, path, tx, lazy);\n    }\n    release() {\n        this.state.release();\n        delete this.state;\n        return true;\n    }\n    addListener(_, __, ___) {\n        return false;\n    }\n    removeListener(_, __, ___) {\n        return false;\n    }\n    notify(_) { }\n};\nHistory.EVENT_UNDO = \"undo\";\nHistory.EVENT_REDO = \"redo\";\nHistory.EVENT_RECORD = \"record\";\nHistory = History_1 = __decorate([\n    INotifyMixin\n], History);\nexport { History };\n","import { assert } from \"@thi.ng/api\";\nimport { setIn, updateIn } from \"@thi.ng/paths\";\nimport { nextID } from \"./idgen\";\nimport { View } from \"./view\";\nexport class Transacted {\n    constructor(parent) {\n        this.parent = parent;\n        this.current = undefined;\n        this.isActive = false;\n        this.id = `tx${nextID()}-`;\n    }\n    get value() {\n        return this.deref();\n    }\n    set value(val) {\n        this.reset(val);\n    }\n    get isTransaction() {\n        return this.isActive;\n    }\n    deref() {\n        return this.isActive ? this.current : this.parent.deref();\n    }\n    equiv(o) {\n        return this === o;\n    }\n    reset(val) {\n        this.ensureTx();\n        this.current = val;\n        return val;\n    }\n    resetIn(path, val) {\n        this.ensureTx();\n        return this.reset(setIn(this.current, path, val));\n    }\n    swap(fn, ...args) {\n        this.ensureTx();\n        return this.reset(fn.apply(null, [this.current, ...args]));\n    }\n    swapIn(path, fn, ...args) {\n        this.ensureTx();\n        return this.reset(updateIn(this.current, path, fn, ...args));\n    }\n    begin() {\n        assert(!this.isActive, \"transaction already started\");\n        this.current = this.parent.deref();\n        this.isActive = true;\n    }\n    commit() {\n        this.ensureTx();\n        const val = this.current;\n        this.parent.reset(this.current);\n        this.isActive = false;\n        this.current = undefined;\n        return val;\n    }\n    cancel() {\n        this.ensureTx();\n        this.isActive = false;\n        this.current = undefined;\n    }\n    addWatch(id, watch) {\n        return this.parent.addWatch(this.id + id, (_, prev, curr) => watch(id, prev, curr));\n    }\n    removeWatch(id) {\n        return this.parent.removeWatch(this.id + id);\n    }\n    notifyWatches(old, curr) {\n        this.parent.notifyWatches(old, curr);\n    }\n    addView(path, tx, lazy = true) {\n        return new View(this, path, tx, lazy);\n    }\n    release() {\n        delete this.parent;\n        delete this.current;\n        delete this.isActive;\n        delete this._watches;\n        return true;\n    }\n    ensureTx() {\n        assert(this.isActive, \"no active transaction\");\n    }\n}\n","export * from \"./atom\";\nexport * from \"./cursor\";\nexport * from \"./history\";\nexport * from \"./transacted\";\nexport * from \"./view\";\n","import { View } from \"@thi.ng/atom\";\nimport { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Similar to {@link fromAtom}, but creates an eager derived view for a\n * nested value in atom / cursor and yields stream of its value changes.\n *\n * @remarks\n * Views are readonly and more lightweight versions of\n * {@link @thi.ng/atom#Cursor | cursors}. The view checks for value\n * changes with given `equiv` predicate ({@link @thi.ng/equiv#equiv} by\n * default). If the predicate returns a falsy result, the new value is\n * emitted on the stream. The first value emitted is always the\n * (possibly transformed) current value at the stream's start time (i.e.\n * when the first subscriber attaches).\n *\n * If the `tx` option is given, the raw value is first passed to this\n * transformer function and its result emitted on the stream instead.\n *\n * When the stream is cancelled the view is destroyed as well.\n *\n * @example\n * ```ts\n * db = new Atom({ a: 1, b: { c: 2 }});\n *\n * fromView(\n *   db,\n *   {\n *     path: \"b.c\",\n *     tx: (x) => x != null ? x : \"n/a\"\n * }).subscribe(trace(\"view:\"))\n * // view: 2\n *\n * db.swapIn(\"b.c\", (x: number) => x + 1);\n * // view: 3\n *\n * db.reset({ a: 10 });\n * // view: n/a\n * ```\n *\n * @param atom\n * @param opts\n */\nexport const fromView = (atom, opts) => {\n    opts = optsWithID(\"view\", opts);\n    return new Stream((stream) => {\n        let isActive = true;\n        const tx = opts.tx;\n        const view = new View(atom, opts.path, tx\n            ? (x) => isActive && ((x = tx(x)), stream.next(x), x)\n            : (x) => isActive && (stream.next(x), x), false, opts.equiv);\n        return () => {\n            isActive = false;\n            view.release();\n        };\n    });\n};\n","import { LOGGER } from \"../api\";\nimport { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\nimport { makeWorker } from \"../utils/worker\";\n/**\n * Returns a {@link Stream} which adds `message` and `error` event\n * listeners to given `worker` and then emits received values.\n *\n * @remarks\n * If `terminate` is true (default), the worker will be terminated when\n * the stream is being closed (either directly or indirectly, i.e. if\n * the user called {@link ISubscriber.done} on the stream or the last\n * child subscription has unsubscribed, depending on\n * {@link CommonOpts | config options}).\n *\n * As with {@link postWorker}, the `worker` can be an existing `Worker`\n * instance, a JS source code `Blob` or an URL string. In the latter two\n * cases, a worker is created automatically.\n *\n * @example\n * ```ts\n *\n * ```\n *\n * @param worker\n * @param opts\n */\nexport const fromWorker = (worker, opts) => {\n    const _worker = makeWorker(worker);\n    opts = optsWithID(\"worker\", opts);\n    return new Stream((stream) => {\n        const ml = (e) => {\n            stream.next(e.data);\n        };\n        const el = (e) => {\n            stream.error(e.data);\n        };\n        _worker.addEventListener(\"message\", ml);\n        _worker.addEventListener(\"error\", el);\n        return () => {\n            _worker.removeEventListener(\"message\", ml);\n            _worker.removeEventListener(\"error\", el);\n            if (opts.terminate !== false) {\n                LOGGER.info(\"terminating worker\", _worker);\n                _worker.terminate();\n            }\n        };\n    }, opts);\n};\n","import { PubSub } from \"../pubsub\";\n/**\n * Returns a {@link PubSub} using given predicate `pred` as boolean\n * {@link PubSubOpts.topic | topic function} and `truthy` & `falsey` as\n * subscribers for their respective values.\n *\n * @remarks\n * If `a` or `b` need to be subscribed to directly, then `a` / `b` MUST\n * be first created as `Subscription` (if not already) and a reference\n * kept prior to calling `bisect()`.\n *\n * @example\n * ```ts\n * fromIterable([1, 2, 3, 4]).subscribe(\n *   bisect(\n *     (x) => !!(x & 1),\n *     trace(\"odd\"),\n *     trace(\"even\")\n *   )\n * );\n * // odd 1\n * // even 2\n * // odd 3\n * // even 4\n * // odd done\n * // even done\n * ```\n *\n * @example\n * ```ts\n * const odd = subscription();\n * const even = subscription();\n * odd.subscribe(trace(\"odd\"));\n * odd.subscribe(trace(\"odd x10\"), map((x) => x * 10));\n * even.subscribe(trace(\"even\"));\n *\n * fromIterable([1, 2, 3, 4]).subscribe(\n *     bisect((x) => !!(x & 1), odd, even)\n * );\n * ```\n *\n * @param pred predicate function\n * @param truthy subscription for truthy branch\n * @param falsy subscription for falsy branch\n */\nexport const bisect = (pred, truthy, falsy) => {\n    const sub = new PubSub({ topic: pred });\n    truthy && sub.subscribeTopic(true, truthy);\n    falsy && sub.subscribeTopic(false, falsy);\n    return sub;\n};\n","import { isTransferable } from \"@thi.ng/checks\";\nimport { isTypedArray } from \"@thi.ng/checks\";\nimport { LOGGER } from \"../api\";\nimport { makeWorker } from \"../utils/worker\";\n/**\n * Creates a {@link ISubscriber | subscriber} which forwards received\n * values to given worker.\n *\n * @remarks\n * The `worker` can be an existing `Worker` instance, a JS source code\n * `Blob` or an URL string. In the latter two cases, a worker is created\n * automatically. If `transfer` is true, the received values will be\n * marked as *transferrable* and the host app loses all access\n * permissions to these marked values. See `Worker.postMessage()` for\n * details.\n *\n * If `terminate` is set to a positive number, then the worker will be\n * automatically terminated after the stated number of milliseconds\n * since the parent subscription is {@link ISubscriber.done}.\n *\n * @example\n * ```ts\n * // worker source code\n * src = `self.onmessage = (e) => console.log(\"worker\", e.data);`;\n *\n * a = stream();\n * a.subscribe(\n *   postWorker(src, { type: \"application/javascript\" }))\n * );\n *\n * a.next(42)\n * // worker 42\n * ```\n *\n * @param worker\n * @param transfer\n * @param terminate worker termination delay (ms)\n */\nexport const postWorker = (worker, transfer = false, terminate = 0) => {\n    const _worker = makeWorker(worker);\n    return {\n        next(x) {\n            if (x instanceof Promise) {\n                x.then((y) => this.next(y));\n                return;\n            }\n            let tx;\n            if (transfer) {\n                const ta = isTypedArray(x);\n                if (ta || isTransferable(x)) {\n                    tx = [ta ? x.buffer : x];\n                }\n            }\n            _worker.postMessage(x, tx || []);\n        },\n        done() {\n            if (terminate > 0) {\n                setTimeout(() => {\n                    LOGGER.info(\"terminating worker...\");\n                    _worker.terminate();\n                }, terminate);\n            }\n        }\n    };\n};\n","import { LOGGER } from \"../api\";\nimport { Subscription } from \"../subscription\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Creates a {@link Subscription} which receives promises, buffers them\n * and then passes their resolved values downstream.\n *\n * @remarks\n * If the optional `fail` handler is provided, it'll be called with the\n * error of each failed promise. If none is provided, the sub's\n * {@link ISubscriber.error} handler is called, which then stops the sub\n * from receiving further values.\n *\n * @example\n * ```ts\n * fromIterable([1, 2, 3], 100)\n *   .transform(tx.delayed(1000))\n *   .subscribe(resolve())\n *   .subscribe(trace(\"result\"))\n * // result 1\n * // result 2\n * // result 3\n * // result done\n * ```\n *\n * @param opts\n */\nexport const resolve = (opts) => new Resolver(opts);\nexport class Resolver extends Subscription {\n    constructor(opts = {}) {\n        super(undefined, optsWithID(\"resolve\"));\n        this.outstanding = 0;\n        this.fail = opts.fail;\n    }\n    next(x) {\n        this.outstanding++;\n        x.then((y) => {\n            if (this.state < 2 /* DONE */) {\n                this.dispatch(y);\n                if (--this.outstanding === 0) {\n                    this.done();\n                }\n            }\n            else {\n                LOGGER.warn(`resolved value in state ${this.state} (${x})`);\n            }\n        }, (e) => {\n            if (this.fail) {\n                this.fail(e);\n            }\n            else {\n                this.error(e);\n            }\n        });\n    }\n    done() {\n        if (this.parent.getState() === 2 /* DONE */ && this.outstanding === 0) {\n            super.done();\n        }\n    }\n}\n","import { Subscription } from \"../subscription\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Returns a {@link Subscription} which buffers values from `src` until\n * side chain fires, then emits buffer (unless empty) and repeats\n * process until either input is done.\n *\n * @remarks\n * By default, the values read from the side chain are ignored (i.e.\n * only their timing is used), however the `pred`icate option can be\n * used to only trigger for specific values / conditions.\n *\n * @example\n * ```t\n * // merge various event streams\n * events = merge([\n *     fromEvent(document,\"mousemove\"),\n *     fromEvent(document,\"mousedown\"),\n *     fromEvent(document,\"mouseup\")\n * ]);\n *\n * // queue event processing to only execute during the\n * // requestAnimationFrame cycle (RAF)\n * events.subscribe(sidechainPartition(fromRAF())).subscribe(trace())\n * ```\n *\n * @param side\n * @param opts\n */\nexport const sidechainPartition = (side, opts) => new SidechainPartition(side, opts);\nexport class SidechainPartition extends Subscription {\n    constructor(side, opts) {\n        opts = optsWithID(\"sidepart\", opts);\n        super(undefined, opts);\n        this.buf = [];\n        const pred = opts.pred || (() => true);\n        const $this = this;\n        this.sideSub = side.subscribe({\n            next(x) {\n                if ($this.buf.length && pred(x)) {\n                    $this.dispatch($this.buf);\n                    $this.buf = [];\n                }\n            },\n            done() {\n                if ($this.buf.length) {\n                    $this.dispatch($this.buf);\n                }\n                $this.done();\n                delete $this.buf;\n            }\n        });\n    }\n    unsubscribe(sub) {\n        const res = super.unsubscribe(sub);\n        if (!sub || !this.subs.length) {\n            this.sideSub.unsubscribe();\n        }\n        return res;\n    }\n    next(x) {\n        if (this.state < 2 /* DONE */) {\n            this.buf.push(x);\n        }\n    }\n    done() {\n        this.sideSub.unsubscribe();\n        super.done();\n    }\n}\n","import { Subscription } from \"../subscription\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Returns {@link Subscription} which filters values from input based on\n * values received from side chain.\n *\n * @remarks\n * By default, the value read from the side chain is ignored (i.e. only\n * their timing is used), however the `pred`icate option can be used to\n * only trigger for specific values/conditions. Every time the predicate\n * fn returns true, the filter will be toggled on/off. Whilst switched\n * off, no input values will be forwarded.\n *\n * @example\n * ```ts\n * // use slower interval stream to toggle main stream on/off\n * fromInterval(500)\n *   .subscribe(sidechainToggle(fromInterval(1000)))\n *   .subscribe(trace());\n * // 0\n * // 3\n * // 4\n * // 7\n * // 8\n * ...\n * ```\n *\n * @param side\n * @param opts\n */\nexport const sidechainToggle = (side, opts) => new SidechainToggle(side, opts);\nexport class SidechainToggle extends Subscription {\n    constructor(side, opts) {\n        opts = optsWithID(\"sidetoggle\", opts);\n        super(undefined, opts);\n        this.isActive = !!opts.initial;\n        const pred = opts.pred || (() => true);\n        const $this = this;\n        this.sideSub = side.subscribe({\n            next(x) {\n                if (pred(x)) {\n                    $this.isActive = !$this.isActive;\n                }\n            },\n            done() {\n                $this.done();\n            }\n        });\n    }\n    unsubscribe(sub) {\n        const res = super.unsubscribe(sub);\n        if (!sub || !this.subs.length) {\n            this.sideSub.unsubscribe();\n        }\n        return res;\n    }\n    next(x) {\n        if (this.isActive) {\n            super.next(x);\n        }\n    }\n    done() {\n        super.done();\n        this.sideSub.unsubscribe();\n    }\n}\n","import { Subscription } from \"../subscription\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Returns a {@link Subscription} that calls the\n * {@link ISubscriber.error} handlers of all child subscriptions with an\n * arbitrary error object after a given time.\n *\n * @remarks\n * If no `error` is given, uses a new `Error` instance by default. If\n * `resetTimeout` is false (default), the error is emitted regardless of\n * any received values in the meantime. However, if `true`, the timeout\n * resets with each received value and then only triggers once the time\n * interval since the last value has exceeded.\n *\n * @param timeoutMs timeout period in milliseconds\n * @param opts\n */\nexport const timeout = (timeoutMs, opts) => new Timeout(timeoutMs, opts);\nclass Timeout extends Subscription {\n    constructor(timeoutMs, opts) {\n        opts = optsWithID(\"timeout\", opts);\n        super(undefined, opts);\n        this.timeoutMs = timeoutMs;\n        this.errorObj = opts.error;\n        this.resetTimeout = opts.reset === true;\n        this.reset();\n    }\n    next(x) {\n        if (this.resetTimeout) {\n            clearTimeout(this.timeoutId);\n            this.reset();\n        }\n        super.next(x);\n    }\n    reset() {\n        this.timeoutId = setTimeout(() => {\n            if (this.state < 2 /* DONE */) {\n                this.error(this.errorObj ||\n                    new Error(`Timeout stream \"${this.id}\" after ${this.timeoutMs} ms`));\n            }\n        }, this.timeoutMs);\n    }\n    cleanup() {\n        clearTimeout(this.timeoutId);\n        super.cleanup();\n    }\n}\n","/**\n * Helper {@link ISubscriber} for inspection / debugging purposes.\n * Simply logs received values to console, optionally with given\n * `prefix`.\n *\n * @param prefix\n */\nexport const trace = (prefix) => ({\n    next(x) {\n        prefix ? console.log(prefix, x) : console.log(x);\n    },\n    done() {\n        prefix ? console.log(prefix, \"done\") : console.log(\"done\");\n    },\n    error(e) {\n        prefix ? console.log(prefix, \"error\", e) : console.log(\"error\", e);\n    }\n});\n","import { isReduced } from \"@thi.ng/transducers\";\n/**\n * Returns a promise which subscribes to given input and transforms\n * incoming values using given transducer `xform` and reducer `rfn`.\n *\n * @remarks\n * Once the input or the reducer is done, the promise will resolve with\n * the final reduced result (or fail with error).\n *\n * @example\n * ```ts\n * transduce(\n *   fromIterable(tx.range(10)),\n *   tx.map((x) => x * 10),\n *   tx.add()\n * ).then((x) => console.log(\"result\", x))\n *\n * // result 450\n * ```\n *\n * @param src\n * @param xform\n * @param rfn\n * @param init\n */\nexport const transduce = (src, xform, rfn, init) => {\n    let acc = init !== undefined ? init : rfn[0]();\n    let sub;\n    return new Promise((resolve, reject) => {\n        sub = src.subscribe({\n            next(x) {\n                const _acc = rfn[2](acc, x);\n                if (isReduced(_acc)) {\n                    resolve(_acc.deref());\n                }\n                else {\n                    acc = _acc;\n                }\n            },\n            done() {\n                resolve(acc);\n            },\n            error(e) {\n                reject(e);\n            }\n        }, xform);\n    }).then((fulfilled) => {\n        sub.unsubscribe();\n        return fulfilled;\n    }, (rejected) => {\n        sub.unsubscribe();\n        throw rejected;\n    });\n};\n","export * from \"./api\";\nexport * from \"./forkjoin\";\nexport * from \"./metastream\";\nexport * from \"./pubsub\";\nexport * from \"./stream\";\nexport * from \"./stream-merge\";\nexport * from \"./stream-sync\";\nexport * from \"./subscription\";\nexport * from \"./trigger\";\nexport * from \"./tween\";\nexport * from \"./from/atom\";\nexport * from \"./from/event\";\nexport * from \"./from/interval\";\nexport * from \"./from/iterable\";\nexport * from \"./from/promise\";\nexport * from \"./from/promises\";\nexport * from \"./from/raf\";\nexport * from \"./from/view\";\nexport * from \"./from/worker\";\nexport * from \"./subs/bisect\";\nexport * from \"./subs/post-worker\";\nexport * from \"./subs/resolve\";\nexport * from \"./subs/sidechain-partition\";\nexport * from \"./subs/sidechain-toggle\";\nexport * from \"./subs/timeout\";\nexport * from \"./subs/trace\";\nexport * from \"./subs/transduce\";\nexport * from \"./subs/tunnel\";\nexport * from \"./utils/idgen\";\nexport * from \"./utils/worker\";\n","/**\n * @typedef {object} PrivateData\n * @property {EventTarget} eventTarget The event target.\n * @property {{type:string}} event The original event object.\n * @property {number} eventPhase The current event phase.\n * @property {EventTarget|null} currentTarget The current event target.\n * @property {boolean} canceled The flag to prevent default.\n * @property {boolean} stopped The flag to stop propagation.\n * @property {boolean} immediateStopped The flag to stop propagation immediately.\n * @property {Function|null} passiveListener The listener if the current listener is passive. Otherwise this is null.\n * @property {number} timeStamp The unix time.\n * @private\n */\n\n/**\n * Private data for event wrappers.\n * @type {WeakMap<Event, PrivateData>}\n * @private\n */\nconst privateData = new WeakMap()\n\n/**\n * Cache for wrapper classes.\n * @type {WeakMap<Object, Function>}\n * @private\n */\nconst wrappers = new WeakMap()\n\n/**\n * Get private data.\n * @param {Event} event The event object to get private data.\n * @returns {PrivateData} The private data of the event.\n * @private\n */\nfunction pd(event) {\n    const retv = privateData.get(event)\n    console.assert(\n        retv != null,\n        \"'this' is expected an Event object, but got\",\n        event\n    )\n    return retv\n}\n\n/**\n * https://dom.spec.whatwg.org/#set-the-canceled-flag\n * @param data {PrivateData} private data.\n */\nfunction setCancelFlag(data) {\n    if (data.passiveListener != null) {\n        if (\n            typeof console !== \"undefined\" &&\n            typeof console.error === \"function\"\n        ) {\n            console.error(\n                \"Unable to preventDefault inside passive event listener invocation.\",\n                data.passiveListener\n            )\n        }\n        return\n    }\n    if (!data.event.cancelable) {\n        return\n    }\n\n    data.canceled = true\n    if (typeof data.event.preventDefault === \"function\") {\n        data.event.preventDefault()\n    }\n}\n\n/**\n * @see https://dom.spec.whatwg.org/#interface-event\n * @private\n */\n/**\n * The event wrapper.\n * @constructor\n * @param {EventTarget} eventTarget The event target of this dispatching.\n * @param {Event|{type:string}} event The original event to wrap.\n */\nfunction Event(eventTarget, event) {\n    privateData.set(this, {\n        eventTarget,\n        event,\n        eventPhase: 2,\n        currentTarget: eventTarget,\n        canceled: false,\n        stopped: false,\n        immediateStopped: false,\n        passiveListener: null,\n        timeStamp: event.timeStamp || Date.now(),\n    })\n\n    // https://heycam.github.io/webidl/#Unforgeable\n    Object.defineProperty(this, \"isTrusted\", { value: false, enumerable: true })\n\n    // Define accessors\n    const keys = Object.keys(event)\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i]\n        if (!(key in this)) {\n            Object.defineProperty(this, key, defineRedirectDescriptor(key))\n        }\n    }\n}\n\n// Should be enumerable, but class methods are not enumerable.\nEvent.prototype = {\n    /**\n     * The type of this event.\n     * @type {string}\n     */\n    get type() {\n        return pd(this).event.type\n    },\n\n    /**\n     * The target of this event.\n     * @type {EventTarget}\n     */\n    get target() {\n        return pd(this).eventTarget\n    },\n\n    /**\n     * The target of this event.\n     * @type {EventTarget}\n     */\n    get currentTarget() {\n        return pd(this).currentTarget\n    },\n\n    /**\n     * @returns {EventTarget[]} The composed path of this event.\n     */\n    composedPath() {\n        const currentTarget = pd(this).currentTarget\n        if (currentTarget == null) {\n            return []\n        }\n        return [currentTarget]\n    },\n\n    /**\n     * Constant of NONE.\n     * @type {number}\n     */\n    get NONE() {\n        return 0\n    },\n\n    /**\n     * Constant of CAPTURING_PHASE.\n     * @type {number}\n     */\n    get CAPTURING_PHASE() {\n        return 1\n    },\n\n    /**\n     * Constant of AT_TARGET.\n     * @type {number}\n     */\n    get AT_TARGET() {\n        return 2\n    },\n\n    /**\n     * Constant of BUBBLING_PHASE.\n     * @type {number}\n     */\n    get BUBBLING_PHASE() {\n        return 3\n    },\n\n    /**\n     * The target of this event.\n     * @type {number}\n     */\n    get eventPhase() {\n        return pd(this).eventPhase\n    },\n\n    /**\n     * Stop event bubbling.\n     * @returns {void}\n     */\n    stopPropagation() {\n        const data = pd(this)\n\n        data.stopped = true\n        if (typeof data.event.stopPropagation === \"function\") {\n            data.event.stopPropagation()\n        }\n    },\n\n    /**\n     * Stop event bubbling.\n     * @returns {void}\n     */\n    stopImmediatePropagation() {\n        const data = pd(this)\n\n        data.stopped = true\n        data.immediateStopped = true\n        if (typeof data.event.stopImmediatePropagation === \"function\") {\n            data.event.stopImmediatePropagation()\n        }\n    },\n\n    /**\n     * The flag to be bubbling.\n     * @type {boolean}\n     */\n    get bubbles() {\n        return Boolean(pd(this).event.bubbles)\n    },\n\n    /**\n     * The flag to be cancelable.\n     * @type {boolean}\n     */\n    get cancelable() {\n        return Boolean(pd(this).event.cancelable)\n    },\n\n    /**\n     * Cancel this event.\n     * @returns {void}\n     */\n    preventDefault() {\n        setCancelFlag(pd(this))\n    },\n\n    /**\n     * The flag to indicate cancellation state.\n     * @type {boolean}\n     */\n    get defaultPrevented() {\n        return pd(this).canceled\n    },\n\n    /**\n     * The flag to be composed.\n     * @type {boolean}\n     */\n    get composed() {\n        return Boolean(pd(this).event.composed)\n    },\n\n    /**\n     * The unix time of this event.\n     * @type {number}\n     */\n    get timeStamp() {\n        return pd(this).timeStamp\n    },\n\n    /**\n     * The target of this event.\n     * @type {EventTarget}\n     * @deprecated\n     */\n    get srcElement() {\n        return pd(this).eventTarget\n    },\n\n    /**\n     * The flag to stop event bubbling.\n     * @type {boolean}\n     * @deprecated\n     */\n    get cancelBubble() {\n        return pd(this).stopped\n    },\n    set cancelBubble(value) {\n        if (!value) {\n            return\n        }\n        const data = pd(this)\n\n        data.stopped = true\n        if (typeof data.event.cancelBubble === \"boolean\") {\n            data.event.cancelBubble = true\n        }\n    },\n\n    /**\n     * The flag to indicate cancellation state.\n     * @type {boolean}\n     * @deprecated\n     */\n    get returnValue() {\n        return !pd(this).canceled\n    },\n    set returnValue(value) {\n        if (!value) {\n            setCancelFlag(pd(this))\n        }\n    },\n\n    /**\n     * Initialize this event object. But do nothing under event dispatching.\n     * @param {string} type The event type.\n     * @param {boolean} [bubbles=false] The flag to be possible to bubble up.\n     * @param {boolean} [cancelable=false] The flag to be possible to cancel.\n     * @deprecated\n     */\n    initEvent() {\n        // Do nothing.\n    },\n}\n\n// `constructor` is not enumerable.\nObject.defineProperty(Event.prototype, \"constructor\", {\n    value: Event,\n    configurable: true,\n    writable: true,\n})\n\n// Ensure `event instanceof window.Event` is `true`.\nif (typeof window !== \"undefined\" && typeof window.Event !== \"undefined\") {\n    Object.setPrototypeOf(Event.prototype, window.Event.prototype)\n\n    // Make association for wrappers.\n    wrappers.set(window.Event.prototype, Event)\n}\n\n/**\n * Get the property descriptor to redirect a given property.\n * @param {string} key Property name to define property descriptor.\n * @returns {PropertyDescriptor} The property descriptor to redirect the property.\n * @private\n */\nfunction defineRedirectDescriptor(key) {\n    return {\n        get() {\n            return pd(this).event[key]\n        },\n        set(value) {\n            pd(this).event[key] = value\n        },\n        configurable: true,\n        enumerable: true,\n    }\n}\n\n/**\n * Get the property descriptor to call a given method property.\n * @param {string} key Property name to define property descriptor.\n * @returns {PropertyDescriptor} The property descriptor to call the method property.\n * @private\n */\nfunction defineCallDescriptor(key) {\n    return {\n        value() {\n            const event = pd(this).event\n            return event[key].apply(event, arguments)\n        },\n        configurable: true,\n        enumerable: true,\n    }\n}\n\n/**\n * Define new wrapper class.\n * @param {Function} BaseEvent The base wrapper class.\n * @param {Object} proto The prototype of the original event.\n * @returns {Function} The defined wrapper class.\n * @private\n */\nfunction defineWrapper(BaseEvent, proto) {\n    const keys = Object.keys(proto)\n    if (keys.length === 0) {\n        return BaseEvent\n    }\n\n    /** CustomEvent */\n    function CustomEvent(eventTarget, event) {\n        BaseEvent.call(this, eventTarget, event)\n    }\n\n    CustomEvent.prototype = Object.create(BaseEvent.prototype, {\n        constructor: { value: CustomEvent, configurable: true, writable: true },\n    })\n\n    // Define accessors.\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i]\n        if (!(key in BaseEvent.prototype)) {\n            const descriptor = Object.getOwnPropertyDescriptor(proto, key)\n            const isFunc = typeof descriptor.value === \"function\"\n            Object.defineProperty(\n                CustomEvent.prototype,\n                key,\n                isFunc\n                    ? defineCallDescriptor(key)\n                    : defineRedirectDescriptor(key)\n            )\n        }\n    }\n\n    return CustomEvent\n}\n\n/**\n * Get the wrapper class of a given prototype.\n * @param {Object} proto The prototype of the original event to get its wrapper.\n * @returns {Function} The wrapper class.\n * @private\n */\nfunction getWrapper(proto) {\n    if (proto == null || proto === Object.prototype) {\n        return Event\n    }\n\n    let wrapper = wrappers.get(proto)\n    if (wrapper == null) {\n        wrapper = defineWrapper(getWrapper(Object.getPrototypeOf(proto)), proto)\n        wrappers.set(proto, wrapper)\n    }\n    return wrapper\n}\n\n/**\n * Wrap a given event to management a dispatching.\n * @param {EventTarget} eventTarget The event target of this dispatching.\n * @param {Object} event The event to wrap.\n * @returns {Event} The wrapper instance.\n * @private\n */\nexport function wrapEvent(eventTarget, event) {\n    const Wrapper = getWrapper(Object.getPrototypeOf(event))\n    return new Wrapper(eventTarget, event)\n}\n\n/**\n * Get the immediateStopped flag of a given event.\n * @param {Event} event The event to get.\n * @returns {boolean} The flag to stop propagation immediately.\n * @private\n */\nexport function isStopped(event) {\n    return pd(event).immediateStopped\n}\n\n/**\n * Set the current event phase of a given event.\n * @param {Event} event The event to set current target.\n * @param {number} eventPhase New event phase.\n * @returns {void}\n * @private\n */\nexport function setEventPhase(event, eventPhase) {\n    pd(event).eventPhase = eventPhase\n}\n\n/**\n * Set the current target of a given event.\n * @param {Event} event The event to set current target.\n * @param {EventTarget|null} currentTarget New current target.\n * @returns {void}\n * @private\n */\nexport function setCurrentTarget(event, currentTarget) {\n    pd(event).currentTarget = currentTarget\n}\n\n/**\n * Set a passive listener of a given event.\n * @param {Event} event The event to set current target.\n * @param {Function|null} passiveListener New passive listener.\n * @returns {void}\n * @private\n */\nexport function setPassiveListener(event, passiveListener) {\n    pd(event).passiveListener = passiveListener\n}\n","import {\n    isStopped,\n    setCurrentTarget,\n    setEventPhase,\n    setPassiveListener,\n    wrapEvent,\n} from \"./event.mjs\"\n\n/**\n * @typedef {object} ListenerNode\n * @property {Function} listener\n * @property {1|2|3} listenerType\n * @property {boolean} passive\n * @property {boolean} once\n * @property {ListenerNode|null} next\n * @private\n */\n\n/**\n * @type {WeakMap<object, Map<string, ListenerNode>>}\n * @private\n */\nconst listenersMap = new WeakMap()\n\n// Listener types\nconst CAPTURE = 1\nconst BUBBLE = 2\nconst ATTRIBUTE = 3\n\n/**\n * Check whether a given value is an object or not.\n * @param {any} x The value to check.\n * @returns {boolean} `true` if the value is an object.\n */\nfunction isObject(x) {\n    return x !== null && typeof x === \"object\" //eslint-disable-line no-restricted-syntax\n}\n\n/**\n * Get listeners.\n * @param {EventTarget} eventTarget The event target to get.\n * @returns {Map<string, ListenerNode>} The listeners.\n * @private\n */\nfunction getListeners(eventTarget) {\n    const listeners = listenersMap.get(eventTarget)\n    if (listeners == null) {\n        throw new TypeError(\n            \"'this' is expected an EventTarget object, but got another value.\"\n        )\n    }\n    return listeners\n}\n\n/**\n * Get the property descriptor for the event attribute of a given event.\n * @param {string} eventName The event name to get property descriptor.\n * @returns {PropertyDescriptor} The property descriptor.\n * @private\n */\nfunction defineEventAttributeDescriptor(eventName) {\n    return {\n        get() {\n            const listeners = getListeners(this)\n            let node = listeners.get(eventName)\n            while (node != null) {\n                if (node.listenerType === ATTRIBUTE) {\n                    return node.listener\n                }\n                node = node.next\n            }\n            return null\n        },\n\n        set(listener) {\n            if (typeof listener !== \"function\" && !isObject(listener)) {\n                listener = null // eslint-disable-line no-param-reassign\n            }\n            const listeners = getListeners(this)\n\n            // Traverse to the tail while removing old value.\n            let prev = null\n            let node = listeners.get(eventName)\n            while (node != null) {\n                if (node.listenerType === ATTRIBUTE) {\n                    // Remove old value.\n                    if (prev !== null) {\n                        prev.next = node.next\n                    } else if (node.next !== null) {\n                        listeners.set(eventName, node.next)\n                    } else {\n                        listeners.delete(eventName)\n                    }\n                } else {\n                    prev = node\n                }\n\n                node = node.next\n            }\n\n            // Add new value.\n            if (listener !== null) {\n                const newNode = {\n                    listener,\n                    listenerType: ATTRIBUTE,\n                    passive: false,\n                    once: false,\n                    next: null,\n                }\n                if (prev === null) {\n                    listeners.set(eventName, newNode)\n                } else {\n                    prev.next = newNode\n                }\n            }\n        },\n        configurable: true,\n        enumerable: true,\n    }\n}\n\n/**\n * Define an event attribute (e.g. `eventTarget.onclick`).\n * @param {Object} eventTargetPrototype The event target prototype to define an event attrbite.\n * @param {string} eventName The event name to define.\n * @returns {void}\n */\nfunction defineEventAttribute(eventTargetPrototype, eventName) {\n    Object.defineProperty(\n        eventTargetPrototype,\n        `on${eventName}`,\n        defineEventAttributeDescriptor(eventName)\n    )\n}\n\n/**\n * Define a custom EventTarget with event attributes.\n * @param {string[]} eventNames Event names for event attributes.\n * @returns {EventTarget} The custom EventTarget.\n * @private\n */\nfunction defineCustomEventTarget(eventNames) {\n    /** CustomEventTarget */\n    function CustomEventTarget() {\n        EventTarget.call(this)\n    }\n\n    CustomEventTarget.prototype = Object.create(EventTarget.prototype, {\n        constructor: {\n            value: CustomEventTarget,\n            configurable: true,\n            writable: true,\n        },\n    })\n\n    for (let i = 0; i < eventNames.length; ++i) {\n        defineEventAttribute(CustomEventTarget.prototype, eventNames[i])\n    }\n\n    return CustomEventTarget\n}\n\n/**\n * EventTarget.\n *\n * - This is constructor if no arguments.\n * - This is a function which returns a CustomEventTarget constructor if there are arguments.\n *\n * For example:\n *\n *     class A extends EventTarget {}\n *     class B extends EventTarget(\"message\") {}\n *     class C extends EventTarget(\"message\", \"error\") {}\n *     class D extends EventTarget([\"message\", \"error\"]) {}\n */\nfunction EventTarget() {\n    /*eslint-disable consistent-return */\n    if (this instanceof EventTarget) {\n        listenersMap.set(this, new Map())\n        return\n    }\n    if (arguments.length === 1 && Array.isArray(arguments[0])) {\n        return defineCustomEventTarget(arguments[0])\n    }\n    if (arguments.length > 0) {\n        const types = new Array(arguments.length)\n        for (let i = 0; i < arguments.length; ++i) {\n            types[i] = arguments[i]\n        }\n        return defineCustomEventTarget(types)\n    }\n    throw new TypeError(\"Cannot call a class as a function\")\n    /*eslint-enable consistent-return */\n}\n\n// Should be enumerable, but class methods are not enumerable.\nEventTarget.prototype = {\n    /**\n     * Add a given listener to this event target.\n     * @param {string} eventName The event name to add.\n     * @param {Function} listener The listener to add.\n     * @param {boolean|{capture?:boolean,passive?:boolean,once?:boolean}} [options] The options for this listener.\n     * @returns {void}\n     */\n    addEventListener(eventName, listener, options) {\n        if (listener == null) {\n            return\n        }\n        if (typeof listener !== \"function\" && !isObject(listener)) {\n            throw new TypeError(\"'listener' should be a function or an object.\")\n        }\n\n        const listeners = getListeners(this)\n        const optionsIsObj = isObject(options)\n        const capture = optionsIsObj\n            ? Boolean(options.capture)\n            : Boolean(options)\n        const listenerType = capture ? CAPTURE : BUBBLE\n        const newNode = {\n            listener,\n            listenerType,\n            passive: optionsIsObj && Boolean(options.passive),\n            once: optionsIsObj && Boolean(options.once),\n            next: null,\n        }\n\n        // Set it as the first node if the first node is null.\n        let node = listeners.get(eventName)\n        if (node === undefined) {\n            listeners.set(eventName, newNode)\n            return\n        }\n\n        // Traverse to the tail while checking duplication..\n        let prev = null\n        while (node != null) {\n            if (\n                node.listener === listener &&\n                node.listenerType === listenerType\n            ) {\n                // Should ignore duplication.\n                return\n            }\n            prev = node\n            node = node.next\n        }\n\n        // Add it.\n        prev.next = newNode\n    },\n\n    /**\n     * Remove a given listener from this event target.\n     * @param {string} eventName The event name to remove.\n     * @param {Function} listener The listener to remove.\n     * @param {boolean|{capture?:boolean,passive?:boolean,once?:boolean}} [options] The options for this listener.\n     * @returns {void}\n     */\n    removeEventListener(eventName, listener, options) {\n        if (listener == null) {\n            return\n        }\n\n        const listeners = getListeners(this)\n        const capture = isObject(options)\n            ? Boolean(options.capture)\n            : Boolean(options)\n        const listenerType = capture ? CAPTURE : BUBBLE\n\n        let prev = null\n        let node = listeners.get(eventName)\n        while (node != null) {\n            if (\n                node.listener === listener &&\n                node.listenerType === listenerType\n            ) {\n                if (prev !== null) {\n                    prev.next = node.next\n                } else if (node.next !== null) {\n                    listeners.set(eventName, node.next)\n                } else {\n                    listeners.delete(eventName)\n                }\n                return\n            }\n\n            prev = node\n            node = node.next\n        }\n    },\n\n    /**\n     * Dispatch a given event.\n     * @param {Event|{type:string}} event The event to dispatch.\n     * @returns {boolean} `false` if canceled.\n     */\n    dispatchEvent(event) {\n        if (event == null || typeof event.type !== \"string\") {\n            throw new TypeError('\"event.type\" should be a string.')\n        }\n\n        // If listeners aren't registered, terminate.\n        const listeners = getListeners(this)\n        const eventName = event.type\n        let node = listeners.get(eventName)\n        if (node == null) {\n            return true\n        }\n\n        // Since we cannot rewrite several properties, so wrap object.\n        const wrappedEvent = wrapEvent(this, event)\n\n        // This doesn't process capturing phase and bubbling phase.\n        // This isn't participating in a tree.\n        let prev = null\n        while (node != null) {\n            // Remove this listener if it's once\n            if (node.once) {\n                if (prev !== null) {\n                    prev.next = node.next\n                } else if (node.next !== null) {\n                    listeners.set(eventName, node.next)\n                } else {\n                    listeners.delete(eventName)\n                }\n            } else {\n                prev = node\n            }\n\n            // Call this listener\n            setPassiveListener(\n                wrappedEvent,\n                node.passive ? node.listener : null\n            )\n            if (typeof node.listener === \"function\") {\n                try {\n                    node.listener.call(this, wrappedEvent)\n                } catch (err) {\n                    if (\n                        typeof console !== \"undefined\" &&\n                        typeof console.error === \"function\"\n                    ) {\n                        console.error(err)\n                    }\n                }\n            } else if (\n                node.listenerType !== ATTRIBUTE &&\n                typeof node.listener.handleEvent === \"function\"\n            ) {\n                node.listener.handleEvent(wrappedEvent)\n            }\n\n            // Break if `event.stopImmediatePropagation` was called.\n            if (isStopped(wrappedEvent)) {\n                break\n            }\n\n            node = node.next\n        }\n        setPassiveListener(wrappedEvent, null)\n        setEventPhase(wrappedEvent, 0)\n        setCurrentTarget(wrappedEvent, null)\n\n        return !wrappedEvent.defaultPrevented\n    },\n}\n\n// `constructor` is not enumerable.\nObject.defineProperty(EventTarget.prototype, \"constructor\", {\n    value: EventTarget,\n    configurable: true,\n    writable: true,\n})\n\n// Ensure `eventTarget instanceof window.EventTarget` is `true`.\nif (\n    typeof window !== \"undefined\" &&\n    typeof window.EventTarget !== \"undefined\"\n) {\n    Object.setPrototypeOf(EventTarget.prototype, window.EventTarget.prototype)\n}\n\nexport { defineEventAttribute, EventTarget }\nexport default EventTarget\n","import {\n    // Event,\n    EventTarget,\n    // Type,\n    defineEventAttribute,\n} from \"event-target-shim\"\n\n// Known Limitation\n//   Use `any` because the type of `AbortSignal` in `lib.dom.d.ts` is wrong and\n//   to make assignable our `AbortSignal` into that.\n//   https://github.com/Microsoft/TSJS-lib-generator/pull/623\ntype Events = {\n    abort: any // Event & Type<\"abort\">\n}\ntype EventAttributes = {\n    onabort: any // Event & Type<\"abort\">\n}\n\n/**\n * The signal class.\n * @see https://dom.spec.whatwg.org/#abortsignal\n */\nexport default class AbortSignal extends EventTarget<Events, EventAttributes> {\n    /**\n     * AbortSignal cannot be constructed directly.\n     */\n    public constructor() {\n        super()\n        throw new TypeError(\"AbortSignal cannot be constructed directly\")\n    }\n\n    /**\n     * Returns `true` if this `AbortSignal`'s `AbortController` has signaled to abort, and `false` otherwise.\n     */\n    public get aborted(): boolean {\n        const aborted = abortedFlags.get(this)\n        if (typeof aborted !== \"boolean\") {\n            throw new TypeError(\n                `Expected 'this' to be an 'AbortSignal' object, but got ${\n                    this === null ? \"null\" : typeof this\n                }`,\n            )\n        }\n        return aborted\n    }\n}\ndefineEventAttribute(AbortSignal.prototype, \"abort\")\n\n/**\n * Create an AbortSignal object.\n */\nexport function createAbortSignal(): AbortSignal {\n    const signal = Object.create(AbortSignal.prototype)\n    EventTarget.call(signal)\n    abortedFlags.set(signal, false)\n    return signal\n}\n\n/**\n * Abort a given signal.\n */\nexport function abortSignal(signal: AbortSignal): void {\n    if (abortedFlags.get(signal) !== false) {\n        return\n    }\n\n    abortedFlags.set(signal, true)\n    signal.dispatchEvent<\"abort\">({ type: \"abort\" })\n}\n\n/**\n * Aborted flag for each instances.\n */\nconst abortedFlags = new WeakMap<AbortSignal, boolean>()\n\n// Properties should be enumerable.\nObject.defineProperties(AbortSignal.prototype, {\n    aborted: { enumerable: true },\n})\n\n// `toString()` should return `\"[object AbortSignal]\"`\nif (typeof Symbol === \"function\" && typeof Symbol.toStringTag === \"symbol\") {\n    Object.defineProperty(AbortSignal.prototype, Symbol.toStringTag, {\n        configurable: true,\n        value: \"AbortSignal\",\n    })\n}\n","import AbortSignal, { abortSignal, createAbortSignal } from \"./abort-signal\"\n\n/**\n * The AbortController.\n * @see https://dom.spec.whatwg.org/#abortcontroller\n */\nexport default class AbortController {\n    /**\n     * Initialize this controller.\n     */\n    public constructor() {\n        signals.set(this, createAbortSignal())\n    }\n\n    /**\n     * Returns the `AbortSignal` object associated with this object.\n     */\n    public get signal(): AbortSignal {\n        return getSignal(this)\n    }\n\n    /**\n     * Abort and signal to any observers that the associated activity is to be aborted.\n     */\n    public abort(): void {\n        abortSignal(getSignal(this))\n    }\n}\n\n/**\n * Associated signals.\n */\nconst signals = new WeakMap<AbortController, AbortSignal>()\n\n/**\n * Get the associated signal of a given controller.\n */\nfunction getSignal(controller: AbortController): AbortSignal {\n    const signal = signals.get(controller)\n    if (signal == null) {\n        throw new TypeError(\n            `Expected 'this' to be an 'AbortController' object, but got ${\n                controller === null ? \"null\" : typeof controller\n            }`,\n        )\n    }\n    return signal\n}\n\n// Properties should be enumerable.\nObject.defineProperties(AbortController.prototype, {\n    signal: { enumerable: true },\n    abort: { enumerable: true },\n})\n\nif (typeof Symbol === \"function\" && typeof Symbol.toStringTag === \"symbol\") {\n    Object.defineProperty(AbortController.prototype, Symbol.toStringTag, {\n        configurable: true,\n        value: \"AbortController\",\n    })\n}\n\nexport { AbortController, AbortSignal }\n","/*globals require, self, window */\n\"use strict\"\n\nconst ac = require(\"./dist/abort-controller\")\n\n/*eslint-disable @mysticatea/prettier */\nconst g =\n    typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    /* otherwise */ undefined\n/*eslint-enable @mysticatea/prettier */\n\nif (g) {\n    if (typeof g.AbortController === \"undefined\") {\n        g.AbortController = ac.AbortController\n    }\n    if (typeof g.AbortSignal === \"undefined\") {\n        g.AbortSignal = ac.AbortSignal\n    }\n}\n","// import fetch from \"node-fetch\"\r\n// import { stream } from \"@thi.ng/rstream\"\r\n// import { map } from \"@thi.ng/transducers\"\r\n\r\nconst fetch = require(\"node-fetch\")\r\nconst { stream } = require(\"@thi.ng/rstream\")\r\nconst { map } = require(\"@thi.ng/transducers\")\r\nrequire(\"abort-controller/polyfill\")\r\n/**\r\n * Blogs:\r\n * - source1:\r\n *   https://medium.com/@bramus/cancel-a-javascript-promise-with-abortcontroller-3540cbbda0a9\r\n * - source2:\r\n *   https://dev.to/frederikprijck/converting-a-promise-into-an-observable-dag\r\n */\r\n\r\n// Creation of an AbortController signal\r\nconst controller = new AbortController()\r\nconst signal = controller.signal\r\n\r\nconst promiseAborter = promise => {\r\n  // window.stop()\r\n  console.log(\"Promise Started\")\r\n  return promise.then(r => {\r\n    if (signal.aborted) {\r\n      return Promise.reject(new Error(\"Aborted\"))\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n      // Something fake async\r\n      resolve(r)\r\n\r\n      // Listen for abort event on signal\r\n      signal.addEventListener(\"abort\", () => {\r\n        reject(new Error(\"Aborted\"))\r\n      })\r\n    })\r\n  })\r\n}\r\n\r\npromiseAborter(\r\n  fetch(\"https://api.census.gov/data/2017/cbp/geography.json\").then(r =>\r\n    r.json()\r\n  )\r\n)\r\n  .then(r => console.log(r))\r\n  .catch(e =>\r\n    e.message === \"Aborted\"\r\n      ? console.log(\"Promise Aborted\")\r\n      : console.log(\"Promise rejected\")\r\n  ) //?\r\n\r\n// Call a promise, with the signal injected into it\r\n// doSomethingAsync(signal)\r\n//   .then(result => {\r\n//     console.log(result)\r\n//   })\r\n//   .catch(err => {\r\n//     if (err.name === \"AbortError\") {\r\n//       console.log(\"Promise Aborted\")\r\n//     } else {\r\n//       console.log(\"Promise Rejected\")\r\n//     }\r\n//   })\r\n\r\n// // Example Promise, which takes signal into account\r\n// function doSomethingAsync(signal) {\r\n//   if (signal.aborted) {\r\n//     return Promise.reject(new DOMException(\"Aborted\", \"AbortError\"))\r\n//   }\r\n\r\n//   return new Promise((resolve, reject) => {\r\n//     console.log(\"Promise Started\")\r\n\r\n//     // Something fake async\r\n//     const timeout = window.setTimeout(resolve, 3000, \"Promise Resolved\")\r\n\r\n//     // Listen for abort event on signal\r\n//     signal.addEventListener(\"abort\", () => {\r\n//       window.clearTimeout(timeout)\r\n//       reject(new DOMException(\"Aborted\", \"AbortError\"))\r\n//     })\r\n//   })\r\n// }\r\n\r\nconst abort$ = stream().subscribe(map(() => controller.abort()))\r\n\r\n// Browser\r\ndocument.getElementById(\"stop\").addEventListener(\"click\", e => {\r\n  e.preventDefault()\r\n  // controller.abort()\r\n  abort$.next(\"abort\")\r\n})\r\n\r\n// NODE:\r\n// setTimeout(() => abort$.next(\"abort\"), 50)\r\n\r\n// setTimeout(() => controller.abort(), 5)\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}