{"version":3,"sources":["../../../AppData/Local/nvs/node/10.16.2/x64/node_modules/parcel-bundler/node_modules/querystring-es3/decode.js","../../../AppData/Local/nvs/node/10.16.2/x64/node_modules/parcel-bundler/node_modules/querystring-es3/encode.js","../../../AppData/Local/nvs/node/10.16.2/x64/node_modules/parcel-bundler/node_modules/querystring-es3/index.js","../src/utils/parse_href.js","../node_modules/@thi.ng/checks/exists-not-null.js","../node_modules/@thi.ng/checks/exists.js","../node_modules/@thi.ng/checks/has-crypto.js","../node_modules/@thi.ng/checks/has-max-length.js","../node_modules/@thi.ng/checks/has-min-length.js","../node_modules/@thi.ng/checks/is-function.js","../node_modules/@thi.ng/checks/has-performance.js","../node_modules/@thi.ng/checks/has-wasm.js","../node_modules/@thi.ng/checks/has-webgl.js","../node_modules/@thi.ng/checks/has-websocket.js","../node_modules/@thi.ng/checks/implements-function.js","../node_modules/@thi.ng/checks/is-array.js","../node_modules/@thi.ng/checks/is-arraylike.js","../node_modules/@thi.ng/checks/is-blob.js","../node_modules/@thi.ng/checks/is-boolean.js","../node_modules/@thi.ng/checks/is-chrome.js","../node_modules/@thi.ng/checks/is-date.js","../node_modules/@thi.ng/checks/is-even.js","../node_modules/@thi.ng/checks/is-false.js","../node_modules/@thi.ng/checks/is-file.js","../node_modules/@thi.ng/checks/is-firefox.js","../node_modules/@thi.ng/checks/is-string.js","../node_modules/@thi.ng/checks/is-hex-color.js","../node_modules/@thi.ng/checks/is-ie.js","../node_modules/@thi.ng/checks/is-in-range.js","../node_modules/@thi.ng/checks/is-int32.js","../node_modules/@thi.ng/checks/is-iterable.js","../node_modules/@thi.ng/checks/is-map.js","../node_modules/@thi.ng/checks/is-mobile.js","../node_modules/@thi.ng/checks/is-nan.js","../node_modules/@thi.ng/checks/is-negative.js","../node_modules/@thi.ng/checks/is-nil.js","../node_modules/@thi.ng/checks/is-node.js","../node_modules/@thi.ng/checks/is-not-string-iterable.js","../node_modules/@thi.ng/checks/is-null.js","../node_modules/@thi.ng/checks/is-number.js","../node_modules/@thi.ng/checks/is-object.js","../node_modules/@thi.ng/checks/is-odd.js","../node_modules/@thi.ng/checks/is-plain-object.js","../node_modules/@thi.ng/checks/is-positive.js","../node_modules/@thi.ng/checks/is-primitive.js","../node_modules/@thi.ng/checks/is-promise.js","../node_modules/@thi.ng/checks/is-promiselike.js","../node_modules/@thi.ng/checks/is-regexp.js","../node_modules/@thi.ng/checks/is-safari.js","../node_modules/@thi.ng/checks/is-set.js","../node_modules/@thi.ng/checks/is-symbol.js","../node_modules/@thi.ng/checks/is-transferable.js","../node_modules/@thi.ng/checks/is-true.js","../node_modules/@thi.ng/checks/is-typedarray.js","../node_modules/@thi.ng/checks/is-uint32.js","../node_modules/@thi.ng/checks/is-undefined.js","../node_modules/@thi.ng/checks/is-uuid.js","../node_modules/@thi.ng/checks/is-uuid4.js","../node_modules/@thi.ng/checks/is-zero.js","../node_modules/@thi.ng/checks/index.js","../src/utils/stringify_type.js","../node_modules/@thi.ng/api/api.js","../node_modules/@thi.ng/api/api/event.js","../node_modules/@thi.ng/api/api/fn.js","../node_modules/@thi.ng/api/api/logger.js","../node_modules/@thi.ng/api/api/typedarray.js","../node_modules/@thi.ng/api/assert.js","../node_modules/@thi.ng/api/logger.js","../node_modules/@thi.ng/api/mixin.js","../node_modules/@thi.ng/api/decorators/configurable.js","../node_modules/@thi.ng/api/decorators/deprecated.js","../node_modules/@thi.ng/api/decorators/nomixin.js","../node_modules/@thi.ng/api/decorators/sealed.js","../node_modules/@thi.ng/api/mixins/ienable.js","../node_modules/@thi.ng/api/mixins/inotify.js","../node_modules/@thi.ng/api/mixins/iterable.js","../node_modules/@thi.ng/api/mixins/iwatch.js","../node_modules/@thi.ng/api/index.js","../node_modules/@thi.ng/rstream/api.js","../node_modules/@thi.ng/transducers/reduced.js","../node_modules/@thi.ng/errors/deferror.js","../node_modules/@thi.ng/errors/illegal-arguments.js","../node_modules/@thi.ng/errors/illegal-arity.js","../node_modules/@thi.ng/errors/illegal-state.js","../node_modules/@thi.ng/errors/unsupported.js","../node_modules/@thi.ng/errors/index.js","../node_modules/@thi.ng/transducers/reduce.js","../node_modules/@thi.ng/transducers/rfn/push.js","../node_modules/@thi.ng/transducers/iterator.js","../node_modules/@thi.ng/transducers/func/compr.js","../node_modules/@thi.ng/transducers/xform/map.js","../node_modules/@thi.ng/transducers/transduce.js","../node_modules/@thi.ng/transducers/run.js","../node_modules/@thi.ng/transducers/step.js","../node_modules/@thi.ng/transducers/internal/mathop.js","../node_modules/@thi.ng/transducers/rfn/add.js","../node_modules/@thi.ng/transducers/rfn/assoc-map.js","../node_modules/@thi.ng/transducers/rfn/assoc-obj.js","../node_modules/@thi.ng/transducers/rfn/conj.js","../node_modules/@thi.ng/transducers/rfn/count.js","../node_modules/@thi.ng/transducers/rfn/div.js","../node_modules/@thi.ng/transducers/rfn/every.js","../node_modules/@thi.ng/transducers/rfn/fill.js","../node_modules/@thi.ng/compose/comp.js","../node_modules/@thi.ng/compose/complement.js","../node_modules/@thi.ng/compose/constantly.js","../node_modules/@thi.ng/compose/delay.js","../node_modules/@thi.ng/compose/delayed.js","../node_modules/@thi.ng/compose/identity.js","../node_modules/@thi.ng/compose/ifdef.js","../node_modules/@thi.ng/compose/juxt.js","../node_modules/@thi.ng/compose/partial.js","../node_modules/@thi.ng/compose/thread-first.js","../node_modules/@thi.ng/compose/thread-last.js","../node_modules/@thi.ng/compose/trampoline.js","../node_modules/@thi.ng/compose/index.js","../node_modules/@thi.ng/transducers/internal/group-opts.js","../node_modules/@thi.ng/transducers/rfn/group-by-map.js","../node_modules/@thi.ng/transducers/rfn/frequencies.js","../node_modules/@thi.ng/transducers/rfn/group-by-obj.js","../node_modules/@thi.ng/transducers/rfn/group-binary.js","../node_modules/@thi.ng/transducers/rfn/last.js","../node_modules/@thi.ng/compare/index.js","../node_modules/@thi.ng/transducers/rfn/max-compare.js","../node_modules/@thi.ng/transducers/rfn/max.js","../node_modules/@thi.ng/transducers/rfn/mean.js","../node_modules/@thi.ng/transducers/rfn/min-compare.js","../node_modules/@thi.ng/transducers/rfn/min.js","../node_modules/@thi.ng/transducers/rfn/mul.js","../node_modules/@thi.ng/transducers/rfn/push-copy.js","../node_modules/@thi.ng/transducers/rfn/reductions.js","../node_modules/@thi.ng/transducers/rfn/some.js","../node_modules/@thi.ng/transducers/rfn/str.js","../node_modules/@thi.ng/transducers/rfn/sub.js","../node_modules/@thi.ng/transducers/xform/benchmark.js","../node_modules/@thi.ng/transducers/xform/cat.js","../node_modules/@thi.ng/transducers/xform/converge.js","../node_modules/@thi.ng/transducers/iter/range.js","../node_modules/@thi.ng/transducers/iter/range2d.js","../node_modules/@thi.ng/transducers/iter/zip.js","../node_modules/@thi.ng/transducers/xform/convolve.js","../node_modules/@thi.ng/transducers/xform/dedupe.js","../node_modules/@thi.ng/transducers/xform/delayed.js","../node_modules/@thi.ng/transducers/xform/distinct.js","../node_modules/@thi.ng/transducers/xform/throttle.js","../node_modules/@thi.ng/transducers/xform/drop-nth.js","../node_modules/@thi.ng/transducers/xform/drop-while.js","../node_modules/@thi.ng/transducers/xform/drop.js","../node_modules/@thi.ng/transducers/xform/duplicate.js","../node_modules/@thi.ng/transducers/xform/filter.js","../node_modules/@thi.ng/arrays/binary-search.js","../node_modules/@thi.ng/equiv/index.js","../node_modules/@thi.ng/arrays/ends-with.js","../node_modules/@thi.ng/arrays/ensure-iterable.js","../node_modules/@thi.ng/arrays/ensure-array.js","../node_modules/@thi.ng/arrays/find.js","../node_modules/@thi.ng/arrays/fuzzy-match.js","../node_modules/@thi.ng/arrays/is-sorted.js","../node_modules/@thi.ng/arrays/iterator.js","../node_modules/@thi.ng/arrays/peek.js","../node_modules/@thi.ng/arrays/swap.js","../node_modules/@thi.ng/arrays/quicksort.js","../node_modules/@thi.ng/random/api.js","../node_modules/@thi.ng/random/smush32.js","../node_modules/@thi.ng/random/system.js","../node_modules/@thi.ng/random/xorshift128.js","../node_modules/@thi.ng/random/xorwow.js","../node_modules/@thi.ng/random/xsadd.js","../node_modules/@thi.ng/random/random-id.js","../node_modules/@thi.ng/random/weighted-random.js","../node_modules/@thi.ng/random/index.js","../node_modules/@thi.ng/arrays/shuffle.js","../node_modules/@thi.ng/arrays/starts-with.js","../node_modules/@thi.ng/arrays/swizzle.js","../node_modules/@thi.ng/arrays/index.js","../node_modules/@thi.ng/transducers/xform/filter-fuzzy.js","../node_modules/@thi.ng/transducers/xform/flatten-with.js","../node_modules/@thi.ng/transducers/xform/flatten.js","../node_modules/@thi.ng/transducers/xform/map-indexed.js","../node_modules/@thi.ng/transducers/xform/indexed.js","../node_modules/@thi.ng/transducers/xform/interleave.js","../node_modules/@thi.ng/transducers/func/comp.js","../node_modules/@thi.ng/transducers/iter/norm-range.js","../node_modules/@thi.ng/transducers/xform/mapcat.js","../node_modules/@thi.ng/transducers/xform/partition.js","../node_modules/@thi.ng/transducers/xform/interpolate.js","../node_modules/@thi.ng/math/api.js","../node_modules/@thi.ng/math/abs.js","../node_modules/@thi.ng/math/angle.js","../node_modules/@thi.ng/math/eqdelta.js","../node_modules/@thi.ng/math/crossing.js","../node_modules/@thi.ng/math/extrema.js","../node_modules/@thi.ng/math/interval.js","../node_modules/@thi.ng/math/fit.js","../node_modules/@thi.ng/math/int.js","../node_modules/@thi.ng/math/min-error.js","../node_modules/@thi.ng/math/mix.js","../node_modules/@thi.ng/math/prec.js","../node_modules/@thi.ng/math/ratio.js","../node_modules/@thi.ng/math/solve.js","../node_modules/@thi.ng/math/step.js","../node_modules/@thi.ng/math/index.js","../node_modules/@thi.ng/transducers/xform/interpolate-hermite.js","../node_modules/@thi.ng/transducers/xform/interpolate-linear.js","../node_modules/@thi.ng/transducers/xform/interpose.js","../node_modules/@thi.ng/transducers/xform/keep.js","../node_modules/@thi.ng/transducers/xform/labeled.js","../node_modules/@thi.ng/transducers/func/deep-transform.js","../node_modules/@thi.ng/transducers/xform/map-deep.js","../node_modules/@thi.ng/transducers/xform/map-keys.js","../node_modules/@thi.ng/transducers/xform/map-nth.js","../node_modules/@thi.ng/transducers/xform/map-vals.js","../node_modules/@thi.ng/transducers/xform/take.js","../node_modules/@thi.ng/transducers/xform/match-first.js","../node_modules/@thi.ng/transducers/internal/drain.js","../node_modules/@thi.ng/transducers/xform/take-last.js","../node_modules/@thi.ng/transducers/xform/match-last.js","../node_modules/@thi.ng/transducers/xform/moving-average.js","../node_modules/@thi.ng/transducers/internal/sort-opts.js","../node_modules/@thi.ng/transducers/xform/moving-median.js","../node_modules/@thi.ng/transducers/xform/multiplex.js","../node_modules/@thi.ng/transducers/func/renamer.js","../node_modules/@thi.ng/transducers/xform/rename.js","../node_modules/@thi.ng/transducers/xform/multiplex-obj.js","../node_modules/@thi.ng/transducers/xform/noop.js","../node_modules/@thi.ng/transducers/xform/pad-last.js","../node_modules/@thi.ng/transducers/xform/page.js","../node_modules/@thi.ng/transducers/xform/partition-by.js","../node_modules/@thi.ng/transducers/xform/partition-of.js","../node_modules/@thi.ng/transducers/xform/partition-sort.js","../node_modules/@thi.ng/transducers/xform/partition-sync.js","../node_modules/@thi.ng/transducers/xform/pluck.js","../node_modules/@thi.ng/transducers/xform/sample.js","../node_modules/@thi.ng/transducers/xform/scan.js","../node_modules/@thi.ng/transducers/func/key-selector.js","../node_modules/@thi.ng/transducers/xform/select-keys.js","../node_modules/@thi.ng/transducers/xform/side-effect.js","../node_modules/@thi.ng/transducers/xform/sliding-window.js","../node_modules/@thi.ng/transducers/xform/stream-shuffle.js","../node_modules/@thi.ng/transducers/xform/stream-sort.js","../node_modules/@thi.ng/transducers/xform/struct.js","../node_modules/@thi.ng/transducers/xform/swizzle.js","../node_modules/@thi.ng/transducers/xform/take-nth.js","../node_modules/@thi.ng/transducers/xform/take-while.js","../node_modules/@thi.ng/transducers/xform/throttle-time.js","../node_modules/@thi.ng/transducers/xform/toggle.js","../node_modules/@thi.ng/transducers/xform/trace.js","../node_modules/@thi.ng/transducers/xform/word-wrap.js","../node_modules/@thi.ng/transducers/func/juxtr.js","../node_modules/@thi.ng/transducers/func/lookup.js","../node_modules/@thi.ng/transducers/iter/as-iterable.js","../node_modules/@thi.ng/transducers/iter/repeatedly.js","../node_modules/@thi.ng/transducers/iter/choices.js","../node_modules/@thi.ng/transducers/iter/concat.js","../node_modules/@thi.ng/transducers/iter/cycle.js","../node_modules/@thi.ng/transducers/iter/repeat.js","../node_modules/@thi.ng/transducers/iter/extend-sides.js","../node_modules/@thi.ng/transducers/iter/iterate.js","../node_modules/@thi.ng/transducers/iter/keys.js","../node_modules/@thi.ng/transducers/iter/pad-sides.js","../node_modules/@thi.ng/transducers/iter/pairs.js","../node_modules/@thi.ng/transducers/iter/permutations.js","../node_modules/@thi.ng/transducers/iter/range3d.js","../node_modules/@thi.ng/transducers/iter/reverse.js","../node_modules/@thi.ng/transducers/iter/symmetric.js","../node_modules/@thi.ng/transducers/iter/tween.js","../node_modules/@thi.ng/transducers/iter/vals.js","../node_modules/@thi.ng/transducers/iter/wrap-sides.js","../node_modules/@thi.ng/transducers/index.js","../node_modules/@thi.ng/rstream/utils/idgen.js","../node_modules/@thi.ng/rstream/subscription.js","../node_modules/@thi.ng/rstream/stream-sync.js","../node_modules/@thi.ng/rstream/utils/worker.js","../node_modules/@thi.ng/rstream/subs/tunnel.js","../node_modules/@thi.ng/rstream/forkjoin.js","../node_modules/@thi.ng/rstream/metastream.js","../node_modules/@thi.ng/associative/dissoc.js","../node_modules/@thi.ng/associative/internal/equiv.js","../node_modules/@thi.ng/associative/into.js","../node_modules/@thi.ng/associative/array-set.js","../node_modules/@thi.ng/associative/common-keys.js","../node_modules/@thi.ng/associative/utils.js","../node_modules/@thi.ng/associative/internal/xform-setop.js","../node_modules/@thi.ng/associative/difference.js","../node_modules/@thi.ng/associative/equiv-map.js","../node_modules/@thi.ng/binary/api.js","../node_modules/@thi.ng/binary/align.js","../node_modules/@thi.ng/binary/count.js","../node_modules/@thi.ng/binary/mask.js","../node_modules/@thi.ng/binary/edit.js","../node_modules/@thi.ng/binary/float.js","../node_modules/@thi.ng/binary/gray.js","../node_modules/@thi.ng/binary/logic.js","../node_modules/@thi.ng/binary/pow.js","../node_modules/@thi.ng/binary/rotate.js","../node_modules/@thi.ng/binary/splat.js","../node_modules/@thi.ng/binary/swizzle.js","../node_modules/@thi.ng/binary/index.js","../node_modules/@thi.ng/associative/hash-map.js","../node_modules/@thi.ng/associative/select-keys.js","../node_modules/@thi.ng/associative/indexed.js","../node_modules/@thi.ng/associative/intersection.js","../node_modules/@thi.ng/associative/invert.js","../node_modules/@thi.ng/associative/merge.js","../node_modules/@thi.ng/associative/rename-keys.js","../node_modules/@thi.ng/associative/join.js","../node_modules/@thi.ng/dcons/index.js","../node_modules/@thi.ng/associative/ll-set.js","../node_modules/@thi.ng/associative/merge-apply.js","../node_modules/@thi.ng/associative/merge-with.js","../node_modules/@thi.ng/associative/merge-deep.js","../node_modules/@thi.ng/associative/sorted-map.js","../node_modules/@thi.ng/associative/sorted-set.js","../node_modules/@thi.ng/associative/sparse-set.js","../node_modules/@thi.ng/associative/union.js","../node_modules/@thi.ng/associative/without-keys.js","../node_modules/@thi.ng/associative/index.js","../node_modules/@thi.ng/rstream/pubsub.js","../node_modules/@thi.ng/rstream/stream.js","../node_modules/@thi.ng/rstream/stream-merge.js","../node_modules/@thi.ng/rstream/from/iterable.js","../node_modules/@thi.ng/rstream/trigger.js","../node_modules/@thi.ng/rstream/from/interval.js","../node_modules/@thi.ng/rstream/from/raf.js","../node_modules/@thi.ng/rstream/tween.js","../node_modules/@thi.ng/rstream/from/atom.js","../node_modules/@thi.ng/rstream/from/event.js","../node_modules/@thi.ng/rstream/from/promise.js","../node_modules/@thi.ng/rstream/from/promises.js","../node_modules/@thi.ng/paths/path.js","../node_modules/@thi.ng/paths/getter.js","../node_modules/@thi.ng/paths/setter.js","../node_modules/@thi.ng/paths/update-in.js","../node_modules/@thi.ng/paths/delete-in.js","../node_modules/@thi.ng/paths/get-in.js","../node_modules/@thi.ng/paths/mutator.js","../node_modules/@thi.ng/paths/mut-in.js","../node_modules/@thi.ng/paths/mut-in-many.js","../node_modules/@thi.ng/paths/set-in.js","../node_modules/@thi.ng/paths/set-in-many.js","../node_modules/@thi.ng/paths/updater.js","../node_modules/@thi.ng/paths/index.js","../node_modules/@thi.ng/atom/idgen.js","../node_modules/@thi.ng/atom/view.js","../node_modules/@thi.ng/atom/atom.js","../node_modules/@thi.ng/atom/cursor.js","../node_modules/@thi.ng/atom/history.js","../node_modules/@thi.ng/atom/transacted.js","../node_modules/@thi.ng/atom/index.js","../node_modules/@thi.ng/rstream/from/view.js","../node_modules/@thi.ng/rstream/from/worker.js","../node_modules/@thi.ng/rstream/subs/bisect.js","../node_modules/@thi.ng/rstream/subs/post-worker.js","../node_modules/@thi.ng/rstream/subs/resolve.js","../node_modules/@thi.ng/rstream/subs/sidechain-partition.js","../node_modules/@thi.ng/rstream/subs/sidechain-toggle.js","../node_modules/@thi.ng/rstream/subs/timeout.js","../node_modules/@thi.ng/rstream/subs/trace.js","../node_modules/@thi.ng/rstream/subs/transduce.js","../node_modules/@thi.ng/rstream/index.js","../src/utils/traceStream.js","../src/utils/unknown_key_ERR.js","../src/utils/index.js","../src/spool/index.js","../src/streams/index.js","../src/register/index.js","../src/DOM/nav.js","../src/DOM/index.js","../node_modules/node-fetch/browser.js","DOM.js","../../../AppData/Local/nvs/node/10.16.2/x64/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["hasOwnProperty","obj","prop","Object","prototype","call","module","exports","qs","sep","eq","options","length","regexp","split","maxKeys","len","i","x","replace","idx","indexOf","kstr","vstr","k","v","substr","decodeURIComponent","isArray","push","Array","xs","toString","stringifyPrimitive","isFinite","name","undefined","map","objectKeys","ks","encodeURIComponent","join","f","res","keys","key","decode","parse","require","encode","stringify","fix_jsdoc","parse_href","URL","subdomain","domain","path","parts","path_str","full_path","filter","test","slice","query_str","part","hash_str","query","hash","existsAndNotNull","exists","t","hasCrypto","window","hasMaxLength","hasMinLength","isFunction","hasPerformance","performance","now","hasWASM","global","hasWebGL","document","createElement","getContext","e","hasWebSocket","WebSocket","implementsFunction","fn","isArrayLike","isBlob","Blob","isBoolean","isChrome","isDate","Date","isEven","isFalse","isFile","File","isFirefox","isString","RE","isHexColor","isIE","navigator","userAgent","isInRange","min","max","isInt32","isIterable","Symbol","iterator","isMap","Map","isMobile","isNaN","isNegative","isNil","isNode","process","versions","node","isNotStringAndIterable","isNull","isNumber","isObject","isOdd","OBJP","getPrototypeOf","isPlainObject","p","isPosititve","isPrimitive","isPromise","Promise","isPromiseLike","isRegExp","RegExp","isSafari","isSet","Set","isSymbol","isTransferable","ArrayBuffer","SharedArrayBuffer","MessagePort","isTrue","isTypedArray","constructor","Float32Array","Uint32Array","Uint8Array","Uint8ClampedArray","Int8Array","Uint16Array","Int16Array","Int32Array","Float64Array","isUint32","isUndefined","isUUID","isUUIDv4","isZero","stringify_type","DEFAULT_EPS","SEMAPHORE","EVENT_ALL","EVENT_ENABLE","EVENT_DISABLE","NO_OP","LogLevel","Type","GLType","GL2TYPE","TYPE2GL","SIZEOF","TYPEDARRAY_CTORS","typedArray","type","uintType","intType","assert","msg","Error","NULL_LOGGER","freeze","level","NONE","fine","debug","info","warn","severe","ConsoleLogger","id","FINE","args","log","DEBUG","INFO","WARN","SEVERE","console","mixin","behaviour","sharedBehaviour","instanceKeys","Reflect","ownKeys","sharedKeys","typeTag","_mixin","clazz","existing","getOwnPropertyDescriptor","configurable","defineProperty","value","writable","enumerable","propertyIsEnumerable","hasInstance","state","_","__","descriptor","deprecated","target","signature","apply","arguments","nomixin","sealed","seal","IEnableMixin","_enabled","isEnabled","enable","notify","disable","toggle","inotify_dispatch","listeners","n","l","canceled","INotifyMixin","addListener","scope","_listeners","__listener","removeListener","splice","iterable","IWatchMixin","addWatch","_watches","removeWatch","notifyWatches","oldState","newState","w","State","CloseMode","LOGGER","setLogger","logger","Reduced","val","deref","reduced","isReduced","ensureReduced","unreduced","defError","prefix","suffix","IllegalArgumentError","illegalArgs","IllegalArityError","illegalArity","IllegalStateError","illegalState","UnsupportedOperationError","unsupported","parseArgs","reduce","rfn","init","complete","acc","$reduce","reduceArray","reduceIterable","reducer","$$reduce","xform","y","iterator1","$iter","impl","compR","src","r","transduce","NO_OP_REDUCER","run","tx","fx","step","done","__mathop","initDefault","add","assocMap","set","assocObj","conj","count","offset","div","every","pred","fill","start","fillN","comp","fns","a","b","c","d","g","h","j","compL","reverse","compI","complement","constantly","delay","body","Delay","realized","isRealized","delayed","resolve","setTimeout","identity","ifDef","juxt","partial","foo","threadFirst","expr","threadLast","trampoline","__groupByOpts","opts","assign","group","groupByMap","has","get","frequencies","groupByObj","_init","_reduce","branchPred","groupBinary","bits","branch","leaf","left","right","maxIndex","last","compare","compareNumAsc","compareNumDesc","maxCompare","cmp","Infinity","Math","mean","minCompare","mul","pushCopy","reductions","some","str","first","sub","benchmark","prev","cat","converge","range","from","to","Range","range2d","fromX","toX","stepX","fromY","toY","stepY","rx","zip","iters","s","tuple","next","buildKernel1d","weights","w2","buildKernel2d","h2","kernelLookup1d","width","wrap","border","ox","xx","kernelLookup2d","height","oy","yy","kernelError","convolve1d","indices","kernel","kwidth","convolve2d","kheight","dedupe","equiv","distinct","seen","cache","throttle","_pred","dropNth","skip","dropWhile","ok","drop","m","duplicate","binarySearch","buf","kx","low","high","mid","binarySearchNumeric","FN","STR","proto","equivObject","equivArrayLike","equivSet","equivMap","getTime","_equiv","size","sort","endsWith","needle","_eq","ensureIterable","ensureArray","ensureArrayLike","find","findIndex","fuzzyMatch","nd","nq","q","isSorted","arr","end","curr","arrayIterator","peek","swap","multiSwap","quickSort","_cmp","_swap","pivot","INV_MAX","ARandom","float","norm","int","minmax","gaussian","scale","sum","DEFAULT_SEED","Smush32","seed","buffer","copy","gen","random","SystemRandom","SYSTEM","XorShift128","bytes","XorWow","XsAdd","randomID","syms","rnd","weightedRandom","choices","total","o","shuffleRange","shuffle","startsWith","swizzle","order","filterFuzzy","iter","flattenWith","flatten","mapIndexed","indexed","interleave","_sep","_comp","normRange","inclLast","mapcat","partition","all","interpolate","chunk","PI","TAU","HALF_PI","THIRD_PI","QUARTER_PI","SIXTH_PI","INV_PI","INV_TAU","INV_HALF_PI","DEG2RAD","RAD2DEG","PHI","sqrt","SQRT2","SQRT3","SQRT2_2","SQRT2_3","THIRD","TWO_THIRD","SIXTH","EPS","Crossing","absDiff","abs","sign","eps","sincos","theta","sin","cos","cossin","absTheta","absInnerAngle","angleDist","atan2Abs","atan2","quadrant","deg","rad","csc","sec","cot","tan","loc","gamma","normCos","x2","__fastCos","fastCos","fastSin","eqDelta","eqDeltaFixed","isCrossOver","a1","a2","b1","b2","isCrossUnder","classifyCrossing","isMinima","isMaxima","index","values","minimaIndex","maximaIndex","vals","minimaIndices","maximaIndices","clamp","clamp01","clamp11","wrap01","wrap11","min2id","min3id","min4id","max2id","max3id","max4id","smin","smax","ea","exp","eb","sclamp","absMin","absMax","foldback","inRange","inOpenRange","fit","fitClamped","fit01","fit10","fit11","M8","M16","signExtend8","signExtend16","addi8","divi8","muli8","subi8","andi8","ori8","xori8","noti8","lshifti8","rshifti8","addi16","divi16","muli16","subi16","andi16","ori16","xori16","noti16","lshifti16","rshifti16","addi32","divi32","muli32","subi32","andi32","ori32","xori32","lshifti32","rshifti32","noti32","addu8","divu8","mulu8","subu8","andu8","oru8","xoru8","notu8","lshiftu8","rshiftu8","addu16","divu16","mulu16","subu16","andu16","oru16","xoru16","notu16","lshiftu16","rshiftu16","addu32","divu32","mulu32","subu32","andu32","oru32","xoru32","notu32","lshiftu32","rshiftu32","minError","error","delta","minT","minE","mix","mixBilinear","u","mixQuadratic","mixCubic","t2","s2","mixHermite","y1","y2","mixCubicHermite","ta","tb","h00","h10","h01","h11","tangentCardinal","tc","tangentDiff3","tween","circular","cosine","decimated","floor","bounce","amp","tk","ease","pow","impulse","gain","parabola","cubicPulse","sinc","sigmoid","sigmoid11","fmod","fract","trunc","ceil","roundTo","prec","round","roundEps","simplifyRatio","num","denom","e1","e2","derivative","solveLinear","solveQuadratic","solveCubic","aa","bb","ba3","cbrt","acos","edge","smoothStep","edge2","smootherStep","expStep","interpolateHermite","interpolateLinear","interpose","keep","labeled","deepTransform","spec","mapfns","mapDeep","mapKeys","mapNth","off","mapVals","take","matchFirst","__drain","shift","takeLast","matchLast","movingAverage","period","__sortOpts","movingMedian","multiplex","renamer","kmap","c2","c1","rename","multiplexObj","xforms","noop","padLast","rem","page","partitionBy","partitionOf","sizes","partitionSort","partitionSync","currKeys","mergeOnly","reset","backPressure","clear","requiredInputs","collect","slot","String","required","delete","pluck","sample","prob","scan","inito","completeo","reduceo","initi","completei","reducei","_acc","keySelector","selectKeys","sideEffect","slidingWindow","streamShuffle","maxSwaps","streamSort","struct","fields","takeNth","takeWhile","throttleTime","on","initial","trace","wordWrap","lineLength","delim","always","flag","juxtR","rs","aa1","ra","rb","aa2","rc","aa3","lookup1d","lookup2d","lookup3d","stridez","asIterable","repeatedly","concat","cycle","input","repeat","extendSides","numLeft","numRight","iterate","padSides","pairs","permutations","permutationsN","offsets","seqs","range3d","fromZ","toZ","stepZ","ry","z","_input","symmetric","head","stops","unshift","interval","wrapSides","_src","NEXT_ID","nextID","optsWithID","subscription","Subscription","parent","closeIn","closeOut","cacheLast","subs","getState","subscribe","ensureState","pop","addWrapped","subscribeAll","wrapped","transform","xf","unsubscribe","cleanup","uacc","dispatch","notified","sync","StreamSync","srcIDs","psync","mapv","sources","realSourceIDs","invRealSourceIDs","idSources","sourceIDs","addAll","markDone","__owner","remove","removeID","getSourceForID","removeAll","removeAllIDs","ids","getSources","inlineWorker","makeWorker","worker","Worker","createObjectURL","tunnel","Tunnel","workers","maxWorkers","transferables","terminate","interrupt","addEventListener","data","postMessage","forEach","forkJoin","numWorkers","hardwareConcurrency","workerIDs","fork","results","forkBuffer","minChunkSize","chunkSize","joinBuffer","metaStream","factory","MetaStream","stream","detach","dissoc","coll","dissocObj","entries","into","dest","__private","WeakMap","__vals","inst","ArraySet","species","toStringTag","$this","empty","notFound","disj","thisArg","commonKeysMap","out","commonKeysObj","ctor","objValues","ensureMap","ensureSet","xformSetOp","op","difference","differenceR","__map","EquivMap","fromObject","_opts","pair","MASKS","align","addr","isAligned","popCount","hammingDist","clz32","LN2","ctz32","bitSize","defMask","maskL","maskH","bitClear","bit","bitFlip","bitSet","bitSetWindow","bitClearWindow","F32","I32","U32","floatToIntBits","floatToUintBits","intBitsToFloat","uintBitsToFloat","floatToSortableInt","encodeGray32","decodeGray32","bitNot","bitAnd","bitNand","bitOr","bitNor","bitXor","bitXnor","bitImply","bitAoi21","bitOai21","bitAoi22","bitOai22","bitMux","bitDemux","isPow2","ceilPow2","floorPow2","rotateLeft","rotateRight","splat4_24","splat4_32","splat8_24","splat8_32","splat16_32","same4","same8","lane8","lane","lane4","lane2","setLane8","setLane4","setLane2","swizzle8","swizzle4","flipBytes","__iterator","bins","DEFAULT_CAP","HashMap","cap","load","mask","resize","overrides","selectKeysMap","selectKeysObj","records","ik","rv","intersection","intersectionR","invertMap","invertObj","mergeMap","mergeObj","renameKeysMap","km","renameKeysObj","found","joinWith","DCons","_length","release","cell","tail","ca","cb","seq","nthCell","$seq","cons","insertBefore","newCell","insertAfter","insertBeforeNth","ensureIndex","nthCellUnsafe","insertAfterNth","insertSorted","findWith","slices","at","del","insert","removed","setHead","setTail","setNth","nth","log2","asHead","asTail","inSize","numMerges","psize","qsize","toJSON","dir","dcons","LLSet","mergeApplyMap","mergeApplyObj","mergeMapWith","mergeObjWith","mergeDeepObj","Node","SortedMap","capacity","maxh","probability","DEFAULT_P","code","findPredNode","stack","pickHeight","E","SortedSet","fail","ASparseSet","dense","sparse","__copyTo","$c","SparseSet8","SparseSet16","SparseSet32","sparseSet","union","unionR","withoutKeysMap","withoutKeysObj","pubsub","PubSub","topicfn","topic","topics","subscribeTopic","topicID","unsubscribeTopic","Stream","_inited","_cancel","cancel","merge","StreamMerge","fromIterable","setInterval","clearInterval","fromIterableSync","trigger","fromInterval","fromRAF","isActive","loop","requestAnimationFrame","cancelAnimationFrame","stop","clock","tweenNumber","speed","fromAtom","atom","emitFirst","changed","fromEvent","listenerOpts","streamOpts","listener","removeEventListener","fromDOMEvent","fromPromise","isError","err","catch","then","fromPromises","promises","toPath","getter","getterT","setter","setterT","_copy","compS","updateIn","updateInT","deleteIn","deleteInT","getIn","getInT","mutator","mutatorT","mutIn","mutInT","mutInMany","setIn","setInT","setInMany","updater","updaterT","View","lazy","isDirty","isLazy","lookup","unprocessed","pval","view","__decorate","decorators","desc","decorate","Atom","valid","_value","old","resetIn","swapIn","addView","Cursor","update","validate","selfUpdate","local","cval","History_1","History","maxLen","canUndo","history","canRedo","future","undo","EVENT_UNDO","redo","EVENT_REDO","record","prevV","EVENT_RECORD","___","Transacted","current","isTransaction","ensureTx","begin","commit","watch","fromView","fromWorker","_worker","ml","el","bisect","truthy","falsy","postWorker","transfer","Resolver","outstanding","sidechainPartition","side","SidechainPartition","sideSub","sidechainToggle","SidechainToggle","timeout","timeoutMs","Timeout","errorObj","resetTimeout","clearTimeout","timeoutId","reject","fulfilled","rejected","traceStream","log_prefix","stringify_w_functions","indent","JSON","unknown_key_ERR","unknown","sub$","idx_dict0","idx_dict","idx_str","err_str","spool","task_array","recur","run$","reso","erro","arg_type","result","temp","command$","resolved","out$","task$","spooler","feedCMD$fromSource$","source$","args_is_fn","deliver","delivery","feed","$","registerCMD","command","handler","CMD","popstate$","DOMContentLoaded$","navigated$","href","location","hrefToPushState","pushState","dispatchEvent","Event","navitage$onEvent","preventDefault","HREF_NAV$","getGlobal","self","fetch","default","bind","Headers","Request","Response","getSomeJSON","text_base","img_base","img_rand","img","text","json","router","parsed_href","p_a","p_b","I_pushState_href","links","querySelectorAll","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","isParcelRequire","hostname","protocol","ws","onmessage","event","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","generated","js","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","message","overlay","createErrorOverlay","appendChild","getElementById","stackTrace","innerText","innerHTML","getParents","modules","parents","dep","Function","deps","cached"],"mappings":"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;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;A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ACJ;;;;;;;;AChCD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AA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","file":"DOM.a5443197.js","sourceRoot":"..\\test","sourcesContent":["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","import qs from \"querystring\"\r\n\r\nlet fix_jsdoc\r\n\r\n/**\r\n * # HREF/URL Parser\r\n *\r\n * Takes an href (full or relative) and pulls out the various\r\n * components to be used for instrumentation of various\r\n * high-level event handling.\r\n *\r\n * ## Examples:\r\n *\r\n * Ex1:\r\n * ```js\r\n * parse_href(\"http://localhost:1234/about?get=some#today\")\r\n * ```\r\n *\r\n *\r\n * ```js\r\n * {\r\n *   URL: \"http://localhost:1234/about?get=some#today\",\r\n *   subdomain: [],\r\n *   domain: [\"localhost:1234\"],\r\n *   path: [\"about\"],\r\n *   query: { get: \"some\" },\r\n *   hash: \"today\"\r\n * }\r\n * ```\r\n *\r\n * Ex2:\r\n * ```js\r\n * parse_href(\"https://github.com/thi-ng/umbrella/#blog-posts\")\r\n * ```\r\n * ```js\r\n * {\r\n *   URL: 'https://github.com/thi-ng/umbrella/#blog-posts',\r\n *   subdomain: [],\r\n *   domain: [\"github\", \"com\"],\r\n *   path: [\"thi-ng\", \"umbrella\"],\r\n *   query: {},\r\n *   hash: \"blog-posts\"\r\n * }\r\n * ```\r\n *\r\n * Ex3:\r\n * ```js\r\n * parse_href(\"https://very-long-sub.dom.cloud.eu/site/my/happy/\")\r\n * ```\r\n * ```js\r\n * {\r\n *   URL: 'https://very-long-sub.dom.cloud.eu/site/my/happy/',\r\n *   subdomain: [\"very-long-sub\", \"dom\"],\r\n *   domain: [\"cloud\", \"eu\"],\r\n *   path: [\"site\", \"my\", \"happy\"],\r\n *   query: {},\r\n *   hash: \"\"\r\n * }\r\n * ```\r\n *\r\n * Ex4:\r\n * ```js\r\n * parse_href(\"https://api.census.gov/data?get=NAME&in=state:01&in=county:*\")\r\n * ```\r\n * ```js\r\n * {\r\n *   URL: \"https://api.census.gov/data?get=NAME&in=state:01&in=county:*\",\r\n *   subdomain: [\"api\"],\r\n *   domain: [\"census\", \"gov\"],\r\n *   path: [\"data\"],\r\n *   query: { get: \"NAME\", in: [\"state:01\", \"county:*\"] },\r\n *   hash: \"\"\r\n * }\r\n * ```\r\n *\r\n * Ex5:\r\n * ```js\r\n * parse_href(\"/data?get=NAME&in=state#indeed\")\r\n * ```\r\n * ```js\r\n * {\r\n *   URL: \"/data?get=NAME&in=state#indeed\",\r\n *   subdomain: [],\r\n *   domain: [],\r\n *   path: [\"data\"],\r\n *   query: { get: \"NAME\", in: \"state\" },\r\n *   hash: \"indeed\"\r\n * }\r\n * ```\r\n *\r\n * @param {string} URL - full or partial URL/href\r\n *\r\n * */\r\n\r\nexport const parse_href = URL => {\r\n  let subdomain = []\r\n  let domain = []\r\n  let path = []\r\n  // split the path on any `?` and/or `#` chars (1-3 parts)\r\n  const parts = URL.split(/(?=\\?)|(?=#)/g)\r\n  // take the first component of split: the core URL\r\n  const path_str = parts[0]\r\n  // split the path_str further into individual members and\r\n  // remove the empty string between any adjacent slashes `//`\r\n  const full_path = path_str.split(\"/\").filter(x => x !== \"\")\r\n  if (/http/i.test(URL)) {\r\n    // if the input URL is HTTP(S), partition into sub components\r\n    // domain is the last two members of the 2nd component\r\n    domain = full_path[1].split(\".\").slice(-2)\r\n    // subdomain is anything before the domain\r\n    // see https://stackoverflow.com/a/56921347\r\n    // for mocking subdomain on localhost\r\n    subdomain = full_path[1].split(\".\").slice(0, -2)\r\n    // path is the last component in the\r\n    path = full_path.slice(2)\r\n  } else {\r\n    // in the case of a relative URL `<a href=\"/about\">\r\n    // the relative path is the full path\r\n    path = full_path\r\n  }\r\n  // pull out the query component as a string\r\n  const query_str = parts.filter(part => part.slice(0, 1) === \"?\")[0] || \"\"\r\n  // pull out the hash component as a string\r\n  const hash_str = parts.filter(part => part.slice(0, 1) === \"#\")[0] || \"\"\r\n  // parse the query string into conventional parts using qs\r\n  const query = qs.parse(query_str.slice(1))\r\n  // remove the actual `#` hash character from the string\r\n  const hash = hash_str.slice(1)\r\n  return { URL, subdomain, domain, path, query, hash }\r\n}\r\n","export const existsAndNotNull = (x) => x != null;\n","export const exists = (t) => t !== undefined;\n","export const hasCrypto = () => typeof window !== \"undefined\" && window[\"crypto\"] !== undefined;\n","export const hasMaxLength = (len, x) => x != null && x.length <= len;\n","export const hasMinLength = (len, x) => x != null && x.length >= len;\n","export const isFunction = (x) => typeof x === \"function\";\n","import { isFunction } from \"./is-function\";\nexport const hasPerformance = () => typeof performance !== \"undefined\" && isFunction(performance.now);\n","export const hasWASM = () => (typeof window !== \"undefined\" &&\n    typeof window[\"WebAssembly\"] !== \"undefined\") ||\n    (typeof global !== \"undefined\" &&\n        typeof global[\"WebAssembly\"] !== \"undefined\");\n","export const hasWebGL = () => {\n    try {\n        document.createElement(\"canvas\").getContext(\"webgl\");\n        return true;\n    }\n    catch (e) {\n        return false;\n    }\n};\n","export const hasWebSocket = () => typeof WebSocket !== \"undefined\";\n","export const implementsFunction = (x, fn) => x != null && typeof x[fn] === \"function\";\n","export const isArray = Array.isArray;\n","export const isArrayLike = (x) => x != null && typeof x !== \"function\" && x.length !== undefined;\n","export const isBlob = (x) => x instanceof Blob;\n","export const isBoolean = (x) => typeof x === \"boolean\";\n","export const isChrome = () => typeof window !== \"undefined\" && !!window[\"chrome\"];\n","export const isDate = (x) => x instanceof Date;\n","export const isEven = (x) => x % 2 === 0;\n","export const isFalse = (x) => x === false;\n","export const isFile = (x) => x instanceof File;\n","export const isFirefox = () => typeof window !== \"undefined\" && !!window[\"InstallTrigger\"];\n","export const isString = (x) => typeof x === \"string\";\n","import { isString } from \"./is-string\";\nconst RE = /^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;\nexport const isHexColor = (x) => isString(x) && RE.test(x);\n","export const isIE = () => typeof document !== \"undefined\" &&\n    (typeof document[\"documentMode\"] !== \"undefined\" ||\n        navigator.userAgent.indexOf(\"MSIE\") > 0);\n","export const isInRange = (min, max, x) => x >= min && x <= max;\n","export const isInt32 = (x) => typeof x === \"number\" && (x | 0) === x;\n","export const isIterable = (x) => x != null && typeof x[Symbol.iterator] === \"function\";\n","export const isMap = (x) => x instanceof Map;\n","export const isMobile = () => typeof navigator !== \"undefined\" &&\n    /mobile|tablet|ip(ad|hone|od)|android|silk|crios/i.test(navigator.userAgent);\n","export const isNaN = (x) => x !== x;\n","export const isNegative = (x) => typeof x === \"number\" && x < 0;\n","/**\n * Checks if x is null or undefined.\n *\n */\nexport const isNil = (x) => x == null;\n","export const isNode = () => {\n    if (typeof process === \"object\") {\n        if (typeof process.versions === \"object\") {\n            if (typeof process.versions.node !== \"undefined\") {\n                return true;\n            }\n        }\n    }\n    return false;\n};\n","export const isNotStringAndIterable = (x) => x != null &&\n    typeof x !== \"string\" &&\n    typeof x[Symbol.iterator] === \"function\";\n","export const isNull = (x) => x === null;\n","export const isNumber = (x) => typeof x === \"number\";\n","export const isObject = (x) => x !== null && typeof x === \"object\";\n","export const isOdd = (x) => x % 2 !== 0;\n","const OBJP = Object.getPrototypeOf;\n/**\n * Similar to `isObject()`, but also checks if prototype is that of\n * `Object` (or `null`).\n *\n * @param x\n */\nexport const isPlainObject = (x) => {\n    let p;\n    return (x != null &&\n        typeof x === \"object\" &&\n        ((p = OBJP(x)) === null || OBJP(p) === null));\n};\n","export const isPosititve = (x) => typeof x === \"number\" && x > 0;\n","export const isPrimitive = (x) => {\n    const t = typeof x;\n    return t === \"string\" || t === \"number\";\n};\n","export const isPromise = (x) => x instanceof Promise;\n","import { implementsFunction } from \"./implements-function\";\nexport const isPromiseLike = (x) => x instanceof Promise ||\n    (implementsFunction(x, \"then\") && implementsFunction(x, \"catch\"));\n","export const isRegExp = (x) => x instanceof RegExp;\n","import { isChrome } from \"./is-chrome\";\nexport const isSafari = () => typeof navigator !== \"undefined\" &&\n    /Safari/.test(navigator.userAgent) &&\n    !isChrome();\n","export const isSet = (x) => x instanceof Set;\n","export const isSymbol = (x) => typeof x === \"symbol\";\n","export const isTransferable = (x) => x instanceof ArrayBuffer ||\n    (typeof SharedArrayBuffer !== \"undefined\" &&\n        x instanceof SharedArrayBuffer) ||\n    (typeof MessagePort !== \"undefined\" && x instanceof MessagePort);\n","export const isTrue = (x) => x === true;\n","export const isTypedArray = (x) => x &&\n    (x.constructor === Float32Array ||\n        x.constructor === Uint32Array ||\n        x.constructor === Uint8Array ||\n        x.constructor === Uint8ClampedArray ||\n        x.constructor === Int8Array ||\n        x.constructor === Uint16Array ||\n        x.constructor === Int16Array ||\n        x.constructor === Int32Array ||\n        x.constructor === Float64Array);\n","export const isUint32 = (x) => typeof x === \"number\" && x >>> 0 === x;\n","export const isUndefined = (x) => x === undefined;\n","const RE = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\nexport const isUUID = (x) => RE.test(x);\n","const RE = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\nexport const isUUIDv4 = (x) => RE.test(x);\n","export const isZero = (x) => x === 0;\n","export * from \"./exists-not-null\";\nexport * from \"./exists\";\nexport * from \"./has-crypto\";\nexport * from \"./has-max-length\";\nexport * from \"./has-min-length\";\nexport * from \"./has-performance\";\nexport * from \"./has-wasm\";\nexport * from \"./has-webgl\";\nexport * from \"./has-websocket\";\nexport * from \"./implements-function\";\nexport * from \"./is-array\";\nexport * from \"./is-arraylike\";\nexport * from \"./is-blob\";\nexport * from \"./is-boolean\";\nexport * from \"./is-chrome\";\nexport * from \"./is-date\";\nexport * from \"./is-even\";\nexport * from \"./is-false\";\nexport * from \"./is-file\";\nexport * from \"./is-firefox\";\nexport * from \"./is-function\";\nexport * from \"./is-hex-color\";\nexport * from \"./is-ie\";\nexport * from \"./is-in-range\";\nexport * from \"./is-int32\";\nexport * from \"./is-iterable\";\nexport * from \"./is-map\";\nexport * from \"./is-mobile\";\nexport * from \"./is-nan\";\nexport * from \"./is-negative\";\nexport * from \"./is-nil\";\nexport * from \"./is-node\";\nexport * from \"./is-not-string-iterable\";\nexport * from \"./is-null\";\nexport * from \"./is-number\";\nexport * from \"./is-object\";\nexport * from \"./is-odd\";\nexport * from \"./is-plain-object\";\nexport * from \"./is-positive\";\nexport * from \"./is-primitive\";\nexport * from \"./is-promise\";\nexport * from \"./is-promiselike\";\nexport * from \"./is-regexp\";\nexport * from \"./is-safari\";\nexport * from \"./is-set\";\nexport * from \"./is-string\";\nexport * from \"./is-symbol\";\nexport * from \"./is-transferable\";\nexport * from \"./is-true\";\nexport * from \"./is-typedarray\";\nexport * from \"./is-uint32\";\nexport * from \"./is-undefined\";\nexport * from \"./is-uuid\";\nexport * from \"./is-uuid4\";\nexport * from \"./is-zero\";\n","import {\r\n  isObject,\r\n  isArray,\r\n  isFunction,\r\n  isPromise,\r\n  isString,\r\n  isNull,\r\n  isBoolean\r\n} from \"@thi.ng/checks\"\r\n\r\nlet fix_jsdoc\r\n\r\n// prettier-ignore\r\n/**\r\n * ### `stringify_type`\r\n *\r\n * just a little convenience function\r\n * takes some value and returns a string representation of its type\r\n * this makes it easier to create a switch statement using types\r\n *\r\n * powered by [@thi.ng/checks](http://thi.ng/checks)\r\n *\r\n */\r\nexport const stringify_type = x => {\r\n  if (isArray(x))                       return \"ARRAY\"\r\n  if (isFunction(x) && x.length === 0)  return \"THUNK\"\r\n  if (isFunction(x) && x.length > 0)    return \"FUNCTION\"\r\n  if (isPromise(x))                     return \"PROMISE\"\r\n  if (isString(x))                      return \"STRING\"\r\n  if (isBoolean(x))                     return \"BOOLEAN\"\r\n  if (isNull(x))                        return \"NULL\"\r\n  if (isObject(x))                      return \"OBJECT\"\r\n                                        return \"type_str NOT FOUND\"\r\n}\r\n","export const DEFAULT_EPS = 1e-6;\n/**\n * Internal use only. **Do NOT use in user land code!**\n */\nexport const SEMAPHORE = Symbol();\n","export const EVENT_ALL = \"*\";\nexport const EVENT_ENABLE = \"enable\";\nexport const EVENT_DISABLE = \"disable\";\n","/**\n * No-effect placeholder function.\n */\nexport const NO_OP = () => { };\n","export var LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"FINE\"] = 0] = \"FINE\";\n    LogLevel[LogLevel[\"DEBUG\"] = 1] = \"DEBUG\";\n    LogLevel[LogLevel[\"INFO\"] = 2] = \"INFO\";\n    LogLevel[LogLevel[\"WARN\"] = 3] = \"WARN\";\n    LogLevel[LogLevel[\"SEVERE\"] = 4] = \"SEVERE\";\n    LogLevel[LogLevel[\"NONE\"] = 5] = \"NONE\";\n})(LogLevel || (LogLevel = {}));\n","/**\n * Type enums for Typedarray-backed buffers.\n *\n * @see GLType\n * @see GL2TYPE\n * @see TYPE2GL\n */\nexport var Type;\n(function (Type) {\n    Type[Type[\"U8\"] = 0] = \"U8\";\n    Type[Type[\"U8C\"] = 1] = \"U8C\";\n    Type[Type[\"I8\"] = 2] = \"I8\";\n    Type[Type[\"U16\"] = 3] = \"U16\";\n    Type[Type[\"I16\"] = 4] = \"I16\";\n    Type[Type[\"U32\"] = 5] = \"U32\";\n    Type[Type[\"I32\"] = 6] = \"I32\";\n    Type[Type[\"F32\"] = 7] = \"F32\";\n    Type[Type[\"F64\"] = 8] = \"F64\";\n})(Type || (Type = {}));\n/**\n * WebGL numeric type constants. Use `GL2TYPE` to convert, if needed.\n *\n * @see Type\n * @see GL2TYPE\n * @see TYPE2GL\n */\nexport var GLType;\n(function (GLType) {\n    GLType[GLType[\"I8\"] = 5120] = \"I8\";\n    GLType[GLType[\"U8\"] = 5121] = \"U8\";\n    GLType[GLType[\"I16\"] = 5122] = \"I16\";\n    GLType[GLType[\"U16\"] = 5123] = \"U16\";\n    GLType[GLType[\"I32\"] = 5124] = \"I32\";\n    GLType[GLType[\"U32\"] = 5125] = \"U32\";\n    GLType[GLType[\"F32\"] = 5126] = \"F32\";\n})(GLType || (GLType = {}));\n/**\n * Conversion from `GLType` to `Type` enums.\n */\nexport const GL2TYPE = {\n    [5120 /* I8 */]: 2 /* I8 */,\n    [5121 /* U8 */]: 0 /* U8 */,\n    [5122 /* I16 */]: 4 /* I16 */,\n    [5123 /* U16 */]: 3 /* U16 */,\n    [5124 /* I32 */]: 6 /* I32 */,\n    [5125 /* U32 */]: 5 /* U32 */,\n    [5126 /* F32 */]: 7 /* F32 */\n};\n/**\n * Potentially lossy conversion from `Type` to `GLType` enums.\n *\n * Not all enums are mappable:\n *\n * - `F64` maps to `undefined`, since unsupported by WebGL\n * - `U8C` maps to U8\n */\nexport const TYPE2GL = {\n    [2 /* I8 */]: 5120 /* I8 */,\n    [0 /* U8 */]: 5121 /* U8 */,\n    [1 /* U8C */]: 5121 /* U8 */,\n    [4 /* I16 */]: 5122 /* I16 */,\n    [3 /* U16 */]: 5123 /* U16 */,\n    [6 /* I32 */]: 5124 /* I32 */,\n    [6 /* I32 */]: 5124 /* I32 */,\n    [5 /* U32 */]: 5125 /* U32 */,\n    [7 /* F32 */]: 5126 /* F32 */,\n    [8 /* F64 */]: undefined\n};\n/**\n * Size information (in bytes) for `Type` enums. For `GLType`, use this\n * form, e.g. `SIZEOF[GL2TYPE[GLType.F32]]`\n */\nexport const SIZEOF = {\n    [0 /* U8 */]: 1,\n    [1 /* U8C */]: 1,\n    [2 /* I8 */]: 1,\n    [3 /* U16 */]: 2,\n    [4 /* I16 */]: 2,\n    [5 /* U32 */]: 4,\n    [6 /* I32 */]: 4,\n    [7 /* F32 */]: 4,\n    [8 /* F64 */]: 8\n};\nexport const TYPEDARRAY_CTORS = {\n    [0 /* U8 */]: Uint8Array,\n    [1 /* U8C */]: Uint8ClampedArray,\n    [2 /* I8 */]: Int8Array,\n    [3 /* U16 */]: Uint16Array,\n    [4 /* I16 */]: Int16Array,\n    [5 /* U32 */]: Uint32Array,\n    [6 /* I32 */]: Int32Array,\n    [7 /* F32 */]: Float32Array,\n    [8 /* F64 */]: Float64Array,\n    [5121 /* U8 */]: Uint8Array,\n    [5120 /* I8 */]: Int8Array,\n    [5123 /* U16 */]: Uint16Array,\n    [5122 /* I16 */]: Int16Array,\n    [5125 /* U32 */]: Uint32Array,\n    [5124 /* I32 */]: Int32Array,\n    [5126 /* F32 */]: Float32Array\n};\nexport function typedArray(type, ...xs) {\n    return new TYPEDARRAY_CTORS[type](...xs);\n}\n/**\n * Returns the smallest possible *unsigned* int type enum for given `x`.\n * E.g. if `x <= 256`, the function returns `Type.U8`.\n *\n * @param x\n */\nexport const uintType = (x) => x <= 0x100 ? 0 /* U8 */ : x <= 0x10000 ? 3 /* U16 */ : 5 /* U32 */;\n/**\n * Returns the smallest possible *signed* int type enum for given `x`.\n * E.g. if `x >= -128 && x < 128`, the function returns `Type.I8`.\n *\n * @param x\n */\nexport const intType = (x) => x >= -0x80 && x < 0x80\n    ? 2 /* I8 */\n    : x >= -0x8000 && x < 0x8000\n        ? 4 /* I16 */\n        : 6 /* I32 */;\n","import { NO_OP } from \"./api/fn\";\n/**\n * Takes a `test` result or predicate function without args and throws\n * error with given `msg` if test failed (i.e. is falsy). The function\n * is only enabled if `NODE_ENV != \"production\"` or if\n * `UMBRELLA_ASSERTS = 1`.\n */\nexport const assert = typeof process === \"undefined\" ||\n    process.env.NODE_ENV !== \"production\" ||\n    process.env.UMBRELLA_ASSERTS === \"1\"\n    ? (test, msg = \"assertion failed\") => {\n        if ((typeof test === \"function\" && !test()) || !test) {\n            throw new Error(typeof msg === \"function\" ? msg() : msg);\n        }\n    }\n    : NO_OP;\n","import { LogLevel } from \"./api/logger\";\nexport const NULL_LOGGER = Object.freeze({\n    level: LogLevel.NONE,\n    fine() { },\n    debug() { },\n    info() { },\n    warn() { },\n    severe() { }\n});\nexport class ConsoleLogger {\n    constructor(id, level = LogLevel.FINE) {\n        this.id = id;\n        this.level = level;\n    }\n    fine(...args) {\n        this.level <= LogLevel.FINE && this.log(\"FINE\", args);\n    }\n    debug(...args) {\n        this.level <= LogLevel.DEBUG && this.log(\"DEBUG\", args);\n    }\n    info(...args) {\n        this.level <= LogLevel.INFO && this.log(\"INFO\", args);\n    }\n    warn(...args) {\n        this.level <= LogLevel.WARN && this.log(\"WARN\", args);\n    }\n    severe(...args) {\n        this.level <= LogLevel.SEVERE && this.log(\"SEVERE\", args);\n    }\n    log(level, args) {\n        console.log(`[${level}] ${this.id}:`, ...args);\n    }\n}\n","/**\n * Class behavior mixin based on:\n * http://raganwald.com/2015/06/26/decorators-in-es7.html\n *\n * Additionally only injects/overwrites properties in target, which are\n * NOT marked with `@nomixin` (i.e. haven't set their `configurable`\n * property descriptor flag to `false`)\n *\n * @param behaviour to mixin\n * @param sharedBehaviour\n * @returns decorator function\n */\nexport const mixin = (behaviour, sharedBehaviour = {}) => {\n    const instanceKeys = Reflect.ownKeys(behaviour);\n    const sharedKeys = Reflect.ownKeys(sharedBehaviour);\n    const typeTag = Symbol(\"isa\");\n    function _mixin(clazz) {\n        for (let key of instanceKeys) {\n            const existing = Object.getOwnPropertyDescriptor(clazz.prototype, key);\n            if (!existing || existing.configurable) {\n                Object.defineProperty(clazz.prototype, key, {\n                    value: behaviour[key],\n                    writable: true\n                });\n            }\n            else {\n                console.log(`not patching: ${clazz.name}.${key.toString()}`);\n            }\n        }\n        Object.defineProperty(clazz.prototype, typeTag, { value: true });\n        return clazz;\n    }\n    for (let key of sharedKeys) {\n        Object.defineProperty(_mixin, key, {\n            value: sharedBehaviour[key],\n            enumerable: sharedBehaviour.propertyIsEnumerable(key)\n        });\n    }\n    Object.defineProperty(_mixin, Symbol.hasInstance, {\n        value: (x) => !!x[typeTag]\n    });\n    return _mixin;\n};\n","/**\n * Property decorator factory. Sets `configurable` flag of PropertyDescriptor\n * to given state.\n *\n * @param state\n */\nexport const configurable = (state) => function (_, __, descriptor) {\n    descriptor.configurable = state;\n};\n","import { assert } from \"../assert\";\n/**\n * Method property decorator factory. Augments original method with\n * deprecation message (via console), shown when method is invoked.\n * Accepts optional message arg. Throws error if assigned property\n * is not a function.\n *\n * @param msg deprecation message\n */\nexport const deprecated = (msg, log = console.log) => function (target, prop, descriptor) {\n    const signature = `${target.constructor.name}#${prop.toString()}`;\n    const fn = descriptor.value;\n    assert(typeof fn === \"function\", `${signature} is not a function`);\n    descriptor.value = function () {\n        log(`DEPRECATED ${signature}: ${msg || \"will be removed soon\"}`);\n        return fn.apply(this, arguments);\n    };\n    return descriptor;\n};\n","/**\n * Method property decorator. Sets `configurable` flag of\n * PropertyDescriptor to `false` (same as `@configurable(false)`).\n * Intended to be used in combination with mixin decorators to enable\n * partial implementations of mixed-in behaviors in target class and\n * avoid them being overidden by mixed-in behaviour.\n */\nexport const nomixin = (_, __, descriptor) => {\n    descriptor.configurable = false;\n};\n","/**\n * Class decorator. Seals both constructor and prototype.\n *\n * @param constructor\n */\nexport const sealed = (constructor) => {\n    Object.seal(constructor);\n    Object.seal(constructor.prototype);\n};\n","import { EVENT_DISABLE, EVENT_ENABLE } from \"../api/event\";\nimport { mixin } from \"../mixin\";\n/**\n * Mixin class decorator, injects IEnable default implementation, incl.\n * a `_enabled` property. If the target also implements the `INotify`\n * interface, `enable()` and `disable()` will automatically emit the\n * respective events.\n */\nexport const IEnableMixin = mixin({\n    _enabled: true,\n    isEnabled() {\n        return this._enabled;\n    },\n    enable() {\n        this._enabled = true;\n        if (this.notify) {\n            this.notify({ id: EVENT_ENABLE, target: this });\n        }\n    },\n    disable() {\n        this._enabled = false;\n        if (this.notify) {\n            this.notify({ id: EVENT_DISABLE, target: this });\n        }\n    },\n    toggle() {\n        this._enabled ? this.disable() : this.enable();\n        return this._enabled;\n    }\n});\n","import { EVENT_ALL } from \"../api/event\";\nimport { mixin } from \"../mixin\";\nexport const inotify_dispatch = (listeners, e) => {\n    if (!listeners)\n        return;\n    for (let i = 0, n = listeners.length, l; i < n; i++) {\n        l = listeners[i];\n        l[0].call(l[1], e);\n        if (e.canceled) {\n            return;\n        }\n    }\n};\n/**\n * Mixin class decorator, injects INotify default implementation, incl.\n * a lazily instantiated `_listeners` property object, storing\n * registered listeners.\n */\nexport const INotifyMixin = mixin({\n    addListener(id, fn, scope) {\n        let l = (this._listeners = this._listeners || {})[id];\n        !l && (l = this._listeners[id] = []);\n        if (this.__listener(l, fn, scope) === -1) {\n            l.push([fn, scope]);\n            return true;\n        }\n        return false;\n    },\n    removeListener(id, fn, scope) {\n        let listeners;\n        if (!(listeners = this._listeners))\n            return false;\n        const l = listeners[id];\n        if (l) {\n            const idx = this.__listener(l, fn, scope);\n            if (idx !== -1) {\n                l.splice(idx, 1);\n                !l.length && delete listeners[id];\n                return true;\n            }\n        }\n        return false;\n    },\n    notify(e) {\n        let listeners;\n        if (!(listeners = this._listeners))\n            return false;\n        e.target === undefined && (e.target = this);\n        inotify_dispatch(listeners[e.id], e);\n        inotify_dispatch(listeners[EVENT_ALL], e);\n    },\n    __listener(listeners, f, scope) {\n        let i = listeners.length;\n        while (--i >= 0) {\n            const l = listeners[i];\n            if (l[0] === f && l[1] === scope) {\n                break;\n            }\n        }\n        return i;\n    }\n});\n","import { mixin } from \"../mixin\";\nexport const iterable = (prop) => mixin({\n    *[Symbol.iterator]() {\n        yield* this[prop];\n    }\n});\n","import { mixin } from \"../mixin\";\nexport const IWatchMixin = mixin({\n    addWatch(id, fn) {\n        this._watches = this._watches || {};\n        if (this._watches[id]) {\n            return false;\n        }\n        this._watches[id] = fn;\n        return true;\n    },\n    removeWatch(id) {\n        if (!this._watches)\n            return;\n        if (this._watches[id]) {\n            delete this._watches[id];\n            return true;\n        }\n        return false;\n    },\n    notifyWatches(oldState, newState) {\n        if (!this._watches)\n            return;\n        const w = this._watches;\n        for (let id in w) {\n            w[id](id, oldState, newState);\n        }\n    }\n});\n","export * from \"./api\";\nexport * from \"./api/event\";\nexport * from \"./api/fn\";\nexport * from \"./api/logger\";\nexport * from \"./api/typedarray\";\nexport * from \"./assert\";\nexport * from \"./logger\";\nexport * from \"./mixin\";\nexport * from \"./decorators/configurable\";\nexport * from \"./decorators/deprecated\";\nexport * from \"./decorators/nomixin\";\nexport * from \"./decorators/sealed\";\nexport * from \"./mixins/ienable\";\nexport * from \"./mixins/inotify\";\nexport * from \"./mixins/iterable\";\nexport * from \"./mixins/iwatch\";\n","import { NULL_LOGGER } from \"@thi.ng/api\";\nexport var State;\n(function (State) {\n    State[State[\"IDLE\"] = 0] = \"IDLE\";\n    State[State[\"ACTIVE\"] = 1] = \"ACTIVE\";\n    State[State[\"DONE\"] = 2] = \"DONE\";\n    State[State[\"ERROR\"] = 3] = \"ERROR\";\n    State[State[\"DISABLED\"] = 4] = \"DISABLED\"; // TODO currently unused\n})(State || (State = {}));\n/**\n * Closing behaviors.\n */\nexport var CloseMode;\n(function (CloseMode) {\n    /**\n     * Never close, even if no more inputs/outputs.\n     */\n    CloseMode[CloseMode[\"NEVER\"] = 0] = \"NEVER\";\n    /**\n     * Close when first input/output is done / removed.\n     */\n    CloseMode[CloseMode[\"FIRST\"] = 1] = \"FIRST\";\n    /**\n     * Close when last input/output is done / removed.\n     */\n    CloseMode[CloseMode[\"LAST\"] = 2] = \"LAST\";\n})(CloseMode || (CloseMode = {}));\nexport let LOGGER = NULL_LOGGER;\nexport const setLogger = (logger) => (LOGGER = logger);\n","export class Reduced {\n    constructor(val) {\n        this.value = val;\n    }\n    deref() {\n        return this.value;\n    }\n}\nexport const reduced = (x) => new Reduced(x);\nexport const isReduced = (x) => x instanceof Reduced;\nexport const ensureReduced = (x) => x instanceof Reduced ? x : new Reduced(x);\nexport const unreduced = (x) => (x instanceof Reduced ? x.deref() : x);\n","export const defError = (prefix, suffix = (msg) => (msg !== undefined ? \": \" + msg : \"\")) => class extends Error {\n    constructor(msg) {\n        super(prefix(msg) + suffix(msg));\n    }\n};\n","import { defError } from \"./deferror\";\nexport const IllegalArgumentError = defError(() => \"illegal argument(s)\");\nexport const illegalArgs = (msg) => {\n    throw new IllegalArgumentError(msg);\n};\n","import { defError } from \"./deferror\";\nexport const IllegalArityError = defError(() => \"illegal arity\");\nexport const illegalArity = (n) => {\n    throw new IllegalArityError(n);\n};\n","import { defError } from \"./deferror\";\nexport const IllegalStateError = defError(() => \"illegal state\");\nexport const illegalState = (msg) => {\n    throw new IllegalStateError(msg);\n};\n","import { defError } from \"./deferror\";\nexport const UnsupportedOperationError = defError(() => \"unsupported operation\");\nexport const unsupported = (msg) => {\n    throw new UnsupportedOperationError(msg);\n};\n","export * from \"./deferror\";\nexport * from \"./illegal-arguments\";\nexport * from \"./illegal-arity\";\nexport * from \"./illegal-state\";\nexport * from \"./unsupported\";\n","import { implementsFunction, isArrayLike, isIterable } from \"@thi.ng/checks\";\nimport { illegalArity } from \"@thi.ng/errors\";\nimport { isReduced, unreduced } from \"./reduced\";\nconst parseArgs = (args) => args.length === 2\n    ? [undefined, args[1]]\n    : args.length === 3\n        ? [args[1], args[2]]\n        : illegalArity(args.length);\nexport function reduce(...args) {\n    const rfn = args[0];\n    const init = rfn[0];\n    const complete = rfn[1];\n    const reduce = rfn[2];\n    args = parseArgs(args);\n    const acc = args[0] == null ? init() : args[0];\n    const xs = args[1];\n    return unreduced(complete(implementsFunction(xs, \"$reduce\")\n        ? xs.$reduce(reduce, acc)\n        : isArrayLike(xs)\n            ? reduceArray(reduce, acc, xs)\n            : reduceIterable(reduce, acc, xs)));\n}\nconst reduceArray = (rfn, acc, xs) => {\n    for (let i = 0, n = xs.length; i < n; i++) {\n        acc = rfn(acc, xs[i]);\n        if (isReduced(acc)) {\n            acc = acc.deref();\n            break;\n        }\n    }\n    return acc;\n};\nconst reduceIterable = (rfn, acc, xs) => {\n    for (let x of xs) {\n        acc = rfn(acc, x);\n        if (isReduced(acc)) {\n            acc = acc.deref();\n            break;\n        }\n    }\n    return acc;\n};\n/**\n * Convenience helper for building a full `Reducer` using the identity\n * function (i.e. `(x) => x`) as completion step (true for 90% of all\n * bundled transducers).\n *\n * @param init init step of reducer\n * @param rfn reduction step of reducer\n */\nexport const reducer = (init, rfn) => [init, (acc) => acc, rfn];\nexport const $$reduce = (rfn, args) => {\n    const n = args.length - 1;\n    return isIterable(args[n])\n        ? args.length > 1\n            ? reduce(rfn.apply(null, args.slice(0, n)), args[n])\n            : reduce(rfn(), args[0])\n        : undefined;\n};\n","import { reducer } from \"../reduce\";\nexport function push(xs) {\n    return xs\n        ? [...xs]\n        : reducer(() => [], (acc, x) => (acc.push(x), acc));\n}\n","import { NO_OP, SEMAPHORE } from \"@thi.ng/api\";\nimport { isIterable } from \"@thi.ng/checks\";\nimport { isReduced, unreduced } from \"./reduced\";\nimport { push } from \"./rfn/push\";\n/**\n * Takes a transducer and input iterable. Returns iterator of\n * transformed results.\n *\n * @param xform\n * @param xs\n */\nexport function* iterator(xform, xs) {\n    const rfn = xform(push());\n    const complete = rfn[1];\n    const reduce = rfn[2];\n    for (let x of xs) {\n        const y = reduce([], x);\n        if (isReduced(y)) {\n            yield* unreduced(complete(y.deref()));\n            return;\n        }\n        if (y.length) {\n            yield* y;\n        }\n    }\n    yield* unreduced(complete([]));\n}\n/**\n * Optimized version of `iterator()` for transducers which are\n * guaranteed to:\n *\n * 1) Only produce none or a single result per input\n * 2) Do not require a `completion` reduction step\n *\n * @param xform\n * @param xs\n */\nexport function* iterator1(xform, xs) {\n    const reduce = xform([NO_OP, NO_OP, (_, x) => x])[2];\n    for (let x of xs) {\n        let y = reduce(SEMAPHORE, x);\n        if (isReduced(y)) {\n            y = unreduced(y.deref());\n            if (y !== SEMAPHORE) {\n                yield y;\n            }\n            return;\n        }\n        if (y !== SEMAPHORE) {\n            yield y;\n        }\n    }\n}\n/**\n * Helper function used by various transducers to wrap themselves as\n * transforming iterators. Delegates to `iterator1()` by default.\n *\n * @param xform\n * @param args\n * @param impl\n */\nexport const $iter = (xform, args, impl = iterator1) => {\n    const n = args.length - 1;\n    return isIterable(args[n])\n        ? args.length > 1\n            ? impl(xform.apply(null, args.slice(0, n)), args[n])\n            : impl(xform(), args[0])\n        : undefined;\n};\n","/**\n * Reducer composition helper. Takes existing reducer `rfn` (a 3-tuple)\n * and a reducing function `fn`. Returns a new reducer tuple of this\n * form:\n *\n * ```\n * [rfn[0], rfn[1], fn]\n * ```\n *\n * `rfn[2]` reduces values of type `B` into an accumulator of type `A`.\n * `fn` accepts values of type `C` and produces interim results of type\n * `B`, which are then (possibly) passed to the \"inner\" `rfn[2]`\n * function. Therefore the resulting reducer takes inputs of `C` and an\n * accumulator of type `A`.\n *\n * It is assumed that `fn` internally calls `rfn[2]` to pass its own\n * results for further processing by the nested reducer `rfn`.\n *\n * @param rfn\n * @param fn\n */\nexport const compR = (rfn, fn) => [rfn[0], rfn[1], fn];\n","import { compR } from \"../func/compr\";\nimport { iterator1 } from \"../iterator\";\nexport function map(fn, src) {\n    return src\n        ? iterator1(map(fn), src)\n        : (rfn) => {\n            const r = rfn[2];\n            return compR(rfn, (acc, x) => r(acc, fn(x)));\n        };\n}\n","import { illegalArity } from \"@thi.ng/errors\";\nimport { reduce } from \"./reduce\";\nimport { map } from \"./xform/map\";\nexport function transduce(...args) {\n    let acc, xs;\n    switch (args.length) {\n        case 4:\n            xs = args[3];\n            acc = args[2];\n            break;\n        case 3:\n            xs = args[2];\n            break;\n        case 2:\n            return map((x) => transduce(args[0], args[1], x));\n        default:\n            illegalArity(args.length);\n    }\n    return reduce(args[0](args[1]), acc, xs);\n}\n","import { NO_OP } from \"@thi.ng/api\";\nimport { transduce } from \"./transduce\";\nconst NO_OP_REDUCER = [NO_OP, NO_OP, NO_OP];\nexport function run(tx, ...args) {\n    if (args.length === 1) {\n        transduce(tx, NO_OP_REDUCER, args[0]);\n    }\n    else {\n        const fx = args[0];\n        transduce(tx, [NO_OP, NO_OP, (_, x) => fx(x)], args[1]);\n    }\n}\n","import { isReduced } from \"./reduced\";\nimport { push } from \"./rfn/push\";\n/**\n * Single-step transducer execution wrapper.\n * Returns array if transducer produces multiple results\n * and undefined if there was no output. Else returns single\n * result value.\n *\n * Likewise, once a transducer has produced a final / reduced\n * value, all further invocations of the stepper function will\n * return undefined.\n *\n * ```\n * // single result\n * step(map(x => x * 10))(1);\n * // 10\n *\n * // multiple results\n * step(mapcat(x => [x, x + 1, x + 2]))(1)\n * // [ 1, 2, 3 ]\n *\n * // no result\n * f = step(filter((x) => !(x & 1)))\n * f(1); // undefined\n * f(2); // 2\n *\n * // reduced value termination\n * f = step(take(2));\n * f(1); // 1\n * f(1); // 1\n * f(1); // undefined\n * f(1); // undefined\n * ```\n *\n * @param tx\n */\nexport const step = (tx) => {\n    const [_, complete, reduce] = tx(push());\n    _;\n    let done = false;\n    return (x) => {\n        if (!done) {\n            let acc = reduce([], x);\n            done = isReduced(acc);\n            if (done) {\n                acc = complete(acc.deref());\n            }\n            return acc.length === 1 ? acc[0] : acc.length > 0 ? acc : undefined;\n        }\n    };\n};\n","import { $$reduce, reducer } from \"../reduce\";\nexport const __mathop = (rfn, fn, initDefault, args) => {\n    const res = $$reduce(rfn, args);\n    if (res !== undefined) {\n        return res;\n    }\n    const init = args[0] || initDefault;\n    return reducer(() => init, fn);\n};\n","import { __mathop } from \"../internal/mathop\";\nexport function add(...args) {\n    return __mathop(add, (acc, x) => acc + x, 0, args);\n}\n","import { reduce, reducer } from \"../reduce\";\nexport function assocMap(xs) {\n    return xs\n        ? reduce(assocMap(), xs)\n        : reducer(() => new Map(), (acc, [k, v]) => acc.set(k, v));\n}\n","import { reduce, reducer } from \"../reduce\";\nexport function assocObj(xs) {\n    return xs\n        ? reduce(assocObj(), xs)\n        : reducer(() => ({}), (acc, [k, v]) => ((acc[k] = v), acc));\n}\n","import { reduce, reducer } from \"../reduce\";\nexport function conj(xs) {\n    return xs\n        ? reduce(conj(), xs)\n        : reducer(() => new Set(), (acc, x) => acc.add(x));\n}\n","import { reducer, $$reduce } from \"../reduce\";\nexport function count(...args) {\n    const res = $$reduce(count, args);\n    if (res !== undefined) {\n        return res;\n    }\n    let offset = args[0] || 0;\n    let step = args[1] || 1;\n    return reducer(() => offset, (acc, _) => acc + step);\n}\n","import { reduce, reducer } from \"../reduce\";\nexport function div(init, xs) {\n    return xs\n        ? reduce(div(init), xs)\n        : reducer(() => init, (acc, x) => acc / x);\n}\n","import { $$reduce, reducer } from \"../reduce\";\nimport { reduced } from \"../reduced\";\nexport function every(...args) {\n    const res = $$reduce(every, args);\n    if (res !== undefined) {\n        return res;\n    }\n    const pred = args[0];\n    return reducer(() => true, pred\n        ? (acc, x) => (pred(x) ? acc : reduced(false))\n        : (acc, x) => (x ? acc : reduced(false)));\n}\n","import { $$reduce, reducer } from \"../reduce\";\nexport function fill(...args) {\n    const res = $$reduce(fill, args);\n    if (res !== undefined) {\n        return res;\n    }\n    let start = args[0] || 0;\n    return reducer(() => [], (acc, x) => ((acc[start++] = x), acc));\n}\nexport function fillN(...args) {\n    return fill(...args);\n}\n","import { illegalArity } from \"@thi.ng/errors\";\nexport function comp(...fns) {\n    let [a, b, c, d, e, f, g, h, i, j] = fns;\n    switch (fns.length) {\n        case 0:\n            illegalArity(0);\n        case 1:\n            return a;\n        case 2:\n            return (...xs) => a(b(...xs));\n        case 3:\n            return (...xs) => a(b(c(...xs)));\n        case 4:\n            return (...xs) => a(b(c(d(...xs))));\n        case 5:\n            return (...xs) => a(b(c(d(e(...xs)))));\n        case 6:\n            return (...xs) => a(b(c(d(e(f(...xs))))));\n        case 7:\n            return (...xs) => a(b(c(d(e(f(g(...xs)))))));\n        case 8:\n            return (...xs) => a(b(c(d(e(f(g(h(...xs))))))));\n        case 9:\n            return (...xs) => a(b(c(d(e(f(g(h(i(...xs)))))))));\n        case 10:\n        default:\n            const fn = (...xs) => a(b(c(d(e(f(g(h(i(j(...xs))))))))));\n            return fns.length === 10 ? fn : comp(fn, ...fns.slice(10));\n    }\n}\nexport function compL(...fns) {\n    return comp.apply(null, fns.reverse());\n}\n/**\n * @deprecated renamed to `compL`\n */\nexport const compI = compL;\n","export function complement(f) {\n    return (...xs) => !f(...xs);\n}\n","export const constantly = (x) => () => x;\n","export const delay = (body) => new Delay(body);\nexport class Delay {\n    constructor(body) {\n        this.body = body;\n        this.realized = false;\n    }\n    deref() {\n        if (!this.realized) {\n            this.value = this.body();\n            this.realized = true;\n        }\n        return this.value;\n    }\n    isRealized() {\n        return this.realized;\n    }\n}\n","export const delayed = (x, t) => new Promise((resolve) => setTimeout(() => resolve(x), t));\n","export const identity = (x) => x;\n","/**\n * Returns f(x) iff `x` is not null or undefined.\n *\n * @param f\n * @param x\n */\nexport const ifDef = (f, x) => x != null ? f(x) : undefined;\n","export function juxt(...fns) {\n    const [a, b, c, d, e, f, g, h] = fns;\n    switch (fns.length) {\n        case 1:\n            return (x) => [a(x)];\n        case 2:\n            return (x) => [a(x), b(x)];\n        case 3:\n            return (x) => [a(x), b(x), c(x)];\n        case 4:\n            return (x) => [a(x), b(x), c(x), d(x)];\n        case 5:\n            return (x) => [a(x), b(x), c(x), d(x), e(x)];\n        case 6:\n            return (x) => [a(x), b(x), c(x), d(x), e(x), f(x)];\n        case 7:\n            return (x) => [a(x), b(x), c(x), d(x), e(x), f(x), g(x)];\n        case 8:\n            return (x) => [a(x), b(x), c(x), d(x), e(x), f(x), g(x), h(x)];\n        default:\n            return (x) => {\n                let res = new Array(fns.length);\n                for (let i = fns.length; --i >= 0;) {\n                    res[i] = fns[i](x);\n                }\n                return res;\n            };\n    }\n}\n","import { illegalArgs } from \"@thi.ng/errors\";\nexport function partial(fn, ...args) {\n    let [a, b, c, d, e, f, g, h] = args;\n    switch (args.length) {\n        case 1:\n            return (...xs) => fn(a, ...xs);\n        case 2:\n            return (...xs) => fn(a, b, ...xs);\n        case 3:\n            return (...xs) => fn(a, b, c, ...xs);\n        case 4:\n            return (...xs) => fn(a, b, c, d, ...xs);\n        case 5:\n            return (...xs) => fn(a, b, c, d, e, ...xs);\n        case 6:\n            return (...xs) => fn(a, b, c, d, e, f, ...xs);\n        case 7:\n            return (...xs) => fn(a, b, c, d, e, f, g, ...xs);\n        case 8:\n            return (...xs) => fn(a, b, c, d, e, f, g, h, ...xs);\n        default:\n            illegalArgs();\n    }\n}\nexport const foo = partial((a, b) => a + b, \"a\");\n","/**\n * Takes an `init` value and a number of functions and/or function\n * tuples, consisting of: `[fn, ...args]`. Executes each function\n * (or tuple) with the return value of the previous expression inserted\n * as first argument, using `init` for the first expression.\n *\n * ```\n * const neg = (x) => -x;\n * const sub = (a, b) => a - b;\n * const div = (a, b) => a / b;\n *\n * threadFirst(\n *   5,\n *   neg,       // -5\n *   [sub, 20], // -5 - 20 = -25\n *   [div, 10]  // -25 / 10 = -2.5\n * );\n *\n * // -2.5\n * ```\n *\n * @see threadLast\n *\n * @param init\n * @param fns\n */\nexport const threadFirst = (init, ...fns) => fns.reduce((acc, expr) => typeof expr === \"function\"\n    ? expr(acc)\n    : expr[0](acc, ...expr.slice(1)), init);\n","/**\n * Takes an `init` value and a number of functions and/or function\n * tuples, consisting of: `[fn, ...args]`. Executes each function\n * (or tuple) with the return value of the previous expression inserted\n * as last argument, using `init` for the first expression.\n *\n * ```\n * const neg = (x) => -x;\n * const sub = (a, b) => a - b;\n * const div = (a, b) => a / b;\n *\n * threadLast(\n *   5,\n *   neg,       // -5\n *   [sub, 10], // 20 - (-5) = 25\n *   [div, 10]  // 10 / 25 = 0.4\n * );\n *\n * // 0.4\n * ```\n *\n * @see threadFirst\n *\n * @param init\n * @param fns\n */\nexport const threadLast = (init, ...fns) => fns.reduce((acc, expr) => typeof expr === \"function\"\n    ? expr(acc)\n    : expr[0](...expr.slice(1), acc), init);\n","/**\n * Takes a function returning either a no-arg function (thunk) or its\n * already realized (non-function) result. Re-executes thunk for as long\n * as it returns another function/thunk. Once a non-function result has\n * been produced, `trampoline` returns that value itself. If the final\n * result should be function, it needs to wrapped (e.g. as a 1-elem\n * array).\n *\n * This function should be used for non-stack consuming recursion. I.e.\n * a trampoline is a form of continuation passing style and only ever\n * consumes max. 2 extra stack frames, independent from recursion depth.\n *\n * ```\n * const countdown = (acc, x) =>\n *   x >= 0 ?\n *     () => (acc.push(x), countdown(acc, x-1)) :\n *     acc;\n *\n * trampoline(countdown([], 4))\n * // [ 4, 3, 2, 1, 0 ]\n *\n * trampoline(countdown([], -1))\n * // []\n * ```\n *\n * @param f\n */\nexport const trampoline = (f) => {\n    while (typeof f === \"function\") {\n        f = f();\n    }\n    return f;\n};\n","export * from \"./comp\";\nexport * from \"./complement\";\nexport * from \"./constantly\";\nexport * from \"./delay\";\nexport * from \"./delayed\";\nexport * from \"./identity\";\nexport * from \"./ifdef\";\nexport * from \"./juxt\";\nexport * from \"./partial\";\nexport * from \"./thread-first\";\nexport * from \"./thread-last\";\nexport * from \"./trampoline\";\n","import { identity } from \"@thi.ng/compose\";\nimport { push } from \"../rfn/push\";\n/**\n * Shared helper function for groupBy* reducers\n *\n * @param opts\n */\nexport const __groupByOpts = (opts) => (Object.assign({ key: identity, group: push() }, opts));\n","import { __groupByOpts } from \"../internal/group-opts\";\nimport { $$reduce, reducer } from \"../reduce\";\nexport function groupByMap(...args) {\n    const res = $$reduce(groupByMap, args);\n    if (res !== undefined) {\n        return res;\n    }\n    const opts = __groupByOpts(args[0]);\n    const [init, _, reduce] = opts.group;\n    _; // ignore\n    return reducer(() => new Map(), (acc, x) => {\n        const k = opts.key(x);\n        return acc.set(k, acc.has(k)\n            ? reduce(acc.get(k), x)\n            : reduce(init(), x));\n    });\n}\n","import { identity } from \"@thi.ng/compose\";\nimport { $$reduce } from \"../reduce\";\nimport { count } from \"./count\";\nimport { groupByMap } from \"./group-by-map\";\nexport function frequencies(...args) {\n    return ($$reduce(frequencies, args) ||\n        groupByMap({ key: args[0] || identity, group: count() }));\n}\n","import { __groupByOpts } from \"../internal/group-opts\";\nimport { $$reduce, reducer } from \"../reduce\";\nexport function groupByObj(...args) {\n    const res = $$reduce(groupByObj, args);\n    if (res) {\n        return res;\n    }\n    const opts = __groupByOpts(args[0]);\n    const [_init, _, _reduce] = opts.group;\n    _; // ignore\n    return reducer(() => ({}), (acc, x) => {\n        const k = opts.key(x);\n        acc[k] = acc[k]\n            ? _reduce(acc[k], x)\n            : _reduce(_init(), x);\n        return acc;\n    });\n}\n","import { groupByObj } from \"./group-by-obj\";\nimport { push } from \"./push\";\nconst branchPred = (key, b, l, r) => (x) => (key(x) & b ? r : l);\n/**\n * Creates a bottom-up, unbalanced binary tree of desired depth and\n * choice of data structures. Any value can be indexed, as long as a\n * numeric representation (key) can be obtained. This numeric key is\n * produced by the supplied `key` function. IMPORTANT: the returned\n * values MUST be unsigned and less than the provided bit length (i.e.\n * `0 .. (2^bits) - 1` range).\n *\n * By default the tree is constructed using plain objects for branches,\n * with left branches stored as \"l\" and right ones as \"r\". The original\n * values are stored at the lowest tree level using a customizable\n * nested reducer. By default leaves are collected in arrays (using the\n * `push()` reducer), but any suitable reducer can be used (e.g.\n * `conj()` to collect values into sets).\n *\n * Index by lowest 4-bits of ID value:\n *\n * ```\n * tree = reduce(\n *   groupBinary(4, x => x.id & 0xf),\n *   [{id: 3}, {id: 8}, {id: 15}, {id: 0}]\n * )\n *\n * tree.l.l.l.l\n * // [ { id: 0 } ]\n * tree.r.r.r.r\n * // [ { id: 15 } ]\n * tree.l.l.r.r\n * // [ { id: 3 } ]\n * ```\n *\n * Collecting as array:\n *\n * ```\n * tree = reduce(\n *   groupBinary(4, identity, ()=>[], push(), 0, 1),\n *   [1,2,3,4,5,6,7]\n * )\n *\n * tree[0][1][0][1] // 0101 == 5 in binary\n * // [ 5 ]\n *\n * tree[0][1][1]    // 011* == branch\n * // [ [ 6 ], [ 7 ] ]\n * ```\n *\n * Using `frequencies` as leaf reducer:\n *\n * ```\n * tree = reduce(\n *   groupBinary(3, (x: string) => x.length, null, frequencies()),\n *   \"aa bbb dddd ccccc bbb eeee fff\".split(\" \")\n * )\n * // [ [ undefined,\n * //     [ Map { 'aa' => 1 },\n * //       Map { 'bbb' => 2, 'fff' => 1 } ] ],\n * //   [ [ Map { 'dddd' => 1, 'eeee' => 1 },\n * //       Map { 'ccccc' => 1 } ] ] ]\n *\n * tree[0][1][1]\n * // Map { 'bbb' => 2, 'fff' => 1 }\n * ```\n *\n * @param bits index range (always from 0)\n * @param key key function\n * @param branch function to create a new branch container (object or\n * array)\n * @param leaf reducer for leaf collection\n * @param left key for storing left branches (e.g. `0` for arrays)\n * @param right key for storing right branches (e.g. `1` for arrays)\n */\nexport const groupBinary = (bits, key, branch, leaf, left = \"l\", right = \"r\") => {\n    const init = branch || (() => ({}));\n    let rfn = groupByObj({\n        key: branchPred(key, 1, left, right),\n        group: leaf || push()\n    });\n    for (let i = 2, maxIndex = 1 << bits; i < maxIndex; i <<= 1) {\n        rfn = groupByObj({\n            key: branchPred(key, i, left, right),\n            group: [init, rfn[1], rfn[2]]\n        });\n    }\n    return [init, rfn[1], rfn[2]];\n};\n","import { NO_OP } from \"@thi.ng/api\";\nimport { reduce, reducer } from \"../reduce\";\nexport function last(xs) {\n    return xs ? reduce(last(), xs) : reducer(NO_OP, (_, x) => x);\n}\n","export const compare = (a, b) => {\n    if (a === b) {\n        return 0;\n    }\n    if (a == null) {\n        return b == null ? 0 : -1;\n    }\n    if (b == null) {\n        return a == null ? 0 : 1;\n    }\n    if (typeof a.compare === \"function\") {\n        return a.compare(b);\n    }\n    if (typeof b.compare === \"function\") {\n        return -b.compare(a);\n    }\n    return a < b ? -1 : a > b ? 1 : 0;\n};\n/**\n * Numeric comparator (ascending order)\n *\n * @param a\n * @param b\n */\nexport const compareNumAsc = (a, b) => a - b;\n/**\n * Numeric comparator (descending order)\n *\n * @param a\n * @param b\n */\nexport const compareNumDesc = (a, b) => b - a;\n","import { compare } from \"@thi.ng/compare\";\nimport { $$reduce, reducer } from \"../reduce\";\nexport function maxCompare(...args) {\n    const res = $$reduce(maxCompare, args);\n    if (res !== undefined) {\n        return res;\n    }\n    const init = args[0];\n    const cmp = args[1] || compare;\n    return reducer(init, (acc, x) => (cmp(acc, x) >= 0 ? acc : x));\n}\n","import { reduce, reducer } from \"../reduce\";\nexport function max(xs) {\n    return xs\n        ? reduce(max(), xs)\n        : reducer(() => -Infinity, (acc, x) => Math.max(acc, x));\n}\n","import { reduce } from \"../reduce\";\nexport function mean(xs) {\n    let n = 1;\n    return xs\n        ? reduce(mean(), xs)\n        : [\n            () => (n = 0),\n            (acc) => (n > 1 ? acc / n : acc),\n            (acc, x) => (n++, acc + x)\n        ];\n}\n","import { compare } from \"@thi.ng/compare\";\nimport { $$reduce, reducer } from \"../reduce\";\nexport function minCompare(...args) {\n    const res = $$reduce(minCompare, args);\n    if (res !== undefined) {\n        return res;\n    }\n    const init = args[0];\n    const cmp = args[1] || compare;\n    return reducer(init, (acc, x) => (cmp(acc, x) <= 0 ? acc : x));\n}\n","import { reduce, reducer } from \"../reduce\";\nexport function min(xs) {\n    return xs\n        ? reduce(min(), xs)\n        : reducer(() => Infinity, (acc, x) => Math.min(acc, x));\n}\n","import { __mathop } from \"../internal/mathop\";\nexport function mul(...args) {\n    return __mathop(mul, (acc, x) => acc * x, 1, args);\n}\n","import { reducer } from \"../reduce\";\nexport const pushCopy = () => reducer(() => [], (acc, x) => ((acc = acc.slice()).push(x), acc));\n","import { reduce } from \"../reduce\";\nimport { isReduced, reduced } from \"../reduced\";\nexport function reductions(rfn, xs) {\n    const [init, complete, _reduce] = rfn;\n    return xs\n        ? reduce(reductions(rfn), xs)\n        : [\n            () => [init()],\n            (acc) => ((acc[acc.length - 1] = complete(acc[acc.length - 1])), acc),\n            (acc, x) => {\n                const res = _reduce(acc[acc.length - 1], x);\n                if (isReduced(res)) {\n                    acc.push(res.deref());\n                    return reduced(acc);\n                }\n                acc.push(res);\n                return acc;\n            }\n        ];\n}\n","import { $$reduce, reducer } from \"../reduce\";\nimport { reduced } from \"../reduced\";\nexport function some(...args) {\n    const res = $$reduce(some, args);\n    if (res !== undefined) {\n        return res;\n    }\n    const pred = args[0];\n    return reducer(() => false, pred\n        ? (acc, x) => (pred(x) ? reduced(true) : acc)\n        : (acc, x) => (x ? reduced(true) : acc));\n}\n","import { reducer } from \"../reduce\";\nexport function str(sep, xs) {\n    sep = sep || \"\";\n    let first = true;\n    return xs\n        ? [...xs].join(sep)\n        : reducer(() => \"\", (acc, x) => ((acc = first ? acc + x : acc + sep + x), (first = false), acc));\n}\n","import { __mathop } from \"../internal/mathop\";\nexport function sub(...args) {\n    return __mathop(sub, (acc, x) => acc - x, 0, args);\n}\n","import { compR } from \"../func/compr\";\nimport { iterator1 } from \"../iterator\";\nexport function benchmark(src) {\n    return src\n        ? iterator1(benchmark(), src)\n        : (rfn) => {\n            const r = rfn[2];\n            let prev = Date.now();\n            return compR(rfn, (acc, _) => {\n                const t = Date.now();\n                const x = t - prev;\n                prev = t;\n                return r(acc, x);\n            });\n        };\n}\n","import { compR } from \"../func/compr\";\nimport { ensureReduced, isReduced, unreduced } from \"../reduced\";\n/**\n * Transducer to concatenate iterable values. Iterates over each input\n * and emits individual values down stream, therefore removing one level\n * of nesting from the input. If, during processing, the transducer is\n * given a wrapped `reduced()` input iterable, it will still be\n * processed as normal, but then immediately triggers early termination\n * by wrapping its own result in `reduced()`. E.g. this behavior allows\n * a `mapcat()` user functions to benefit from `reduced` results.\n *\n * ```\n * [...iterator(comp(map((x) => [x, x]), cat()), [1, 2, 3, 4])]\n * // [ 1, 1, 2, 2, 3, 3, 4, 4 ]\n *\n * [...iterator(\n *   comp(\n *     mapIndexed((i, x) => [[i], [x, x]]),\n *     cat(),\n *     cat()\n *   ),\n *   \"abc\"\n * )]\n * // [ 0, 'a', 'a', 1, 'b', 'b', 2, 'c', 'c' ]\n *\n * [...mapcat((x)=>(x > 1 ? reduced([x, x]) : [x, x]), [1, 2, 3, 4])]\n * // [ 1, 1, 2, 2 ]\n * ```\n *\n * @see thi.ng/transducers/iter/concat\n * @see thi.ng/transducers/xform/mapcat\n */\nexport const cat = () => (rfn) => {\n    const r = rfn[2];\n    return compR(rfn, (acc, x) => {\n        if (x) {\n            for (let y of unreduced(x)) {\n                acc = r(acc, y);\n                if (isReduced(acc)) {\n                    break;\n                }\n            }\n        }\n        return isReduced(x) ? ensureReduced(acc) : acc;\n    });\n};\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nimport { ensureReduced } from \"../reduced\";\nexport function converge(...args) {\n    return ($iter(converge, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const pred = args[0];\n            let prev = SEMAPHORE;\n            let done = false;\n            return compR(rfn, (acc, x) => {\n                if (done || (prev !== SEMAPHORE && pred(prev, x))) {\n                    done = true;\n                    return ensureReduced(r(acc, x));\n                }\n                prev = x;\n                return r(acc, x);\n            });\n        }));\n}\n","import { isReduced } from \"../reduced\";\nexport function range(from, to, step) {\n    return new Range(from, to, step);\n}\n/**\n * Simple class wrapper around given range interval and implementing\n * `Iterable` and `IReducible` interfaces, the latter is used to\n * accelerate use with `reduce`.\n */\nexport class Range {\n    constructor(from, to, step) {\n        if (from === undefined) {\n            from = 0;\n            to = Infinity;\n        }\n        else if (to === undefined) {\n            to = from;\n            from = 0;\n        }\n        step = step === undefined ? (from < to ? 1 : -1) : step;\n        this.from = from;\n        this.to = to;\n        this.step = step;\n    }\n    *[Symbol.iterator]() {\n        const step = this.step;\n        const to = this.to;\n        let from = this.from;\n        if (step > 0) {\n            while (from < to) {\n                yield from;\n                from += step;\n            }\n        }\n        else if (step < 0) {\n            while (from > to) {\n                yield from;\n                from += step;\n            }\n        }\n    }\n    $reduce(rfn, acc) {\n        const step = this.step;\n        if (step > 0) {\n            for (let i = this.from, n = this.to; i < n && !isReduced(acc); i += step) {\n                acc = rfn(acc, i);\n            }\n        }\n        else {\n            for (let i = this.from, n = this.to; i > n && !isReduced(acc); i += step) {\n                acc = rfn(acc, i);\n            }\n        }\n        return acc;\n    }\n}\n","import { illegalArity } from \"@thi.ng/errors\";\nimport { range } from \"./range\";\nexport function* range2d(...args) {\n    let fromX, toX, stepX;\n    let fromY, toY, stepY;\n    switch (args.length) {\n        case 6:\n            stepX = args[4];\n            stepY = args[5];\n        case 4:\n            [fromX, toX, fromY, toY] = args;\n            break;\n        case 2:\n            [toX, toY] = args;\n            fromX = fromY = 0;\n            break;\n        default:\n            illegalArity(args.length);\n    }\n    const rx = range(fromX, toX, stepX);\n    for (let y of range(fromY, toY, stepY)) {\n        for (let x of rx) {\n            yield [x, y];\n        }\n    }\n}\n","export function* zip(...src) {\n    const iters = src.map((s) => s[Symbol.iterator]());\n    while (true) {\n        const tuple = [];\n        for (let i of iters) {\n            let v = i.next();\n            if (v.done) {\n                return;\n            }\n            tuple.push(v.value);\n        }\n        yield tuple;\n    }\n}\n","import { illegalArgs } from \"@thi.ng/errors\";\nimport { range } from \"../iter/range\";\nimport { range2d } from \"../iter/range2d\";\nimport { zip } from \"../iter/zip\";\nimport { iterator1 } from \"../iterator\";\nimport { add } from \"../rfn/add\";\nimport { transduce } from \"../transduce\";\nimport { map } from \"./map\";\nexport const buildKernel1d = (weights, w) => {\n    const w2 = w >> 1;\n    return [...zip(weights, range(-w2, w2 + 1))];\n};\nexport const buildKernel2d = (weights, w, h) => {\n    const w2 = w >> 1;\n    const h2 = h >> 1;\n    return [...zip(weights, range2d(-w2, w2 + 1, -h2, h2 + 1))];\n};\nconst kernelLookup1d = (src, x, width, wrap, border) => wrap\n    ? ({ 0: w, 1: ox }) => {\n        const xx = x < -ox ? width + ox : x >= width - ox ? ox - 1 : x + ox;\n        return w * src[xx];\n    }\n    : ({ 0: w, 1: ox }) => {\n        return x < -ox || x >= width - ox ? border : w * src[x + ox];\n    };\nconst kernelLookup2d = (src, x, y, width, height, wrap, border) => wrap\n    ? ({ 0: w, 1: { 0: ox, 1: oy } }) => {\n        const xx = x < -ox ? width + ox : x >= width - ox ? ox - 1 : x + ox;\n        const yy = y < -oy ? height + oy : y >= height - oy ? oy - 1 : y + oy;\n        return w * src[yy * width + xx];\n    }\n    : ({ 0: w, 1: { 0: ox, 1: oy } }) => {\n        return x < -ox || y < -oy || x >= width - ox || y >= height - oy\n            ? border\n            : w * src[(y + oy) * width + x + ox];\n    };\nconst kernelError = () => illegalArgs(`no kernel or kernel config`);\nexport function convolve1d(opts, indices) {\n    if (indices) {\n        return iterator1(convolve1d(opts), indices);\n    }\n    const { src, width } = opts;\n    const wrap = opts.wrap !== false;\n    const border = opts.border || 0;\n    const rfn = opts.reduce || add;\n    let kernel = opts.kernel;\n    if (!kernel) {\n        !(opts.weights && opts.kwidth) && kernelError();\n        kernel = buildKernel1d(opts.weights, opts.kwidth);\n    }\n    return map((p) => transduce(map(kernelLookup1d(src, p, width, wrap, border)), rfn(), kernel));\n}\nexport function convolve2d(opts, indices) {\n    if (indices) {\n        return iterator1(convolve2d(opts), indices);\n    }\n    const { src, width, height } = opts;\n    const wrap = opts.wrap !== false;\n    const border = opts.border || 0;\n    const rfn = opts.reduce || add;\n    let kernel = opts.kernel;\n    if (!kernel) {\n        !(opts.weights && opts.kwidth && opts.kheight) && kernelError();\n        kernel = buildKernel2d(opts.weights, opts.kwidth, opts.kheight);\n    }\n    return map((p) => transduce(map(kernelLookup2d(src, p[0], p[1], width, height, wrap, border)), rfn(), kernel));\n}\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function dedupe(...args) {\n    return ($iter(dedupe, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const equiv = args[0];\n            let prev = SEMAPHORE;\n            return compR(rfn, equiv\n                ? (acc, x) => {\n                    acc =\n                        prev !== SEMAPHORE && equiv(prev, x)\n                            ? acc\n                            : r(acc, x);\n                    prev = x;\n                    return acc;\n                }\n                : (acc, x) => {\n                    acc = prev === x ? acc : r(acc, x);\n                    prev = x;\n                    return acc;\n                });\n        }));\n}\n","import { delayed as _delayed } from \"@thi.ng/compose\";\nimport { map } from \"./map\";\n/**\n * Yields transducer which wraps incoming values in promises, which each\n * resolve after specified delay time (in ms).\n *\n * **Only to be used in async contexts and NOT with `transduce`\n * directly.**\n *\n * @param t\n */\nexport const delayed = (t) => map((x) => _delayed(x, t));\n","import { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function distinct(...args) {\n    return ($iter(distinct, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const opts = (args[0] || {});\n            const key = opts.key;\n            const seen = (opts.cache || (() => new Set()))();\n            return compR(rfn, key\n                ? (acc, x) => {\n                    const k = key(x);\n                    return !seen.has(k) ? (seen.add(k), r(acc, x)) : acc;\n                }\n                : (acc, x) => !seen.has(x) ? (seen.add(x), r(acc, x)) : acc);\n        }));\n}\n","import { compR } from \"../func/compr\";\nimport { iterator1 } from \"../iterator\";\nexport function throttle(pred, src) {\n    return src\n        ? iterator1(throttle(pred), src)\n        : (rfn) => {\n            const r = rfn[2];\n            const _pred = pred();\n            return compR(rfn, (acc, x) => (_pred(x) ? r(acc, x) : acc));\n        };\n}\n","import { throttle } from \"./throttle\";\nimport { iterator1 } from \"../iterator\";\nexport function dropNth(n, src) {\n    if (src) {\n        return iterator1(dropNth(n), src);\n    }\n    n = Math.max(0, n - 1);\n    return throttle(() => {\n        let skip = n;\n        return () => (skip-- > 0 ? true : ((skip = n), false));\n    });\n}\n","import { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function dropWhile(...args) {\n    return ($iter(dropWhile, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const pred = args[0];\n            let ok = true;\n            return compR(rfn, (acc, x) => ((ok = ok && pred(x)) ? acc : r(acc, x)));\n        }));\n}\n","import { compR } from \"../func/compr\";\nimport { iterator1 } from \"../iterator\";\nexport function drop(n, src) {\n    return src\n        ? iterator1(drop(n), src)\n        : (rfn) => {\n            const r = rfn[2];\n            let m = n;\n            return compR(rfn, (acc, x) => (m > 0 ? (m--, acc) : r(acc, x)));\n        };\n}\n","import { compR } from \"../func/compr\";\nimport { iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function duplicate(n = 1, src) {\n    return src\n        ? iterator(duplicate(n), src)\n        : (rfn) => {\n            const r = rfn[2];\n            return compR(rfn, (acc, x) => {\n                for (let i = n; i >= 0 && !isReduced(acc); i--) {\n                    acc = r(acc, x);\n                }\n                return acc;\n            });\n        };\n}\n","import { iterator1 } from \"../iterator\";\nimport { compR } from \"../func/compr\";\nexport function filter(pred, src) {\n    return src\n        ? iterator1(filter(pred), src)\n        : (rfn) => {\n            const r = rfn[2];\n            return compR(rfn, (acc, x) => (pred(x) ? r(acc, x) : acc));\n        };\n}\n","import { compare, compareNumAsc } from \"@thi.ng/compare\";\n/**\n * Returns the supposed index of `x` in pre-sorted array-like collection\n * `buf`. If `x` can't be found, returns `-index-1`, representing the\n * negative of the index, were `x` to be inserted into `buf`. E.g if the\n * return value is -3, `x` would appear/insert at index 2.\n *\n * ```\n * binarySearch([2, 4, 6], 5);\n * // -3\n * ```\n *\n * The optional `key` function is used to obtain the actual sort value\n * of `x` and each array item (default: identity).\n *\n * The optional `cmp` comparator (default: thi.ng/compare) is then used\n * to identify the index of `x`. The sort order of `buf` MUST be\n * compatible with that of `cmp`.\n *\n * @param buf\n * @param x\n * @param key\n * @param cmp\n */\nexport const binarySearch = (buf, x, key = (x) => x, cmp = compare) => {\n    const kx = key(x);\n    let low = 0;\n    let high = buf.length - 1;\n    while (low <= high) {\n        const mid = (low + high) >>> 1;\n        const c = cmp(key(buf[mid]), kx);\n        if (c < 0) {\n            low = mid + 1;\n        }\n        else if (c > 0) {\n            high = mid - 1;\n        }\n        else {\n            return mid;\n        }\n    }\n    return -low - 1;\n};\n/**\n * Similar to `binarySearch()`, but optimized for numeric arrays and\n * supporting custom comparators (default: `compareNumAsc` from\n * thi.ng/compare pkg).\n *\n * @param buf\n * @param x\n * @param cmp\n */\nexport const binarySearchNumeric = (buf, x, cmp = compareNumAsc) => {\n    let low = 0;\n    let high = buf.length - 1;\n    while (low <= high) {\n        const mid = (low + high) >>> 1;\n        const c = cmp(buf[mid], x);\n        if (c < 0) {\n            low = mid + 1;\n        }\n        else if (c > 0) {\n            high = mid - 1;\n        }\n        else {\n            return mid;\n        }\n    }\n    return -low - 1;\n};\n","const OBJP = Object.getPrototypeOf({});\nconst FN = \"function\";\nconst STR = \"string\";\nexport const equiv = (a, b) => {\n    let proto;\n    if (a === b) {\n        return true;\n    }\n    if (a != null) {\n        if (typeof a.equiv === FN) {\n            return a.equiv(b);\n        }\n    }\n    else {\n        return a == b;\n    }\n    if (b != null) {\n        if (typeof b.equiv === FN) {\n            return b.equiv(a);\n        }\n    }\n    else {\n        return a == b;\n    }\n    if (typeof a === STR || typeof b === STR) {\n        return false;\n    }\n    if (((proto = Object.getPrototypeOf(a)), proto == null || proto === OBJP) &&\n        ((proto = Object.getPrototypeOf(b)), proto == null || proto === OBJP)) {\n        return equivObject(a, b);\n    }\n    if (typeof a !== FN &&\n        a.length !== undefined &&\n        typeof b !== FN &&\n        b.length !== undefined) {\n        return equivArrayLike(a, b);\n    }\n    if (a instanceof Set && b instanceof Set) {\n        return equivSet(a, b);\n    }\n    if (a instanceof Map && b instanceof Map) {\n        return equivMap(a, b);\n    }\n    if (a instanceof Date && b instanceof Date) {\n        return a.getTime() === b.getTime();\n    }\n    if (a instanceof RegExp && b instanceof RegExp) {\n        return a.toString() === b.toString();\n    }\n    // NaN\n    return a !== a && b !== b;\n};\nexport const equivArrayLike = (a, b, _equiv = equiv) => {\n    let l = a.length;\n    if (l === b.length) {\n        while (--l >= 0 && _equiv(a[l], b[l]))\n            ;\n    }\n    return l < 0;\n};\nexport const equivSet = (a, b, _equiv = equiv) => a.size === b.size && _equiv([...a.keys()].sort(), [...b.keys()].sort());\nexport const equivMap = (a, b, _equiv = equiv) => a.size === b.size && _equiv([...a].sort(), [...b].sort());\nexport const equivObject = (a, b, _equiv = equiv) => {\n    if (Object.keys(a).length !== Object.keys(b).length) {\n        return false;\n    }\n    for (let k in a) {\n        if (!b.hasOwnProperty(k) || !_equiv(a[k], b[k])) {\n            return false;\n        }\n    }\n    return true;\n};\n","import { equiv as _eq } from \"@thi.ng/equiv\";\n/**\n * Returns true if the last items of `buf` are the same items as in\n * `needle`. This means `buf` should have at least the same length as\n * `needle` for this to be true.\n *\n * By default, uses thi.ng/equiv for equality checking.\n *\n * @see startsWith\n *\n * @param buf\n * @param needle\n * @param equiv\n */\nexport const endsWith = (buf, needle, equiv = _eq) => {\n    let i = buf.length;\n    let j = needle.length;\n    if (i < j)\n        return false;\n    while ((--i, --j >= 0 && equiv(buf[i], needle[j]))) { }\n    return j < 0;\n};\n","import { illegalArgs } from \"@thi.ng/errors\";\n/**\n * Attempts to obtain an iterator from `x` and throws error if `x` is\n * not iterable.\n *\n * @param x\n */\nexport const ensureIterable = (x) => {\n    (x == null || !x[Symbol.iterator]) &&\n        illegalArgs(`value is not iterable: ${x}`);\n    return x;\n};\n","import { isArray, isArrayLike } from \"@thi.ng/checks\";\nimport { ensureIterable } from \"./ensure-iterable\";\n/**\n * Helper function to avoid unnecessary copying if `x` is already an\n * array. First checks if `x` is an array and if so returns it. Else\n * attempts to obtain an iterator from `x` and if successful collects it\n * as array and returns it. Throws error if `x` isn't iterable.\n *\n * @param x\n */\nexport const ensureArray = (x) => isArray(x) ? x : [...ensureIterable(x)];\n/**\n * Similar to `ensureArray()`, but for `ArrayLike` types.\n *\n * @see ensureArray\n *\n * @param x\n */\nexport const ensureArrayLike = (x) => isArrayLike(x) ? x : [...ensureIterable(x)];\n","import { equiv as _equiv } from \"@thi.ng/equiv\";\n/**\n * Similar to `Array.find()`, but uses thi.ng/equiv as default\n * predicate.\n *\n * @param src\n * @param x\n * @param equiv\n */\nexport const find = (src, x, equiv = _equiv) => {\n    const i = findIndex(src, x, equiv);\n    return i !== -1 ? src[i] : undefined;\n};\n/**\n * Similar to `Array.findIndex()`, but uses thi.ng/equiv as default\n * predicate.\n *\n * @param src\n * @param x\n * @param equiv\n */\nexport const findIndex = (src, x, equiv = _equiv) => {\n    for (let i = src.length; --i >= 0;) {\n        if (equiv(x, src[i]))\n            return i;\n    }\n    return -1;\n};\n","import { equiv as _eq } from \"@thi.ng/equiv\";\n/**\n * Performs a fuzzy search of `query` in `domain` and returns `true` if\n * successful.\n *\n * The optional `equiv` predicate can be used to customize\n * item equality checking. Uses @thi.ng/equiv by default.\n *\n * Adapted and generalized from:\n * https://github.com/bevacqua/fufuzzyzzysearch (MIT)\n *\n * @see thi.ng/transducers/xform/filterFuzzy\n *\n * @param domain\n * @param query\n * @param equiv\n */\nexport const fuzzyMatch = (domain, query, equiv = _eq) => {\n    const nd = domain.length;\n    const nq = query.length;\n    if (nq > nd) {\n        return false;\n    }\n    if (nq === nd) {\n        return equiv(query, domain);\n    }\n    next: for (let i = 0, j = 0; i < nq; i++) {\n        const q = query[i];\n        while (j < nd) {\n            if (equiv(domain[j++], q)) {\n                continue next;\n            }\n        }\n        return false;\n    }\n    return true;\n};\n","import { compare } from \"@thi.ng/compare\";\n/**\n * Returns true if the given array and its elements in the selected\n * index range (entire array, by default) are in the order defined by\n * the given comparator (thi.ng/compare by default). Always returns\n * true, if effective index range (or array length) has less than two\n * elements. No bounds checking.\n *\n * ```\n * isSorted([3, 2, 1])\n * // false\n *\n * // w/ custom comparator\n * isSorted([3, 2, 1], (a, b) => b - a)\n * // true\n * ```\n *\n * @param arr\n * @param cmp\n * @param start\n * @param end\n */\nexport const isSorted = (arr, cmp = compare, start = 0, end = arr.length) => {\n    let prev = arr[start];\n    while (++start < end) {\n        const curr = arr[start];\n        if (cmp(prev, curr) > 0)\n            return false;\n        prev = curr;\n    }\n    return true;\n};\n","/**\n * Returns iterator of nullable array w/ optional index range support\n * and/or reverse iteration order. The default range covers the entire\n * array.\n *\n * @remarks\n * If `start` > `end`, yields values in reverse order. No bounds\n * checking is performed.\n *\n * @param buf - array or null\n * @param start - start index\n * @param end - end index (excluded)\n */\nexport function* arrayIterator(buf, start = 0, end) {\n    if (!buf)\n        return;\n    start = start;\n    end === undefined && (end = buf.length);\n    const step = start <= end ? 1 : -1;\n    for (; start !== end; start += step) {\n        yield buf[start];\n    }\n}\n","/**\n * Returns last element of given array or `undefined` if array is empty.\n *\n * @param x\n */\nexport const peek = (x) => x[x.length - 1];\n","/**\n * Swaps values at index `x`/`y` in given array.\n *\n * @param arr\n * @param x\n * @param y\n */\nexport const swap = (arr, x, y) => {\n    const t = arr[x];\n    arr[x] = arr[y];\n    arr[y] = t;\n};\n/**\n * Higher-order version of `swap` for swapping elements in multiple\n * arrays at once. The returned function takes the same args as `swap`,\n * and when called swaps 2 elements in the array given to that function\n * AND in the arrays given to `multiSwap` itself. Provides fast routes\n * for up to 3 extra arrays, then falls back to a loop-based approach.\n *\n * ```\n * a = [2, 1];\n * b = [20, 10];\n * c = [40, 30];\n *\n * ms = multiSwap(b, c);\n * ms(a, 0, 1);\n *\n * // a: [1, 2]\n * // b: [10, 20]\n * // c: [30, 40]\n * ```\n *\n * @param xs\n */\nexport const multiSwap = (...xs) => {\n    const [b, c, d] = xs;\n    const n = xs.length;\n    switch (n) {\n        case 0:\n            return swap;\n        case 1:\n            return (a, x, y) => {\n                swap(a, x, y);\n                swap(b, x, y);\n            };\n        case 2:\n            return (a, x, y) => {\n                swap(a, x, y);\n                swap(b, x, y);\n                swap(c, x, y);\n            };\n        case 3:\n            return (a, x, y) => {\n                swap(a, x, y);\n                swap(b, x, y);\n                swap(c, x, y);\n                swap(d, x, y);\n            };\n        default:\n            return (a, x, y) => {\n                swap(a, x, y);\n                for (let i = n; --i >= 0;)\n                    swap(xs[i], x, y);\n            };\n    }\n};\n","import { compare } from \"@thi.ng/compare\";\nimport { swap } from \"./swap\";\n// prettier-ignore\nexport function quickSort(arr, _cmp = compare, _swap = swap, start = 0, end = arr.length - 1) {\n    if (start < end) {\n        const pivot = arr[start + ((end - start) >> 1)];\n        let s = start - 1;\n        let e = end + 1;\n        while (true) {\n            do {\n                s++;\n            } while (_cmp(arr[s], pivot) < 0);\n            do {\n                e--;\n            } while (_cmp(arr[e], pivot) > 0);\n            if (s >= e)\n                break;\n            _swap(arr, s, e);\n        }\n        quickSort(arr, _cmp, _swap, start, e);\n        quickSort(arr, _cmp, _swap, e + 1, end);\n    }\n    return arr;\n}\n","const INV_MAX = 1 / 0xffffffff;\nexport class ARandom {\n    float(norm = 1) {\n        return this.int() * INV_MAX * norm;\n    }\n    norm(norm = 1) {\n        return this.int() * INV_MAX * norm * 2 - norm;\n    }\n    minmax(min, max) {\n        return this.float() * (max - min) + min;\n    }\n    /**\n     * Returns approx. normal distribution using CLT.\n     *\n     * https://en.wikipedia.org/wiki/Central_limit_theorem\n     *\n     * @param n\n     * @param offset\n     * @param scale\n     */\n    gaussian(n = 10, offset = -0.5, scale = 1) {\n        let sum = 0;\n        let m = n;\n        while (m-- > 0)\n            sum += this.float(scale);\n        return sum / n + offset;\n    }\n}\n","import { ARandom } from \"./api\";\n// https://github.com/thi-ng/ct-head/blob/master/random.h\n// https://gist.github.com/voidqk/d112165a26b45244a65298933c0349a4\nconst DEFAULT_SEED = 0xdecafbad;\nexport class Smush32 extends ARandom {\n    constructor(seed = DEFAULT_SEED) {\n        super();\n        this.buffer = new Uint32Array([seed, 0]);\n    }\n    copy() {\n        const gen = new Smush32();\n        gen.buffer.set(this.buffer);\n        return gen;\n    }\n    seed(s) {\n        this.buffer.set([s, 0]);\n        return this;\n    }\n    int() {\n        const b = this.buffer;\n        const m = 0x5bd1e995;\n        const k = (b[1]++ * m) >>> 0;\n        const s = (b[0] = ((k ^ (k >> 24) ^ ((b[0] * m) >>> 0)) * m) >>> 0);\n        return (s ^ (s >>> 13)) >>> 0;\n    }\n}\n","import { ARandom } from \"./api\";\nconst random = Math.random;\nexport class SystemRandom extends ARandom {\n    int() {\n        return (random() * 0xffffffff) >>> 0;\n    }\n    float(norm = 1) {\n        return random() * norm;\n    }\n}\nexport const SYSTEM = new SystemRandom();\n","import { ARandom } from \"./api\";\n// https://en.wikipedia.org/wiki/Xorshift\nconst DEFAULT_SEED = [0xdecafbad, 0x2fa9d75b, 0xe41f67e3, 0x5c83ec1a];\nexport class XorShift128 extends ARandom {\n    constructor(seed = DEFAULT_SEED) {\n        super();\n        this.buffer = new Uint32Array(4);\n        this.seed(seed);\n    }\n    copy() {\n        return new XorShift128(this.buffer);\n    }\n    bytes() {\n        return new Uint8Array(this.buffer.buffer);\n    }\n    seed(seed) {\n        this.buffer.set(seed);\n        return this;\n    }\n    int() {\n        const s = this.buffer;\n        let t = s[3];\n        let w;\n        t ^= t << 11;\n        t ^= t >>> 8;\n        s[3] = s[2];\n        s[2] = s[1];\n        w = s[1] = s[0];\n        return (s[0] = (t ^ w ^ (w >>> 19)) >>> 0);\n    }\n}\n","import { ARandom } from \"./api\";\n// https://en.wikipedia.org/wiki/Xorshift#xorwow\nconst DEFAULT_SEED = [\n    0xdecafbad,\n    0x2fa9d75b,\n    0xe41f67e3,\n    0x5c83ec1a,\n    0xf69a5c71\n];\nexport class XorWow extends ARandom {\n    constructor(seed = DEFAULT_SEED) {\n        super();\n        this.buffer = new Uint32Array(5);\n        this.seed(seed);\n    }\n    copy() {\n        return new XorWow(this.buffer);\n    }\n    seed(seed) {\n        this.buffer.set(seed);\n        return this;\n    }\n    bytes() {\n        return new Uint8Array(this.buffer.buffer);\n    }\n    int() {\n        const s = this.buffer;\n        let t = s[3];\n        let w;\n        t ^= t >>> 2;\n        t ^= t << 1;\n        s[3] = s[2];\n        s[2] = s[1];\n        w = s[1] = s[0];\n        t ^= w;\n        t ^= w << 4;\n        s[0] = t;\n        return (t + (s[4] += 0x587c5)) >>> 0;\n    }\n}\n","import { ARandom } from \"./api\";\n// https://github.com/MersenneTwister-Lab/XSadd/blob/master/xsadd.h\nconst DEFAULT_SEED = 0xdecafbad;\nexport class XsAdd extends ARandom {\n    constructor(seed = DEFAULT_SEED) {\n        super();\n        this.buffer = new Uint32Array(4);\n        this.seed(seed);\n    }\n    bytes() {\n        return new Uint8Array(this.buffer.buffer);\n    }\n    copy() {\n        const gen = new XsAdd();\n        gen.buffer.set(this.buffer);\n        return gen;\n    }\n    seed(seed) {\n        const s = this.buffer;\n        s.set([seed, 0, 0, 0]);\n        for (let j = 0, i = 1; i < 8; j = i++) {\n            let x = (s[j & 3] ^ (s[j & 3] >>> 30)) >>> 0;\n            x = (0x8965 * x + (((0x6c07 * x) & 0xffff) << 16)) >>> 0;\n            s[i & 3] ^= (i + x) >>> 0;\n        }\n        return this;\n    }\n    int() {\n        const s = this.buffer;\n        let t = s[0];\n        t ^= t << 15;\n        t ^= t >>> 18;\n        t ^= s[3] << 11;\n        s[0] = s[1];\n        s[1] = s[2];\n        s[2] = s[3];\n        s[3] = t;\n        return (t + s[2]) >>> 0;\n    }\n}\n","import { SYSTEM } from \"./system\";\n/**\n * Generates and returns a random string of `len` characters (default\n * 4), plus optional given `prefix` and using only provided `syms`\n * characters (default lowercase a-z).\n *\n * ```\n * randomID()\n * \"qgdt\"\n *\n * randomID(8, \"id-\", \"0123456789ABCDEF\")\n * \"id-94EF6E1A\"\n * ```\n *\n * @param len\n * @param prefix\n * @param syms\n * @param rnd\n */\nexport const randomID = (len = 4, prefix = \"\", syms = \"abcdefghijklmnopqrstuvwxyz\", rnd = SYSTEM) => {\n    for (const n = syms.length; --len >= 0;) {\n        prefix += syms[rnd.float(n) | 0];\n    }\n    return prefix;\n};\n","import { assert } from \"@thi.ng/api\";\nimport { SYSTEM } from \"./system\";\n/**\n * Returns a no-arg function which produces a random choice of given\n * weighted `choices` and using given `IRandom` instance (default:\n * `SYSTEM`). If `weights` are given, it must be the same size as\n * `choices`. If omitted, each choice will have same probability.\n *\n * https://www.electricmonk.nl/log/2009/12/23/weighted-random-distribution/\n *\n * @param choices\n * @param weights\n */\nexport const weightedRandom = (choices, weights, rnd = SYSTEM) => {\n    const n = choices.length;\n    assert(n > 0, \"no choices given\");\n    const opts = choices\n        .map(weights\n        ? (x, i) => [x, weights[i]]\n        : (x) => [x, 1])\n        .sort((a, b) => b[1] - a[1]);\n    const total = opts.reduce((acc, o) => acc + o[1], 0);\n    assert(total > 0, \"no choices given\");\n    return () => {\n        const r = rnd.float(total);\n        let sum = total;\n        for (let i = 0; i < n; i++) {\n            sum -= opts[i][1];\n            if (sum <= r) {\n                return opts[i][0];\n            }\n        }\n        return undefined;\n    };\n};\n","export * from \"./api\";\nexport * from \"./smush32\";\nexport * from \"./system\";\nexport * from \"./xorshift128\";\nexport * from \"./xorwow\";\nexport * from \"./xsadd\";\nexport * from \"./random-id\";\nexport * from \"./weighted-random\";\n","import { assert } from \"@thi.ng/api\";\nimport { SYSTEM } from \"@thi.ng/random\";\n/**\n * Shuffles the items in the given index range of array `buf` using\n * Fisher-yates and optional `rnd` PRNG. If neither `start` / `end` are\n * given, the entire array will be shuffled. Mutates original array.\n *\n * @param buf\n * @param n\n * @param rnd\n */\nexport const shuffleRange = (buf, start = 0, end = buf.length, rnd = SYSTEM) => {\n    assert(start >= 0 && end >= start && end <= buf.length, `illegal range ${start}..${end}`);\n    let n = end - start;\n    const l = n;\n    if (l > 1) {\n        while (--n >= 0) {\n            const a = (start + rnd.float(l)) | 0;\n            const b = (start + rnd.float(l)) | 0;\n            const t = buf[a];\n            buf[a] = buf[b];\n            buf[b] = t;\n        }\n    }\n    return buf;\n};\n/**\n * Applies `shuffleRange()` to the given array. If `n` is given, only\n * the first `n` items are shuffled. Mutates original array.\n *\n * @see shuffleRange\n *\n * @param buf\n * @param n\n * @param rnd\n */\nexport const shuffle = (buf, n = buf.length, rnd = SYSTEM) => shuffleRange(buf, 0, n, rnd);\n","import { equiv as _eq } from \"@thi.ng/equiv\";\n/**\n * Returns true if the first items of `buf` are the same items as in\n * `needle`. This means `buf` should have at least the same length as\n * `needle` for this to be true.\n *\n * By default, uses thi.ng/equiv for equality checking.\n *\n * @see endsWith\n *\n * @param buf\n * @param needle\n * @param equiv\n */\nexport const startsWith = (buf, needle, equiv = _eq) => {\n    let i = buf.length;\n    let j = needle.length;\n    if (i < j)\n        return false;\n    while (-j >= 0 && equiv(buf[j], needle[j])) { }\n    return j < 0;\n};\n","/**\n * Returns optimized function to immutably select, repeat, reshape and /\n * or reorder array / object values in the specified index order. Fast\n * paths for up to 8 indices are provided, before a loop based approach\n * is used.\n *\n * ```\n * swizzle([0, 0, 0])([1, 2, 3, 4])    // [ 1, 1, 1 ]\n * swizzle([1, 1, 3, 3])([1, 2, 3, 4]) // [ 2, 2, 4, 4 ]\n * swizzle([2, 0])([1, 2, 3])          // [ 3, 1 ]\n * ```\n *\n * Objects can be used as input to the generated function, but the\n * result will always be in array form.\n *\n * ```\n * swizzle([\"a\", \"c\", \"b\"])({a: 1, b: 2, c: 3}) // [ 1, 3, 2 ]\n * ```\n *\n * @param order indices\n */\nexport const swizzle = (order) => {\n    const [a, b, c, d, e, f, g, h] = order;\n    switch (order.length) {\n        case 0:\n            return () => [];\n        case 1:\n            return (x) => [x[a]];\n        case 2:\n            return (x) => [x[a], x[b]];\n        case 3:\n            return (x) => [x[a], x[b], x[c]];\n        case 4:\n            return (x) => [x[a], x[b], x[c], x[d]];\n        case 5:\n            return (x) => [x[a], x[b], x[c], x[d], x[e]];\n        case 6:\n            return (x) => [x[a], x[b], x[c], x[d], x[e], x[f]];\n        case 7:\n            return (x) => [x[a], x[b], x[c], x[d], x[e], x[f], x[g]];\n        case 8:\n            return (x) => [x[a], x[b], x[c], x[d], x[e], x[f], x[g], x[h]];\n        default:\n            return (x) => {\n                const res = [];\n                for (let i = order.length; --i >= 0;) {\n                    res[i] = x[order[i]];\n                }\n                return res;\n            };\n    }\n};\n","export * from \"./binary-search\";\nexport * from \"./ends-with\";\nexport * from \"./ensure-array\";\nexport * from \"./ensure-iterable\";\nexport * from \"./find\";\nexport * from \"./fuzzy-match\";\nexport * from \"./is-sorted\";\nexport * from \"./iterator\";\nexport * from \"./peek\";\nexport * from \"./quicksort\";\nexport * from \"./shuffle\";\nexport * from \"./starts-with\";\nexport * from \"./swap\";\nexport * from \"./swizzle\";\n","import { fuzzyMatch } from \"@thi.ng/arrays\";\nimport { $iter } from \"../iterator\";\nimport { filter } from \"./filter\";\nexport function filterFuzzy(...args) {\n    const iter = args.length > 1 && $iter(filterFuzzy, args);\n    if (iter) {\n        return iter;\n    }\n    const query = args[0];\n    const { key, equiv } = (args[1] || {});\n    return filter((x) => fuzzyMatch(key != null ? key(x) : x, query, equiv));\n}\n","import { compR } from \"../func/compr\";\nimport { iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function flattenWith(fn, src) {\n    return src\n        ? iterator(flattenWith(fn), src)\n        : (rfn) => {\n            const reduce = rfn[2];\n            const flatten = (acc, x) => {\n                const xx = fn(x);\n                if (xx) {\n                    for (let y of xx) {\n                        acc = flatten(acc, y);\n                        if (isReduced(acc)) {\n                            break;\n                        }\n                    }\n                    return acc;\n                }\n                return reduce(acc, x);\n            };\n            return compR(rfn, flatten);\n        };\n}\n","import { flattenWith } from \"./flatten-with\";\nexport function flatten(src) {\n    return flattenWith((x) => x != null && x[Symbol.iterator] && typeof x !== \"string\"\n        ? x\n        : undefined, src);\n}\n","import { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function mapIndexed(...args) {\n    return ($iter(mapIndexed, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const fn = args[0];\n            let i = args[1] || 0;\n            return compR(rfn, (acc, x) => r(acc, fn(i++, x)));\n        }));\n}\n","import { $iter } from \"../iterator\";\nimport { mapIndexed } from \"./map-indexed\";\nexport function indexed(...args) {\n    const iter = $iter(indexed, args);\n    if (iter) {\n        return iter;\n    }\n    const from = args[0] || 0;\n    return mapIndexed((i, x) => [from + i, x]);\n}\n","import { compR } from \"../func/compr\";\nimport { iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function interleave(sep, src) {\n    return src\n        ? iterator(interleave(sep), src)\n        : (rfn) => {\n            const r = rfn[2];\n            const _sep = typeof sep === \"function\" ? sep : () => sep;\n            return compR(rfn, (acc, x) => {\n                acc = r(acc, _sep());\n                return isReduced(acc) ? acc : r(acc, x);\n            });\n        };\n}\n","import { comp as _comp } from \"@thi.ng/compose\";\nexport function comp(...fns) {\n    return _comp.apply(null, fns);\n}\n","/**\n * Yields sequence of `n+1` monotonically increasing numbers in the\n * closed interval (0.0 .. 1.0). If `n <= 0`, yields nothing.\n *\n * ```\n * [...normRange(4)]\n * // [0, 0.25, 0.5, 0.75, 1.0]\n * ```\n *\n * @param n number of steps\n * @param inclLast include last value (i.e. `1.0`)\n */\nexport function* normRange(n, inclLast = true) {\n    if (n > 0) {\n        for (let i = 0, m = inclLast ? n + 1 : n; i < m; i++) {\n            yield i / n;\n        }\n    }\n}\n","import { comp } from \"../func/comp\";\nimport { iterator } from \"../iterator\";\nimport { cat } from \"./cat\";\nimport { map } from \"./map\";\nexport function mapcat(fn, src) {\n    return src ? iterator(mapcat(fn), src) : comp(map(fn), cat());\n}\n","import { $iter, iterator } from \"../iterator\";\nexport function partition(...args) {\n    const iter = $iter(partition, args, iterator);\n    if (iter) {\n        return iter;\n    }\n    let size = args[0], all, step;\n    if (typeof args[1] == \"number\") {\n        step = args[1];\n        all = args[2];\n    }\n    else {\n        step = size;\n        all = args[1];\n    }\n    return ([init, complete, reduce]) => {\n        let buf = [];\n        let skip = 0;\n        return [\n            init,\n            (acc) => {\n                if (all && buf.length > 0) {\n                    acc = reduce(acc, buf);\n                    buf = [];\n                }\n                return complete(acc);\n            },\n            (acc, x) => {\n                if (skip <= 0) {\n                    if (buf.length < size) {\n                        buf.push(x);\n                    }\n                    if (buf.length === size) {\n                        acc = reduce(acc, buf);\n                        buf = step < size ? buf.slice(step) : [];\n                        skip = step - size;\n                    }\n                }\n                else {\n                    skip--;\n                }\n                return acc;\n            }\n        ];\n    };\n}\n","import { comp } from \"../func/comp\";\nimport { normRange } from \"../iter/norm-range\";\nimport { iterator } from \"../iterator\";\nimport { map } from \"./map\";\nimport { mapcat } from \"./mapcat\";\nimport { partition } from \"./partition\";\n// prettier-ignore\nexport function interpolate(fn, window, n, src) {\n    return src\n        ? iterator(interpolate(fn, window, n), src)\n        : comp(partition(window, 1), mapcat((chunk) => map((t) => fn(chunk, t), normRange(n, false))));\n}\n","export const PI = Math.PI;\nexport const TAU = PI * 2;\nexport const HALF_PI = PI / 2;\nexport const THIRD_PI = PI / 3;\nexport const QUARTER_PI = PI / 4;\nexport const SIXTH_PI = PI / 6;\nexport const INV_PI = 1 / PI;\nexport const INV_TAU = 1 / TAU;\nexport const INV_HALF_PI = 1 / HALF_PI;\nexport const DEG2RAD = PI / 180;\nexport const RAD2DEG = 180 / PI;\nexport const PHI = (1 + Math.sqrt(5)) / 2;\nexport const SQRT2 = Math.SQRT2;\nexport const SQRT3 = Math.sqrt(3);\nexport const SQRT2_2 = SQRT2 / 2;\nexport const SQRT2_3 = SQRT3 / 2;\nexport const THIRD = 1 / 3;\nexport const TWO_THIRD = 2 / 3;\nexport const SIXTH = 1 / 6;\nexport let EPS = 1e-6;\nexport var Crossing;\n(function (Crossing) {\n    /**\n     * lines A & B are equal\n     */\n    Crossing[Crossing[\"EQUAL\"] = 0] = \"EQUAL\";\n    /**\n     * lines A & B are flat (all same values)\n     */\n    Crossing[Crossing[\"FLAT\"] = 1] = \"FLAT\";\n    /**\n     * line A crossed under B\n     */\n    Crossing[Crossing[\"UNDER\"] = 2] = \"UNDER\";\n    /**\n     * line A crossed over B\n     */\n    Crossing[Crossing[\"OVER\"] = 3] = \"OVER\";\n    Crossing[Crossing[\"OTHER\"] = 4] = \"OTHER\";\n})(Crossing || (Crossing = {}));\n","import { EPS } from \"./api\";\nexport const absDiff = (x, y) => Math.abs(x - y);\nexport const sign = (x, eps = EPS) => (x > eps ? 1 : x < -eps ? -1 : 0);\n","import { DEG2RAD, HALF_PI, INV_HALF_PI, PI, RAD2DEG, TAU } from \"./api\";\n/**\n * Returns vector of `[sin(theta)*n, cos(theta)*n]`.\n *\n * @param theta\n * @param n\n */\nexport const sincos = (theta, n = 1) => [\n    Math.sin(theta) * n,\n    Math.cos(theta) * n\n];\n/**\n * Returns vector of `[cos(theta)*n, sin(theta)*n]`.\n *\n * @param theta\n * @param n\n */\nexport const cossin = (theta, n = 1) => [\n    Math.cos(theta) * n,\n    Math.sin(theta) * n\n];\n/**\n * Projects `theta` into [0 .. 2] interval.\n *\n * @param theta\n */\nexport const absTheta = (theta) => ((theta %= TAU), theta < 0 ? TAU + theta : theta);\nexport const absInnerAngle = (theta) => ((theta = Math.abs(theta)), theta > PI ? TAU - theta : theta);\n/**\n * Returns smallest absolute angle difference between `a` and `b`.\n * Result will be in [0 .. ] interval.\n *\n * @param a\n * @param b\n */\nexport const angleDist = (a, b) => absInnerAngle(absTheta((b % TAU) - (a % TAU)));\n/**\n * Like `Math.atan2`, but always returns angle in [0 .. TAU) interval.\n *\n * @param y\n * @param x\n */\nexport const atan2Abs = (y, x) => absTheta(Math.atan2(y, x));\n/**\n * Returns quadrant ID (0-3) of given angle (in radians).\n *\n * @param theta\n */\nexport const quadrant = (theta) => (absTheta(theta) * INV_HALF_PI) | 0;\n/**\n * Converts angle to degrees.\n *\n * @param theta angle in radians\n */\nexport const deg = (theta) => theta * RAD2DEG;\n/**\n * Converts angle to radians.\n *\n * @param theta angle in degrees\n */\nexport const rad = (theta) => theta * DEG2RAD;\n/**\n * Cosecant. Approaches `Infinity` for `theta` near multiples of .\n *\n * @param theta angle in radians\n */\nexport const csc = (theta) => 1 / Math.sin(theta);\n/**\n * Secant. Approaches `Infinity` for `theta` near /2  n\n *\n * @param theta angle in radians\n */\nexport const sec = (theta) => 1 / Math.cos(theta);\n/**\n * Cotangent. Approaches `Infinity` for `theta` near multiples of .\n *\n * @param theta angle in radians\n */\nexport const cot = (theta) => 1 / Math.tan(theta);\n/**\n * Law of Cosines. Takes length of two sides of a triangle and the inner\n * angle (in radians) between them. Returns length of third side.\n *\n * @param a\n * @param b\n * @param gamma\n */\nexport const loc = (a, b, gamma) => Math.sqrt(a * a + b * b - 2 * a * b * Math.cos(gamma));\n/**\n * Approximates cos(x) for x in [-1,1]\n *\n * @param x\n */\nexport const normCos = (x) => {\n    const x2 = x * x;\n    return 1.0 + x2 * (-4 + 2 * x2);\n};\nconst __fastCos = (x) => {\n    const x2 = x * x;\n    return 0.99940307 + x2 * (-0.49558072 + 0.03679168 * x2);\n};\n/**\n * Fast cosine approximation using `normCos()` (polynomial). Max. error\n * ~0.00059693\n *\n * In [0 .. 2] interval, approx. 18-20% faster than `Math.cos` on V8.\n *\n * @param theta in radians\n */\nexport const fastCos = (theta) => {\n    theta %= TAU;\n    theta < 0 && (theta = -theta);\n    switch ((theta * INV_HALF_PI) | 0) {\n        case 0:\n            return __fastCos(theta);\n        case 1:\n            return -__fastCos(PI - theta);\n        case 2:\n            return -__fastCos(theta - PI);\n        default:\n            return __fastCos(TAU - theta);\n    }\n};\n/**\n * @see fastCos\n *\n * @param theta in radians\n */\nexport const fastSin = (theta) => fastCos(HALF_PI - theta);\n","import { EPS } from \"./api\";\nconst abs = Math.abs;\nconst max = Math.max;\n/**\n * Checks if `|a - b| <= ` and adapts given epsilon value to the given\n * arguments:\n *\n *  is factored with the largest absolute value of `a` or `b` (but\n * never lesser than the given `eps` value):\n *\n * ` =  * max(1, |a|, |b|)`\n *\n * @param a left value\n * @param b right value\n * @param eps epsilon / tolerance, default `1e-6`\n */\nexport const eqDelta = (a, b, eps = EPS) => abs(a - b) <= eps * max(1, abs(a), abs(b));\n/**\n * Similar to `eqDelta()`, but used given `eps` as is.\n *\n * @param a left value\n * @param b right value\n * @param eps epsilon / tolerance, default `1e-6`\n */\nexport const eqDeltaFixed = (a, b, eps = EPS) => abs(a - b) <= eps;\n","import { EPS } from \"./api\";\nimport { eqDelta } from \"./eqdelta\";\n/**\n * Returns true if line A rises up over B.\n *\n * ```\n * b1  a2\n *   \\/\n *   /\\\n * a1  b2\n * ```\n *\n * @param a1\n * @param a2\n * @param b1\n * @param b2\n */\nexport const isCrossOver = (a1, a2, b1, b2) => a1 < b1 && a2 > b2;\n/**\n * Returns true if line A rises up over B.\n *\n * ```\n * a1  b2\n *   \\/\n *   /\\\n * b1  a2\n * ```\n *\n * @param a1\n * @param a2\n * @param b1\n * @param b2\n */\nexport const isCrossUnder = (a1, a2, b1, b2) => a1 > b1 && a2 < b2;\n/**\n * Returns `Crossing` classifier indicating the relationship of line A\n * to line B. The optional epsilon value is used to determine if both\n * lines are considered equal or flat.\n *\n * @see isCrossUp\n * @see isCrossDown\n * @see Crossing\n *\n * @param a1\n * @param a2\n * @param b1\n * @param b2\n * @param eps\n */\nexport const classifyCrossing = (a1, a2, b1, b2, eps = EPS) => {\n    if (isCrossOver(a1, a2, b1, b2)) {\n        return 3 /* OVER */;\n    }\n    else if (isCrossUnder(a1, a2, b1, b2)) {\n        return 2 /* UNDER */;\n    }\n    return eqDelta(a1, b1, eps) && eqDelta(a2, b2, eps)\n        ? eqDelta(a1, b2, eps)\n            ? 1 /* FLAT */\n            : 0 /* EQUAL */\n        : 4 /* OTHER */;\n};\n","/**\n * Returns true if `b` is a local minima, i.e. iff a > b and b < c.\n *\n * @param a\n * @param b\n * @param c\n */\nexport const isMinima = (a, b, c) => a > b && b < c;\n/**\n * Returns true if `b` is a local maxima, i.e. iff a < b and b > c.\n *\n * @param a\n * @param b\n * @param c\n */\nexport const isMaxima = (a, b, c) => a < b && b > c;\nconst index = (pred, values, from = 0, to = values.length) => {\n    to--;\n    for (let i = from + 1; i < to; i++) {\n        if (pred(values[i - 1], values[i], values[i + 1])) {\n            return i;\n        }\n    }\n    return -1;\n};\n/**\n * Returns index of the first local & internal minima found in given\n * `values` array, or -1 if no such minima exists. The search range can\n * be optionally defined via semi-open [from, to) index interval.\n *\n * @param values\n * @param from\n * @param to\n */\nexport const minimaIndex = (values, from = 0, to = values.length) => index(isMinima, values, from, to);\n/**\n * Returns index of the first local & internal maxima found in given\n * `values` array, or -1 if no such maxima exists. The search range can\n * be optionally defined via semi-open [from, to) index interval.\n *\n * @param values\n * @param from\n * @param to\n */\nexport const maximaIndex = (values, from = 0, to = values.length) => index(isMaxima, values, from, to);\nfunction* indices(fn, vals, from = 0, to = vals.length) {\n    while (from < to) {\n        const i = fn(vals, from, to);\n        if (i < 0)\n            return;\n        yield i;\n        from = i + 1;\n    }\n}\n/**\n * Returns an iterator yielding all minima indices in given `values`\n * array. The search range can be optionally defined via semi-open\n * [from, to) index interval.\n *\n * @param values\n * @param from\n * @param to\n */\nexport const minimaIndices = (values, from = 0, to = values.length) => indices(minimaIndex, values, from, to);\n/**\n * Returns an iterator yielding all maxima indices in given `values`\n * array. The search range can be optionally defined via semi-open\n * [from, to) index interval.\n *\n * @param values\n * @param from\n * @param to\n */\nexport const maximaIndices = (values, from = 0, to = values.length) => indices(minimaIndex, values, from, to);\n","/**\n * Clamps value `x` to given closed interval.\n *\n * @param x value to clamp\n * @param min lower bound\n * @param max upper bound\n */\nexport const clamp = (x, min, max) => x < min ? min : x > max ? max : x;\nexport const clamp01 = (x) => (x < 0 ? 0 : x > 1 ? 1 : x);\nexport const clamp11 = (x) => (x < -1 ? -1 : x > 1 ? 1 : x);\nexport const wrap = (x, min, max) => x < min ? x - min + max : x >= max ? x - max + min : x;\nexport const wrap01 = (x) => (x < 0 ? x + 1 : x >= 1 ? x - 1 : x);\nexport const wrap11 = (x) => (x < -1 ? x + 2 : x >= 1 ? x - 2 : x);\nexport const min2id = (a, b) => (a <= b ? 0 : 1);\nexport const min3id = (a, b, c) => a <= b ? (a <= c ? 0 : 2) : b <= c ? 1 : 2;\nexport const min4id = (a, b, c, d) => a <= b\n    ? a <= c\n        ? a <= d\n            ? 0\n            : 3\n        : c <= d\n            ? 2\n            : 3\n    : b <= c\n        ? b <= d\n            ? 1\n            : 3\n        : c <= d\n            ? 2\n            : 3;\nexport const max2id = (a, b) => (a >= b ? 0 : 1);\nexport const max3id = (a, b, c) => a >= b ? (a >= c ? 0 : 2) : b >= c ? 1 : 2;\nexport const max4id = (a, b, c, d) => a >= b\n    ? a >= c\n        ? a >= d\n            ? 0\n            : 3\n        : c >= d\n            ? 2\n            : 3\n    : b >= c\n        ? b >= d\n            ? 1\n            : 3\n        : c >= d\n            ? 2\n            : 3;\n/**\n * See `smax()`.\n *\n * @param a\n * @param b\n * @param k smooth exponent (MUST be > 0)\n */\nexport const smin = (a, b, k) => smax(a, b, -k);\n/**\n * Smooth maximum. Note: Result values will be slightly larger than max\n * value near max(a,b) + eps due to exponential decay. Higher `k` values\n * reduce the error, but also reduce the smoothing. Recommended k=16.\n *\n * https://en.wikipedia.org/wiki/Smooth_maximum\n *\n * @param a\n * @param b\n * @param k smooth exponent (MUST be > 0)\n */\nexport const smax = (a, b, k) => {\n    const ea = Math.exp(a * k);\n    const eb = Math.exp(b * k);\n    return (a * ea + b * eb) / (ea + eb);\n};\n/**\n * Same as `smin(smax(x, min, k), max, k)`.\n *\n * @param x\n * @param min\n * @param max\n * @param k\n */\nexport const sclamp = (x, min, max, k) => smin(smax(x, min, k), max, k);\nexport const absMin = (a, b) => Math.abs(a) < Math.abs(b) ? a : b;\nexport const absMax = (a, b) => Math.abs(a) > Math.abs(b) ? a : b;\n/**\n * http://www.musicdsp.org/showone.php?id=203\n *\n * @param e\n * @param x\n */\nexport const foldback = (e, x) => x < -e || x > e ? Math.abs(Math.abs((x - e) % (4 * e)) - 2 * e) - e : x;\n/**\n * Returns true iff `x` is in closed interval `[min .. max]`\n *\n * @param x\n * @param min\n * @param max\n */\nexport const inRange = (x, min, max) => x >= min && x <= max;\n/**\n * Returns true iff `x` is in open interval `(min .. max)`\n *\n * @param x\n * @param min\n * @param max\n */\nexport const inOpenRange = (x, min, max) => x > min && x < max;\n","import { clamp01, clamp11 } from \"./interval\";\n/**\n * Returns normalized value of `x` WRT to interval `a .. b`. If `a`\n * equals `b`, returns 0.\n *\n * @param x\n * @param a\n * @param b\n */\nexport const norm = (x, a, b) => b !== a ? (x - a) / (b - a) : 0;\nexport const fit = (x, a, b, c, d) => c + (d - c) * norm(x, a, b);\nexport const fitClamped = (x, a, b, c, d) => c + (d - c) * clamp01(norm(x, a, b));\nexport const fit01 = (x, a, b) => a + (b - a) * clamp01(x);\nexport const fit10 = (x, a, b) => b + (a - b) * clamp01(x);\nexport const fit11 = (x, a, b) => a + (b - a) * (0.5 + 0.5 * clamp11(x));\n","const M8 = 0xff;\nconst M16 = 0xffff;\nexport const signExtend8 = (a) => ((a &= M8), a & 0x80 ? a | ~M8 : a);\nexport const signExtend16 = (a) => ((a &= M16), a & 0x8000 ? a | ~M16 : a);\nexport const addi8 = (a, b) => signExtend8((a | 0) + (b | 0));\nexport const divi8 = (a, b) => signExtend8((a | 0) / (b | 0));\nexport const muli8 = (a, b) => signExtend8((a | 0) * (b | 0));\nexport const subi8 = (a, b) => signExtend8((a | 0) - (b | 0));\nexport const andi8 = (a, b) => signExtend8((a | 0) & (b | 0));\nexport const ori8 = (a, b) => signExtend8(a | 0 | (b | 0));\nexport const xori8 = (a, b) => signExtend8((a | 0) ^ (b | 0));\nexport const noti8 = (a) => signExtend8(~a);\n// prettier-ignore\nexport const lshifti8 = (a, b) => signExtend8((a | 0) << (b | 0));\n// prettier-ignore\nexport const rshifti8 = (a, b) => signExtend8((a | 0) >> (b | 0));\nexport const addi16 = (a, b) => signExtend16((a | 0) + (b | 0));\nexport const divi16 = (a, b) => signExtend16((a | 0) / (b | 0));\nexport const muli16 = (a, b) => signExtend16((a | 0) * (b | 0));\nexport const subi16 = (a, b) => signExtend16((a | 0) - (b | 0));\nexport const andi16 = (a, b) => signExtend16((a | 0) & (b | 0));\nexport const ori16 = (a, b) => signExtend16(a | 0 | (b | 0));\nexport const xori16 = (a, b) => signExtend16((a | 0) ^ (b | 0));\nexport const noti16 = (a) => signExtend16(~a);\n// prettier-ignore\nexport const lshifti16 = (a, b) => signExtend16((a | 0) << (b | 0));\n// prettier-ignore\nexport const rshifti16 = (a, b) => signExtend16((a | 0) >> (b | 0));\nexport const addi32 = (a, b) => ((a | 0) + (b | 0)) | 0;\nexport const divi32 = (a, b) => ((a | 0) / (b | 0)) | 0;\nexport const muli32 = (a, b) => ((a | 0) * (b | 0)) | 0;\nexport const subi32 = (a, b) => ((a | 0) - (b | 0)) | 0;\nexport const andi32 = (a, b) => (a | 0) & (b | 0);\nexport const ori32 = (a, b) => a | 0 | (b | 0);\nexport const xori32 = (a, b) => (a | 0) ^ (b | 0);\nexport const lshifti32 = (a, b) => (a | 0) << (b | 0);\nexport const rshifti32 = (a, b) => (a | 0) >> (b | 0);\nexport const noti32 = (a) => ~a;\n// prettier-ignore\nexport const addu8 = (a, b) => ((a & M8) + (b & M8)) & M8;\n// prettier-ignore\nexport const divu8 = (a, b) => ((a & M8) / (b & M8)) & M8;\n// prettier-ignore\nexport const mulu8 = (a, b) => ((a & M8) * (b & M8)) & M8;\n// prettier-ignore\nexport const subu8 = (a, b) => ((a & M8) - (b & M8)) & M8;\n// prettier-ignore\nexport const andu8 = (a, b) => ((a & M8) & (b & M8)) & M8;\n// prettier-ignore\nexport const oru8 = (a, b) => ((a & M8) | (b & M8)) & M8;\n// prettier-ignore\nexport const xoru8 = (a, b) => ((a & M8) ^ (b & M8)) & M8;\nexport const notu8 = (a) => ~a & M8;\nexport const lshiftu8 = (a, b) => ((a & M8) << (b & M8)) & M8;\nexport const rshiftu8 = (a, b) => ((a & M8) >>> (b & M8)) & M8;\n// prettier-ignore\nexport const addu16 = (a, b) => ((a & M16) + (b & M16)) & M16;\n// prettier-ignore\nexport const divu16 = (a, b) => ((a & M16) / (b & M16)) & M16;\n// prettier-ignore\nexport const mulu16 = (a, b) => ((a & M16) * (b & M16)) & M16;\n// prettier-ignore\nexport const subu16 = (a, b) => ((a & M16) - (b & M16)) & M16;\n// prettier-ignore\nexport const andu16 = (a, b) => ((a & M16) & (b & M16)) & M16;\n// prettier-ignore\nexport const oru16 = (a, b) => ((a & M16) | (b & M16)) & M16;\n// prettier-ignore\nexport const xoru16 = (a, b) => ((a & M16) ^ (b & M16)) & M16;\nexport const notu16 = (a) => ~a & M16;\n// prettier-ignore\nexport const lshiftu16 = (a, b) => ((a & M16) << (b & M16)) & M16;\n// prettier-ignore\nexport const rshiftu16 = (a, b) => ((a & M16) >>> (b & M16)) & M16;\nexport const addu32 = (a, b) => ((a >>> 0) + (b >>> 0)) >>> 0;\nexport const divu32 = (a, b) => ((a >>> 0) / (b >>> 0)) >>> 0;\nexport const mulu32 = (a, b) => ((a >>> 0) * (b >>> 0)) >>> 0;\nexport const subu32 = (a, b) => ((a >>> 0) - (b >>> 0)) >>> 0;\nexport const andu32 = (a, b) => ((a >>> 0) & (b >>> 0)) >>> 0;\nexport const oru32 = (a, b) => ((a >>> 0) | (b >>> 0)) >>> 0;\nexport const xoru32 = (a, b) => ((a >>> 0) ^ (b >>> 0)) >>> 0;\nexport const notu32 = (a) => ~a >>> 0;\n// prettier-ignore\nexport const lshiftu32 = (a, b) => ((a >>> 0) << (b >>> 0)) >>> 0;\n// prettier-ignore\nexport const rshiftu32 = (a, b) => ((a >>> 0) >>> (b >>> 0)) >>> 0;\n","import { EPS } from \"./api\";\n/**\n * Recursively evaluates function `fn` for `res` uniformly spaced values\n * `t` in the closed parametric interval `[start,end]` and computes\n * corresponding sample values `p`. For each `p` then calls `error`\n * function to compute the error to query target value `q` and\n * eventually returns the `t` producing the overall minimum error. At\n * each level of recursion the search interval is increasingly narrowed\n * / centered around the best `t` of the current iteration.\n *\n * The search is terminated early if the best error value is less than\n * `eps`.\n *\n * The interval end points `start` and `end` MUST be normalized values\n * in the closed [0,1] interval.\n *\n * @param fn function to evaluate\n * @param error error function\n * @param q target value\n * @param res number of samples per interval\n * @param iter max number of iterations / recursion limit\n * @param start interval start\n * @param end interval end\n */\nexport const minError = (fn, error, q, res = 16, iter = 8, start = 0, end = 1, eps = EPS) => {\n    if (iter <= 0)\n        return (start + end) / 2;\n    const delta = (end - start) / res;\n    let minT = start;\n    let minE = Infinity;\n    for (let i = 0; i <= res; i++) {\n        const t = start + i * delta;\n        const e = error(q, fn(t));\n        if (e < minE) {\n            if (e <= eps)\n                return t;\n            minE = e;\n            minT = t;\n        }\n    }\n    return minError(fn, error, q, res, iter - 1, Math.max(minT - delta, 0), Math.min(minT + delta, 1));\n};\n","import { HALF_PI, PI } from \"./api\";\nexport const mix = (a, b, t) => a + (b - a) * t;\n/**\n * ```\n * c    d\n * +----+\n * |    |\n * +----+\n * a    b\n * ```\n *\n * @param a BL value\n * @param b BR value\n * @param c TL value\n * @param d TR value\n * @param u 1st interpolation factor\n * @param v 2nd interpolation factor\n */\nexport const mixBilinear = (a, b, c, d, u, v) => mix(mix(a, b, u), mix(c, d, u), v);\nexport const mixQuadratic = (a, b, c, t) => {\n    const s = 1 - t;\n    return a * s * s + b * 2 * s * t + c * t * t;\n};\nexport const mixCubic = (a, b, c, d, t) => {\n    const t2 = t * t;\n    const s = 1 - t;\n    const s2 = s * s;\n    return a * s2 * s + b * 3 * s2 * t + c * 3 * t2 * s + d * t2 * t;\n};\n/**\n * Returns hermite interpolation of `a, b, c, d` at normalized position\n * `t`, where `a` and `d` are used as predecessor/successor of `b` / `c`\n * and only inform the tangent of the interpolation curve. The\n * interpolated result is that of `b` and `c`.\n *\n * Assumes all inputs are uniformly spaced. If that's not the case, use\n * `mixCubicHermite()` with one of the tangent generators supporting\n * non-uniform spacing of points.\n *\n * See: https://www.desmos.com/calculator/j4gf8g9vkr\n *\n * Source:\n * https://www.musicdsp.org/en/latest/Other/93-hermite-interpollation.html\n *\n * @see mixCubicHermite\n * @see tangentCardinal\n * @see tangentDiff3\n *\n * @param a\n * @param b\n * @param c\n * @param d\n * @param t\n */\nexport const mixHermite = (a, b, c, d, t) => {\n    const y1 = 0.5 * (c - a);\n    const y2 = 1.5 * (b - c) + 0.5 * (d - a);\n    return ((y2 * t + a - b + y1 - y2) * t + y1) * t + b;\n};\n/**\n * Computes cubic-hermite interpolation between `a` / `b` at normalized\n * time `t` and using respective tangents `ta` / `tb`.\n *\n * https://en.wikipedia.org/wiki/Cubic_Hermite_spline\n *\n * @see mixHermite\n * @see tangentCardinal\n * @see tangentDiff3\n *\n * @param a\n * @param ta\n * @param b\n * @param tb\n * @param t\n */\nexport const mixCubicHermite = (a, ta, b, tb, t) => {\n    const s = t - 1;\n    const t2 = t * t;\n    const s2 = s * s;\n    const h00 = (1 + 2 * t) * s2;\n    const h10 = t * s2;\n    const h01 = t2 * (3 - 2 * t);\n    const h11 = t2 * s;\n    return h00 * a + h10 * ta + h01 * b + h11 * tb;\n};\n/**\n * Helper function for `mixCubicHermite()`. Computes cardinal tangents\n * based on point neighbors of a point B (not given), i.e. `a`\n * (predecessor) and `c` (successor) and their times (defaults to\n * uniformly spaced). The optional `tension` parameter can be used to\n * scale the tangent where 0.0 produces a Cardinal spline tangent and\n * 1.0 a Catmull-Rom (opposite to the Wikipedia ref).\n *\n * https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Cardinal_spline\n *\n * @param prev\n * @param next\n * @param scale\n * @param ta\n * @param tc\n */\nexport const tangentCardinal = (prev, next, scale = 0.5, ta = 0, tc = 2) => scale * ((next - prev) / (tc - ta));\n/**\n * Helper function for `mixCubicHermite()`. Computes tangent for `curr`,\n * based on 3-point finite difference, where `prev` & `next` are\n * `curr`'s neighbors and the `tX` the three points' respective time\n * values. The latter are equally spaced by default (each 1.0 apart).\n *\n * Using this function with equal spacing of 1.0 and together with\n * `mixCubicHermite()` will produce same results as the somewhat\n * optimized variant `mixHermite()`.\n *\n * https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Finite_difference\n *\n * @param prev\n * @param curr\n * @param next\n * @param ta\n * @param tb\n * @param tc\n */\nexport const tangentDiff3 = (prev, curr, next, ta = 0, tb = 1, tc = 2) => 0.5 * ((next - curr) / (tc - tb) + (curr - prev) / (tb - ta));\n/**\n * HOF interpolator. Takes a timing function `f` and interval `[from,\n * to]`. Returns function which takes normalized time as single arg and\n * returns interpolated value.\n *\n * @param f\n * @param from\n * @param to\n */\nexport const tween = (f, from, to) => (t) => mix(from, to, f(t));\n/**\n * Circular interpolation: `sqrt(1 - (1 - t)^2)`\n *\n * @param t interpolation factor (0.0 .. 1.0)\n */\nexport const circular = (t) => {\n    t = 1 - t;\n    return Math.sqrt(1 - t * t);\n};\nexport const cosine = (t) => 1 - (Math.cos(t * PI) * 0.5 + 0.5);\nexport const decimated = (n, t) => Math.floor(t * n) / n;\nexport const bounce = (k, amp, t) => {\n    const tk = t * k;\n    return 1 - ((amp * Math.sin(tk)) / tk) * Math.cos(t * HALF_PI);\n};\n/**\n * HOF exponential easing.\n *\n * - `ease = 1` -> linear\n * - `ease > 1` -> ease in\n * - `ease < 1` -> ease out\n *\n * @param ease easing behavior [0.0 .. ]\n * @param t\n */\nexport const ease = (ease, t) => Math.pow(t, ease);\n/**\n * HOF impulse generator. Peaks at `t=1/k`\n *\n * @param k impulse width (higher values => shorter impulse)\n */\nexport const impulse = (k, t) => {\n    const h = k * t;\n    return h * Math.exp(1 - h);\n};\nexport const gain = (k, t) => t < 0.5 ? 0.5 * Math.pow(2 * t, k) : 1 - 0.5 * Math.pow(2 - 2 * t, k);\nexport const parabola = (k, t) => Math.pow(4.0 * t * (1.0 - t), k);\nexport const cubicPulse = (w, c, t) => {\n    t = Math.abs(t - c);\n    return t > w ? 0 : ((t /= w), 1 - t * t * (3 - 2 * t));\n};\nexport const sinc = (k, t) => {\n    t = PI * (k * t - 1.0);\n    return Math.sin(t) / t;\n};\n/**\n * Sigmoid function for inputs in [0..1] interval.\n *\n * @param k\n * @param t\n */\nexport const sigmoid = (k, t) => 1 / (1 + Math.exp(-k * (2 * t - 1)));\n/**\n * Sigmoid function for inputs in [-1..+1] interval.\n *\n * @param k\n * @param t\n */\nexport const sigmoid11 = (k, t) => 1 / (1 + Math.exp(-k * t));\n","import { EPS } from \"./api\";\n/**\n * Returns `a - b * floor(a/b)`\n *\n * @param a\n * @param b\n */\nexport const fmod = (a, b) => a - b * Math.floor(a / b);\nexport const fract = (x) => x - Math.floor(x);\nexport const trunc = (x) => (x < 0 ? Math.ceil(x) : Math.floor(x));\nexport const roundTo = (x, prec = 1) => Math.round(x / prec) * prec;\n/**\n * Only rounds `x` to nearest int if `fract(x)` < `eps` or > `1-eps`.\n *\n * @param x\n * @param eps\n */\nexport const roundEps = (x, eps = EPS) => {\n    const f = fract(x);\n    return f <= eps || f >= 1 - eps ? Math.round(x) : x;\n};\n","export const simplifyRatio = (num, denom) => {\n    let e1 = Math.abs(num);\n    let e2 = Math.abs(denom);\n    while (true) {\n        if (e1 < e2) {\n            const t = e1;\n            e1 = e2;\n            e2 = t;\n        }\n        const r = e1 % e2;\n        if (r) {\n            e1 = r;\n        }\n        else {\n            return [num / e2, denom / e2];\n        }\n    }\n};\n","import { EPS } from \"./api\";\n/**\n * Produces a new function which computes derivative of the given\n * single-arg function. The extra optional arg `eps` is used to\n * define the step width for computing derived values:\n *\n * `f'(x) = (f(x + eps) - f(x)) / eps`\n *\n * The original function is assumed to be fully differentiable\n * in the interval the returned function is going to be used.\n * No validity checks of any form are done.\n *\n * https://en.wikipedia.org/wiki/Derivative#Continuity_and_differentiability\n *\n * @param fn\n * @param eps\n */\nexport const derivative = (f, eps = EPS) => (x) => (f(x + eps) - f(x)) / eps;\n/**\n * Computes solution for linear equation: `ax + b = 0`.\n *\n * Note: `a` MUST NOT be zero.\n *\n * @param a slope\n * @param b constant offset\n */\nexport const solveLinear = (a, b) => -b / a;\n/**\n * Computes solutions for quadratic equation: `ax^2 + bx + c = 0`.\n * Returns array of real solutions.\n * Note: `a` MUST NOT be zero. If the quadratic term is missing,\n * use `solveLinear` instead.\n *\n * https://en.wikipedia.org/wiki/Quadratic_function\n * https://en.wikipedia.org/wiki/Quadratic_equation\n *\n * @param a quadratic coefficient\n * @param b linear coefficient\n * @param c constant offset\n * @param eps tolerance to determine multiple roots\n */\nexport const solveQuadratic = (a, b, c, eps = 1e-9) => {\n    const d = 2 * a;\n    let r = b * b - 4 * a * c;\n    return r < 0\n        ? []\n        : r < eps\n            ? [-b / d]\n            : ((r = Math.sqrt(r)), [(-b - r) / d, (-b + r) / d]);\n};\n/**\n * Computes solutions for quadratic equation: `ax^3 + bx^2 + c*x + d = 0`.\n * Returns array of solutions, both real & imaginary.\n * Note: `a` MUST NOT be zero. If the cubic term is missing (i.e. zero),\n * use `solveQuadratic` or `solveLinear` instead.\n *\n * https://en.wikipedia.org/wiki/Cubic_function\n *\n * @param a cubic coefficient\n * @param b quadratic coefficient\n * @param c linear coefficient\n * @param d constant offset\n * @param eps tolerance to determine multiple roots\n */\nexport const solveCubic = (a, b, c, d, eps = 1e-9) => {\n    const aa = a * a;\n    const bb = b * b;\n    const ba3 = b / (3 * a);\n    const p = (3 * a * c - bb) / (3 * aa);\n    const q = (2 * bb * b - 9 * a * b * c + 27 * aa * d) / (27 * aa * a);\n    if (Math.abs(p) < eps) {\n        return [Math.cbrt(-q) - ba3];\n    }\n    else if (Math.abs(q) < eps) {\n        return p < 0\n            ? [-Math.sqrt(-p) - ba3, -ba3, Math.sqrt(-p) - ba3]\n            : [-ba3];\n    }\n    else {\n        const denom = (q * q) / 4 + (p * p * p) / 27;\n        if (Math.abs(denom) < eps) {\n            return [(-1.5 * q) / p - ba3, (3 * q) / p - ba3];\n        }\n        else if (denom > 0) {\n            const u = Math.cbrt(-q / 2 - Math.sqrt(denom));\n            return [u - p / (3 * u) - ba3];\n        }\n        else {\n            const u = 2 * Math.sqrt(-p / 3), t = Math.acos((3 * q) / p / u) / 3, k = (2 * Math.PI) / 3;\n            return [\n                u * Math.cos(t) - ba3,\n                u * Math.cos(t - k) - ba3,\n                u * Math.cos(t - 2 * k) - ba3\n            ];\n        }\n    }\n};\n","import { clamp01 } from \"./interval\";\n/**\n * Step/threshold function.\n *\n * @param edge threshold\n * @param x test value\n * @returns 0, if `x < e`, else 1\n */\nexport const step = (edge, x) => (x < edge ? 0 : 1);\n/**\n * GLSL-style smoothStep threshold function.\n *\n * @param edge lower threshold\n * @param edge2 upper threshold\n * @param x test value\n * @returns 0, if `x < edge1`, 1 if `x > edge2`, else sigmoid interpolation\n */\nexport const smoothStep = (edge, edge2, x) => {\n    x = clamp01((x - edge) / (edge2 - edge));\n    return (3 - 2 * x) * x * x;\n};\n/**\n * Similar to `smoothStep()` but using different polynomial.\n *\n * @param edge\n * @param edge2\n * @param x\n */\nexport const smootherStep = (edge, edge2, x) => {\n    x = clamp01((x - edge) / (edge2 - edge));\n    return x * x * x * (x * (x * 6 - 15) + 10);\n};\n/**\n * Exponential ramp with variable shape, e.g.\n *\n * - S-curve: k=8, n=4\n * - Step near 1.0: k=8, n=20\n * - Pulse: k=0.005, n=-10\n * - Ease-in: k=0.5, n=0.25\n *\n * @param k\n * @param n\n * @param x\n */\nexport const expStep = (k, n, x) => 1 - Math.exp(-k * Math.pow(x, n));\n","export * from \"./api\";\nexport * from \"./abs\";\nexport * from \"./angle\";\nexport * from \"./crossing\";\nexport * from \"./eqdelta\";\nexport * from \"./extrema\";\nexport * from \"./fit\";\nexport * from \"./int\";\nexport * from \"./interval\";\nexport * from \"./min-error\";\nexport * from \"./mix\";\nexport * from \"./prec\";\nexport * from \"./ratio\";\nexport * from \"./solve\";\nexport * from \"./step\";\n","import { mixHermite } from \"@thi.ng/math\";\nimport { interpolate } from \"./interpolate\";\nexport function interpolateHermite(n, src) {\n    return interpolate((chunk, t) => mixHermite(...chunk, t), 4, n, src);\n}\n","import { mix } from \"@thi.ng/math\";\nimport { interpolate } from \"./interpolate\";\nexport function interpolateLinear(n, src) {\n    return interpolate((chunk, t) => mix(...chunk, t), 2, n, src);\n}\n","import { compR } from \"../func/compr\";\nimport { iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function interpose(sep, src) {\n    return src\n        ? iterator(interpose(sep), src)\n        : (rfn) => {\n            const r = rfn[2];\n            const _sep = typeof sep === \"function\" ? sep : () => sep;\n            let first = true;\n            return compR(rfn, (acc, x) => {\n                if (first) {\n                    first = false;\n                    return r(acc, x);\n                }\n                acc = r(acc, _sep());\n                return isReduced(acc) ? acc : r(acc, x);\n            });\n        };\n}\n","import { identity } from \"@thi.ng/compose\";\nimport { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function keep(...args) {\n    return ($iter(keep, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const pred = args[0] || identity;\n            return compR(rfn, (acc, x) => pred(x) != null ? r(acc, x) : acc);\n        }));\n}\n","import { isFunction } from \"@thi.ng/checks\";\nimport { iterator1 } from \"../iterator\";\nimport { map } from \"./map\";\nexport function labeled(id, src) {\n    return src\n        ? iterator1(labeled(id), src)\n        : map(isFunction(id) ? (x) => [id(x), x] : (x) => [id, x]);\n}\n","import { isFunction } from \"@thi.ng/checks\";\n/**\n * Higher-order deep object transformer. Accepts a nested `spec`\n * array reflecting same key structure as the object to be mapped,\n * but with functions or sub-specs as their values.\n * Returns a new function, which when called, recursively applies\n * nested transformers in post-order traversal (child transformers\n * are run first) and returns the result of the root transformer.\n *\n * The transform specs are given as arrays in this format:\n *\n * ```\n * [tx-function, {key1: [tx-function, {...}], key2: tx-fn}]\n * ```\n *\n * If a key in the spec has no further sub maps, its transform\n * function can be given directly without having to wrap it into\n * the usual array structure.\n *\n * ```\n * // source object to be transformed\n * src = {\n *    meta: {\n *      author: { name: \"Alice\", email: \"a@b.com\" },\n *      date: 1041510896000\n *    },\n *    type: \"post\",\n *    title: \"Hello world\",\n *    body: \"Ratione necessitatibus doloremque itaque.\"\n * };\n *\n * // deep transformation spec\n * spec = [\n *    // root transform (called last)\n *    ({type, meta, title, body}) => [\"div\", {class: type}, title, meta, body],\n *    // object of transform sub-specs\n *    {\n *      meta: [\n *        ({author, date}) => [\"div.meta\", author, `(${date})`],\n *        {\n *          author: ({email, name}) => [\"a\", {href: `mailto:${email}`}, name],\n *          date: (d) => new Date(d).toLocaleString()\n *        }\n *      ],\n *      title: (title) => [\"h1\", title]\n *    }\n * ];\n *\n * // build transformer & apply to src\n * deepTransform(spec)(src);\n *\n * // [ \"div\",\n * //   { class: \"article\" },\n * //   [ \"h1\", \"Hello world\" ],\n * //   [ \"div.meta\",\n * //     [ \"a\", { href: \"mailto:a@.b.com\" }, \"Alice\" ],\n * //     \"(1/2/2003, 12:34:56 PM)\" ],\n * //   \"Ratione necessitatibus doloremque itaque.\" ]\n * ```\n *\n * @param spec transformation spec\n */\nexport const deepTransform = (spec) => {\n    if (isFunction(spec)) {\n        return spec;\n    }\n    const mapfns = Object.keys(spec[1] || {}).reduce((acc, k) => ((acc[k] = deepTransform(spec[1][k])), acc), {});\n    return (x) => {\n        const res = Object.assign({}, x);\n        for (let k in mapfns) {\n            res[k] = mapfns[k](res[k]);\n        }\n        return spec[0](res);\n    };\n};\n","import { deepTransform } from \"../func/deep-transform\";\nimport { iterator1 } from \"../iterator\";\nimport { map } from \"./map\";\nexport function mapDeep(spec, src) {\n    return src ? iterator1(mapDeep(spec), src) : map(deepTransform(spec));\n}\n","import { $iter } from \"../iterator\";\nimport { map } from \"./map\";\nexport function mapKeys(...args) {\n    const iter = $iter(mapKeys, args);\n    if (iter) {\n        return iter;\n    }\n    const keys = args[0];\n    const copy = args[1] !== false;\n    return map((x) => {\n        const res = copy ? Object.assign({}, x) : x;\n        for (let k in keys) {\n            res[k] = keys[k](x[k]);\n        }\n        return res;\n    });\n}\n","import { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function mapNth(...args) {\n    const iter = $iter(mapNth, args);\n    if (iter) {\n        return iter;\n    }\n    let n = args[0] - 1;\n    let offset;\n    let fn;\n    if (typeof args[1] === \"number\") {\n        offset = args[1];\n        fn = args[2];\n    }\n    else {\n        fn = args[1];\n        offset = 0;\n    }\n    return (rfn) => {\n        const r = rfn[2];\n        let skip = 0, off = offset;\n        return compR(rfn, (acc, x) => {\n            if (off === 0) {\n                if (skip === 0) {\n                    skip = n;\n                    return r(acc, fn(x));\n                }\n                skip--;\n            }\n            else {\n                off--;\n            }\n            return r(acc, x);\n        });\n    };\n}\n","import { $iter } from \"../iterator\";\nimport { map } from \"./map\";\nexport function mapVals(...args) {\n    const iter = $iter(mapVals, args);\n    if (iter) {\n        return iter;\n    }\n    const fn = args[0];\n    const copy = args[1] !== false;\n    return map((x) => {\n        const res = copy ? {} : x;\n        for (let k in x) {\n            res[k] = fn(x[k]);\n        }\n        return res;\n    });\n}\n","import { compR } from \"../func/compr\";\nimport { iterator } from \"../iterator\";\nimport { ensureReduced, reduced } from \"../reduced\";\nexport function take(n, src) {\n    return src\n        ? iterator(take(n), src)\n        : (rfn) => {\n            const r = rfn[2];\n            let m = n;\n            return compR(rfn, (acc, x) => --m > 0\n                ? r(acc, x)\n                : m === 0\n                    ? ensureReduced(r(acc, x))\n                    : reduced(acc));\n        };\n}\n","import { comp } from \"../func/comp\";\nimport { iterator1 } from \"../iterator\";\nimport { filter } from \"./filter\";\nimport { take } from \"./take\";\nexport function matchFirst(pred, src) {\n    return src\n        ? [...iterator1(matchFirst(pred), src)][0]\n        : comp(filter(pred), take(1));\n}\n","import { isReduced } from \"../reduced\";\n/**\n * Helper HOF yielding a buffer drain completion function for some\n * transducers.\n *\n * @param buf\n * @param complete\n * @param reduce\n */\nexport const __drain = (buf, complete, reduce) => (acc) => {\n    while (buf.length && !isReduced(acc)) {\n        acc = reduce(acc, buf.shift());\n    }\n    return complete(acc);\n};\n","import { __drain } from \"../internal/drain\";\nimport { iterator } from \"../iterator\";\nexport function takeLast(n, src) {\n    return src\n        ? iterator(takeLast(n), src)\n        : ([init, complete, reduce]) => {\n            const buf = [];\n            return [\n                init,\n                __drain(buf, complete, reduce),\n                (acc, x) => {\n                    if (buf.length === n) {\n                        buf.shift();\n                    }\n                    buf.push(x);\n                    return acc;\n                }\n            ];\n        };\n}\n","import { comp } from \"../func/comp\";\nimport { iterator } from \"../iterator\";\nimport { filter } from \"./filter\";\nimport { takeLast } from \"./take-last\";\nexport function matchLast(pred, src) {\n    return src\n        ? [...iterator(matchLast(pred), src)][0]\n        : comp(filter(pred), takeLast(1));\n}\n","import { illegalArgs } from \"@thi.ng/errors\";\nimport { compR } from \"../func/compr\";\nimport { iterator1 } from \"../iterator\";\nexport function movingAverage(period, src) {\n    return src\n        ? iterator1(movingAverage(period), src)\n        : (rfn) => {\n            period |= 0;\n            period < 2 && illegalArgs(\"period must be >= 2\");\n            const reduce = rfn[2];\n            const window = [];\n            let sum = 0;\n            return compR(rfn, (acc, x) => {\n                const n = window.push(x);\n                sum += x;\n                n > period && (sum -= window.shift());\n                return n >= period ? reduce(acc, sum / period) : acc;\n            });\n        };\n}\n","import { compare } from \"@thi.ng/compare\";\nimport { identity } from \"@thi.ng/compose\";\nexport const __sortOpts = (opts) => (Object.assign({ key: identity, compare }, opts));\n","import { comp } from \"../func/comp\";\nimport { __sortOpts } from \"../internal/sort-opts\";\nimport { $iter } from \"../iterator\";\nimport { map } from \"./map\";\nimport { partition } from \"./partition\";\nexport function movingMedian(...args) {\n    const iter = $iter(movingMedian, args);\n    if (iter) {\n        return iter;\n    }\n    const { key, compare } = __sortOpts(args[1]);\n    const n = args[0];\n    const m = n >> 1;\n    return comp(partition(n, 1, true), map((window) => window.slice().sort((a, b) => compare(key(a), key(b)))[m]));\n}\n","import { juxt } from \"@thi.ng/compose\";\nimport { step } from \"../step\";\nimport { map } from \"./map\";\nexport function multiplex(...args) {\n    return map(juxt.apply(null, args.map(step)));\n}\n","export const renamer = (kmap) => {\n    const ks = Object.keys(kmap);\n    const [a2, b2, c2] = ks;\n    const [a1, b1, c1] = ks.map((k) => kmap[k]);\n    switch (ks.length) {\n        case 3:\n            return (x) => {\n                const res = {};\n                let v;\n                (v = x[c1]), v !== undefined && (res[c2] = v);\n                (v = x[b1]), v !== undefined && (res[b2] = v);\n                (v = x[a1]), v !== undefined && (res[a2] = v);\n                return res;\n            };\n        case 2:\n            return (x) => {\n                const res = {};\n                let v;\n                (v = x[b1]), v !== undefined && (res[b2] = v);\n                (v = x[a1]), v !== undefined && (res[a2] = v);\n                return res;\n            };\n        case 1:\n            return (x) => {\n                const res = {};\n                let v = x[a1];\n                v !== undefined && (res[a2] = v);\n                return res;\n            };\n        default:\n            return (x) => {\n                let k, v;\n                const res = {};\n                for (let i = ks.length - 1; i >= 0; i--) {\n                    (k = ks[i]),\n                        (v = x[kmap[k]]),\n                        v !== undefined && (res[k] = v);\n                }\n                return res;\n            };\n    }\n};\n","import { isArray } from \"@thi.ng/checks\";\nimport { comp } from \"../func/comp\";\nimport { renamer } from \"../func/renamer\";\nimport { $iter } from \"../iterator\";\nimport { transduce } from \"../transduce\";\nimport { filter } from \"./filter\";\nimport { map } from \"./map\";\nexport function rename(...args) {\n    const iter = args.length > 2 && $iter(rename, args);\n    if (iter) {\n        return iter;\n    }\n    let kmap = args[0];\n    if (isArray(kmap)) {\n        kmap = kmap.reduce((acc, k, i) => ((acc[k] = i), acc), {});\n    }\n    if (args[1]) {\n        const ks = Object.keys(kmap);\n        return map((y) => transduce(comp(map((k) => [k, y[kmap[k]]]), filter((x) => x[1] !== undefined)), args[1], ks));\n    }\n    else {\n        return map(renamer(kmap));\n    }\n}\n","import { comp } from \"../func/comp\";\nimport { $iter } from \"../iterator\";\nimport { multiplex } from \"./multiplex\";\nimport { rename } from \"./rename\";\nexport function multiplexObj(...args) {\n    const iter = $iter(multiplexObj, args);\n    if (iter) {\n        return iter;\n    }\n    const [xforms, rfn] = args;\n    const ks = Object.keys(xforms);\n    return comp(multiplex.apply(null, ks.map((k) => xforms[k])), rename(ks, rfn));\n}\n","/**\n * No-op / pass-through transducer, essentially the same as:\n * `map(identity)`, but faster. Useful for testing and / or to keep\n * existing values in a `multiplex()` tuple lane.\n */\nexport const noop = () => (rfn) => rfn;\n","import { iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function padLast(n, fill, src) {\n    return src\n        ? iterator(padLast(n, fill), src)\n        : ([init, complete, reduce]) => {\n            let m = 0;\n            return [\n                init,\n                (acc) => {\n                    let rem = m % n;\n                    if (rem > 0) {\n                        while (++rem <= n && !isReduced(acc)) {\n                            acc = reduce(acc, fill);\n                        }\n                    }\n                    return complete(acc);\n                },\n                (acc, x) => (m++, reduce(acc, x))\n            ];\n        };\n}\n","import { comp } from \"../func/comp\";\nimport { $iter } from \"../iterator\";\nimport { drop } from \"./drop\";\nimport { take } from \"./take\";\nexport function page(...args) {\n    return ($iter(page, args) ||\n        comp(drop(args[0] * (args[1] || 10)), take(args[1] || 10)));\n}\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { $iter, iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function partitionBy(...args) {\n    return ($iter(partitionBy, args, iterator) ||\n        (([init, complete, reduce]) => {\n            const fn = args[0];\n            const f = args[1] === true ? fn() : fn;\n            let prev = SEMAPHORE;\n            let chunk;\n            return [\n                init,\n                (acc) => {\n                    if (chunk && chunk.length) {\n                        acc = reduce(acc, chunk);\n                        chunk = null;\n                    }\n                    return complete(acc);\n                },\n                (acc, x) => {\n                    const curr = f(x);\n                    if (prev === SEMAPHORE) {\n                        prev = curr;\n                        chunk = [x];\n                    }\n                    else if (curr === prev) {\n                        chunk.push(x);\n                    }\n                    else {\n                        chunk && (acc = reduce(acc, chunk));\n                        chunk = isReduced(acc) ? null : [x];\n                        prev = curr;\n                    }\n                    return acc;\n                }\n            ];\n        }));\n}\n","import { iterator } from \"../iterator\";\nimport { partitionBy } from \"./partition-by\";\nexport function partitionOf(sizes, src) {\n    return src\n        ? iterator(partitionOf(sizes), src)\n        : partitionBy(() => {\n            let i = 0, j = 0;\n            return () => {\n                if (i++ === sizes[j]) {\n                    i = 1;\n                    j = (j + 1) % sizes.length;\n                }\n                return j;\n            };\n        }, true);\n}\n","import { comp } from \"../func/comp\";\nimport { __sortOpts } from \"../internal/sort-opts\";\nimport { $iter, iterator } from \"../iterator\";\nimport { mapcat } from \"./mapcat\";\nimport { partition } from \"./partition\";\nexport function partitionSort(...args) {\n    const iter = $iter(partitionSort, args, iterator);\n    if (iter) {\n        return iter;\n    }\n    const { key, compare } = __sortOpts(args[1]);\n    return comp(partition(args[0], true), mapcat((window) => window.slice().sort((a, b) => compare(key(a), key(b)))));\n}\n","import { isArray } from \"@thi.ng/checks\";\nimport { identity } from \"@thi.ng/compose\";\nimport { illegalState } from \"@thi.ng/errors\";\nimport { $iter, iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function partitionSync(...args) {\n    return ($iter(partitionSync, args, iterator) ||\n        (([init, complete, reduce]) => {\n            let curr = {};\n            let first = true;\n            const currKeys = new Set();\n            const { key, mergeOnly, reset, all, backPressure } = Object.assign({ key: identity, mergeOnly: false, reset: true, all: true, backPressure: 0 }, args[1]);\n            const ks = isArray(args[0])\n                ? new Set(args[0])\n                : args[0];\n            if (mergeOnly || backPressure < 1) {\n                return [\n                    init,\n                    (acc) => {\n                        if ((reset && all && currKeys.size > 0) ||\n                            (!reset && first)) {\n                            acc = reduce(acc, curr);\n                            curr = {};\n                            currKeys.clear();\n                            first = false;\n                        }\n                        return complete(acc);\n                    },\n                    (acc, x) => {\n                        const k = key(x);\n                        if (ks.has(k)) {\n                            curr[k] = x;\n                            currKeys.add(k);\n                            if (mergeOnly || requiredInputs(ks, currKeys)) {\n                                acc = reduce(acc, curr);\n                                first = false;\n                                if (reset) {\n                                    curr = {};\n                                    currKeys.clear();\n                                }\n                                else {\n                                    curr = Object.assign({}, curr);\n                                }\n                            }\n                        }\n                        return acc;\n                    }\n                ];\n            }\n            else {\n                // with backpressure / caching...\n                const cache = new Map();\n                return [\n                    init,\n                    (acc) => {\n                        if (all && currKeys.size > 0) {\n                            acc = reduce(acc, collect(cache, currKeys));\n                            currKeys.clear();\n                        }\n                        return complete(acc);\n                    },\n                    (acc, x) => {\n                        const k = key(x);\n                        if (ks.has(k)) {\n                            let slot = cache.get(k);\n                            !slot && cache.set(k, (slot = []));\n                            slot.length >= backPressure &&\n                                illegalState(`max back pressure (${backPressure}) exceeded for input: ${String(k)}`);\n                            slot.push(x);\n                            currKeys.add(k);\n                            while (requiredInputs(ks, currKeys)) {\n                                acc = reduce(acc, collect(cache, currKeys));\n                                first = false;\n                                if (isReduced(acc))\n                                    break;\n                            }\n                        }\n                        return acc;\n                    }\n                ];\n            }\n        }));\n}\nconst requiredInputs = (required, curr) => {\n    if (curr.size < required.size)\n        return false;\n    for (let id of required) {\n        if (!curr.has(id))\n            return false;\n    }\n    return true;\n};\nconst collect = (cache, currKeys) => {\n    const curr = {};\n    for (let id of currKeys) {\n        const slot = cache.get(id);\n        curr[id] = slot.shift();\n        !slot.length && currKeys.delete(id);\n    }\n    return curr;\n};\n","import { iterator1 } from \"../iterator\";\nimport { map } from \"./map\";\nexport function pluck(key, src) {\n    return src ? iterator1(pluck(key), src) : map((x) => x[key]);\n}\n","import { SYSTEM } from \"@thi.ng/random\";\nimport { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function sample(...args) {\n    const iter = $iter(sample, args);\n    if (iter) {\n        return iter;\n    }\n    const prob = args[0];\n    const rnd = args[1] || SYSTEM;\n    return (rfn) => {\n        const r = rfn[2];\n        return compR(rfn, (acc, x) => (rnd.float() < prob ? r(acc, x) : acc));\n    };\n}\n","import { $iter, iterator } from \"../iterator\";\nimport { ensureReduced, isReduced, unreduced } from \"../reduced\";\nexport function scan(...args) {\n    return ((args.length > 2 && $iter(scan, args, iterator)) ||\n        (([inito, completeo, reduceo]) => {\n            const [initi, completei, reducei] = args[0];\n            let acc = args.length > 1 && args[1] != null ? args[1] : initi();\n            return [\n                inito,\n                (_acc) => {\n                    let a = completei(acc);\n                    if (a !== acc) {\n                        _acc = unreduced(reduceo(_acc, a));\n                    }\n                    acc = a;\n                    return completeo(_acc);\n                },\n                (_acc, x) => {\n                    acc = reducei(acc, x);\n                    if (isReduced(acc)) {\n                        return ensureReduced(reduceo(_acc, acc.deref()));\n                    }\n                    return reduceo(_acc, acc);\n                }\n            ];\n        }));\n}\n","import { renamer } from \"./renamer\";\nexport const keySelector = (keys) => renamer(keys.reduce((acc, x) => ((acc[x] = x), acc), {}));\n","import { keySelector } from \"../func/key-selector\";\nimport { iterator1 } from \"../iterator\";\nimport { map } from \"./map\";\nexport function selectKeys(keys, src) {\n    return src ? iterator1(selectKeys(keys), src) : map(keySelector(keys));\n}\n","import { map } from \"./map\";\n/**\n * Helper transducer. Applies given `fn` to each input value, presumably\n * for side effects. Discards function's result and yields original\n * inputs.\n *\n * @param fn side effect\n */\nexport const sideEffect = (fn) => map((x) => (fn(x), x));\n","import { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function slidingWindow(...args) {\n    const iter = $iter(slidingWindow, args);\n    if (iter) {\n        return iter;\n    }\n    const size = args[0];\n    const partial = args[1] !== false;\n    return (rfn) => {\n        const reduce = rfn[2];\n        let buf = [];\n        return compR(rfn, (acc, x) => {\n            buf.push(x);\n            if (partial || buf.length === size) {\n                acc = reduce(acc, buf);\n                buf = buf.slice(buf.length === size ? 1 : 0);\n            }\n            return acc;\n        });\n    };\n}\n","import { shuffle } from \"@thi.ng/arrays\";\nimport { $iter, iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function streamShuffle(...args) {\n    return ($iter(streamShuffle, args, iterator) ||\n        (([init, complete, reduce]) => {\n            const n = args[0];\n            const maxSwaps = args[1] || n;\n            const buf = [];\n            return [\n                init,\n                (acc) => {\n                    while (buf.length && !isReduced(acc)) {\n                        shuffle(buf, maxSwaps);\n                        acc = reduce(acc, buf.shift());\n                    }\n                    acc = complete(acc);\n                    return acc;\n                },\n                (acc, x) => {\n                    buf.push(x);\n                    shuffle(buf, maxSwaps);\n                    if (buf.length === n) {\n                        acc = reduce(acc, buf.shift());\n                    }\n                    return acc;\n                }\n            ];\n        }));\n}\n","import { binarySearch } from \"@thi.ng/arrays\";\nimport { __drain } from \"../internal/drain\";\nimport { __sortOpts } from \"../internal/sort-opts\";\nimport { $iter, iterator } from \"../iterator\";\nexport function streamSort(...args) {\n    const iter = $iter(streamSort, args, iterator);\n    if (iter) {\n        return iter;\n    }\n    const { key, compare } = __sortOpts(args[1]);\n    const n = args[0];\n    return ([init, complete, reduce]) => {\n        const buf = [];\n        return [\n            init,\n            __drain(buf, complete, reduce),\n            (acc, x) => {\n                const idx = binarySearch(buf, x, key, compare);\n                buf.splice(idx < 0 ? -(idx + 1) : idx, 0, x);\n                if (buf.length === n) {\n                    acc = reduce(acc, buf.shift());\n                }\n                return acc;\n            }\n        ];\n    };\n}\n","import { comp } from \"../func/comp\";\nimport { iterator } from \"../iterator\";\nimport { mapKeys } from \"./map-keys\";\nimport { partition } from \"./partition\";\nimport { partitionOf } from \"./partition-of\";\nimport { rename } from \"./rename\";\nexport function struct(fields, src) {\n    return src\n        ? iterator(struct(fields), src)\n        : comp(partitionOf(fields.map((f) => f[1])), partition(fields.length), rename(fields.map((f) => f[0])), mapKeys(fields.reduce((acc, f) => (f[2] ? ((acc[f[0]] = f[2]), acc) : acc), {}), false));\n}\n","import { swizzle as _swizzle } from \"@thi.ng/arrays\";\nimport { iterator1 } from \"../iterator\";\nimport { map } from \"./map\";\nexport function swizzle(order, src) {\n    return src ? iterator1(swizzle(order), src) : map(_swizzle(order));\n}\n","import { iterator1 } from \"../iterator\";\nimport { throttle } from \"./throttle\";\nexport function takeNth(n, src) {\n    if (src) {\n        return iterator1(takeNth(n), src);\n    }\n    n = Math.max(0, n - 1);\n    return throttle(() => {\n        let skip = 0;\n        return () => (skip === 0 ? ((skip = n), true) : (skip--, false));\n    });\n}\n","import { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nimport { reduced } from \"../reduced\";\nexport function takeWhile(...args) {\n    return ($iter(takeWhile, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const pred = args[0];\n            let ok = true;\n            return compR(rfn, (acc, x) => ((ok = ok && pred(x)) ? r(acc, x) : reduced(acc)));\n        }));\n}\n","import { iterator1 } from \"../iterator\";\nimport { throttle } from \"./throttle\";\nexport function throttleTime(delay, src) {\n    return src\n        ? iterator1(throttleTime(delay), src)\n        : throttle(() => {\n            let last = 0;\n            return () => {\n                const t = Date.now();\n                return t - last >= delay ? ((last = t), true) : false;\n            };\n        });\n}\n","import { iterator1 } from \"../iterator\";\nexport function toggle(on, off, initial = false, src) {\n    return src\n        ? iterator1(toggle(on, off, initial), src)\n        : ([init, complete, reduce]) => {\n            let state = initial;\n            return [\n                init,\n                complete,\n                (acc) => reduce(acc, (state = !state) ? on : off)\n            ];\n        };\n}\n","import { sideEffect } from \"./side-effect\";\nexport const trace = (prefix = \"\") => sideEffect((x) => console.log(prefix, x));\n","import { $iter, iterator } from \"../iterator\";\nimport { partitionBy } from \"./partition-by\";\nexport function wordWrap(...args) {\n    const iter = $iter(wordWrap, args, iterator);\n    if (iter) {\n        return iter;\n    }\n    const lineLength = args[0];\n    const { delim, always } = Object.assign({ delim: 1, always: true }, args[1]);\n    return partitionBy(() => {\n        let n = 0;\n        let flag = false;\n        return (w) => {\n            n += w.length + delim;\n            if (n > lineLength + (always ? 0 : delim)) {\n                flag = !flag;\n                n = w.length + delim;\n            }\n            return flag;\n        };\n    }, true);\n}\n","import { isReduced, reduced, unreduced } from \"../reduced\";\nexport function juxtR(...rs) {\n    let [a, b, c] = rs;\n    const n = rs.length;\n    switch (n) {\n        case 1: {\n            const r = a[2];\n            return [\n                () => [a[0]()],\n                (acc) => [a[1](acc[0])],\n                (acc, x) => {\n                    const aa1 = r(acc[0], x);\n                    if (isReduced(aa1)) {\n                        return reduced([unreduced(aa1)]);\n                    }\n                    return [aa1];\n                }\n            ];\n        }\n        case 2: {\n            const ra = a[2];\n            const rb = b[2];\n            return [\n                () => [a[0](), b[0]()],\n                (acc) => [a[1](acc[0]), b[1](acc[1])],\n                (acc, x) => {\n                    const aa1 = ra(acc[0], x);\n                    const aa2 = rb(acc[1], x);\n                    if (isReduced(aa1) || isReduced(aa2)) {\n                        return reduced([unreduced(aa1), unreduced(aa2)]);\n                    }\n                    return [aa1, aa2];\n                }\n            ];\n        }\n        case 3: {\n            const ra = a[2];\n            const rb = b[2];\n            const rc = c[2];\n            return [\n                () => [a[0](), b[0](), c[0]()],\n                (acc) => [a[1](acc[0]), b[1](acc[1]), c[1](acc[2])],\n                (acc, x) => {\n                    const aa1 = ra(acc[0], x);\n                    const aa2 = rb(acc[1], x);\n                    const aa3 = rc(acc[2], x);\n                    if (isReduced(aa1) || isReduced(aa2) || isReduced(aa3)) {\n                        return reduced([\n                            unreduced(aa1),\n                            unreduced(aa2),\n                            unreduced(aa3)\n                        ]);\n                    }\n                    return [aa1, aa2, aa3];\n                }\n            ];\n        }\n        default:\n            return [\n                () => rs.map((r) => r[0]()),\n                (acc) => rs.map((r, i) => r[1](acc[i])),\n                (acc, x) => {\n                    let done = false;\n                    const res = [];\n                    for (let i = 0; i < n; i++) {\n                        let a = rs[i][2](acc[i], x);\n                        if (isReduced(a)) {\n                            done = true;\n                            a = unreduced(a);\n                        }\n                        res[i] = a;\n                    }\n                    return done ? reduced(res) : res;\n                }\n            ];\n    }\n}\n","/**\n * Returns function accepting a single index arg used to\n * lookup value in given array. No bounds checks are done.\n *\n * ```\n * [...map(lookup1d([10, 20, 30]), [2,0,1])]\n * // [ 30, 10, 20 ]\n * ```\n *\n * @param src source data\n */\nexport const lookup1d = (src) => (i) => src[i];\n/**\n * Returns function accepting a single `[x, y]` index tuple,\n * used to lookup value in given array. Useful for transducers\n * processing 2D data. **Note**: The source data MUST be in\n * row major linearized format, i.e. 1D representation of 2D data\n * (pixel buffer). No bounds checks are done.\n *\n * ```\n * [...map(lookup2d([...range(9)], 3), range2d(2, -1, 0, 3))]\n * // [ 2, 1, 0, 5, 4, 3, 8, 7, 6 ]\n * ```\n *\n * @param src source data\n * @param width number of items along X (columns)\n */\nexport const lookup2d = (src, width) => (i) => src[i[0] + i[1] * width];\n/**\n * Same as `lookup2d()`, but for 3D data. The index ordering of the\n * source data MUST be in Z, Y, X order (i.e. a stack of row major 2D slices).\n * No bounds checks are done.\n *\n * @param src source data\n * @param width number of items along X (columns)\n * @param height number of items along Y (rows)\n */\nexport const lookup3d = (src, width, height) => {\n    const stridez = width * height;\n    return (i) => src[i[0] + i[1] * width + i[2] * stridez];\n};\n","/**\n * Helper function to (re)provide given iterable in iterator form.\n *\n * @param src\n */\nexport function* asIterable(src) {\n    yield* src;\n}\n","export function* repeatedly(fn, n = Infinity) {\n    while (n-- > 0) {\n        yield fn();\n    }\n}\n","import { ensureArray } from \"@thi.ng/arrays\";\nimport { SYSTEM, weightedRandom } from \"@thi.ng/random\";\nimport { repeatedly } from \"./repeatedly\";\n/**\n * Returns an infinite iterator of random choices and their (optional)\n * weights. If `weights` is given, it must have at least the same size\n * as `choices`. If omitted, each choice will have same probability.\n *\n * ```\n * transduce(take(1000), frequencies(), choices(\"abcd\", [1, 0.5, 0.25, 0.125]))\n * // Map { 'c' => 132, 'a' => 545, 'b' => 251, 'd' => 72 }\n * ```\n *\n * @see weightedRandom\n *\n * @param choices\n * @param weights\n */\nexport const choices = (choices, weights, rnd = SYSTEM) => repeatedly(weights\n    ? weightedRandom(ensureArray(choices), weights, rnd)\n    : () => choices[rnd.float(choices.length) | 0]);\n","import { ensureIterable } from \"@thi.ng/arrays\";\n/**\n * Yields iterator producing concatenation of given iterables.\n * Undefined & null inputs are silently ignored, however any\n * such values produced or contained in an input will remain.\n *\n * ```\n * [...concat([1, 2, 3], null, [4, 5])]\n * // [ 1, 2, 3, 4, 5 ]\n *\n * [...concat([1, 2, 3, undefined], null, [4, 5])]\n * // [ 1, 2, 3, undefined, 4, 5 ]\n * ```\n *\n * @param xs\n */\nexport function* concat(...xs) {\n    for (let x of xs) {\n        x != null && (yield* ensureIterable(x));\n    }\n}\n","export function* cycle(input) {\n    let cache = [];\n    for (let i of input) {\n        cache.push(i);\n        yield i;\n    }\n    if (cache.length > 0) {\n        while (true) {\n            yield* cache;\n        }\n    }\n}\n","export function* repeat(x, n = Infinity) {\n    while (n-- > 0) {\n        yield x;\n    }\n}\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { repeat } from \"./repeat\";\n/**\n * Yields iterator of given iterable which repeats the first and/or last\n * value(s) `numLeft`/`numRight` times (default: 1). By default both\n * sides are repeated, but can be adjusted by setting either of them to\n * zero. `numRight` defaults to same value as `numLeft`.\n *\n * ```\n * [...extendSides([1, 2, 3])]\n * // [ 1,  1, 2, 3,  3]\n *\n * [...extendSides([1, 2, 3], 3)]\n * // [ 1, 1, 1,  1, 2, 3,  3, 3, 3 ]\n *\n * [...extendSides([1, 2, 3], 0, 3)]\n * // [ 1, 2, 3,  3, 3, 3 ]\n * ```\n *\n * @see padSides\n * @see wrapSides\n *\n * @param src\n * @param numLeft\n * @param numRight\n */\nexport function* extendSides(src, numLeft = 1, numRight = numLeft) {\n    let prev = SEMAPHORE;\n    for (let x of src) {\n        if (numLeft > 0 && prev === SEMAPHORE) {\n            yield* repeat(x, numLeft);\n            numLeft = 0;\n        }\n        yield x;\n        prev = x;\n    }\n    if (numRight > 0 && prev !== SEMAPHORE) {\n        yield* repeat(prev, numRight);\n    }\n}\n","/**\n * Yields an infinite iterator of the inductive sequence:\n *\n * f(x+1) = f(f(x))\n *\n * The first value emitted always is `seed` itself, then f(seed),\n * f(f(seed)) etc. The given function is called with the current\n * iteration counter as 2nd arg.\n *\n * ```\n * [...take(5, iterate((x) => x * 2, 1))]\n * // [ 1, 2, 4, 8, 16 ]\n *\n * [...take(8, iterate((x, i) => x * 10 + i, 0))]\n * // [ 0, 1, 12, 123, 1234, 12345, 123456, 1234567 ]\n * ```\n *\n * @param fn\n * @param seed\n */\nexport function* iterate(fn, seed) {\n    let i = 0;\n    while (true) {\n        yield seed;\n        seed = fn(seed, ++i);\n    }\n}\n","export function* keys(x) {\n    for (let k in x) {\n        if (x.hasOwnProperty(k)) {\n            yield k;\n        }\n    }\n}\n","import { concat } from \"./concat\";\nimport { repeat } from \"./repeat\";\n/**\n * Returns iterator of `src` padded with value `x`, repeated\n * `numLeft`/`numRight` times (default: 1). By default both sides are\n * padded, but can be adjusted by setting either of them to zero.\n * `numRight` defaults to same value as `numLeft`.\n *\n * Essentially, syntax sugar for:\n *\n * ```\n * // default\n * concat(repeat(x, numLeft), src, repeat(x, numRight))\n *\n * // left only\n * concat(repeat(x, numLeft), src)\n *\n * // right only\n * concat(src, repeat(x, numRight))\n * ```\n *\n * @see extendsSides\n * @see wrapSides\n *\n * @param src\n * @param x\n * @param numLeft\n * @param numRight\n */\nexport const padSides = (src, x, numLeft = 1, numRight = numLeft) => numLeft > 0\n    ? numRight > 0\n        ? concat(repeat(x, numLeft), src, repeat(x, numRight))\n        : concat(repeat(x, numLeft), src)\n    : numRight > 0\n        ? concat(src, repeat(x, numRight))\n        : concat(src);\n","export function* pairs(x) {\n    for (let k in x) {\n        if (x.hasOwnProperty(k)) {\n            yield [k, x[k]];\n        }\n    }\n}\n","import { ensureArrayLike } from \"@thi.ng/arrays\";\nimport { illegalArgs } from \"@thi.ng/errors\";\nimport { range } from \"./range\";\nexport function* permutations(...src) {\n    const n = src.length - 1;\n    if (n < 0) {\n        return;\n    }\n    const step = new Array(n + 1).fill(0);\n    const realized = src.map(ensureArrayLike);\n    const total = realized.reduce((acc, x) => acc * x.length, 1);\n    for (let i = 0; i < total; i++) {\n        const tuple = [];\n        for (let j = n; j >= 0; j--) {\n            const r = realized[j];\n            let s = step[j];\n            if (s === r.length) {\n                step[j] = s = 0;\n                j > 0 && step[j - 1]++;\n            }\n            tuple[j] = r[s];\n        }\n        step[n]++;\n        yield tuple;\n    }\n}\n/**\n * Iterator yielding the Cartesian Product for `n` items of `m` values\n * each. If `m` is not given, defaults to value of `n`. The range of `m`\n * is `0..m-1`. The optional `offsets` array can be used to define start\n * values for each dimension.\n *\n * ```\n * [...permutationsN(2)]\n * // [ [0, 0], [0, 1], [1, 0], [1, 1] ]\n *\n * [...permutationsN(2, 3)]\n * // [ [0, 0], [0, 1], [0, 2],\n * //   [1, 0], [1, 1], [1, 2],\n * //   [2, 0], [2, 1], [2, 2] ]\n *\n * [...permutationsN(2, 3, [10, 20])]\n * // [ [ 10, 20 ], [ 10, 21 ], [ 11, 20 ], [ 11, 21 ] ]\n * ```\n *\n * @param n\n * @param m\n * @param offsets\n */\nexport const permutationsN = (n, m = n, offsets) => {\n    if (offsets && offsets.length < n) {\n        illegalArgs(`insufficient offsets, got ${offsets.length}, needed ${n}`);\n    }\n    const seqs = [];\n    while (--n >= 0) {\n        const o = offsets ? offsets[n] : 0;\n        seqs[n] = range(o, o + m);\n    }\n    return permutations.apply(null, seqs);\n};\n","import { illegalArity } from \"@thi.ng/errors\";\nimport { range } from \"./range\";\nexport function* range3d(...args) {\n    let fromX, toX, stepX;\n    let fromY, toY, stepY;\n    let fromZ, toZ, stepZ;\n    switch (args.length) {\n        case 9:\n            stepX = args[6];\n            stepY = args[7];\n            stepZ = args[8];\n        case 6:\n            [fromX, toX, fromY, toY, fromZ, toZ] = args;\n            break;\n        case 3:\n            [toX, toY, toZ] = args;\n            fromX = fromY = fromZ = 0;\n            break;\n        default:\n            illegalArity(args.length);\n    }\n    const rx = range(fromX, toX, stepX);\n    const ry = range(fromY, toY, stepY);\n    for (let z of range(fromZ, toZ, stepZ)) {\n        for (let y of ry) {\n            for (let x of rx) {\n                yield [x, y, z];\n            }\n        }\n    }\n}\n","import { ensureArray } from \"@thi.ng/arrays\";\n/**\n * Yields iterator which consumes input and yield its values in reverse\n * order. Important: Input MUST be finite.\n *\n * ```\n * [...tx.reverse(\"hello world\")]\n * // [ \"d\", \"l\", \"r\", \"o\", \"w\", \" \", \"o\", \"l\", \"l\", \"e\", \"h\" ]\n * ```\n *\n * @param input\n */\nexport function* reverse(input) {\n    const _input = ensureArray(input);\n    let n = _input.length;\n    while (--n >= 0) {\n        yield _input[n];\n    }\n}\n","/**\n * Yields an iterator of all `src` values, followed by the same values\n * in reverse order. Efficiently builds the reversed order via an\n * internal linked list.\n *\n * ```\n * [...symmetric([1, 2, 3])]\n * // [ 1, 2, 3, 3, 2, 1 ]\n * ```\n *\n * @param src\n */\nexport function* symmetric(src) {\n    let head = undefined;\n    for (let x of src) {\n        head = { x, n: head };\n        yield x;\n    }\n    while (head) {\n        yield head.x;\n        head = head.n;\n    }\n}\n","import { normRange } from \"./norm-range\";\nimport { repeat } from \"./repeat\";\n/**\n * Keyframe based interpolator. Yields a sequence of `num+1` equally\n * spaced, tweened values from given keyframe tuples (`stops`).\n * Keyframes are defined as `[time, value]` tuples. Only values in the\n * closed `[min..max]` time interval will be computed.\n *\n * Interpolation happens in two stages: First the given `init` function\n * is called to transform/prepare pairs of consecutive keyframes into a\n * single interval (user defined). Then, to produce each tweened value\n * calls `mix` with the currently active interval and interpolation time\n * value `t` (re-normalized and relative to current interval). The\n * iterator yields results of these `mix()` function calls.\n *\n * Depending on the overall `num`ber of samples requested and the\n * distance between keyframes, some keyframes MIGHT be skipped. E.g. if\n * requesting 10 samples within [0,1], the interval between two\n * successive keyframes at 0.12 and 0.19 would be skipped entirely,\n * since samples will only be taken at multiples of `1/num` (i.e. 0.0,\n * 0.1, 0.2... in this example).\n *\n * The given keyframe times can lie outside the `min`/`max` range and\n * also don't need to cover the range fully. In the latter case, tweened\n * values before the first or after the last keyframe will yield the\n * value of the first/last keyframe. If only a single keyframe is given\n * in total, all `num` yielded samples will be that keyframe's\n * transformed value.\n *\n * ```\n * [...tween({\n *   num: 10,\n *   min: 0,\n *   max: 100,\n *   init: (a, b) => [a, b],\n *   mix: ([a, b], t) => Math.floor(a + (b - a) * t),\n *   stops: [[20, 100], [50, 200], [80, 0]]\n * })]\n * // [ 100, 100, 100, 133, 166, 200, 133, 66, 0, 0, 0 ]\n * ```\n *\n * Using easing functions (e.g. from thi.ng/math), non-linear\n * interpolation within each keyframe interval can be achieved:\n *\n * ```\n * import { mix, smoothStep } from \"@thi.ng/math\"\n *\n * [...tween({\n *   num: 10,\n *   min: 0,\n *   max: 100,\n *   init: (a, b) => [a, b],\n *   mix: ([a, b], t) => Math.floor(mix(a, b, smoothStep(0.1, 0.9, t))),\n *   stops: [[20, 100], [50, 200], [80, 0]]\n * })]\n * // [ 100, 100, 100, 120, 179, 200, 158, 41, 0, 0, 0 ]\n * ```\n * @see TweenOpts\n * @see interpolate\n * @see interpolateHermite\n * @see interpolateLinear\n *\n * @param opts\n */\nexport function* tween(opts) {\n    const { min, max, num, init, mix, stops } = opts;\n    let l = stops.length;\n    if (l < 1)\n        return;\n    if (l === 1) {\n        yield* repeat(mix(init(stops[0][1], stops[0][1]), 0), num);\n    }\n    stops.sort((a, b) => a[0] - b[0]);\n    stops[l - 1][0] < max && stops.push([max, stops[l - 1][1]]);\n    stops[0][0] > min && stops.unshift([min, stops[0][1]]);\n    const range = max - min;\n    let start = stops[0][0];\n    let end = stops[1][0];\n    let delta = end - start;\n    let interval = init(stops[0][1], stops[1][1]);\n    let i = 1;\n    l = stops.length;\n    for (let t of normRange(num)) {\n        t = min + range * t;\n        if (t > end) {\n            while (i < l && t > stops[i][0])\n                i++;\n            start = stops[i - 1][0];\n            end = stops[i][0];\n            delta = end - start;\n            interval = init(stops[i - 1][1], stops[i][1]);\n        }\n        yield mix(interval, delta !== 0 ? (t - start) / delta : 0);\n    }\n}\n","export function* vals(x) {\n    for (let k in x) {\n        if (x.hasOwnProperty(k)) {\n            yield x[k];\n        }\n    }\n}\n","import { ensureArray } from \"@thi.ng/arrays\";\nimport { illegalArgs } from \"@thi.ng/errors\";\nimport { inRange } from \"@thi.ng/math\";\n/**\n * Yields iterator of `src` with the last `numLeft` values of `src`\n * prepended at the beginning and/or the first `numRight` values\n * appended at the end. `numLeft` defaults to 1 and `numRight` defaults\n * to same value as `numLeft`, therefore wraps both sides by default and\n * throws error if either `nXXX` < 0 or larger than `src.length`.\n *\n * @see extendSides\n * @see padSides\n *\n * @param src\n * @param numLeft\n * @param numRight\n */\nexport function* wrapSides(src, numLeft = 1, numRight = numLeft) {\n    const _src = ensureArray(src);\n    !(inRange(numLeft, 0, _src.length) && inRange(numRight, 0, _src.length)) &&\n        illegalArgs(`allowed wrap range: [0..${_src.length}]`);\n    if (numLeft > 0) {\n        for (let m = _src.length, i = m - numLeft; i < m; i++) {\n            yield _src[i];\n        }\n    }\n    yield* _src;\n    if (numRight > 0) {\n        for (let i = 0; i < numRight; i++) {\n            yield _src[i];\n        }\n    }\n}\n","export * from \"./iterator\";\nexport * from \"./reduce\";\nexport * from \"./reduced\";\nexport * from \"./run\";\nexport * from \"./step\";\nexport * from \"./transduce\";\nexport * from \"./rfn/add\";\nexport * from \"./rfn/assoc-map\";\nexport * from \"./rfn/assoc-obj\";\nexport * from \"./rfn/conj\";\nexport * from \"./rfn/count\";\nexport * from \"./rfn/div\";\nexport * from \"./rfn/every\";\nexport * from \"./rfn/fill\";\nexport * from \"./rfn/frequencies\";\nexport * from \"./rfn/group-binary\";\nexport * from \"./rfn/group-by-map\";\nexport * from \"./rfn/group-by-obj\";\nexport * from \"./rfn/last\";\nexport * from \"./rfn/max-compare\";\nexport * from \"./rfn/max\";\nexport * from \"./rfn/mean\";\nexport * from \"./rfn/min-compare\";\nexport * from \"./rfn/min\";\nexport * from \"./rfn/mul\";\nexport * from \"./rfn/push-copy\";\nexport * from \"./rfn/push\";\nexport * from \"./rfn/reductions\";\nexport * from \"./rfn/some\";\nexport * from \"./rfn/str\";\nexport * from \"./rfn/sub\";\nexport * from \"./xform/benchmark\";\nexport * from \"./xform/cat\";\nexport * from \"./xform/converge\";\nexport * from \"./xform/convolve\";\nexport * from \"./xform/dedupe\";\nexport * from \"./xform/delayed\";\nexport * from \"./xform/distinct\";\nexport * from \"./xform/drop-nth\";\nexport * from \"./xform/drop-while\";\nexport * from \"./xform/drop\";\nexport * from \"./xform/duplicate\";\nexport * from \"./xform/filter\";\nexport * from \"./xform/filter-fuzzy\";\nexport * from \"./xform/flatten-with\";\nexport * from \"./xform/flatten\";\nexport * from \"./xform/indexed\";\nexport * from \"./xform/interleave\";\nexport * from \"./xform/interpolate\";\nexport * from \"./xform/interpolate-hermite\";\nexport * from \"./xform/interpolate-linear\";\nexport * from \"./xform/interpose\";\nexport * from \"./xform/keep\";\nexport * from \"./xform/labeled\";\nexport * from \"./xform/map-deep\";\nexport * from \"./xform/map-indexed\";\nexport * from \"./xform/map-keys\";\nexport * from \"./xform/map-nth\";\nexport * from \"./xform/map-vals\";\nexport * from \"./xform/map\";\nexport * from \"./xform/mapcat\";\nexport * from \"./xform/match-first\";\nexport * from \"./xform/match-last\";\nexport * from \"./xform/moving-average\";\nexport * from \"./xform/moving-median\";\nexport * from \"./xform/multiplex\";\nexport * from \"./xform/multiplex-obj\";\nexport * from \"./xform/noop\";\nexport * from \"./xform/pad-last\";\nexport * from \"./xform/page\";\nexport * from \"./xform/partition-by\";\nexport * from \"./xform/partition-of\";\nexport * from \"./xform/partition-sort\";\nexport * from \"./xform/partition-sync\";\nexport * from \"./xform/partition\";\nexport * from \"./xform/pluck\";\nexport * from \"./xform/rename\";\nexport * from \"./xform/sample\";\nexport * from \"./xform/scan\";\nexport * from \"./xform/select-keys\";\nexport * from \"./xform/side-effect\";\nexport * from \"./xform/sliding-window\";\nexport * from \"./xform/stream-shuffle\";\nexport * from \"./xform/stream-sort\";\nexport * from \"./xform/struct\";\nexport * from \"./xform/swizzle\";\nexport * from \"./xform/take-nth\";\nexport * from \"./xform/take-last\";\nexport * from \"./xform/take-while\";\nexport * from \"./xform/take\";\nexport * from \"./xform/throttle\";\nexport * from \"./xform/throttle-time\";\nexport * from \"./xform/toggle\";\nexport * from \"./xform/trace\";\nexport * from \"./xform/word-wrap\";\nexport * from \"./func/comp\";\nexport * from \"./func/compr\";\nexport * from \"./func/deep-transform\";\nexport * from \"./func/juxtr\";\nexport * from \"./func/key-selector\";\nexport * from \"./func/lookup\";\nexport * from \"./func/renamer\";\nexport * from \"./iter/as-iterable\";\nexport * from \"./iter/choices\";\nexport * from \"./iter/concat\";\nexport * from \"./iter/cycle\";\nexport * from \"./iter/extend-sides\";\nexport * from \"./iter/iterate\";\nexport * from \"./iter/keys\";\nexport * from \"./iter/norm-range\";\nexport * from \"./iter/pad-sides\";\nexport * from \"./iter/pairs\";\nexport * from \"./iter/permutations\";\nexport * from \"./iter/range\";\nexport * from \"./iter/range2d\";\nexport * from \"./iter/range3d\";\nexport * from \"./iter/repeat\";\nexport * from \"./iter/repeatedly\";\nexport * from \"./iter/reverse\";\nexport * from \"./iter/symmetric\";\nexport * from \"./iter/tween\";\nexport * from \"./iter/vals\";\nexport * from \"./iter/wrap-sides\";\nexport * from \"./iter/zip\";\n","let NEXT_ID = 0;\nexport const nextID = () => NEXT_ID++;\nexport const optsWithID = (prefix, opts) => ((!opts || !opts.id ? Object.assign(Object.assign({}, opts), { id: prefix + \"-\" + nextID() }) : opts));\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { peek } from \"@thi.ng/arrays\";\nimport { implementsFunction, isFunction, isPlainObject } from \"@thi.ng/checks\";\nimport { illegalArity, illegalState } from \"@thi.ng/errors\";\nimport { comp, isReduced, push, unreduced } from \"@thi.ng/transducers\";\nimport { LOGGER } from \"./api\";\nimport { nextID } from \"./utils/idgen\";\n/**\n * Creates a new {@link Subscription} instance, the fundamental datatype\n * and building block provided by this package.\n *\n * @remarks\n * Most other types in rstream, including {@link Stream}s, are\n * `Subscription`s and all can be:\n *\n * - linked into directed graphs (sync or async & not necessarily DAGs)\n * - transformed using transducers (incl. support for early termination)\n * - can have any number of subscribers (optionally each w/ their own\n *   transducers)\n * - recursively unsubscribe themselves from parent after their last\n *   subscriber unsubscribed (configurable)\n * - will go into a non-recoverable error state if none of the\n *   subscribers has an error handler itself\n * - implement the {@link @thi.ng/api#IDeref} interface\n *\n * Subscription behavior can be customized via the additional (optional)\n * options arg. See `CommonOpts` and `SubscriptionOpts` for further\n * details.\n *\n * @example\n * ```ts\n * // as reactive value mechanism (same as with stream() above)\n * s = subscription();\n * s.subscribe(trace(\"s1\"));\n * s.subscribe(trace(\"s2\"), { xform: tx.filter((x) => x > 25) });\n *\n * // external trigger\n * s.next(23);\n * // s1 23\n * s.next(42);\n * // s1 42\n * // s2 42\n * ```\n *\n * @param sub\n * @param opts\n */\nexport const subscription = (sub, opts) => new Subscription(sub, opts);\nexport class Subscription {\n    constructor(sub, opts = {}) {\n        this.state = 0 /* IDLE */;\n        this.parent = opts.parent;\n        this.closeIn =\n            opts.closeIn !== undefined ? opts.closeIn : 2 /* LAST */;\n        this.closeOut =\n            opts.closeOut !== undefined ? opts.closeOut : 2 /* LAST */;\n        this.cacheLast = opts.cache !== false;\n        this.id = opts.id || `sub-${nextID()}`;\n        this.last = SEMAPHORE;\n        this.subs = [];\n        if (sub) {\n            this.subs.push(sub);\n        }\n        if (opts.xform) {\n            this.xform = opts.xform(push());\n        }\n    }\n    deref() {\n        return this.last !== SEMAPHORE ? this.last : undefined;\n    }\n    getState() {\n        return this.state;\n    }\n    subscribe(...args) {\n        this.ensureState();\n        let sub;\n        let opts = args.length > 1 && isPlainObject(peek(args))\n            ? Object.assign({}, args.pop()) : {};\n        switch (args.length) {\n            case 1:\n                if (isFunction(args[0])) {\n                    opts.xform = args[0];\n                    !opts.id && (opts.id = `xform-${nextID()}`);\n                }\n                else {\n                    sub = args[0];\n                }\n                break;\n            case 2:\n                sub = args[0];\n                opts.xform = args[1];\n                break;\n            default:\n                illegalArity(args.length);\n        }\n        if (implementsFunction(sub, \"subscribe\")) {\n            sub.parent = this;\n        }\n        else {\n            // FIXME inherit options from this sub or defaults?\n            sub = subscription(sub, Object.assign({ parent: this }, opts));\n        }\n        this.last !== SEMAPHORE && sub.next(this.last);\n        return this.addWrapped(sub);\n    }\n    /**\n     * Returns array of new child subscriptions for all given\n     * subscribers.\n     *\n     * @param subs\n     */\n    subscribeAll(...subs) {\n        const wrapped = [];\n        for (let s of subs) {\n            wrapped.push(this.subscribe(s));\n        }\n        return wrapped;\n    }\n    transform(...xf) {\n        const n = xf.length - 1;\n        return isPlainObject(xf[n])\n            ? this.subscribe(comp(...xf.slice(0, n)), xf[n])\n            : this.subscribe(comp(...xf));\n    }\n    /**\n     * If called without arg, removes this subscription from parent (if\n     * any), cleans up internal state and goes into DONE state. If\n     * called with arg, removes the sub from internal pool and if no\n     * other subs are remaining also cleans up itself and goes into DONE\n     * state.\n     *\n     * @param sub\n     */\n    unsubscribe(sub) {\n        LOGGER.debug(this.id, \"unsub start\", sub ? sub.id : \"self\");\n        if (!sub) {\n            let res = true;\n            if (this.parent) {\n                res = this.parent.unsubscribe(this);\n            }\n            this.state = 2 /* DONE */;\n            this.cleanup();\n            return res;\n        }\n        if (this.subs) {\n            LOGGER.debug(this.id, \"unsub child\", sub.id);\n            const idx = this.subs.indexOf(sub);\n            if (idx >= 0) {\n                this.subs.splice(idx, 1);\n                if (this.closeOut === 1 /* FIRST */ ||\n                    (!this.subs.length && this.closeOut !== 0 /* NEVER */)) {\n                    this.unsubscribe();\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n    next(x) {\n        if (this.state < 2 /* DONE */) {\n            if (this.xform) {\n                const acc = this.xform[2]([], x);\n                const uacc = unreduced(acc);\n                const n = uacc.length;\n                for (let i = 0; i < n; i++) {\n                    this.dispatch(uacc[i]);\n                }\n                if (isReduced(acc)) {\n                    this.done();\n                }\n            }\n            else {\n                this.dispatch(x);\n            }\n        }\n    }\n    done() {\n        LOGGER.debug(this.id, \"entering done()\");\n        if (this.state < 2 /* DONE */) {\n            if (this.xform) {\n                const acc = this.xform[1]([]);\n                const uacc = unreduced(acc);\n                const n = uacc.length;\n                for (let i = 0; i < n; i++) {\n                    this.dispatch(uacc[i]);\n                }\n            }\n            this.state = 2 /* DONE */;\n            for (let s of [...this.subs]) {\n                try {\n                    s.done && s.done();\n                }\n                catch (e) {\n                    s.error ? s.error(e) : this.error(e);\n                }\n            }\n            this.unsubscribe();\n            LOGGER.debug(this.id, \"exiting done()\");\n        }\n    }\n    error(e) {\n        this.state = 3 /* ERROR */;\n        let notified = false;\n        if (this.subs && this.subs.length) {\n            for (let s of this.subs.slice()) {\n                if (s.error) {\n                    s.error(e);\n                    notified = true;\n                }\n            }\n        }\n        if (!notified) {\n            LOGGER.warn(this.id, \"unhandled error:\", e);\n            if (this.parent) {\n                LOGGER.debug(this.id, \"unsubscribing...\");\n                this.unsubscribe();\n                this.state = 3 /* ERROR */;\n            }\n        }\n    }\n    addWrapped(wrapped) {\n        this.subs.push(wrapped);\n        this.state = 1 /* ACTIVE */;\n        return wrapped;\n    }\n    dispatch(x) {\n        // LOGGER.debug(this.id, \"dispatch\", x);\n        this.cacheLast && (this.last = x);\n        const subs = this.subs;\n        let s;\n        if (subs.length === 1) {\n            s = subs[0];\n            try {\n                s.next && s.next(x);\n            }\n            catch (e) {\n                s.error ? s.error(e) : this.error(e);\n            }\n        }\n        else {\n            for (let i = subs.length; --i >= 0;) {\n                s = subs[i];\n                try {\n                    s.next && s.next(x);\n                }\n                catch (e) {\n                    s.error ? s.error(e) : this.error(e);\n                }\n            }\n        }\n    }\n    ensureState() {\n        if (this.state >= 2 /* DONE */) {\n            illegalState(`operation not allowed in state ${this.state}`);\n        }\n    }\n    cleanup() {\n        LOGGER.debug(this.id, \"cleanup\");\n        this.subs.length = 0;\n        delete this.parent;\n        delete this.xform;\n        delete this.last;\n    }\n}\n","import { isPlainObject } from \"@thi.ng/checks\";\nimport { comp, labeled, mapVals, partitionSync } from \"@thi.ng/transducers\";\nimport { LOGGER } from \"./api\";\nimport { Subscription } from \"./subscription\";\nimport { optsWithID } from \"./utils/idgen\";\n/**\n * Similar to {@link StreamMerge}, but with extra synchronization of\n * inputs. Before emitting any new values, {@link StreamSync} collects\n * values until at least one has been received from *all* inputs. Once\n * that's the case, the collected values are sent as labeled tuple\n * object to downstream subscribers.\n *\n * @remarks\n * Each value in the emitted tuple objects is stored under their input\n * stream's ID. Only the last value received from each input is passed\n * on. After the initial tuple has been emitted, you can choose from two\n * possible behaviors:\n *\n * 1) Any future change in any input will produce a new result tuple.\n *    These tuples will retain the most recently read values from other\n *    inputs. This behavior is the default and illustrated in the above\n *    schematic.\n * 2) If the `reset` option is `true`, every input will have to provide\n *    at least one new value again until another result tuple is\n *    produced.\n *\n * Any done inputs are automatically removed. By default, `StreamSync`\n * calls {@link ISubscriber.done} when the last active input is done,\n * but this behavior can be overridden via the provided options.\n *\n * Input streams can be added and removed dynamically and the emitted\n * tuple size adjusts to the current number of inputs (the next time a\n * value is received from any input).\n *\n * If the `reset` option is enabled, the last emitted tuple is allowed\n * to be incomplete, by default. To only allow complete tuples, also set\n * the `all` option to `false`.\n *\n * The synchronization is done via the `partitionSync()` transducer from\n * the @thi.ng/transducers package. See this function's docs for further\n * details.\n *\n * @example\n * ```ts\n * const a = rs.stream();\n * const b = rs.stream();\n * s = sync({ src: { a, b } }).subscribe(trace(\"result: \"));\n * a.next(1);\n * b.next(2);\n * // result: { a: 1, b: 2 }\n * ```\n *\n * @see StreamSyncOpts\n *\n * @param opts\n */\nexport const sync = (opts) => new StreamSync(opts);\nexport class StreamSync extends Subscription {\n    constructor(opts) {\n        const srcIDs = new Set();\n        const psync = partitionSync(srcIDs, {\n            key: (x) => x[0],\n            mergeOnly: opts.mergeOnly === true,\n            reset: opts.reset === true,\n            all: opts.all !== false,\n            backPressure: opts.backPressure || 0\n        });\n        const mapv = mapVals((x) => x[1]);\n        super(undefined, optsWithID(\"streamsync\", Object.assign(Object.assign({}, opts), { xform: opts.xform\n                ? comp(psync, mapv, opts.xform)\n                : comp(psync, mapv) })));\n        this.sources = new Map();\n        this.realSourceIDs = new Map();\n        this.invRealSourceIDs = new Map();\n        this.idSources = new Map();\n        this.sourceIDs = srcIDs;\n        opts.src && this.addAll(opts.src);\n    }\n    add(src, id) {\n        id || (id = src.id);\n        this.ensureState();\n        this.sourceIDs.add(id);\n        this.realSourceIDs.set(id, src.id);\n        this.invRealSourceIDs.set(src.id, id);\n        this.idSources.set(src.id, src);\n        this.sources.set(src, src.subscribe({\n            next: (x) => {\n                if (x[1] instanceof Subscription) {\n                    this.add(x[1]);\n                }\n                else {\n                    this.next(x);\n                }\n            },\n            done: () => this.markDone(src),\n            __owner: this\n        }, labeled(id), { id: `in-${id}` }));\n    }\n    addAll(src) {\n        if (isPlainObject(src)) {\n            // pre-add all source ids for partitionSync\n            for (let id in src) {\n                this.sourceIDs.add(id);\n            }\n            for (let id in src) {\n                this.add(src[id], id);\n            }\n        }\n        else {\n            // pre-add all source ids for partitionSync\n            for (let s of src) {\n                this.sourceIDs.add(s.id);\n            }\n            for (let s of src) {\n                this.add(s);\n            }\n        }\n    }\n    remove(src) {\n        const sub = this.sources.get(src);\n        if (sub) {\n            const id = this.invRealSourceIDs.get(src.id);\n            LOGGER.info(`removing src: ${src.id} (${id})`);\n            this.sourceIDs.delete(id);\n            this.realSourceIDs.delete(id);\n            this.invRealSourceIDs.delete(src.id);\n            this.idSources.delete(src.id);\n            this.sources.delete(src);\n            sub.unsubscribe();\n            return true;\n        }\n        return false;\n    }\n    removeID(id) {\n        const src = this.getSourceForID(id);\n        return src ? this.remove(src) : false;\n    }\n    removeAll(src) {\n        // pre-remove all source ids for partitionSync\n        for (let s of src) {\n            this.sourceIDs.delete(this.invRealSourceIDs.get(s.id));\n        }\n        let ok = true;\n        for (let s of src) {\n            ok = this.remove(s) && ok;\n        }\n        return ok;\n    }\n    removeAllIDs(ids) {\n        let ok = true;\n        for (let id of ids) {\n            ok = this.removeID(id) && ok;\n        }\n        return ok;\n    }\n    getSourceForID(id) {\n        return this.idSources.get(this.realSourceIDs.get(id));\n    }\n    getSources() {\n        const res = {};\n        for (let [id, src] of this.idSources) {\n            res[this.invRealSourceIDs.get(id)] = src;\n        }\n        return res;\n    }\n    unsubscribe(sub) {\n        if (!sub) {\n            for (let s of this.sources.values()) {\n                s.unsubscribe();\n            }\n            this.state = 2 /* DONE */;\n            this.sources.clear();\n            this.sourceIDs.clear();\n            this.realSourceIDs.clear();\n            this.invRealSourceIDs.clear();\n            this.idSources.clear();\n        }\n        return super.unsubscribe(sub);\n    }\n    markDone(src) {\n        this.remove(src);\n        if (this.closeIn === 1 /* FIRST */ ||\n            (this.closeIn === 2 /* LAST */ && !this.sources.size)) {\n            this.done();\n        }\n    }\n}\n","export const inlineWorker = (src) => makeWorker(new Blob([src], { type: \"text/javascript\" }));\nexport const makeWorker = (worker) => worker instanceof Worker\n    ? worker\n    : new Worker(worker instanceof Blob ? URL.createObjectURL(worker) : worker);\n","import { LOGGER } from \"../api\";\nimport { Subscription } from \"../subscription\";\nimport { nextID } from \"../utils/idgen\";\nimport { makeWorker } from \"../utils/worker\";\n/**\n * Returns a {@link Subscription} which processes received values via\n * the configured worker(s) and then passes values received back from\n * the worker(s) downstream, thereby allowing workers to be used\n * transparently for stream processing.\n *\n * @remarks\n * Multiple worker instances are supported for concurrent processing.\n * See the {@link TunnelOpts} for details.\n *\n * Also see {@link forkJoin} and {@link postWorker}.\n *\n * @param opts\n */\nexport const tunnel = (opts) => new Tunnel(opts);\nexport class Tunnel extends Subscription {\n    constructor(opts) {\n        super(undefined, { id: opts.id || `tunnel-${nextID()}` });\n        this.src = opts.src;\n        this.workers = new Array(opts.maxWorkers || 1);\n        this.transferables = opts.transferables;\n        this.terminate = opts.terminate || 1000;\n        this.interrupt = opts.interrupt || false;\n        this.index = 0;\n    }\n    next(x) {\n        if (this.state < 2 /* DONE */) {\n            let tx;\n            if (this.transferables) {\n                tx = this.transferables(x);\n            }\n            let worker = this.workers[this.index];\n            if (this.interrupt && worker) {\n                worker.terminate();\n                worker = null;\n            }\n            if (!worker) {\n                this.workers[this.index++] = worker = makeWorker(this.src);\n                this.index %= this.workers.length;\n                worker.addEventListener(\"message\", (e) => this.dispatch(e.data));\n                worker.addEventListener(\"error\", (e) => this.error(e));\n            }\n            worker.postMessage(x, tx || []);\n        }\n    }\n    done() {\n        super.done();\n        if (this.terminate > 0) {\n            setTimeout(() => {\n                LOGGER.info(\"terminating workers...\");\n                this.workers.forEach((worker) => worker && worker.terminate());\n                delete this.workers;\n            }, this.terminate);\n        }\n    }\n}\n","import { comp, map, mapcat, range } from \"@thi.ng/transducers\";\nimport { sync } from \"./stream-sync\";\nimport { tunnel } from \"./subs/tunnel\";\n/**\n * Returns a {@link StreamSync} instance which creates & attaches\n * multiple subscriptions to given `src` input stream, processes each\n * received value in parallel via web workers, then recombines partial\n * results and passes the resulting transformed value downstream.\n *\n * @remarks\n * See {@link ForkJoinOpts} for further details & behavior options and\n * the {@link forkBuffer} and {@link joinBuffer} helpers for array-based\n * value processing (most likely use case).\n *\n * @param src input stream\n * @param opts\n */\nexport const forkJoin = (opts) => {\n    const numWorkers = opts.numWorkers || navigator.hardwareConcurrency || 4;\n    const workerIDs = range(numWorkers);\n    return sync({\n        src: [\n            ...map((id) => opts.src\n                .transform(map((x) => opts.fork(id, numWorkers, x)))\n                .subscribe(tunnel({\n                src: opts.worker,\n                transferables: opts.transferables,\n                interrupt: opts.interrupt === true,\n                terminate: opts.terminate,\n                id: String(id)\n            })), workerIDs)\n        ],\n        xform: comp(\n        // form result tuple in original order\n        map((results) => [...map((id) => results[id], workerIDs)]), \n        // apply user join function\n        map(opts.join)),\n        reset: true,\n        backPressure: opts.backPressure\n    });\n};\n/**\n * Higher-order fork function for scenarios involving the split-parallel\n * processing of a large buffer.\n *\n * @remarks\n * The returned function is meant to be used as `fork` function in a\n * {@link ForkJoinOpts} config and extracts a workload slice of the\n * original buffer for a single worker. The HOF itself takes a minimum\n * chunk size as optional parameter (default: 1).\n *\n * **Note:** Depending on the configured `minChunkSize` and the size of\n * the input buffer to be partitioned, the returned fork function might\n * produce empty sub-arrays for some workers, iff the configured number\n * of workers exceeds the resulting number of chunks / input values.\n * E.g. If the number of workers = 8, buffer size = 10 and min chunk\n * size = 2, then the last 3 (i.e. 8 - 10 / 2) workers will only receive\n * empty workloads.\n *\n * More generally, if the input buffer size is not equally distributable\n * over the given number of workers, the last worker(s) might receive a\n * larger, smaller or empty chunk.\n *\n * Also see {@link forkJoin} and {@link joinBuffer}.\n *\n * @example\n * ```ts\n * forkJoin<number[], number[], number[], number[]>({\n *     src,\n *     // job definition / split buffer into chunks (min size 256 values)\n *     fork: forkBuffer(256),\n *     // re-join partial results\n *     join: joinBuffer(),\n *     worker: \"./worker.js\",\n * })\n * ```\n *\n * @param minChunkSize\n */\nexport const forkBuffer = (minChunkSize = 1) => (id, numWorkers, buf) => {\n    const chunkSize = Math.max(minChunkSize, (buf.length / numWorkers) | 0);\n    return id < numWorkers - 1\n        ? buf.slice(id * chunkSize, (id + 1) * chunkSize)\n        : buf.slice(id * chunkSize);\n};\n/**\n * Higher-order join function for scenarios involving the split-parallel\n * processing of a large buffer.\n *\n * @remarks\n * The returned function is meant to be used as `join` function in a\n * {@link ForkJoinOpts} config, receives the processed result chunks\n * from all workers (ordered by worker ID) and concatenates them back\n * into a single result array.\n *\n * The optional `fn` arg can be used to pick the actual result chunk\n * from each worker result. This is useful if the worker result type is\n * not an array and includes other data points (e.g. execution metrics\n * etc.). If `fn` is not given, it defaults to the identity function\n * (i.e. each worker's result is assumed to be an array).\n *\n * Also see {@link forkJoin} and {@link forkBuffer}.\n *\n * @param fn\n */\nexport const joinBuffer = (fn) => fn\n    ? (parts) => [...mapcat(fn, parts)]\n    : (parts) => Array.prototype.concat.apply([], parts);\n","import { assert } from \"@thi.ng/api\";\nimport { Subscription } from \"./subscription\";\nimport { optsWithID } from \"./utils/idgen\";\n/**\n * Returns a {@link Subscription} which transforms each incoming value\n * into a new {@link Stream}, subscribes to it (via an hidden / internal\n * subscription) and then only passes values from that stream to its own\n * subscribers.\n *\n * @remarks\n * If a new value is received, the metastream first unsubscribes from\n * any still active stream, before creating and subscribing to the new\n * stream. Hence this stream type is useful for cases where streams need\n * to be dynamically created & inserted into an existing dataflow\n * topology.\n *\n * The user supplied `factory` function will be called for each incoming\n * value and is responsible for creating the new stream instances. If\n * the function returns null/undefined, no further action will be taken\n * (acts like a filter transducer).\n *\n * The factory function does NOT need to create *new* streams, but can\n * merely return other existing streams, and so making the meta stream\n * act like a switch with arbitrary criteria.\n *\n * If the meta stream itself is the only subscriber to existing input\n * streams, you'll need to configure the input's\n * {@link CommonOpts.closeOut} option to keep them alive and support\n * dynamic switching between them.\n *\n * @example\n * ```ts\n * // transform each received odd number into a stream\n * // producing 3 copies of that number in the metastream\n * // even numbers are ignored\n * a = metastream(\n *   (x) => (x & 1)\n *     ? fromIterable(tx.repeat(x, 3), { delay: 100 })\n *     : null\n * );\n *\n * a.subscribe(trace())\n * a.next(23)\n *\n * // 23\n * // 23\n * // 23\n *\n * a.next(42) // ignored by factory fn\n *\n * a.next(43)\n * // 43\n * // 43\n * // 43\n * ```\n *\n * @example\n * ```ts\n * // infinite inputs\n * a = fromIterable(\n *   tx.repeat(\"a\"),\n *   { delay: 1000, closeOut: CloseMode.NEVER }\n * );\n * b = fromIterable(\n *   tx.repeat(\"b\"),\n *   { delay: 1000, closeOut: CloseMode.NEVER }\n * );\n *\n * // stream selector / switch\n * m = metaStream((x) => x ? a : b);\n * m.subscribe(trace(\"meta from: \"));\n *\n * m.next(true);\n * // meta from: a\n *\n * m.next(false);\n * // meta from: b\n *\n * m.next(true);\n * // meta from: a\n * ```\n *\n * @param factory\n * @param id\n */\nexport const metaStream = (factory, opts) => new MetaStream(factory, opts);\nexport class MetaStream extends Subscription {\n    constructor(factory, opts) {\n        super(undefined, optsWithID(\"metastram\", opts));\n        this.factory = factory;\n    }\n    next(x) {\n        if (this.state < 2 /* DONE */) {\n            if (this.stream) {\n                this.stream.unsubscribe(this.sub);\n            }\n            let stream = this.factory(x);\n            if (stream) {\n                this.stream = stream;\n                this.sub = this.stream.subscribe({\n                    next: (x) => {\n                        stream === this.stream && super.dispatch(x);\n                    },\n                    done: () => {\n                        this.stream.unsubscribe(this.sub);\n                        if (stream === this.stream) {\n                            this.stream = undefined;\n                            this.sub = undefined;\n                        }\n                    },\n                    error: (e) => super.error(e),\n                    __owner: this\n                });\n            }\n        }\n    }\n    done() {\n        if (this.stream) {\n            this.detach();\n        }\n        super.done();\n    }\n    unsubscribe(sub) {\n        if (this.stream && (!sub || this.subs.length === 1)) {\n            this.detach();\n        }\n        return super.unsubscribe();\n    }\n    detach() {\n        assert(!!this.stream, \"input stream already removed\");\n        this.stream.unsubscribe(this.sub);\n        delete this.stream;\n        delete this.sub;\n    }\n}\n","export function dissoc(coll, keys) {\n    for (let k of keys) {\n        coll.delete(k);\n    }\n    return coll;\n}\nexport const dissocObj = (obj, keys) => {\n    for (let k of keys) {\n        delete obj[k];\n    }\n    return obj;\n};\n","import { equiv } from \"@thi.ng/equiv\";\nexport const equivMap = (a, b) => {\n    if (a === b) {\n        return true;\n    }\n    if (!(b instanceof Map) || a.size !== b.size) {\n        return false;\n    }\n    for (let p of a.entries()) {\n        if (!equiv(b.get(p[0]), p[1])) {\n            return false;\n        }\n    }\n    return true;\n};\nexport const equivSet = (a, b) => {\n    if (a === b) {\n        return true;\n    }\n    if (!(b instanceof Set) || a.size !== b.size) {\n        return false;\n    }\n    for (let k of a.keys()) {\n        if (!b.has(k)) {\n            return false;\n        }\n    }\n    return true;\n};\n","import { isMap } from \"@thi.ng/checks\";\nexport function into(dest, src) {\n    if (isMap(dest)) {\n        for (let x of src) {\n            dest.set(x[0], x[1]);\n        }\n    }\n    else {\n        for (let x of src) {\n            dest.add(x);\n        }\n    }\n    return dest;\n}\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { equiv } from \"@thi.ng/equiv\";\nimport { dissoc } from \"./dissoc\";\nimport { equivSet } from \"./internal/equiv\";\nimport { into } from \"./into\";\nconst __private = new WeakMap();\nconst __vals = (inst) => __private.get(inst).vals;\n/**\n * An alternative set implementation to the native ES6 Set type. Uses\n * customizable equality/equivalence predicate and so is more useful\n * when dealing with structured data. Implements full API of native Set\n * and by the default uses `@thi.ng/equiv` for equivalence checking.\n *\n * Additionally, the type also implements the `ICopy`, `IEmpty` and\n * `IEquiv` interfaces itself.\n */\nexport class ArraySet extends Set {\n    constructor(vals, opts = {}) {\n        super();\n        __private.set(this, { equiv: opts.equiv || equiv, vals: [] });\n        vals && this.into(vals);\n    }\n    *[Symbol.iterator]() {\n        yield* __vals(this);\n    }\n    get [Symbol.species]() {\n        return ArraySet;\n    }\n    get [Symbol.toStringTag]() {\n        return \"ArraySet\";\n    }\n    get size() {\n        return __vals(this).length;\n    }\n    copy() {\n        const $this = __private.get(this);\n        const s = new ArraySet(null, { equiv: $this.equiv });\n        __private.get(s).vals = $this.vals.slice();\n        return s;\n    }\n    empty() {\n        return new ArraySet(null, this.opts());\n    }\n    clear() {\n        __vals(this).length = 0;\n    }\n    first() {\n        if (this.size) {\n            return __vals(this)[0];\n        }\n    }\n    add(key) {\n        !this.has(key) && __vals(this).push(key);\n        return this;\n    }\n    into(keys) {\n        return into(this, keys);\n    }\n    has(key) {\n        return this.get(key, SEMAPHORE) !== SEMAPHORE;\n    }\n    /**\n     * Returns the canonical value for `x`, if present. If the set\n     * contains no equivalent for `x`, returns `notFound`.\n     *\n     * @param key\n     * @param notFound\n     */\n    get(key, notFound) {\n        const $this = __private.get(this);\n        const eq = $this.equiv;\n        const vals = $this.vals;\n        for (let i = vals.length; --i >= 0;) {\n            if (eq(vals[i], key)) {\n                return vals[i];\n            }\n        }\n        return notFound;\n    }\n    delete(key) {\n        const $this = __private.get(this);\n        const eq = $this.equiv;\n        const vals = $this.vals;\n        for (let i = vals.length; --i >= 0;) {\n            if (eq(vals[i], key)) {\n                vals.splice(i, 1);\n                return true;\n            }\n        }\n        return false;\n    }\n    disj(keys) {\n        return dissoc(this, keys);\n    }\n    equiv(o) {\n        return equivSet(this, o);\n    }\n    forEach(fn, thisArg) {\n        const vals = __vals(this);\n        for (let i = vals.length; --i >= 0;) {\n            const v = vals[i];\n            fn.call(thisArg, v, v, this);\n        }\n    }\n    *entries() {\n        for (let v of __vals(this)) {\n            yield [v, v];\n        }\n    }\n    *keys() {\n        yield* __vals(this);\n    }\n    *values() {\n        yield* __vals(this);\n    }\n    opts() {\n        return { equiv: __private.get(this).equiv };\n    }\n}\n","/**\n * Like `commonKeysObj()`, but for ES6 Maps.\n *\n * @param a\n * @param b\n * @param out\n */\nexport const commonKeysMap = (a, b, out = []) => {\n    for (let k of a.keys()) {\n        b.has(k) && out.push(k);\n    }\n    return out;\n};\n/**\n * Returns array of keys present in both args, i.e. the set intersection\n * of the given objects' key / property sets.\n *\n * ```\n * commonKeys({ a: 1, b: 2 }, { c: 10, b: 20, a: 30 })\n * // [ \"a\", \"b\" ]\n * ```\n *\n * @param a\n * @param b\n * @param out\n */\nexport const commonKeysObj = (a, b, out = []) => {\n    for (let k in a) {\n        b.hasOwnProperty(k) && out.push(k);\n    }\n    return out;\n};\n","import { implementsFunction, isMap, isSet } from \"@thi.ng/checks\";\nexport const empty = (x, ctor) => implementsFunction(x, \"empty\")\n    ? x.empty()\n    : new (x[Symbol.species] || ctor)();\nexport const copy = (x, ctor) => implementsFunction(x, \"copy\")\n    ? x.copy()\n    : new (x[Symbol.species] || ctor)(x);\nexport const first = (x) => x[Symbol.iterator]().next().value;\nexport const objValues = (src) => {\n    const vals = [];\n    for (let k in src) {\n        src.hasOwnProperty(k) && vals.push(src[k]);\n    }\n    return vals;\n};\nexport const ensureMap = (x) => isMap(x) ? x : new Map(x);\nexport const ensureSet = (x) => isSet(x) ? x : new Set(x);\n","import { reduce } from \"@thi.ng/transducers\";\nimport { ensureSet } from \"../utils\";\nexport const xformSetOp = (rfn, op, src) => src\n    ? reduce(rfn(), src)\n    : [\n        () => null,\n        (acc) => acc || new Set(),\n        (acc, x) => (!acc ? ensureSet(x) : op(acc, ensureSet(x)))\n    ];\n","import { xformSetOp } from \"./internal/xform-setop\";\nimport { into } from \"./into\";\nimport { copy, empty } from \"./utils\";\n/**\n * Computes the difference of sets `a - b` and writes results to new set\n * or optionally given set `out` (assumed to be empty for correct\n * results).\n *\n * @param a\n * @param b\n * @param out\n */\nexport const difference = (a, b, out) => {\n    if (a === b) {\n        return out || empty(a, Set);\n    }\n    out = out ? into(out, a) : copy(a, Set);\n    for (let i of b) {\n        out.delete(i);\n    }\n    return out;\n};\nexport function differenceR(src) {\n    return xformSetOp(differenceR, difference, src);\n}\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { equiv } from \"@thi.ng/equiv\";\nimport { ArraySet } from \"./array-set\";\nimport { dissoc } from \"./dissoc\";\nimport { equivMap } from \"./internal/equiv\";\nimport { into } from \"./into\";\nconst __private = new WeakMap();\nconst __map = (map) => __private.get(map).map;\nexport class EquivMap extends Map {\n    /**\n     * Converts given vanilla object into an `EquivMap` instance with\n     * default (or optionally provided) options and returns it. By\n     * default uses strict `===` equality check for `equiv` option.\n     *\n     * @param obj\n     * @param opts\n     */\n    static fromObject(obj, opts) {\n        const m = new EquivMap(null, Object.assign({ equiv: (a, b) => a === b }, opts));\n        for (let k in obj) {\n            obj.hasOwnProperty(k) && m.set(k, obj[k]);\n        }\n        return m;\n    }\n    /**\n     * Creates a new instance with optional initial key-value pairs and\n     * provided options. If no `opts` are given, uses `ArraySet` for\n     * storing canonical keys and `@thi.ng/equiv` for checking key\n     * equivalence.\n     *\n     * @param pairs\n     * @param opts\n     */\n    constructor(pairs, opts) {\n        super();\n        const _opts = Object.assign({ equiv, keys: ArraySet }, opts);\n        __private.set(this, {\n            keys: new _opts.keys(null, { equiv: _opts.equiv }),\n            map: new Map(),\n            opts: _opts\n        });\n        if (pairs) {\n            this.into(pairs);\n        }\n    }\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    get [Symbol.species]() {\n        return EquivMap;\n    }\n    get [Symbol.toStringTag]() {\n        return \"EquivMap\";\n    }\n    get size() {\n        return __private.get(this).keys.size;\n    }\n    clear() {\n        const $this = __private.get(this);\n        $this.keys.clear();\n        $this.map.clear();\n    }\n    empty() {\n        return new EquivMap(null, __private.get(this).opts);\n    }\n    copy() {\n        const $this = __private.get(this);\n        const m = new EquivMap();\n        __private.set(m, {\n            keys: $this.keys.copy(),\n            map: new Map($this.map),\n            opts: $this.opts\n        });\n        return m;\n    }\n    equiv(o) {\n        return equivMap(this, o);\n    }\n    delete(key) {\n        const $this = __private.get(this);\n        key = $this.keys.get(key, SEMAPHORE);\n        if (key !== SEMAPHORE) {\n            $this.map.delete(key);\n            $this.keys.delete(key);\n            return true;\n        }\n        return false;\n    }\n    dissoc(keys) {\n        return dissoc(this, keys);\n    }\n    forEach(fn, thisArg) {\n        for (let pair of __map(this)) {\n            fn.call(thisArg, pair[1], pair[0], this);\n        }\n    }\n    get(key, notFound) {\n        const $this = __private.get(this);\n        key = $this.keys.get(key, SEMAPHORE);\n        if (key !== SEMAPHORE) {\n            return $this.map.get(key);\n        }\n        return notFound;\n    }\n    has(key) {\n        return __private.get(this).keys.has(key);\n    }\n    set(key, value) {\n        const $this = __private.get(this);\n        const k = $this.keys.get(key, SEMAPHORE);\n        if (k !== SEMAPHORE) {\n            $this.map.set(k, value);\n        }\n        else {\n            $this.keys.add(key);\n            $this.map.set(key, value);\n        }\n        return this;\n    }\n    into(pairs) {\n        return into(this, pairs);\n    }\n    entries() {\n        return __map(this).entries();\n    }\n    keys() {\n        return __map(this).keys();\n    }\n    values() {\n        return __map(this).values();\n    }\n    opts() {\n        return __private.get(this).opts;\n    }\n}\n","export const MASKS = new Array(33).fill(0).map((_, i) => Math.pow(2, i) - 1);\n","/**\n * Aligns `addr` to next multiple of `size`. The latter must be a power\n * of 2.\n *\n * @param addr\n * @param size\n */\nexport const align = (addr, size) => (size--, (addr + size) & ~size);\n/**\n * Returns true if `addr` is aligned to wordsize `size`.\n */\nexport const isAligned = (addr, size) => !(addr & (size - 1));\n","/**\n * Returns number of 1 bits in `x`.\n *\n * @param x\n */\nexport const popCount = (x) => ((x = x - ((x >>> 1) & 0x55555555)),\n    (x = (x & 0x33333333) + ((x >>> 2) & 0x33333333)),\n    (((x + (x >>> 4)) & 0xf0f0f0f) * 0x1010101) >>> 24);\n/**\n * https://en.wikipedia.org/wiki/Hamming_distance\n *\n * @param x\n * @param y\n */\nexport const hammingDist = (x, y) => popCount(x ^ y);\n/**\n * Math.clz32() polyfill (corrected).\n *\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/clz32$revision/1426816\n *\n * @param x\n */\nexport const clz32 = (x) => x !== 0 ? 31 - ((Math.log(x >>> 0) / Math.LN2) | 0) : 32;\nexport const ctz32 = (x) => {\n    let c = 32;\n    x &= -x;\n    x && c--;\n    x & 0x0000ffff && (c -= 16);\n    x & 0x00ff00ff && (c -= 8);\n    x & 0x0f0f0f0f && (c -= 4);\n    x & 0x33333333 && (c -= 2);\n    x & 0x55555555 && (c -= 1);\n    return c;\n};\n/**\n * Returns the number of bits required to encode `x` (MUST be > 0).\n *\n * @param x\n */\nexport const bitSize = (x) => Math.ceil(Math.log(x) / Math.LN2);\n","import { MASKS } from \"./api\";\n/**\n * Creates bit mask by enabling bit `a` to bit `b-1`, both in range\n * 0-32. `b` MUST be >= `a`.\n *\n * ```\n * defMask(1,31).toString(16) // 7ffffffe\n * defMask(3,8).toString(16)  // f8\n * ```\n *\n * @param a\n * @param b\n */\nexport const defMask = (a, b) => (~MASKS[a] & MASKS[b]) >>> 0;\n/**\n * Returns unsigned version of `x` with only lowest `n` bits.\n *\n * @param n\n * @param x\n */\nexport const maskL = (n, x) => (x & MASKS[n]) >>> 0;\n/**\n * Returns unsigned version of `x` with only highest `n` bits.\n *\n * @param n\n * @param x\n */\nexport const maskH = (n, x) => (x & ~MASKS[n]) >>> 0;\n","import { defMask } from \"./mask\";\n/**\n * Clears bit in given uint `x`.\n *\n * @param x value\n * @param bit bit number (0..31)\n */\nexport const bitClear = (x, bit) => (x & ~(1 << bit)) >>> 0;\n/**\n * Toggles bit in given uint `x`.\n *\n * @param x\n * @param bit\n */\nexport const bitFlip = (x, bit) => (x ^ (1 << bit)) >>> 0;\n/**\n * Sets bit in given uint `x`.\n *\n * @param x value\n * @param bit bit number (0..31)\n */\nexport const bitSet = (x, bit) => (x | (1 << bit)) >>> 0;\nexport const bitSetWindow = (x, y, from, to) => {\n    const m = defMask(from, to);\n    return (x & ~m) | ((y << (1 << from)) & m);\n};\nexport const bitClearWindow = (x, from, to) => x & ~defMask(from, to);\n","const F32 = new Float32Array(1);\nconst I32 = new Int32Array(F32.buffer);\nconst U32 = new Uint32Array(F32.buffer);\nexport const floatToIntBits = (x) => ((F32[0] = x), I32[0]);\nexport const floatToUintBits = (x) => ((F32[0] = x), U32[0]);\nexport const intBitsToFloat = (x) => ((I32[0] = x), F32[0]);\nexport const uintBitsToFloat = (x) => ((U32[0] = x), F32[0]);\n/**\n * Converts given float into a sortable integer representation, using\n * raw bitwise conversion via `floatToIntBits()`.\n *\n * https://github.com/tzaeschke/phtree/blob/master/PhTreeRevisited.pdf\n * (page 3)\n *\n * @param x\n */\nexport const floatToSortableInt = (x) => {\n    if (x === -0)\n        x = 0;\n    const i = floatToIntBits(x);\n    return x < 0 ? ~i | (1 << 31) : i;\n};\n","/**\n * Converts 32bit unsigned int to Gray code (reflected binary). Gray\n * codes of successive values always have a Hamming distance of 1 (i.e.\n * only 1 bit changes at a time).\n *\n * https://en.wikipedia.org/wiki/Gray_code\n *\n * @param x u32\n */\nexport const encodeGray32 = (x) => (x ^ (x >>> 1)) >>> 0;\n/**\n * Converts 32bit Gray code to binary / unsigned int.\n *\n * https://en.wikipedia.org/wiki/Gray_code\n */\nexport const decodeGray32 = (x) => {\n    x = x ^ (x >>> 16);\n    x = x ^ (x >>> 8);\n    x = x ^ (x >>> 4);\n    x = x ^ (x >>> 2);\n    x = x ^ (x >>> 1);\n    return x >>> 0;\n};\n","import { maskL } from \"./mask\";\nexport const bitNot = (n, x) => maskL(n, ~x);\nexport const bitAnd = (n, a, b) => maskL(n, a & b);\nexport const bitNand = (n, a, b) => maskL(n, ~(a & b));\nexport const bitOr = (n, a, b) => maskL(n, a | b);\nexport const bitNor = (n, a, b) => maskL(n, ~(a & b));\nexport const bitXor = (n, a, b) => maskL(n, a ^ b);\nexport const bitXnor = (n, a, b) => maskL(n, ~(a ^ b));\nexport const bitImply = (n, a, b) => maskL(n, ~a | b);\nexport const bitAoi21 = (n, a, b, c) => maskL(n, ~(a | (b & c)));\nexport const bitOai21 = (n, a, b, c) => maskL(n, ~(a & (b | c)));\nexport const bitAoi22 = (n, a, b, c, d) => maskL(n, ~((a & b) | (c & d)));\nexport const bitOai22 = (n, a, b, c, d) => maskL(n, ~((a | b) & (c | d)));\nexport const bitMux = (n, a, b, s) => maskL(n, (a & ~s) | (b & s));\nexport const bitDemux = (n, a, b, s) => [maskL(n, a & ~s), maskL(n, b & s)];\n","// http://graphics.stanford.edu/~seander/bithacks.html\nexport const isPow2 = (x) => !!x && !(x & (x - 1));\nexport const ceilPow2 = (x) => {\n    x += (x === 0);\n    --x;\n    x |= x >>> 1;\n    x |= x >>> 2;\n    x |= x >>> 4;\n    x |= x >>> 8;\n    x |= x >>> 16;\n    return x + 1;\n};\nexport const floorPow2 = (x) => {\n    x |= x >>> 1;\n    x |= x >>> 2;\n    x |= x >>> 4;\n    x |= x >>> 8;\n    x |= x >>> 16;\n    return x - (x >>> 1);\n};\n","/**\n * Rotates `x` `n` bits to the left.\n *\n * @param x\n * @param n\n */\nexport const rotateLeft = (x, n) => ((x << n) | (x >>> (32 - n))) >>> 0;\n/**\n * Rotates `x` `n` bits to the right.\n *\n * @param x\n * @param n\n */\nexport const rotateRight = (x, n) => ((x >>> n) | (x << (32 - n))) >>> 0;\n","/**\n * Repeats lowest nibble of `x` as 24 bit uint.\n *\n * @param x\n */\nexport const splat4_24 = (x) => (x & 0xf) * 0x111111;\n/**\n * Repeats lowest nibble of `x` as 32 bit uint.\n *\n * @param x\n */\nexport const splat4_32 = (x) => ((x & 0xf) * 0x11111111) >>> 0;\n/**\n * Repeats lowest byte of `x` as 24 bit uint.\n *\n * @param x\n */\nexport const splat8_24 = (x) => (x & 0xff) * 0x010101;\n/**\n * Repeats lowest byte of `x` as 32 bit uint.\n *\n * @param x\n */\nexport const splat8_32 = (x) => ((x & 0xff) * 0x01010101) >>> 0;\n/**\n * Repeats lowest 16bit of `x` as 32 bit uint.\n *\n * @param x\n */\nexport const splat16_32 = (x) => ((x &= 0xffff), ((x << 16) | x) >>> 0);\n/**\n * Returns true if bits 0-3 are same as bits 4-7.\n *\n * @param x\n */\nexport const same4 = (x) => ((x >> 4) & 0xf) === (x & 0xf);\n/**\n * Returns true if bits 0-7 are same as bits 8-15.\n *\n * @param x\n */\nexport const same8 = (x) => ((x >> 8) & 0xff) === (x & 0xff);\n","/**\n * Extracts 8-bit lane from given 32bit uint.\n *\n * - Lane #0: bits 24-31\n * - Lane #1: bits 16-23\n * - Lane #2: bits 8-15\n * - Lane #3: bits 0-7\n *\n * @param x\n * @param lane\n */\nexport const lane8 = (x, lane) => (x >>> ((3 - lane) << 3)) & 0xff;\n/**\n * Extracts 4-bit lane from given 32bit uint.\n *\n * - Lane #0: bits 28-31\n * - Lane #1: bits 24-27\n * - Lane #2: bits 20-23\n * - Lane #3: bits 16-19\n * - Lane #4: bits 12-15\n * - Lane #5: bits 8-11\n * - Lane #6: bits 4-7\n * - Lane #7: bits 0-3\n *\n * @param x\n * @param lane\n */\nexport const lane4 = (x, lane) => (x >>> ((7 - lane) << 2)) & 0xf;\nexport const lane2 = (x, lane) => (x >>> ((15 - lane) << 1)) & 0x3;\n/**\n * Sets 8-bit `lane` with value`y` in `x`.\n *\n * @see lane8\n *\n * @param x\n * @param y\n * @param lane\n */\nexport const setLane8 = (x, y, lane) => {\n    const l = (3 - lane) << 3;\n    return ((~(0xff << l) & x) | ((y & 0xff) << l)) >>> 0;\n};\n/**\n * Sets 4-bit `lane` with value `y` in `x`.\n *\n * @see lane4\n *\n * @param x\n * @param y\n * @param lane\n */\nexport const setLane4 = (x, y, lane) => {\n    const l = (7 - lane) << 2;\n    return ((~(0xf << l) & x) | ((y & 0xf) << l)) >>> 0;\n};\n/**\n * Sets 2-bit `lane` with value `y` in `x`.\n *\n * @see lane2\n *\n * @param x\n * @param y\n * @param lane\n */\nexport const setLane2 = (x, y, lane) => {\n    const l = (15 - lane) << 1;\n    return ((~(0x3 << l) & x) | ((y & 0x3) << l)) >>> 0;\n};\n/**\n * Re-orders byte lanes in given order (MSB).\n *\n * ```\n * swizzle(0x12345678, 3, 2, 1, 0) // 0x78563412\n * swizzle(0x12345678, 1, 0, 3, 2) // 0x34127856\n * swizzle(0x12345678, 2, 2, 0, 0) // 0x56561212\n * ```\n *\n * @param x\n * @param a\n * @param b\n * @param c\n * @param d\n */\nexport const swizzle8 = (x, a, b, c, d) => ((lane8(x, a) << 24) |\n    (lane8(x, b) << 16) |\n    (lane8(x, c) << 8) |\n    lane8(x, d)) >>>\n    0;\n/**\n *\n * @param x\n * @param a\n * @param b\n * @param c\n * @param d\n * @param e\n * @param f\n * @param g\n * @param h\n */\nexport const swizzle4 = (x, a, b, c, d, e, f, g, h) => ((lane4(x, a) << 28) |\n    (lane4(x, b) << 24) |\n    (lane4(x, c) << 20) |\n    (lane4(x, d) << 16) |\n    (lane4(x, e) << 12) |\n    (lane4(x, f) << 8) |\n    (lane4(x, g) << 4) |\n    lane4(x, h)) >>>\n    0;\n/**\n * Same as `swizzle8(x, 3, 2, 1, 0)`, but faster.\n *\n * @param x\n */\nexport const flipBytes = (x) => ((x >>> 24) | ((x >> 8) & 0xff00) | ((x & 0xff00) << 8) | (x << 24)) >>> 0;\n","export * from \"./api\";\nexport * from \"./align\";\nexport * from \"./count\";\nexport * from \"./edit\";\nexport * from \"./float\";\nexport * from \"./gray\";\nexport * from \"./logic\";\nexport * from \"./mask\";\nexport * from \"./pow\";\nexport * from \"./rotate\";\nexport * from \"./splat\";\nexport * from \"./swizzle\";\n","import { ceilPow2 } from \"@thi.ng/binary\";\nimport { equiv } from \"@thi.ng/equiv\";\nimport { dissoc } from \"./dissoc\";\nimport { equivMap } from \"./internal/equiv\";\nimport { into } from \"./into\";\nconst __private = new WeakMap();\nconst __iterator = (map, id) => function* () {\n    for (let p of __private.get(map).bins) {\n        if (p)\n            yield p[id];\n    }\n};\nconst DEFAULT_CAP = 16;\n/**\n * Configurable hash map implementation w/ ES6 Map API. Uses open\n * addressing / linear probing to resolve key collisions. Supports any\n * key types via mandatory user supplied hash function.\n *\n * See `HashMapOpts` for further configuration & behavior details.\n *\n * ```\n * import { HashMap } from \"@thi.ng/associative\"\n * import { hash } from \"@thi.ng/vectors\"\n *\n * m = new HashMap([], { hash })\n * m.set([1, 2], \"a\");\n * m.set([3, 4], \"b\");\n * m.set([1, 2], \"c\");\n * // HashMap { [ 1, 2 ] => 'c', [ 3, 4 ] => 'b' }\n * ```\n *\n */\nexport class HashMap extends Map {\n    constructor(pairs, opts) {\n        super();\n        const m = ceilPow2(Math.min(opts.cap || DEFAULT_CAP, 4)) - 1;\n        __private.set(this, {\n            hash: opts.hash,\n            equiv: opts.equiv || equiv,\n            load: opts.load || 0.75,\n            mask: m,\n            bins: new Array(m + 1),\n            size: 0\n        });\n        if (pairs) {\n            this.into(pairs);\n        }\n    }\n    get [Symbol.species]() {\n        return HashMap;\n    }\n    get [Symbol.toStringTag]() {\n        return \"HashMap\";\n    }\n    get size() {\n        return __private.get(this).size;\n    }\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    *entries() {\n        for (let p of __private.get(this).bins) {\n            if (p)\n                yield [p[0], p[1]];\n        }\n    }\n    keys() {\n        return __iterator(this, 0)();\n    }\n    values() {\n        return __iterator(this, 1)();\n    }\n    forEach(fn, thisArg) {\n        for (let pair of __private.get(this).bins) {\n            fn.call(thisArg, pair[1], pair[0], this);\n        }\n    }\n    clear() {\n        const $this = __private.get(this);\n        $this.bins = new Array(DEFAULT_CAP);\n        $this.mask = 15;\n        $this.size = 0;\n    }\n    empty() {\n        return new HashMap(null, this.opts({ cap: DEFAULT_CAP }));\n    }\n    copy() {\n        const $this = __private.get(this);\n        const m = new HashMap(null, this.opts({ cap: 4 }));\n        Object.assign(__private.get(m), {\n            bins: $this.bins.slice(),\n            mask: $this.mask,\n            size: $this.size\n        });\n        return m;\n    }\n    equiv(o) {\n        return equivMap(this, o);\n    }\n    has(key) {\n        const $this = __private.get(this);\n        const i = this.find(key, $this);\n        return i >= 0 && $this.bins[i] != undefined;\n    }\n    get(key, notFound) {\n        const $this = __private.get(this);\n        const i = this.find(key, $this);\n        return i >= 0 && $this.bins[i] ? $this.bins[i][1] : notFound;\n    }\n    set(key, val) {\n        const $this = __private.get(this);\n        let i = this.find(key, $this);\n        if (i >= 0 && $this.bins[i]) {\n            $this.bins[i][1] = val;\n            return this;\n        }\n        if ($this.size > $this.mask * $this.load) {\n            this.resize($this);\n            i = this.find(key, $this);\n        }\n        $this.bins[i] = [key, val];\n        $this.size++;\n        return this;\n    }\n    delete(key) {\n        const $this = __private.get(this);\n        let i = this.find(key, $this);\n        const bins = $this.bins;\n        if (i >= 0 && !bins[i]) {\n            return false;\n        }\n        $this.size--;\n        const m = $this.mask;\n        let j = i;\n        let k;\n        while (true) {\n            delete bins[i];\n            do {\n                j = (j + 1) & m;\n                if (!bins[j])\n                    return true;\n                k = $this.hash(bins[j][0]) & m;\n            } while (i <= j ? i < k && k <= j : i < k || k <= j);\n            bins[i] = bins[j];\n            i = j;\n        }\n    }\n    into(pairs) {\n        return into(this, pairs);\n    }\n    dissoc(keys) {\n        return dissoc(this, keys);\n    }\n    opts(overrides) {\n        const $this = __private.get(this);\n        return Object.assign({ hash: $this.hash, equiv: $this.equiv, load: $this.load, cap: $this.mask + 1 }, overrides);\n    }\n    find(key, $this) {\n        const m = $this.mask;\n        const bins = $this.bins;\n        const equiv = $this.equiv;\n        let i = m;\n        let h = $this.hash(key) & m;\n        while (bins[h] && !equiv(bins[h][0], key)) {\n            i--;\n            if (i < 0)\n                return -1;\n            h = (h + 1) & $this.mask;\n        }\n        return h;\n    }\n    resize($this) {\n        const src = $this.bins;\n        const cap = ($this.mask + 1) * 2;\n        $this.bins = new Array(cap);\n        $this.mask = cap - 1;\n        $this.size = 0;\n        for (let p of src) {\n            if (p)\n                this.set(p[0], p[1]);\n        }\n    }\n}\n","import { empty } from \"./utils\";\n/**\n * Returns a new map of same type as input only containing given keys\n * (and only if they existed in the original map).\n *\n * @param src\n * @param ks selected keys\n */\nexport const selectKeysMap = (src, ks) => {\n    const dest = empty(src, Map);\n    for (let k of ks) {\n        src.has(k) && dest.set(k, src.get(k));\n    }\n    return dest;\n};\n/**\n * Returns a new object only containing given keys (and only if they\n * existed in the original).\n *\n * @param src\n * @param ks\n */\nexport const selectKeysObj = (src, ks) => {\n    const dest = {};\n    for (let k of ks) {\n        src.hasOwnProperty(k) && (dest[k] = src[k]);\n    }\n    return dest;\n};\n","import { EquivMap } from \"./equiv-map\";\nimport { selectKeysObj } from \"./select-keys\";\nimport { empty } from \"./utils\";\n/**\n * Takes an iterable of plain objects and array of indexing keys. Calls\n * `selectKeysObj` on each value and uses returned objects as new keys\n * to group original values. Returns a new `EquivMap` of sets.\n *\n * ```\n * indexed(\n *   new Set([{a: 1, b: 1}, {a: 1, b: 2}, {a: 1, b: 1, c: 2}]),\n *   [\"a\",\"b\"]\n * )\n * // EquivMap {\n * //   { a: 1, b: 1 } => Set { { a: 1, b: 1 }, { a: 1, b: 1, c: 2 } },\n * //   { a: 1, b: 2 } => Set { { a: 1, b: 2 } } }\n * ```\n *\n * @param records objects to index\n * @param ks keys used for indexing\n */\nexport const indexed = (records, ks) => {\n    const res = new EquivMap();\n    let x, ik, rv;\n    for (x of records) {\n        ik = selectKeysObj(x, ks);\n        rv = res.get(ik);\n        !rv && res.set(ik, (rv = empty(records, Set)));\n        rv.add(x);\n    }\n    return res;\n};\n","import { xformSetOp } from \"./internal/xform-setop\";\nimport { into } from \"./into\";\nimport { empty } from \"./utils\";\n/**\n * Computes the intersection of sets `a` and `b` and writes results into\n * new set or optionally given set `out` (assumed to be empty for\n * correct results). If `out` is *not* given, the returned Set type will\n * be that of `a` (provided it defines `Symbol.species`).\n *\n * @param a\n * @param b\n * @param out\n */\nexport const intersection = (a, b, out) => {\n    out = out || empty(a, Set);\n    if (a === b) {\n        return into(out, a);\n    }\n    if (b.size < a.size) {\n        return intersection(b, a, out);\n    }\n    for (let i of b) {\n        if (a.has(i)) {\n            out.add(i);\n        }\n    }\n    return out;\n};\nexport function intersectionR(src) {\n    return xformSetOp(intersectionR, intersection, src);\n}\n","/**\n * Returns a new map in which the original values are used as keys and\n * original keys as values. If `dest` is given, writes results in that\n * map instead. Depending on the value type of `src` and/or if the\n * inverted map should use custom key equality semantics as provided by\n * the Map types in this package, you MUST provide a `dest` map, since\n * the default `dest` will only be a standard ES6 Map.\n *\n * ```\n * invertMap(new Map(), new Map([[\"a\", 1], [\"b\", 2]]));\n * // Map { 1 => 'a', 2 => 'b' }\n * ```\n *\n * @param src\n * @param dest\n */\nexport const invertMap = (src, dest) => {\n    dest = dest || new Map();\n    for (let p of src) {\n        dest.set(p[1], p[0]);\n    }\n    return dest;\n};\n/**\n * Returns a new object in which the original values are used as keys\n * and original keys as values. If `dest` is given, writes results in\n * that object instead.\n *\n * ```\n * invertObj({a: 1, b: 2})\n * // { '1': 'a', '2': 'b' }\n * ```\n *\n * @param src\n * @param dest\n */\nexport const invertObj = (src, dest = {}) => {\n    for (let k in src) {\n        dest[src[k]] = k;\n    }\n    return dest;\n};\n","/**\n * Merges all given maps in left-to-right order into `dest`.\n * Returns `dest`.\n *\n * @param dest\n * @param xs\n */\nexport const mergeMap = (dest, ...xs) => {\n    for (let x of xs) {\n        for (let pair of x) {\n            dest.set(pair[0], pair[1]);\n        }\n    }\n    return dest;\n};\n/**\n * Merges all given objects in left-to-right order into `dest`.\n * Returns `dest`.\n *\n * @param dest\n * @param xs\n */\nexport const mergeObj = (dest, ...xs) => Object.assign(dest, ...xs);\n","import { empty } from \"./utils\";\n/**\n * Renames keys in `src` using mapping provided by key map `km`. Does\n * support key swapping / swizzling. Does not modify original.\n *\n * @param src\n * @param km\n * @param out\n */\nexport const renameKeysMap = (src, km, out) => {\n    out = out || empty(src, Map);\n    for (let [k, v] of src) {\n        out.set(km.has(k) ? km.get(k) : k, v);\n    }\n    return out;\n};\n/**\n * Renames keys in `src` using mapping provided by key map `km`. Does\n * support key swapping / swizzling. Does not modify original.\n *\n * ```\n * // swap a & b, rename c\n * renameKeysObj({a: 1, b: 2, c: 3}, {a: \"b\", b: \"a\", c: \"cc\"})\n * // {b: 1, a: 2, cc: 3}\n * ```\n *\n * @param src\n * @param km\n */\nexport const renameKeysObj = (src, km, out = {}) => {\n    for (let k in src) {\n        out[km.hasOwnProperty(k) ? km[k] : k] = src[k];\n    }\n    return out;\n};\n","import { commonKeysObj } from \"./common-keys\";\nimport { indexed } from \"./indexed\";\nimport { invertObj } from \"./invert\";\nimport { mergeObj } from \"./merge\";\nimport { renameKeysObj } from \"./rename-keys\";\nimport { selectKeysObj } from \"./select-keys\";\nimport { empty, first, objValues } from \"./utils\";\n/**\n * Computes the natural join between the two sets of relations. Each set\n * is assumed to have plain objects as values with at least one of the\n * keys present in both sides. Furthermore the objects in each set are\n * assumed to have the same internal structure (i.e. sets of keys).\n * Returns new set of same type as `a`.\n *\n * ```\n * join(\n *   new Set([\n *     {id: 1, name: \"foo\"},\n *     {id: 2, name: \"bar\"},\n *     {id: 3, name: \"baz\"}]),\n *   new Set([\n *     {id: 1, color: \"red\"},\n *     {id: 2, color: \"blue\"}])\n * )\n * // Set {\n * //   { id: 1, color: 'red', name: 'foo' },\n * //   { id: 2, color: 'blue', name: 'bar' }\n * // }\n * ```\n *\n * @param a\n * @param b\n */\nexport const join = (a, b) => {\n    if (a.size && b.size) {\n        const ks = commonKeysObj(first(a) || {}, first(b) || {});\n        let aa, bb;\n        if (a.size <= b.size) {\n            aa = a;\n            bb = b;\n        }\n        else {\n            aa = b;\n            bb = a;\n        }\n        const idx = indexed(aa, ks);\n        const res = empty(a, Set);\n        for (let x of bb) {\n            const found = idx.get(selectKeysObj(x, ks));\n            if (found) {\n                for (let f of found) {\n                    res.add(mergeObj(Object.assign({}, f), x));\n                }\n            }\n        }\n        return res;\n    }\n    return empty(a, Set);\n};\n/**\n * Similar to `join()`, computes the join between two sets of relations,\n * using the given keys in `kmap` only for joining and ignoring others.\n * `kmap` can also be used to translate join keys in `b` where\n * needed. Else, if no renaming is desired, the values in `kmap` should\n * be the same as their respective keys, e.g. `{id: \"id\"}`. Returns new\n * set of same type as `a`.\n *\n * ```\n * joinWith(\n *   new Set([\n *     {id: 1, name: \"foo\"},\n *     {id: 2, name: \"bar\"},\n *     {id: 3, name: \"baz\"}]),\n *   new Set([\n *     {type: 1, color: \"red\"},\n *     {type: 2, color: \"blue\"}]),\n *   {id: \"type\"}\n * )\n * // Set {\n * //   { type: 1, color: 'red', id: 1, name: 'foo' },\n * //   { type: 2, color: 'blue', id: 2, name: 'bar' } }\n * ```\n *\n * @param a\n * @param b\n * @param kmap keys to compute join for\n */\nexport const joinWith = (a, b, kmap) => {\n    if (a.size && b.size) {\n        let aa, bb;\n        let k;\n        if (a.size <= b.size) {\n            aa = a;\n            bb = b;\n            k = invertObj(kmap);\n        }\n        else {\n            aa = b;\n            bb = a;\n            k = kmap;\n        }\n        const idx = indexed(aa, objValues(k));\n        const ks = Object.keys(k);\n        const res = empty(a, Set);\n        for (let x of bb) {\n            const found = idx.get(renameKeysObj(selectKeysObj(x, ks), k));\n            if (found) {\n                for (let f of found) {\n                    res.add(mergeObj(Object.assign({}, f), x));\n                }\n            }\n        }\n        return res;\n    }\n    return empty(a, Set);\n};\njoinWith(new Set([{ a: 1, b: 2 }]), new Set([{ id: 1, c: 2 }]), { a: \"id\" });\n","import { assert } from \"@thi.ng/api\";\nimport { isArrayLike } from \"@thi.ng/checks\";\nimport { compare } from \"@thi.ng/compare\";\nimport { equiv } from \"@thi.ng/equiv\";\nimport { illegalArgs } from \"@thi.ng/errors\";\nimport { SYSTEM } from \"@thi.ng/random\";\nimport { isReduced } from \"@thi.ng/transducers\";\nexport class DCons {\n    constructor(src) {\n        this._length = 0;\n        if (src) {\n            this.into(src);\n        }\n    }\n    get length() {\n        return this._length;\n    }\n    copy() {\n        return new DCons(this);\n    }\n    empty() {\n        return new DCons();\n    }\n    clear() {\n        this.release();\n    }\n    release() {\n        let cell = this.head, next;\n        while (cell) {\n            next = cell.next;\n            delete cell.value;\n            delete cell.prev;\n            delete cell.next;\n            cell = next;\n        }\n        delete this.head;\n        delete this.tail;\n        this._length = 0;\n        return true;\n    }\n    compare(o) {\n        const n = this._length;\n        if (n < o._length) {\n            return -1;\n        }\n        else if (n > o._length) {\n            return 1;\n        }\n        else if (n === 0) {\n            return 0;\n        }\n        else {\n            let ca = this.head;\n            let cb = o.head;\n            let res = 0;\n            while (ca && res == 0) {\n                res = compare(ca.value, cb.value);\n                ca = ca.next;\n                cb = cb.next;\n            }\n            return res;\n        }\n    }\n    equiv(o) {\n        if ((o instanceof DCons || isArrayLike(o)) &&\n            this._length === o.length) {\n            if (this._length === 0) {\n                return true;\n            }\n            let cell = this.head;\n            for (let x of o) {\n                if (!equiv(cell.value, x)) {\n                    return false;\n                }\n                cell = cell.next;\n            }\n            return true;\n        }\n        return false;\n    }\n    *[Symbol.iterator]() {\n        let cell = this.head;\n        while (cell) {\n            yield cell.value;\n            cell = cell.next;\n        }\n    }\n    /** {@inheritDoc @thi.ng/api#ISeqable.seq} */\n    seq(start = 0, end = this.length) {\n        if (start >= end || start < 0)\n            return;\n        let cell = this.nthCell(start);\n        const last = this.nthCell(end - 1);\n        const $seq = (cell) => ({\n            first() {\n                return cell.value;\n            },\n            next() {\n                return cell !== last && cell.next ? $seq(cell.next) : undefined;\n            }\n        });\n        return cell ? $seq(cell) : undefined;\n    }\n    *cycle() {\n        while (true) {\n            yield* this;\n        }\n    }\n    /** {@inheritDoc @thi.ng/transducers#IReducible.$reduce} */\n    $reduce(rfn, acc) {\n        let cell = this.head;\n        while (cell && !isReduced(acc)) {\n            acc = rfn(acc, cell.value);\n            cell = cell.next;\n        }\n        return acc;\n    }\n    drop() {\n        const cell = this.head;\n        if (cell) {\n            this.head = cell.next;\n            if (this.head) {\n                delete this.head.prev;\n            }\n            else {\n                delete this.tail;\n            }\n            this._length--;\n            return cell.value;\n        }\n    }\n    cons(value) {\n        const cell = { value, next: this.head };\n        if (this.head) {\n            this.head.prev = cell;\n        }\n        else {\n            this.tail = cell;\n        }\n        this.head = cell;\n        this._length++;\n        return this;\n    }\n    insertBefore(cell, value) {\n        if (!cell) {\n            illegalArgs(\"cell is undefined\");\n        }\n        const newCell = { value, next: cell, prev: cell.prev };\n        if (cell.prev) {\n            cell.prev.next = newCell;\n        }\n        else {\n            this.head = newCell;\n        }\n        cell.prev = newCell;\n        this._length++;\n        return this;\n    }\n    insertAfter(cell, value) {\n        if (!cell) {\n            illegalArgs(\"cell is undefined\");\n        }\n        const newCell = { value, next: cell.next, prev: cell };\n        if (cell.next) {\n            cell.next.prev = newCell;\n        }\n        else {\n            this.tail = newCell;\n        }\n        cell.next = newCell;\n        this._length++;\n        return this;\n    }\n    insertBeforeNth(n, x) {\n        if (n < 0) {\n            n += this._length;\n        }\n        if (n <= 0) {\n            return this.cons(x);\n        }\n        else {\n            this.ensureIndex(n);\n            return this.insertBefore(this.nthCellUnsafe(n), x);\n        }\n    }\n    insertAfterNth(n, x) {\n        if (n < 0) {\n            n += this._length;\n        }\n        if (n >= this._length - 1) {\n            return this.push(x);\n        }\n        else {\n            this.ensureIndex(n);\n            return this.insertAfter(this.nthCellUnsafe(n), x);\n        }\n    }\n    insertSorted(value, cmp) {\n        cmp = cmp || compare;\n        let cell = this.head;\n        while (cell) {\n            if (cmp(value, cell.value) <= 0) {\n                return this.insertBefore(cell, value);\n            }\n            cell = cell.next;\n        }\n        return this.push(value);\n    }\n    find(value) {\n        let cell = this.head;\n        while (cell) {\n            if (cell.value === value) {\n                return cell;\n            }\n            cell = cell.next;\n        }\n    }\n    findWith(fn) {\n        let cell = this.head;\n        while (cell) {\n            if (fn(cell.value)) {\n                return cell;\n            }\n            cell = cell.next;\n        }\n    }\n    concat(...slices) {\n        const res = this.copy();\n        for (let slice of slices) {\n            res.into(slice);\n        }\n        return res;\n    }\n    into(src) {\n        for (let x of src) {\n            this.push(x);\n        }\n    }\n    slice(from = 0, to = this.length) {\n        let a = from < 0 ? from + this._length : from;\n        let b = to < 0 ? to + this._length : to;\n        if (a < 0 || b < 0) {\n            illegalArgs(\"invalid indices: ${from} / ${to}\");\n        }\n        const res = new DCons();\n        let cell = this.nthCell(a);\n        while (cell && ++a <= b) {\n            res.push(cell.value);\n            cell = cell.next;\n        }\n        return res;\n    }\n    splice(at, del = 0, insert) {\n        let cell;\n        if (typeof at === \"number\") {\n            if (at < 0) {\n                at += this._length;\n            }\n            this.ensureIndex(at);\n            cell = this.nthCellUnsafe(at);\n        }\n        else {\n            cell = at;\n        }\n        const removed = new DCons();\n        if (del > 0) {\n            while (cell && del-- > 0) {\n                this.remove(cell);\n                removed.push(cell.value);\n                cell = cell.next;\n            }\n        }\n        else if (cell) {\n            cell = cell.next;\n        }\n        if (insert) {\n            if (cell) {\n                for (let i of insert) {\n                    this.insertBefore(cell, i);\n                }\n            }\n            else {\n                for (let i of insert) {\n                    this.push(i);\n                }\n            }\n        }\n        return removed;\n    }\n    remove(cell) {\n        if (cell.prev) {\n            cell.prev.next = cell.next;\n        }\n        else {\n            this.head = cell.next;\n        }\n        if (cell.next) {\n            cell.next.prev = cell.prev;\n        }\n        else {\n            this.tail = cell.prev;\n        }\n        this._length--;\n        return this;\n    }\n    swap(a, b) {\n        if (a !== b) {\n            const t = a.value;\n            a.value = b.value;\n            b.value = t;\n        }\n        return this;\n    }\n    push(value) {\n        if (this.tail) {\n            const cell = { value, prev: this.tail };\n            this.tail.next = cell;\n            this.tail = cell;\n            this._length++;\n            return this;\n        }\n        else {\n            return this.cons(value);\n        }\n    }\n    pop() {\n        const cell = this.tail;\n        if (!cell) {\n            return;\n        }\n        this.tail = cell.prev;\n        if (this.tail) {\n            delete this.tail.next;\n        }\n        else {\n            delete this.head;\n        }\n        this._length--;\n        return cell.value;\n    }\n    first() {\n        return this.head && this.head.value;\n    }\n    peek() {\n        return this.tail && this.tail.value;\n    }\n    setHead(v) {\n        if (this.head) {\n            this.head.value = v;\n            return this;\n        }\n        return this.cons(v);\n    }\n    setTail(v) {\n        if (this.tail) {\n            this.tail.value = v;\n            return this;\n        }\n        return this.push(v);\n    }\n    setNth(n, v) {\n        const cell = this.nthCell(n);\n        !cell && illegalArgs(`index out of bounds: ${n}`);\n        cell.value = v;\n        return this;\n    }\n    nth(n, notFound) {\n        const cell = this.nthCell(n);\n        return cell ? cell.value : notFound;\n    }\n    nthCell(n) {\n        if (n < 0) {\n            n += this._length;\n        }\n        if (n < 0 || n >= this._length) {\n            return;\n        }\n        return this.nthCellUnsafe(n);\n    }\n    rotateLeft() {\n        switch (this._length) {\n            case 0:\n            case 1:\n                return this;\n            case 2:\n                return this.swap(this.head, this.tail);\n            default:\n                return this.push(this.drop());\n        }\n    }\n    rotateRight() {\n        switch (this._length) {\n            case 0:\n            case 1:\n                return this;\n            case 2:\n                return this.swap(this.head, this.tail);\n            default:\n                const x = this.peek();\n                this.pop();\n                return this.cons(x);\n        }\n    }\n    map(fn) {\n        const res = new DCons();\n        let cell = this.head;\n        while (cell) {\n            res.push(fn(cell.value));\n            cell = cell.next;\n        }\n        return res;\n    }\n    filter(pred) {\n        const res = new DCons();\n        let cell = this.head;\n        while (cell) {\n            pred(cell.value) && res.push(cell.value);\n            cell = cell.next;\n        }\n        return res;\n    }\n    reduce(rfn, initial) {\n        let acc = initial;\n        let cell = this.head;\n        while (cell) {\n            // TODO add early termination support\n            acc = rfn(acc, cell.value);\n            cell = cell.next;\n        }\n        return acc;\n    }\n    /**\n     * Shuffles list by probabilistically moving cells to head or tail\n     * positions.\n     *\n     * @remarks\n     * Supports configurable iterations and custom PRNG via\n     * {@link @thi.ng/random#IRandom} (default:\n     * {@link @thi.ng/random#SYSTEM}).\n     *\n     * Default iterations: `ceil(3/2 * log2(n))`\n     *\n     * @param iter\n     * @param rnd\n     */\n    shuffle(iter, rnd = SYSTEM) {\n        if (this._length < 2)\n            return this;\n        for (iter = (iter !== null && iter !== void 0 ? iter : Math.ceil(1.5 * Math.log2(this._length))); iter > 0; iter--) {\n            let cell = this.head;\n            while (cell) {\n                const next = cell.next;\n                rnd.float() < 0.5 ? this.asHead(cell) : this.asTail(cell);\n                cell = next;\n            }\n        }\n        return this;\n    }\n    /**\n     * Merge sort implementation based on Simon Tatham's algorithm:\n     * https://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\n     *\n     * @remarks\n     * Uses {@link @thi.ng/compare#compare} as default comparator.\n     *\n     * @param cmp\n     */\n    sort(cmp = compare) {\n        if (!this._length)\n            return this;\n        let inSize = 1;\n        while (true) {\n            let p = this.head;\n            this.head = undefined;\n            this.tail = undefined;\n            let numMerges = 0;\n            while (p) {\n                numMerges++;\n                let q = p;\n                let psize = 0;\n                for (let i = 0; i < inSize; i++) {\n                    psize++;\n                    q = q.next;\n                    if (!q)\n                        break;\n                }\n                let qsize = inSize;\n                while (psize > 0 || (qsize > 0 && q)) {\n                    let e;\n                    if (psize === 0) {\n                        e = q;\n                        q = q.next;\n                        qsize--;\n                    }\n                    else if (!q || qsize === 0) {\n                        e = p;\n                        p = p.next;\n                        psize--;\n                    }\n                    else if (cmp(p.value, q.value) <= 0) {\n                        e = p;\n                        p = p.next;\n                        psize--;\n                    }\n                    else {\n                        e = q;\n                        q = q.next;\n                        qsize--;\n                    }\n                    if (this.tail) {\n                        this.tail.next = e;\n                    }\n                    else {\n                        this.head = e;\n                    }\n                    e.prev = this.tail;\n                    this.tail = e;\n                }\n                p = q;\n            }\n            this.tail.next = undefined;\n            if (numMerges <= 1) {\n                return this;\n            }\n            inSize *= 2;\n        }\n    }\n    reverse() {\n        let head = this.head;\n        let tail = this.tail;\n        let n = (this._length >>> 1) + (this._length & 1);\n        while (head && tail && n > 0) {\n            const t = head.value;\n            head.value = tail.value;\n            tail.value = t;\n            head = head.next;\n            tail = tail.prev;\n            n--;\n        }\n        return this;\n    }\n    asHead(cell) {\n        if (cell === this.head) {\n            return this;\n        }\n        this.remove(cell);\n        this.head.prev = cell;\n        cell.next = this.head;\n        cell.prev = undefined;\n        this.head = cell;\n        this._length++;\n        return this;\n    }\n    asTail(cell) {\n        if (cell === this.tail) {\n            return this;\n        }\n        this.remove(cell);\n        this.tail.next = cell;\n        cell.prev = this.tail;\n        cell.next = undefined;\n        this.tail = cell;\n        this._length++;\n        return this;\n    }\n    toString() {\n        let res = [];\n        let cell = this.head;\n        while (cell) {\n            res.push(cell.value != null\n                ? String(cell.value)\n                : cell.value === undefined\n                    ? \"undefined\"\n                    : \"null\");\n            cell = cell.next;\n        }\n        return res.join(\", \");\n    }\n    toJSON() {\n        return [...this];\n    }\n    ensureIndex(i) {\n        assert(i >= 0 && i < this._length, `index out of range: ${i}`);\n    }\n    nthCellUnsafe(n) {\n        let cell, dir;\n        if (n <= this._length >> 1) {\n            cell = this.head;\n            dir = \"next\";\n        }\n        else {\n            cell = this.tail;\n            dir = \"prev\";\n            n = this._length - n - 1;\n        }\n        while (n-- > 0 && cell) {\n            cell = cell[dir];\n        }\n        return cell;\n    }\n}\n/**\n * Functional syntax sugar for `new DCons(src?)`.\n *\n * @param src\n */\nexport const dcons = (src) => new DCons(src);\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { DCons } from \"@thi.ng/dcons\";\nimport { equiv } from \"@thi.ng/equiv\";\nimport { dissoc } from \"./dissoc\";\nimport { equivSet } from \"./internal/equiv\";\nimport { into } from \"./into\";\nconst __private = new WeakMap();\nconst __vals = (inst) => __private.get(inst).vals;\n/**\n * Similar to `ArraySet`, this class is an alternative implementation of\n * the native ES6 Set API using a @thi.ng/dcons linked list as backing\n * store and a customizable value equality / equivalence predicate. By\n * the default uses `@thi.ng/equiv` for equivalence checking.\n *\n * Additionally, the type also implements the `ICopy`, `IEmpty` and\n * `IEquiv` interfaces itself.\n */\nexport class LLSet extends Set {\n    constructor(vals, opts = {}) {\n        super();\n        __private.set(this, {\n            equiv: opts.equiv || equiv,\n            vals: new DCons()\n        });\n        vals && this.into(vals);\n    }\n    *[Symbol.iterator]() {\n        yield* __vals(this);\n    }\n    get [Symbol.species]() {\n        return LLSet;\n    }\n    get [Symbol.toStringTag]() {\n        return \"LLSet\";\n    }\n    get size() {\n        return __vals(this).length;\n    }\n    copy() {\n        const $this = __private.get(this);\n        const s = new LLSet(null, this.opts());\n        __private.get(s).vals = $this.vals.copy();\n        return s;\n    }\n    empty() {\n        return new LLSet(null, this.opts());\n    }\n    clear() {\n        __vals(this).clear();\n    }\n    first() {\n        if (this.size) {\n            return __vals(this).head.value;\n        }\n    }\n    add(key) {\n        !this.has(key) && __vals(this).push(key);\n        return this;\n    }\n    into(keys) {\n        return into(this, keys);\n    }\n    has(key) {\n        return this.get(key, SEMAPHORE) !== SEMAPHORE;\n    }\n    /**\n     * Returns the canonical (stored) value for `key`, if present. If\n     * the set contains no equivalent for `key`, returns `notFound`.\n     *\n     * @param key\n     * @param notFound\n     */\n    get(key, notFound) {\n        const $this = __private.get(this);\n        const eq = $this.equiv;\n        let i = $this.vals.head;\n        while (i) {\n            if (eq(i.value, key)) {\n                return i.value;\n            }\n            i = i.next;\n        }\n        return notFound;\n    }\n    delete(key) {\n        const $this = __private.get(this);\n        const eq = $this.equiv;\n        let i = $this.vals.head;\n        while (i) {\n            if (eq(i.value, key)) {\n                $this.vals.splice(i, 1);\n                return true;\n            }\n            i = i.next;\n        }\n        return false;\n    }\n    disj(keys) {\n        return dissoc(this, keys);\n    }\n    equiv(o) {\n        return equivSet(this, o);\n    }\n    forEach(fn, thisArg) {\n        let i = __vals(this).head;\n        while (i) {\n            fn.call(thisArg, i.value, i.value, this);\n            i = i.next;\n        }\n    }\n    *entries() {\n        for (let v of __vals(this)) {\n            yield [v, v];\n        }\n    }\n    *keys() {\n        yield* __vals(this);\n    }\n    *values() {\n        yield* __vals(this);\n    }\n    opts() {\n        return { equiv: __private.get(this).equiv };\n    }\n}\n","import { isFunction } from \"@thi.ng/checks\";\nimport { copy } from \"./utils\";\n/**\n * Similar to `mergeApplyObj()`, but for ES6 Maps instead of plain objects.\n *\n * @param src\n * @param xs\n */\nexport const mergeApplyMap = (src, xs) => {\n    const res = copy(src, Map);\n    for (let [k, v] of xs) {\n        res.set(k, isFunction(v) ? v(res.get(k)) : v);\n    }\n    return res;\n};\n/**\n * Similar to `mergeObjWith()`, but only supports 2 args and any\n * function values in `xs` will be called with respective value in `src`\n * to produce a new / derived value for that key, i.e.\n *\n * ```\n * dest[k] = xs[k](src[k])\n * ```\n *\n * Returns new merged object and does not modify any of the inputs.\n *\n * ```\n * mergeApplyObj(\n *   {a: \"hello\", b: 23, c: 12},\n *   {a: (x) => x + \" world\", b: 42}\n * );\n * // { a: 'hello world', b: 42, c: 12 }\n * ```\n *\n * @param src\n * @param xs\n */\nexport const mergeApplyObj = (src, xs) => {\n    const res = Object.assign({}, src);\n    for (let k in xs) {\n        const v = xs[k];\n        res[k] = isFunction(v) ? v(res[k]) : v;\n    }\n    return res;\n};\n","import { copy } from \"./utils\";\nexport const mergeMapWith = (f, dest, ...xs) => {\n    const res = copy(dest, Map);\n    for (let x of xs) {\n        for (let [k, v] of x) {\n            res.set(k, res.has(k) ? f(res.get(k), v) : v);\n        }\n    }\n    return res;\n};\nexport const mergeObjWith = (f, dest, ...xs) => {\n    const res = Object.assign({}, dest);\n    for (let x of xs) {\n        for (let k in x) {\n            const v = x[k];\n            res[k] = res.hasOwnProperty(k) ? f(dest[k], v) : v;\n        }\n    }\n    return res;\n};\n","import { isPlainObject } from \"@thi.ng/checks\";\nimport { mergeObjWith } from \"./merge-with\";\nexport const mergeDeepObj = (dest, ...xs) => mergeObjWith((a, b) => isPlainObject(a) && isPlainObject(b) ? mergeDeepObj(a, b) : b, dest, ...xs);\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { compare } from \"@thi.ng/compare\";\nimport { isReduced, map } from \"@thi.ng/transducers\";\nimport { dissoc } from \"./dissoc\";\nimport { equivMap } from \"./internal/equiv\";\nimport { into } from \"./into\";\nclass Node {\n    constructor(k, v, h) {\n        this.k = k;\n        this.v = v;\n        this.next = new Array(h + 1);\n    }\n}\n// stores private properties for all instances\n// http://fitzgeraldnick.com/2014/01/13/hiding-implementation-details-with-e6-weakmaps.html\nconst __private = new WeakMap();\nexport class SortedMap extends Map {\n    /**\n     * Creates new `SortedMap` instance with optionally given pairs\n     * and/or options.\n     *\n     * @param pairs\n     * @param opts\n     */\n    constructor(pairs, opts = {}) {\n        super();\n        const cap = opts.capacity || SortedMap.DEFAULT_CAP;\n        const maxh = Math.ceil(Math.log2(cap));\n        __private.set(this, {\n            head: new Node(null, null, 0),\n            cap: Math.pow(2, maxh),\n            cmp: opts.compare || compare,\n            p: opts.probability || SortedMap.DEFAULT_P,\n            maxh,\n            length: 0,\n            h: 0\n        });\n        if (pairs) {\n            this.into(pairs);\n        }\n    }\n    /**\n     * Creates new `SortedMap` instance from given object's key-value\n     * pairs.\n     *\n     * @param obj\n     * @param opts\n     */\n    static fromObject(obj, opts) {\n        const m = new SortedMap(null, Object.assign({ capacity: Object.keys(obj).length }, opts));\n        for (let k in obj) {\n            obj.hasOwnProperty(k) && m.set(k, obj[k]);\n        }\n        return m;\n    }\n    get [Symbol.species]() {\n        return SortedMap;\n    }\n    *[Symbol.iterator]() {\n        let node = __private.get(this).head;\n        while ((node = node.next[0])) {\n            yield [node.k, node.v];\n        }\n    }\n    *entries(key, max = false) {\n        const $this = __private.get(this);\n        let node = $this.head;\n        const cmp = $this.cmp;\n        let code;\n        if (max) {\n            while ((node = node.next[0])) {\n                if (key === undefined || (code = cmp(node.k, key)) <= 0) {\n                    yield [node.k, node.v];\n                    if (code === 0)\n                        return;\n                }\n            }\n        }\n        else {\n            while ((node = node.next[0])) {\n                if (key === undefined || (code = cmp(node.k, key)) >= 0) {\n                    yield [node.k, node.v];\n                }\n            }\n        }\n    }\n    keys(key, max = false) {\n        return map((p) => p[0], this.entries(key, max));\n    }\n    values(key, max = false) {\n        return map((p) => p[1], this.entries(key, max));\n    }\n    get size() {\n        return __private.get(this).length;\n    }\n    clear() {\n        const $this = __private.get(this);\n        $this.head = new Node(null, null, 0);\n        $this.length = 0;\n        $this.h = 0;\n    }\n    empty() {\n        return new SortedMap(null, Object.assign(Object.assign({}, this.opts()), { capacity: SortedMap.DEFAULT_CAP }));\n    }\n    copy() {\n        return new SortedMap(this, this.opts());\n    }\n    compare(o) {\n        const n = this.size;\n        const m = o.size;\n        if (n < m)\n            return -1;\n        if (n > m)\n            return 1;\n        const i = this.entries();\n        const j = o.entries();\n        let x, y;\n        let c;\n        while (((x = i.next()), (y = j.next()), !x.done && !y.done)) {\n            if ((c = compare(x.value[0], y.value[0])) !== 0 ||\n                (c = compare(x.value[1], y.value[1])) !== 0) {\n                return c;\n            }\n        }\n        return 0;\n    }\n    equiv(o) {\n        return equivMap(this, o);\n    }\n    first() {\n        const node = __private.get(this).head.next[0];\n        return node ? [node.k, node.v] : undefined;\n    }\n    get(k, notFound) {\n        const node = this.findPredNode(k).next[0];\n        return node && __private.get(this).cmp(node.k, k) === 0\n            ? node.v\n            : notFound;\n    }\n    has(key) {\n        return this.get(key, SEMAPHORE) !== SEMAPHORE;\n    }\n    set(k, v) {\n        const $this = __private.get(this);\n        let node = $this.head;\n        let level = $this.h;\n        let stack = new Array(level);\n        const cmp = $this.cmp;\n        let code;\n        while (level >= 0) {\n            while (node.next[level] &&\n                (code = cmp(node.next[level].k, k)) < 0) {\n                node = node.next[level];\n            }\n            if (node.next[level] && code === 0) {\n                do {\n                    node.next[level].v = v;\n                } while (--level >= 0);\n                return this;\n            }\n            stack[level--] = node;\n        }\n        const h = this.pickHeight($this.maxh, $this.h, $this.p);\n        node = new Node(k, v, h);\n        while ($this.h < h) {\n            stack[++$this.h] = $this.head;\n        }\n        for (let i = 0; i <= h; i++) {\n            node.next[i] = stack[i].next[i];\n            stack[i].next[i] = node;\n        }\n        $this.length++;\n        if ($this.length >= $this.cap) {\n            $this.cap *= 2;\n            $this.maxh++;\n        }\n        return this;\n    }\n    delete(k) {\n        const $this = __private.get(this);\n        let node = $this.head;\n        let level = $this.h;\n        let removed = false;\n        const cmp = $this.cmp;\n        let code;\n        while (level >= 0) {\n            while (node.next[level] &&\n                (code = cmp(node.next[level].k, k)) < 0) {\n                node = node.next[level];\n            }\n            if (node.next[level] && code === 0) {\n                removed = true;\n                node.next[level] = node.next[level].next[level];\n                if (node == $this.head && !node.next[level]) {\n                    $this.h = Math.max(0, $this.h - 1);\n                }\n            }\n            level--;\n        }\n        if (removed)\n            $this.length--;\n        return removed;\n    }\n    into(pairs) {\n        return into(this, pairs);\n    }\n    dissoc(keys) {\n        return dissoc(this, keys);\n    }\n    forEach(fn, thisArg) {\n        for (let p of this) {\n            fn.call(thisArg, p[1], p[0], this);\n        }\n    }\n    $reduce(rfn, acc) {\n        let node = __private.get(this).head;\n        while ((node = node.next[0]) && !isReduced(acc)) {\n            acc = rfn(acc, [node.k, node.v]);\n        }\n        return acc;\n    }\n    opts() {\n        const $this = __private.get(this);\n        return {\n            capacity: $this.cap,\n            compare: $this.cmp,\n            probability: $this.p\n        };\n    }\n    findPredNode(k) {\n        const $this = __private.get(this);\n        const cmp = $this.cmp;\n        let node = $this.head;\n        let level = $this.h;\n        while (level >= 0) {\n            while (node.next[level] && cmp(node.next[level].k, k) < 0) {\n                node = node.next[level];\n            }\n            level--;\n        }\n        return node;\n    }\n    pickHeight(maxh, h, p) {\n        const max = Math.min(maxh, h + 1);\n        let level = 0;\n        while (Math.random() < p && level < max) {\n            level++;\n        }\n        return level;\n    }\n}\nSortedMap.DEFAULT_CAP = 8;\nSortedMap.DEFAULT_P = 1 / Math.E;\n","import { compare } from \"@thi.ng/compare\";\nimport { map } from \"@thi.ng/transducers\";\nimport { dissoc } from \"./dissoc\";\nimport { equivSet } from \"./internal/equiv\";\nimport { into } from \"./into\";\nimport { SortedMap } from \"./sorted-map\";\nconst __private = new WeakMap();\n/**\n * Sorted set implementation with standard ES6 Set API, customizable\n * value equality and comparison semantics and additional functionality:\n *\n * - range queries (via `entries`, `keys`, `values`)\n * - multiple value addition/deletion via `into()` and `disj()`\n *\n * Furthermore, this class implements the `ICopy`, IEmpty`, `ICompare`\n * and `IEquiv` interfaces defined by `@thi.ng/api`. The latter two\n * allow instances to be used as keys themselves in other data types\n * defined in this (and other) package(s).\n *\n * This set uses a `SortedMap` as backing store and therefore has the\n * same resizing characteristics.\n */\nexport class SortedSet extends Set {\n    /**\n     * Creates new instance with optional given values and/or\n     * implementation options. The options are the same as used by\n     * `SortedMap`.\n     *\n     * @param values\n     * @param opts\n     */\n    constructor(values, opts) {\n        super();\n        __private.set(this, new SortedMap(values ? map((x) => [x, x], values) : null, opts));\n    }\n    [Symbol.iterator]() {\n        return this.keys();\n    }\n    get [Symbol.species]() {\n        return SortedSet;\n    }\n    get [Symbol.toStringTag]() {\n        return \"SortedSet\";\n    }\n    get size() {\n        return __private.get(this).size;\n    }\n    copy() {\n        return new SortedSet(this.keys(), this.opts());\n    }\n    empty() {\n        return new SortedSet(null, Object.assign(Object.assign({}, this.opts()), { capacity: SortedMap.DEFAULT_CAP }));\n    }\n    compare(o) {\n        const n = this.size;\n        const m = o.size;\n        if (n < m)\n            return -1;\n        if (n > m)\n            return 1;\n        const i = this.entries();\n        const j = o.entries();\n        let x, y;\n        let c;\n        while (((x = i.next()), (y = j.next()), !x.done && !y.done)) {\n            if ((c = compare(x.value[0], y.value[0])) !== 0) {\n                return c;\n            }\n        }\n        return 0;\n    }\n    equiv(o) {\n        return equivSet(this, o);\n    }\n    $reduce(rfn, acc) {\n        return __private.get(this).$reduce((_acc, x) => rfn(_acc, x[0]), acc);\n    }\n    entries(key, max = false) {\n        return __private.get(this).entries(key, max);\n    }\n    keys(key, max = false) {\n        return __private.get(this).keys(key, max);\n    }\n    values(key, max = false) {\n        return __private.get(this).values(key, max);\n    }\n    add(key) {\n        __private.get(this).set(key, key);\n        return this;\n    }\n    into(keys) {\n        return into(this, keys);\n    }\n    clear() {\n        __private.get(this).clear();\n    }\n    first() {\n        const first = __private.get(this).first();\n        return first ? first[0] : undefined;\n    }\n    delete(key) {\n        return __private.get(this).delete(key);\n    }\n    disj(keys) {\n        return dissoc(this, keys);\n    }\n    forEach(fn, thisArg) {\n        for (let p of this) {\n            fn.call(thisArg, p, p, this);\n        }\n    }\n    has(key) {\n        return __private.get(this).has(key);\n    }\n    get(key, notFound) {\n        return __private.get(this).get(key, notFound);\n    }\n    opts() {\n        return __private.get(this).opts();\n    }\n}\n","import { isNumber } from \"@thi.ng/checks\";\nimport { illegalArgs } from \"@thi.ng/errors\";\nimport { dissoc } from \"./dissoc\";\nimport { into } from \"./into\";\nconst __private = new WeakMap();\nconst fail = () => illegalArgs(`dense & sparse arrays must be of same size`);\n/**\n * After \"An Efficient Representation for Sparse Sets\"\n * Preston Briggs and Linda Torczon (1993)\n *\n * https://research.swtch.com/sparse\n * https://programmingpraxis.com/2012/03/09/sparse-sets/\n * https://blog.molecular-matters.com/2013/07/24/adventures-in-data-oriented-design-part-3c-external-references/\n */\nexport class ASparseSet extends Set {\n    constructor(dense, sparse) {\n        super();\n        __private.set(this, { dense, sparse, n: 0 });\n    }\n    [Symbol.iterator]() {\n        return this.keys();\n    }\n    get size() {\n        return __private.get(this).n;\n    }\n    get capacity() {\n        return __private.get(this).dense.length;\n    }\n    clear() {\n        __private.get(this).n = 0;\n    }\n    equiv(o) {\n        if (this === o) {\n            return true;\n        }\n        if (!(o instanceof Set) || this.size !== o.size) {\n            return false;\n        }\n        const $this = __private.get(this);\n        const d = $this.dense;\n        for (let i = $this.n; --i >= 0;) {\n            if (!o.has(d[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    add(key) {\n        const $this = __private.get(this);\n        const dense = $this.dense;\n        const sparse = $this.sparse;\n        const max = dense.length;\n        const i = sparse[key];\n        const n = $this.n;\n        if (key < max && n < max && !(i < n && dense[i] === key)) {\n            dense[n] = key;\n            sparse[key] = n;\n            $this.n++;\n        }\n        return this;\n    }\n    delete(key) {\n        const $this = __private.get(this);\n        const dense = $this.dense;\n        const sparse = $this.sparse;\n        const i = sparse[key];\n        if (i < $this.n && dense[i] === key) {\n            const j = dense[--$this.n];\n            dense[i] = j;\n            sparse[j] = i;\n            return true;\n        }\n        return false;\n    }\n    has(key) {\n        const $this = __private.get(this);\n        const i = $this.sparse[key];\n        return i < $this.n && $this.dense[i] === key;\n    }\n    get(key, notFound = -1) {\n        return this.has(key) ? key : notFound;\n    }\n    first() {\n        const $this = __private.get(this);\n        return $this.n ? $this.dense[0] : undefined;\n    }\n    into(keys) {\n        return into(this, keys);\n    }\n    disj(keys) {\n        return dissoc(this, keys);\n    }\n    forEach(fn, thisArg) {\n        const $this = __private.get(this);\n        const d = $this.dense;\n        const n = $this.n;\n        for (let i = 0; i < n; i++) {\n            const v = d[i];\n            fn.call(thisArg, v, v, this);\n        }\n    }\n    *entries() {\n        const $this = __private.get(this);\n        const d = $this.dense;\n        const n = $this.n;\n        for (let i = 0; i < n; i++) {\n            yield [d[i], d[i]];\n        }\n    }\n    *keys() {\n        const $this = __private.get(this);\n        const d = $this.dense;\n        const n = $this.n;\n        for (let i = 0; i < n; i++) {\n            yield d[i];\n        }\n    }\n    values() {\n        return this.keys();\n    }\n    __copyTo(dest) {\n        const $this = __private.get(this);\n        const $c = __private.get(dest);\n        $c.dense = $this.dense.slice();\n        $c.sparse = $this.sparse.slice();\n        $c.n = $this.n;\n        return dest;\n    }\n}\nexport class SparseSet8 extends ASparseSet {\n    constructor(n, sparse) {\n        isNumber(n)\n            ? super(new Uint8Array(n), new Uint8Array(n))\n            : n.length === sparse.length\n                ? super(n, sparse)\n                : fail();\n    }\n    get [Symbol.species]() {\n        return SparseSet8;\n    }\n    get [Symbol.toStringTag]() {\n        return \"SparseSet8\";\n    }\n    copy() {\n        return this.__copyTo(new SparseSet8(0));\n    }\n    empty() {\n        return new SparseSet8(this.capacity);\n    }\n}\nexport class SparseSet16 extends ASparseSet {\n    constructor(n, sparse) {\n        isNumber(n)\n            ? super(new Uint16Array(n), new Uint16Array(n))\n            : n.length === sparse.length\n                ? super(n, sparse)\n                : fail();\n    }\n    get [Symbol.species]() {\n        return SparseSet16;\n    }\n    get [Symbol.toStringTag]() {\n        return \"SparseSet16\";\n    }\n    copy() {\n        return this.__copyTo(new SparseSet16(0));\n    }\n    empty() {\n        return new SparseSet16(this.capacity);\n    }\n}\nexport class SparseSet32 extends ASparseSet {\n    constructor(n, sparse) {\n        isNumber(n)\n            ? super(new Uint32Array(n), new Uint32Array(n))\n            : n.length === sparse.length\n                ? super(n, sparse)\n                : fail();\n    }\n    get [Symbol.species]() {\n        return SparseSet32;\n    }\n    get [Symbol.toStringTag]() {\n        return \"SparseSet32\";\n    }\n    copy() {\n        return this.__copyTo(new SparseSet32(0));\n    }\n    empty() {\n        return new SparseSet32(this.capacity);\n    }\n}\n/**\n * Creates a new sparse set with given max. capacity (max ID + 1) and\n * chooses most memory efficient implementation, e.g. if `n` <= 256\n * returns a `SparseSet8` instance.\n *\n * @param n\n */\nexport const sparseSet = (n) => n <= 0x100\n    ? new SparseSet8(n)\n    : n <= 0x10000\n        ? new SparseSet16(n)\n        : new SparseSet32(n);\n","import { xformSetOp } from \"./internal/xform-setop\";\nimport { into } from \"./into\";\nimport { copy } from \"./utils\";\n/**\n * Computes union of sets `a` and `b` and writes results to new set or\n * optionally given set `out` (assumed to be empty for correct results).\n *\n * @param a\n * @param b\n * @param out\n */\nexport const union = (a, b, out) => {\n    if (a.size < b.size) {\n        const t = a;\n        a = b;\n        b = t;\n    }\n    out = out ? into(out, a) : copy(a, Set);\n    return a === b ? out : into(out, b);\n};\nexport function unionR(src) {\n    return xformSetOp(unionR, union, src);\n}\n","import { empty, ensureSet } from \"./utils\";\nexport const withoutKeysMap = (src, keys) => {\n    const ks = ensureSet(keys);\n    const dest = empty(src, Map);\n    for (let p of src.entries()) {\n        const k = p[0];\n        !ks.has(k) && dest.set(k, p[1]);\n    }\n    return dest;\n};\nexport const withoutKeysObj = (src, keys) => {\n    const ks = ensureSet(keys);\n    const dest = {};\n    for (let k in src) {\n        src.hasOwnProperty(k) && !ks.has(k) && (dest[k] = src[k]);\n    }\n    return dest;\n};\n","export * from \"./array-set\";\nexport * from \"./common-keys\";\nexport * from \"./difference\";\nexport * from \"./dissoc\";\nexport * from \"./equiv-map\";\nexport * from \"./hash-map\";\nexport * from \"./indexed\";\nexport * from \"./intersection\";\nexport * from \"./into\";\nexport * from \"./invert\";\nexport * from \"./join\";\nexport * from \"./ll-set\";\nexport * from \"./merge-apply\";\nexport * from \"./merge-deep\";\nexport * from \"./merge-with\";\nexport * from \"./merge\";\nexport * from \"./rename-keys\";\nexport * from \"./select-keys\";\nexport * from \"./sorted-map\";\nexport * from \"./sorted-set\";\nexport * from \"./sparse-set\";\nexport * from \"./union\";\nexport * from \"./without-keys\";\n","import { EquivMap } from \"@thi.ng/associative\";\nimport { unsupported } from \"@thi.ng/errors\";\nimport { LOGGER } from \"./api\";\nimport { Subscription, subscription } from \"./subscription\";\nimport { optsWithID } from \"./utils/idgen\";\n/**\n * Topic based stream splitter. Applies `topic` function to each\n * received value and only forwards it to the child subscriptions of the\n * returned topic.\n *\n * @remarks\n * The actual topic (return value from `topic` fn) can be of any type,\n * apart from `undefined`. Complex topics (e.g objects / arrays) are\n * allowed and they're matched with registered topics using\n * @thi.ng/equiv by default (but customizable via `equiv` option). Each\n * topic can have any number of subscribers.\n *\n * If a `xform` transducer is given, it is always applied prior to\n * passing the input to the topic function. I.e. in this case the topic\n * function will receive the transformed inputs.\n *\n * {@link PubSub} supports dynamic topic subscriptions and\n * unsubscriptions via {@link PubSub.subscribeTopic} and\n * {@link PubSub.unsubscribeTopic}. However, the standard\n * {@link ISubscribable.subscribe} / {@link ISubscribable.unsubscribe}\n * methods are NOT supported (since meaningless) and will throw an\n * error! `unsubscribe()` can only be called WITHOUT argument to\n * unsubscribe the entire `PubSub` instance (incl. all topic\n * subscriptions) from the parent stream.\n *\n * @param opts\n */\nexport const pubsub = (opts) => new PubSub(opts);\nexport class PubSub extends Subscription {\n    constructor(opts) {\n        opts = opts || {};\n        super(undefined, optsWithID(\"pubsub\", {\n            xform: opts.xform\n        }));\n        this.topicfn = opts.topic;\n        this.topics = new EquivMap(undefined, {\n            equiv: opts.equiv\n        });\n    }\n    /**\n     * Unsupported. Use `subscribeTopic()` instead.\n     */\n    subscribe() {\n        return unsupported(`use subscribeTopic() instead`);\n    }\n    /**\n     * Unsupported. Use `subscribeTopic()` instead.\n     */\n    transform() {\n        return unsupported(`use subscribeTopic() instead`);\n    }\n    subscribeTopic(topicID, sub, opts) {\n        let t = this.topics.get(topicID);\n        !t && this.topics.set(topicID, (t = subscription()));\n        return t.subscribe(sub, opts);\n    }\n    unsubscribeTopic(topicID, sub) {\n        const t = this.topics.get(topicID);\n        return t ? t.unsubscribe(sub) : false;\n    }\n    unsubscribe(sub) {\n        if (!sub) {\n            for (let t of this.topics.values()) {\n                t.unsubscribe();\n            }\n            this.topics.clear();\n            return super.unsubscribe();\n        }\n        return unsupported();\n    }\n    done() {\n        for (let t of this.topics.values()) {\n            t.done();\n        }\n        super.done();\n    }\n    dispatch(x) {\n        LOGGER.debug(this.id, \"dispatch\", x);\n        const t = this.topicfn(x);\n        if (t !== undefined) {\n            const sub = this.topics.get(t);\n            if (sub) {\n                try {\n                    sub.next && sub.next(x);\n                }\n                catch (e) {\n                    sub.error ? sub.error(e) : this.error(e);\n                }\n            }\n        }\n    }\n}\n","import { isFunction } from \"@thi.ng/checks\";\nimport { LOGGER } from \"./api\";\nimport { Subscription } from \"./subscription\";\nimport { optsWithID } from \"./utils/idgen\";\nexport function stream(src, opts) {\n    return new Stream(src, opts);\n}\nexport class Stream extends Subscription {\n    // prettier-ignore\n    constructor(src, opts) {\n        const [_src, _opts] = isFunction(src) ? [src, opts] : [undefined, src];\n        super(undefined, optsWithID(\"stream\", _opts));\n        this.src = _src;\n        this._inited = false;\n    }\n    subscribe(...args) {\n        const wrapped = super.subscribe.apply(this, args);\n        if (!this._inited) {\n            this._cancel = (this.src && this.src(this)) || (() => void 0);\n            this._inited = true;\n        }\n        return wrapped;\n    }\n    unsubscribe(sub) {\n        const res = super.unsubscribe(sub);\n        if (res &&\n            (!sub ||\n                ((!this.subs || !this.subs.length) &&\n                    this.closeOut !== 0 /* NEVER */))) {\n            this.cancel();\n        }\n        return res;\n    }\n    done() {\n        this.cancel();\n        super.done();\n        delete this.src;\n        delete this._cancel;\n    }\n    error(e) {\n        super.error(e);\n        this.cancel();\n    }\n    cancel() {\n        if (this._cancel) {\n            LOGGER.debug(this.id, \"cancel\");\n            const f = this._cancel;\n            delete this._cancel;\n            f();\n        }\n    }\n}\n","import { Subscription } from \"./subscription\";\nimport { optsWithID } from \"./utils/idgen\";\n/**\n * Returns a new {@link StreamMerge} subscription, consuming values from\n * multiple inputs and passing received values on to any subscribers.\n *\n * @remarks\n * Input streams can be added and removed dynamically. By default,\n * `StreamMerge` calls {@link ISubscriber.done} when the last active\n * input is done, but this behavior can be overridden via the provided\n * {@link StreamMergeOpts | options}.\n *\n * @example\n * ```ts\n * merge({\n *     // input streams w/ different frequencies\n *     src: [\n *         fromIterable([1, 2, 3], { delay: 10 }),\n *         fromIterable([10, 20, 30], { delay: 21 }),\n *         fromIterable([100, 200, 300], { delay: 7 })\n *     ]\n * }).subscribe(trace());\n * // 100\n * // 1\n * // 200\n * // 10\n * // 2\n * // 300\n * // 3\n * // 20\n * // 30\n * ```\n *\n * @example\n * Use the {@link @thi.ng/transducers#labeled} transducer for each\n * input to create a stream of labeled values and track their provenance:\n *\n * ```ts\n * merge({\n *     src: [\n *         fromIterable([1, 2, 3]).transform(tx.labeled(\"a\")),\n *         fromIterable([10, 20, 30]).transform(tx.labeled(\"b\")),\n *     ]\n * }).subscribe(trace());\n * // [\"a\", 1]\n * // [\"b\", 10]\n * // [\"a\", 2]\n * // [\"b\", 20]\n * // [\"a\", 3]\n * // [\"b\", 30]\n * ```\n *\n * @param opts\n */\nexport const merge = (opts) => new StreamMerge(opts);\nexport class StreamMerge extends Subscription {\n    constructor(opts) {\n        opts = opts || {};\n        super(undefined, optsWithID(\"streammerge\", opts));\n        this.sources = new Map();\n        opts.src && this.addAll(opts.src);\n    }\n    add(src) {\n        this.ensureState();\n        this.sources.set(src, src.subscribe({\n            next: (x) => {\n                if (x instanceof Subscription) {\n                    this.add(x);\n                }\n                else {\n                    this.next(x);\n                }\n            },\n            done: () => this.markDone(src),\n            __owner: this\n        }, { id: `in-${src.id}` }));\n    }\n    addAll(src) {\n        for (let s of src) {\n            this.add(s);\n        }\n    }\n    remove(src) {\n        const sub = this.sources.get(src);\n        if (sub) {\n            this.sources.delete(src);\n            sub.unsubscribe();\n            return true;\n        }\n        return false;\n    }\n    removeID(id) {\n        for (let s of this.sources) {\n            if (s[0].id === id) {\n                return this.remove(s[0]);\n            }\n        }\n        return false;\n    }\n    removeAll(src) {\n        let ok = true;\n        for (let s of src) {\n            ok = this.remove(s) && ok;\n        }\n        return ok;\n    }\n    removeAllIDs(ids) {\n        let ok = true;\n        for (let id of ids) {\n            ok = this.removeID(id) && ok;\n        }\n        return ok;\n    }\n    unsubscribe(sub) {\n        if (!sub) {\n            for (let s of this.sources.values()) {\n                s.unsubscribe();\n            }\n            this.state = 2 /* DONE */;\n            this.sources.clear();\n        }\n        return super.unsubscribe(sub);\n    }\n    markDone(src) {\n        this.remove(src);\n        if (this.closeIn === 1 /* FIRST */ ||\n            (this.closeIn === 2 /* LAST */ && !this.sources.size)) {\n            this.done();\n        }\n    }\n}\n","import { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Returns a {@link Stream} of values from provided iterable, emitted at\n * the given `delay` interval.\n *\n * @remarks\n * Asynchronously starts pulling values from source iterable when the\n * first subscriber becomes available. The values are processed &\n * emitted via `setInterval()`, using the given `delay` value (default:\n * 0). By default, once the iterable is exhausted (if finite), calls\n * {@link ISubscriber.done} to close the stream, but this can be\n * re-configured via provided {@link CommonOpts | options}.\n *\n * @param src\n * @param opts\n */\nexport const fromIterable = (src, opts = {}) => new Stream((stream) => {\n    const iter = src[Symbol.iterator]();\n    const id = setInterval(() => {\n        let val;\n        if ((val = iter.next()).done) {\n            clearInterval(id);\n            stream.closeIn !== 0 /* NEVER */ && stream.done();\n        }\n        else {\n            stream.next(val.value);\n        }\n    }, opts.delay || 0);\n    return () => clearInterval(id);\n}, optsWithID(\"iterable\", opts));\n/**\n * Creates a new `Stream` of given iterable which synchronously calls\n * `.next()` for each item of the iterable when the first (and in this\n * case the only one) subscriber becomes available. Once the iterable is\n * exhausted (MUST be finite!), then calls `.done()` by default, but can\n * be avoided by passing `false` as last argument.\n *\n * @param src\n * @param opts\n */\nexport const fromIterableSync = (src, opts) => new Stream((stream) => {\n    for (let s of src) {\n        stream.next(s);\n    }\n    stream.closeIn !== 0 /* NEVER */ && stream.done();\n}, optsWithID(\"iterable-sync\", opts));\n","import { fromIterable } from \"./from/iterable\";\nimport { optsWithID } from \"./utils/idgen\";\nexport function trigger(x = true) {\n    return fromIterable([x], optsWithID(\"trigger\"));\n}\n","import { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Returns a {@link Stream} of monotonically increasing counter values,\n * emitted at given `delay` interval and up to the optionally defined\n * max value (default: ), after which the stream is closed.\n *\n * @remarks\n * The stream only starts when the first subscriber becomes available.\n *\n * @param delay\n * @param opts\n */\nexport const fromInterval = (delay, opts) => {\n    opts = optsWithID(\"interval\", Object.assign({ num: Infinity }, opts));\n    return new Stream((stream) => {\n        let i = 0;\n        let count = opts.num;\n        stream.next(i++);\n        let id = setInterval(() => {\n            stream.next(i++);\n            if (--count <= 0) {\n                clearInterval(id);\n                stream.closeIn !== 0 /* NEVER */ && stream.done();\n            }\n        }, delay);\n        return () => clearInterval(id);\n    }, opts);\n};\n","import { isNode } from \"@thi.ng/checks\";\nimport { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\nimport { fromInterval } from \"./interval\";\n/**\n * Yields {@link Stream} of a monotonically increasing counter,\n * triggered by a `requestAnimationFrame()` loop (only available in\n * browser environments).\n *\n * @remarks\n * In NodeJS, this function falls back to {@link fromInterval}, yielding\n * a similar (approx. 60Hz) stream.\n *\n * All subscribers to this stream will be processed during that same\n * loop iteration.\n */\nexport const fromRAF = (opts) => isNode()\n    ? fromInterval(16, opts)\n    : new Stream((stream) => {\n        let i = 0;\n        let isActive = true;\n        let loop = () => {\n            isActive && stream.next(i++);\n            isActive && (id = requestAnimationFrame(loop));\n        };\n        let id = requestAnimationFrame(loop);\n        return () => {\n            isActive = false;\n            cancelAnimationFrame(id);\n        };\n    }, optsWithID(\"raf\", opts));\n","import { isNumber } from \"@thi.ng/checks\";\nimport { dedupe, reducer, scan } from \"@thi.ng/transducers\";\nimport { fromInterval } from \"./from/interval\";\nimport { fromRAF } from \"./from/raf\";\nimport { sync } from \"./stream-sync\";\n/**\n * Takes an existing stream/subscription `src` and attaches new\n * subscription which interpolates between incoming values from `src`\n * using the given `mix` function.\n *\n * @remarks\n * The returned construct produces values at a rate controlled by the\n * `clock` stream or frequency. If omitted, `clock` defaults to\n * {@link fromRAF} (~60Hz). If the `clock` is given as number, creates a\n * {@link fromInterval} or else uses the given `clock` stream directly.\n * In general, the frequency of the `clock` should always be higher than\n * that of `src` or else interpolation will have undefined behavior.\n *\n * If `stop` is given as well, no values will be passed downstream if\n * that function returns true. This can be used to limit traffic once\n * the tween target value has been reached.\n *\n * The returned subscription closes automatically when either `src` or\n * `clock` are exhausted.\n *\n * @example\n * ```ts\n * val = stream();\n *\n * tween(\n *   // consume from `val` stream\n *   val,\n *   // initial start value to interpolate from\n *   0,\n *   // interpolation fn (LERP)\n *   (a, b) => a + (b - a) * 0.5,\n *   // stop emitting values if difference to previous result < 0.01\n *   (a, b) => Math.abs(a - b) < 0.01\n * ).subscribe(trace(\"tweened\"))\n *\n * a.next(10)\n * // 5\n * // 7.5\n * // ...\n * // 9.98046875\n *\n * a.next(100)\n * // 55\n * // 77.5\n * // ...\n * // 99.989013671875\n * ```\n *\n * @param src\n * @param initial\n * @param mix\n * @param stop\n * @param clock\n */\nexport const tween = (src, initial, mix, stop, clock) => sync({\n    src: {\n        src,\n        _: clock == null\n            ? fromRAF()\n            : isNumber(clock)\n                ? fromInterval(clock)\n                : clock\n    },\n    closeIn: 1 /* FIRST */\n}).transform(scan(reducer(() => initial, (acc, { src }) => mix(acc, src))), dedupe(stop || (() => false)));\n/**\n * Convenience version of `tween` for its most common use case, tweening\n * of numeric streams.\n *\n * @param src\n * @param init\n * @param speed\n * @param eps\n * @param clock\n */\nexport const tweenNumber = (src, init = 0, speed = 0.05, eps = 1e-3, clock) => tween(src, init, (a, b) => a + (b - a) * speed, (a, b) => Math.abs(a - b) < eps, clock);\n","import { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Yields {@link Stream} of value changes in given\n * {@link @thi.ng/atom# | Atom-like state container}.\n *\n * @remarks\n * Attaches a {@link @thi.ng/api#IWatch.addWatch | watch} to the atom\n * and checks for value changes with given `changed` predicate (`!==` by\n * default). If the predicate returns truthy result, the new value is\n * emitted on the stream. If `emitFirst` is true (default), also emits\n * atom's current value when first subscriber attaches to stream.\n *\n * Also see {@link fromView}\n *\n * @example\n * ```ts\n * db = new Atom({ a: 23, b: 88 });\n * cursor = new Cursor(db, \"a\")\n *\n * rs.fromAtom(cursor).subscribe(rs.trace(\"cursor val:\"))\n * // cursor val: 23\n *\n * cursor.reset(42);\n * // cursor val: 42\n *\n * db.reset({a: 66})\n * // cursor val: 66\n * ```\n *\n * @param atom\n * @param opts\n */\nexport const fromAtom = (atom, opts) => {\n    opts = optsWithID(\"atom\", Object.assign({ emitFirst: true, changed: (a, b) => a !== b }, opts));\n    return new Stream((stream) => {\n        atom.addWatch(stream.id, (_, prev, curr) => {\n            if (opts.changed(prev, curr)) {\n                stream.next(curr);\n            }\n        });\n        opts.emitFirst && stream.next(atom.deref());\n        return () => atom.removeWatch(stream.id);\n    }, opts);\n};\n","import { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Creates a {@link Stream} of events attached to given element / event\n * target and using given event listener options (same as supported by\n * `addEventListener()`, default: false).\n *\n * @param src event target\n * @param name event name\n * @param listenerOpts listener opts\n * @param streamOpts stream opts\n */\nexport const fromEvent = (src, name, listenerOpts = false, streamOpts) => new Stream((stream) => {\n    let listener = (e) => stream.next(e);\n    src.addEventListener(name, listener, listenerOpts);\n    return () => src.removeEventListener(name, listener, listenerOpts);\n}, optsWithID(`event-${name}`, streamOpts));\n/**\n * Same as `fromEvent`, however only supports well-known DOM event\n * names. Returned stream instance will use corresponding concrete event\n * type in its type signature, whereas `fromEvent` will only use the\n * generic `Event`.\n *\n * ```\n * fromDOMEvent(document.body, \"mousemove\"); // Stream<MouseEvent>\n * fromEvent(document.body, \"mousemove\"); // Stream<Event>\n * ```\n *\n * @see fromEvent\n *\n * @param src\n * @param name\n * @param listenerOpts\n * @param streamOpts\n */\nexport const fromDOMEvent = (src, name, listenerOpts = false, streamOpts) => fromEvent(src, name, listenerOpts, streamOpts);\n","import { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Yields a single-value {@link Stream} of the resolved promise and then\n * automatically marks itself done.\n *\n * @remarks\n * It doesn't matter if the promise resolves before the first subscriber\n * has attached.\n *\n * @param src\n * @param opts\n */\nexport const fromPromise = (src, opts) => {\n    let canceled = false;\n    let isError = false;\n    let err = {};\n    src.catch((e) => {\n        err = e;\n        isError = true;\n    });\n    return new Stream((stream) => {\n        src.then((x) => {\n            if (!canceled && stream.getState() < 2 /* DONE */) {\n                if (isError) {\n                    stream.error(err);\n                    err = null;\n                }\n                else {\n                    stream.next(x);\n                    stream.closeIn !== 0 /* NEVER */ && stream.done();\n                }\n            }\n        }, (e) => stream.error(e));\n        return () => {\n            canceled = true;\n        };\n    }, optsWithID(\"promise\", opts));\n};\n","import { mapcat } from \"@thi.ng/transducers\";\nimport { optsWithID } from \"../utils/idgen\";\nimport { fromPromise } from \"./promise\";\n/**\n * Wraps given iterable in `Promise.all()` to yield {@link Stream} of\n * results in same order as arguments, then closes.\n *\n * @remarks\n * If any of the promises rejects, all others will do so too. In this\n * case the stream calls {@link ISubscriber.error} in all of its\n * subscribers.\n *\n * @example\n * ```ts\n * fromPromises([\n *     Promise.resolve(1),\n *     Promise.resolve(2),\n *     Promise.resolve(3)\n * ]).subscribe(trace())\n * // 1\n * // 2\n * // 3\n * // done\n * ```\n *\n * @example\n * If individual error handling is required, an alternative is below\n * (however this approach provides no ordering guarantees):\n *\n * ```ts\n * fromIterable([\n *     Promise.resolve(1),\n *     new Promise(() => setTimeout(() => { throw new Error(\"eeek\"); }, 10)),\n *     Promise.resolve(3)\n * ]).subscribe(resolve()).subscribe(trace())\n * ```\n *\n * @param promises\n */\nexport const fromPromises = (promises, opts) => fromPromise(Promise.all(promises), optsWithID(\"promises\", opts)).transform(mapcat((x) => x));\n","import { isArray, isString } from \"@thi.ng/checks\";\n/**\n * Converts the given key path to canonical form (array).\n *\n * ```\n * toPath(\"a.b.c\");\n * // [\"a\", \"b\", \"c\"]\n *\n * toPath(0)\n * // [0]\n *\n * toPath([\"a\", \"b\", \"c\"])\n * // [\"a\", \"b\", \"c\"]\n * ```\n *\n * @param path\n */\nexport const toPath = (path) => isArray(path)\n    ? path\n    : isString(path)\n        ? path.length > 0\n            ? path.split(\".\")\n            : []\n        : path != null\n            ? [path]\n            : [];\n/**\n * Takes an arbitrary object and lookup path. Descends into object along\n * path and returns true if the full path exists (even if final leaf\n * value is `null` or `undefined`). Checks are performed using\n * `hasOwnProperty()`.\n *\n * @param obj\n * @param path\n */\nexport const exists = (obj, path) => {\n    if (obj == null) {\n        return false;\n    }\n    path = toPath(path);\n    for (let n = path.length - 1, i = 0; i <= n; i++) {\n        const k = path[i];\n        if (!obj.hasOwnProperty(k)) {\n            return false;\n        }\n        obj = obj[k];\n        if (obj == null && i < n) {\n            return false;\n        }\n    }\n    return true;\n};\n","import { toPath } from \"./path\";\n/**\n * Composes a getter function for given nested lookup path. Optimized\n * fast execution paths are provided for path lengths <= 4.\n *\n * @remarks\n * Supports any `[]`-indexable data structure (arrays, objects,\n * strings).\n *\n * If `path` is given as string, it will be split using `.`. Returns\n * function which accepts single object and when called, returns value\n * at given path.\n *\n * If any intermediate key is not present in the given obj, descent\n * stops and the function returns `undefined`.\n *\n * If `path` is an empty string or array, the returned getter will\n * simply return the given state arg (identity function).\n *\n * Also see: `getIn()`\n *\n * @example\n * ```ts\n * interface Foo {\n *   a: { b: { c: number; } }\n * }\n *\n * // fully typed getter\n * g = getter<Foo, \"a\", \"b\", \"c\">([\"a\",\"b\",\"c\"]);\n *\n * // error (wrong `d` key)\n * g = getter<Foo, \"a\", \"b\", \"d\">([\"a\",\"b\",\"d\"]);\n *\n * // unchecked (accepts any, returns any)\n * g = getter(\"a.b.c\");\n *\n * g({ a: { b: { c: 23} } }) // 23\n * g({ x: 23 }) // undefined\n * g() // undefined\n * ```\n *\n * @param path\n */\nexport const getter = (path) => getterT(path);\nexport function getterT(path) {\n    const ks = toPath(path);\n    let [a, b, c, d] = ks;\n    switch (ks.length) {\n        case 0:\n            return (s) => s;\n        case 1:\n            return (s) => (s != null ? s[a] : undefined);\n        case 2:\n            return (s) => s != null ? ((s = s[a]) != null ? s[b] : undefined) : undefined;\n        case 3:\n            return (s) => s != null\n                ? (s = s[a]) != null\n                    ? (s = s[b]) != null\n                        ? s[c]\n                        : undefined\n                    : undefined\n                : undefined;\n        case 4:\n            return (s) => s != null\n                ? (s = s[a]) != null\n                    ? (s = s[b]) != null\n                        ? (s = s[c]) != null\n                            ? s[d]\n                            : undefined\n                        : undefined\n                    : undefined\n                : undefined;\n        default:\n            return (s) => {\n                const n = ks.length - 1;\n                let res = s;\n                for (let i = 0; res != null && i <= n; i++) {\n                    res = res[ks[i]];\n                }\n                return res;\n            };\n    }\n}\n","import { isArray } from \"@thi.ng/checks\";\nimport { toPath } from \"./path\";\n/**\n * Composes a setter function for given nested update path. Optimized\n * fast execution paths are provided for path lengths less up to 4.\n *\n * @remarks\n * Supports both arrays and objects and creates intermediate shallow\n * copies at each level of the path. Thus provides structural sharing\n * with the original data for any branches not being updated by the\n * setter.\n *\n * If `path` is given as string, it will be split using `.`. Returns\n * function which accepts single object and when called, **immutably**\n * updates value at given path, i.e. produces a partial deep copy of obj\n * up until given path.\n *\n * If any intermediate key is not present in the given obj, creates a\n * plain empty object for that key and descends further.\n *\n * If `path` is an empty string or array, the returned setter will\n * simply return the new value.\n *\n * Only keys in the path will be modified, all other keys present in the\n * given object retain their original values to provide efficient\n * structural sharing / re-use.\n *\n * Also see: {@link setIn}, {@link updateIn}, {@link deleteIn}\n *\n * @example\n * ```\n * s = setter(\"a.b.c\");\n * // or\n * s = setter([\"a\",\"b\",\"c\"]);\n *\n * s({ a: { b: { c: 23} } }, 24)\n * // { a: { b: { c: 24} } }\n *\n * s({ x: 23 }, 24)\n * // { x: 23, a: { b: { c: 24 } } }\n *\n * s(null, 24)\n * // { a: { b: { c: 24 } } }\n * ```\n *\n * @example\n * ```ts\n * s = setter(\"a.b.c\");\n *\n * a = {x: {y: {z: 1}}};\n * b = s(a, 2);\n * // { x: { y: { z: 1 } }, a: { b: { c: 2 } } }\n *\n * a.x === b.x // true\n * a.x.y === b.x.y // true\n * ```\n *\n * @param path\n */\nexport const setter = (path) => setterT(path);\nexport function setterT(path) {\n    const ks = toPath(path);\n    let [a, b, c, d] = ks;\n    switch (ks.length) {\n        case 0:\n            return (_, v) => v;\n        case 1:\n            return (s, v) => ((s = _copy(s)), (s[a] = v), s);\n        case 2:\n            return (s, v) => {\n                let x;\n                s = _copy(s);\n                s[a] = x = _copy(s[a]);\n                x[b] = v;\n                return s;\n            };\n        case 3:\n            return (s, v) => {\n                let x, y;\n                s = _copy(s);\n                s[a] = x = _copy(s[a]);\n                x[b] = y = _copy(x[b]);\n                y[c] = v;\n                return s;\n            };\n        case 4:\n            return (s, v) => {\n                let x, y, z;\n                s = _copy(s);\n                s[a] = x = _copy(s[a]);\n                x[b] = y = _copy(x[b]);\n                y[c] = z = _copy(y[c]);\n                z[d] = v;\n                return s;\n            };\n        default:\n            let f;\n            for (let i = ks.length; --i >= 0;) {\n                f = compS(ks[i], f);\n            }\n            return f;\n    }\n}\nconst _copy = (s) => (isArray(s) ? s.slice() : Object.assign({}, s));\nconst compS = (k, f) => (s, v) => ((s = _copy(s)), (s[k] = f ? f(s[k], v) : v), s);\n","import { getterT } from \"./getter\";\nimport { setterT } from \"./setter\";\n/**\n * Similar to {@link setIn}, but applies given function to current path\n * value (incl. any additional/optional arguments passed to `updateIn`)\n * and uses result as new value. Does not modify original state (unless\n * given function does so itself).\n *\n * ```\n * add = (x, y) => x + y;\n * updateIn({ a: { b: { c: 23 } } }, \"a.b.c\", add, 10);\n * // { a: { b: { c: 33 } } }\n * ```\n *\n * @param state - state to update\n * @param path - update path\n * @param fn - update function\n * @param args - optional args for `fn`\n */\nexport const updateIn = (state, path, fn, ...args) => updateInT(state, path, fn, ...args);\nexport function updateInT(state, path, fn, ...args) {\n    return setterT(path)(state, fn.apply(null, (args.unshift(getterT(path)(state)), args)));\n}\n","import { toPath } from \"./path\";\nimport { updateInT } from \"./update-in\";\n/**\n * Uses {@link updateIn} and returns updated state with key for given\n * path removed. Does not modify original state.Returns `undefined` if\n * `path` is an empty string or array.\n *\n * ```\n * deleteIn({ a: { b: { c: 23 } } }, \"a.b.c\");\n * // { a: { b: { } } }\n * ```\n *\n * @param state\n * @param path\n */\nexport const deleteIn = (state, path) => deleteInT(state, path);\nexport function deleteInT(state, path) {\n    const ks = [...toPath(path)];\n    if (ks.length > 0) {\n        const k = ks.pop();\n        return updateInT(state, ks, (x) => ((x = Object.assign({}, x)), delete x[k], x));\n    }\n}\n","import { getterT } from \"./getter\";\n/**\n * Immediate use getter, i.e. same as: `getter(path)(state)`.\n *\n * @remarks\n * Supports type checked paths and values for path lengths <= 8. String\n * paths are always unchecked (i.e. `state` is `any`).\n *\n * @example\n * ```ts\n * // checked path and inferred return type\n * getIn({ a: { b: { c: 23 } } }, [\"a\",\"b\",\"c\"]);\n * // 23\n *\n * // unchecked path\n * getIn({ a: { b: { c: 23 } } }, \"a.b.c\");\n * // 23\n * ```\n *\n * @param state\n * @param path\n */\nexport const getIn = (state, path) => getterT(path)(state);\nexport function getInT(state, path) {\n    return getterT(path)(state);\n}\n","import { toPath } from \"./path\";\n/**\n * Higher-order function, similar to {@link setter}. Returns function\n * which when called mutates given object/array at given path location.\n *\n * @remarks\n * The returned function bails if any intermediate path values are\n * non-indexable (only the very last path element can be missing in the\n * actual object structure). If successful, returns original (mutated)\n * object, else `undefined`. This function provides optimized versions\n * for path lengths <= 4. Type checking is supported for path lengths <=\n * 8.\n *\n * @param path\n */\nexport const mutator = (path) => mutatorT(path);\nexport function mutatorT(path) {\n    const ks = toPath(path);\n    let [a, b, c, d] = ks;\n    switch (ks.length) {\n        case 0:\n            return (_, x) => x;\n        case 1:\n            return (s, x) => (s ? ((s[a] = x), s) : undefined);\n        case 2:\n            return (s, x) => {\n                let t;\n                return s\n                    ? (t = s[a])\n                        ? ((t[b] = x), s)\n                        : undefined\n                    : undefined;\n            };\n        case 3:\n            return (s, x) => {\n                let t;\n                return s\n                    ? (t = s[a])\n                        ? (t = t[b])\n                            ? ((t[c] = x), s)\n                            : undefined\n                        : undefined\n                    : undefined;\n            };\n        case 4:\n            return (s, x) => {\n                let t;\n                return s\n                    ? (t = s[a])\n                        ? (t = t[b])\n                            ? (t = t[c])\n                                ? ((t[d] = x), s)\n                                : undefined\n                            : undefined\n                        : undefined\n                    : undefined;\n            };\n        default:\n            return (s, x) => {\n                let t = s;\n                const n = ks.length - 1;\n                for (let k = 0; k < n; k++) {\n                    if (!(t = t[ks[k]]))\n                        return;\n                }\n                t[ks[n]] = x;\n                return s;\n            };\n    }\n}\n","import { mutatorT } from \"./mutator\";\n/**\n * Immediate use mutator, i.e. same as: `mutator(path)(state, val)`.\n *\n * @remarks\n * Also see {@link setIn}, {@link updateIn}, {@link deleteIn}.\n *\n * @example\n * ```ts\n * interface Foo {\n *   a: { b: number[]; }\n * }\n *\n * // fully type checked\n * mutIn({ a: { b: [10, 20] } }, [\"a\", \"b\", 1], 23)\n * // { a: { b: [ 10, 23 ] } }\n *\n * // unchecked\n * mutIn({ a: { b: [10, 20] } }, \"a.b.1\", 23);\n * // { a: { b: [ 10, 23 ] } }\n *\n * // fails (see `mutator` docs)\n * mutIn({}, \"a.b.c\", 23);\n * // undefined\n * ```\n *\n * @param state\n * @param path\n * @param val\n */\nexport const mutIn = (state, path, val) => mutInT(state, path, val);\nexport function mutInT(state, path, val) {\n    return mutatorT(path)(state, val);\n}\n","import { illegalArgs } from \"@thi.ng/errors\";\nimport { mutInT } from \"./mut-in\";\n/**\n * Similar to {@link mutIn}, but takes any number of path-value pairs as\n * args and applies them in sequence using `mutIn()`. All key paths must\n * already be present in the given data structure until their\n * penultimate key.\n *\n * @remarks\n * Unlike {@link mutIn}, this function does not use type checked paths.\n *\n * @example\n * ```ts\n * mutInMany(\n *   { a: { b: 1 }, x: { y: { z: 2 } } },\n *   \"a.b\", 10,\n *   \"x.y.z\", 20\n * )\n * // { a: { b: 10 }, x: { y: { z: 20 } } }\n * ```\n *\n * @param state\n * @param pairs\n */\nexport const mutInMany = (state, ...pairs) => {\n    const n = pairs.length;\n    n & 1 && illegalArgs(`require even number of args (got ${pairs.length})`);\n    for (let i = 0; i < n && state; i += 2) {\n        state = mutInT(state, pairs[i], pairs[i + 1]);\n    }\n    return state;\n};\n","import { setterT } from \"./setter\";\n/**\n * Immediate use setter, i.e. same as: `setter(path)(state, val)`.\n *\n * @remarks\n * Supports type checked paths and values for path lengths <= 8. String\n * paths are always unchecked (i.e. `state` is `any`).\n *\n * @example\n * ```ts\n *\n * setIn({}, \"a.b.c\", 23);\n * // { a: { b: { c: 23} } }\n * ```\n *\n * @param state\n * @param path\n */\nexport const setIn = (state, path, val) => setterT(path)(state, val);\nexport function setInT(state, path, val) {\n    return setterT(path)(state, val);\n}\n","import { illegalArgs } from \"@thi.ng/errors\";\nimport { setInT } from \"./set-in\";\n/**\n * Similar to {@link setIn}, but takes any number of path-value pairs as\n * args and applies them in sequence by calling `setIn()` for each.\n *\n * @remarks\n * Any key paths missing in the data structure will be created. Does\n * *not* mutate original (instead use {@link mutInMany} for this\n * purpose).\n *\n * Unlike {@link setIn}, this function does not use type checked paths.\n *\n * ```\n * setInMany({}, \"a.b\", 10, \"x.y.z\", 20)\n * // { a: { b: 10 }, x: { y: { z: 20 } } }\n * ```\n *\n * @param state\n * @param pairs\n */\nexport const setInMany = (state, ...pairs) => {\n    const n = pairs.length;\n    n & 1 &&\n        illegalArgs(`require even number of KV args (got ${pairs.length})`);\n    for (let i = 0; i < n; i += 2) {\n        state = setInT(state, pairs[i], pairs[i + 1]);\n    }\n    return state;\n};\n","import { getterT } from \"./getter\";\nimport { setterT } from \"./setter\";\n/**\n * Similar to {@link setter}, returns a function to update values at\n * given `path` using provided update `fn`.\n *\n * @remarks\n * The returned function accepts a single object / array and applies\n * `fn` to current path value (incl. any additional/optional arguments\n * passed) and uses result as new value. Does not modify original state\n * (unless given function does so itself).\n *\n * ```\n * add = updater(\"a.b\", (x, n) => x + n);\n *\n * add({a: {b: 10}}, 13);\n * // { a: { b: 23 } }\n * ```\n *\n * @param path\n * @param fn\n */\nexport const updater = (path, fn) => updaterT(path, fn);\nexport function updaterT(path, fn) {\n    const g = getterT(path);\n    const s = setterT(path);\n    return (state, ...args) => s(state, fn.apply(null, (args.unshift(g(state)), args)));\n}\n","export * from \"./delete-in\";\nexport * from \"./getter\";\nexport * from \"./get-in\";\nexport * from \"./mut-in\";\nexport * from \"./mut-in-many\";\nexport * from \"./mutator\";\nexport * from \"./path\";\nexport * from \"./setter\";\nexport * from \"./set-in\";\nexport * from \"./set-in-many\";\nexport * from \"./updater\";\nexport * from \"./update-in\";\n","let NEXT_ID = 0;\nexport const nextID = () => NEXT_ID++;\n","import { equiv as _equiv } from \"@thi.ng/equiv\";\nimport { getter, toPath } from \"@thi.ng/paths\";\nimport { nextID } from \"./idgen\";\n/**\n * This class implements readonly access to a deeply nested value with\n * in an Atom/Cursor. An optional transformer function can be supplied\n * at creation time to produce a derived/materialized view of the actual\n * value held in the atom. Views can be created directly or via the\n * `.addView()` method of the parent state. Views can be `deref()`'d\n * like atoms and polled for value changes using `changed()`. The\n * transformer is only applied once per value change and its result\n * cached until the next change.\n *\n * If the optional `lazy` is true (default), the transformer will only\n * be executed with the first `deref()` after each value change. If\n * `lazy` is false, the transformer function will be executed\n * immediately after a value change occurred and so can be used like a\n * watch which only triggers if there was an actual value change (in\n * contrast to normal watches, which execute with each update,\n * regardless of value change).\n *\n * Related, the actual value change predicate can be customized. If not\n * given, the default `@thi.ng/equiv` will be used.\n *\n * ```\n * a = new Atom({a: {b: 1}});\n * v = a.addView(\"a.b\", (x) => x * 10);\n *\n * v.deref()\n * // 10\n *\n * // update atom state\n * a.swap((state) => setIn(state, \"a.b\", 2));\n * // {a: {b: 2}}\n *\n * v.changed()\n * // true\n * v.deref()\n * // 20\n *\n * v.release()\n * // remove view from parent state\n * ```\n */\nexport class View {\n    constructor(parent, path, tx, lazy = true, equiv = _equiv) {\n        this.parent = parent;\n        this.id = `view-${nextID()}`;\n        this.tx = tx || ((x) => x);\n        this.path = toPath(path);\n        this.isDirty = true;\n        this.isLazy = lazy;\n        const lookup = getter(this.path);\n        const state = this.parent.deref();\n        this.unprocessed = state ? lookup(state) : undefined;\n        if (!lazy) {\n            this.state = this.tx(this.unprocessed);\n            this.unprocessed = undefined;\n        }\n        parent.addWatch(this.id, (_, prev, curr) => {\n            const pval = prev ? lookup(prev) : prev;\n            const val = curr ? lookup(curr) : curr;\n            if (!equiv(val, pval)) {\n                if (lazy) {\n                    this.unprocessed = val;\n                }\n                else {\n                    this.state = this.tx(val);\n                }\n                this.isDirty = true;\n            }\n        });\n    }\n    get value() {\n        return this.deref();\n    }\n    /**\n     * Returns view's value. If the view has a transformer, the\n     * transformed value is returned. The transformer is only run once\n     * per value change. See class comments about difference between\n     * lazy/eager behaviors.\n     */\n    deref() {\n        if (this.isDirty) {\n            if (this.isLazy) {\n                this.state = this.tx(this.unprocessed);\n                this.unprocessed = undefined;\n            }\n            this.isDirty = false;\n        }\n        return this.state;\n    }\n    /**\n     * Returns true, if the view's value has changed since last\n     * `deref()`.\n     */\n    changed() {\n        return this.isDirty;\n    }\n    /**\n     * Like `deref()`, but doesn't update view's cached state and dirty\n     * flag if value has changed. If there's an unprocessed value\n     * change, returns result of this sub's transformer or else the\n     * cached value.\n     *\n     * **Important:** Use this function only if the view has none or or\n     * a stateless transformer. Else might cause undefined/inconsistent\n     * behavior when calling `view()` or `deref()` subsequently.\n     */\n    view() {\n        return this.isDirty && this.isLazy\n            ? this.tx(this.unprocessed)\n            : this.state;\n    }\n    /**\n     * Disconnects this view from parent state, marks itself\n     * dirty/changed and sets its unprocessed raw value to `undefined`.\n     */\n    release() {\n        this.unprocessed = undefined;\n        if (!this.isLazy) {\n            this.state = this.tx(undefined);\n        }\n        this.isDirty = true;\n        return this.parent.removeWatch(this.id);\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { IWatchMixin } from \"@thi.ng/api\";\nimport { illegalState } from \"@thi.ng/errors\";\nimport { setIn, updateIn } from \"@thi.ng/paths\";\nimport { View } from \"./view\";\n/**\n * Mutable wrapper for an (usually) immutable value. Support for\n * watches.\n */\nlet Atom = class Atom {\n    constructor(val, valid) {\n        if (valid && !valid(val)) {\n            illegalState(\"initial state value did not validate\");\n        }\n        this._value = val;\n        this.valid = valid;\n    }\n    get value() {\n        return this._value;\n    }\n    set value(val) {\n        this.reset(val);\n    }\n    deref() {\n        return this._value;\n    }\n    equiv(o) {\n        return this === o;\n    }\n    reset(val) {\n        const old = this._value;\n        if (this.valid && !this.valid(val)) {\n            return old;\n        }\n        this._value = val;\n        this.notifyWatches(old, val);\n        return val;\n    }\n    resetIn(path, val) {\n        return this.reset(setIn(this._value, path, val));\n    }\n    swap(fn, ...args) {\n        return this.reset(fn.apply(null, [this._value, ...args]));\n    }\n    swapIn(path, fn, ...args) {\n        return this.reset(updateIn(this._value, path, fn, ...args));\n    }\n    // mixin stub\n    /* istanbul ignore next */\n    addWatch(_, __) {\n        return false;\n    }\n    // mixin stub\n    /* istanbul ignore next */\n    removeWatch(_) {\n        return false;\n    }\n    // mixin stub\n    /* istanbul ignore next */\n    notifyWatches(_, __) { }\n    addView(path, tx, lazy = true) {\n        return new View(this, path, tx, lazy);\n    }\n    release() {\n        delete this._watches;\n        delete this._value;\n        return true;\n    }\n};\nAtom = __decorate([\n    IWatchMixin\n], Atom);\nexport { Atom };\n","import { isArray, isFunction } from \"@thi.ng/checks\";\nimport { illegalArgs, illegalArity } from \"@thi.ng/errors\";\nimport { getter, setter } from \"@thi.ng/paths\";\nimport { Atom } from \"./atom\";\nimport { nextID } from \"./idgen\";\nimport { View } from \"./view\";\n/**\n * A cursor provides read/write access to a path location within a\n * nested parent state (Atom or another Cursor). Cursors behave like\n * Atoms for all practical purposes, i.e. support `deref()`, `reset()`,\n * `swap()`, `addWatch()` etc. However, when updating a cursor's value,\n * the parent state will be updated at the cursor's path as well (incl.\n * triggering any watches and/or validators) attached to the parent.\n * Likewise, when the parent state is modified externally, the cursor's\n * value will automatically update as well. The update order of cursor's\n * sharing a common parent is undefined, but can be overridden by\n * extending this class with a custom `notifyWatches()` implementation.\n *\n * If creating multiple cursors w/ a shared parent and each cursor\n * configured with a custom ID (provided via config object to ctor),\n * it's the user's responsibility to ensure the given IDs are unique.\n * Cursors are implemented by attaching a watch to the parent and the ID\n * is used to identify each watch.\n *\n * When using the optional validator predicate (also specified via\n * config object to ctor), the cursor's validator MUST NOT conflict with\n * the one assigned to the parent or else both will go out-of-sync.\n * Therefore, when requiring validation and updating values via cursors\n * it's recommended to only specify validators for leaf-level cursors in\n * the hierarchy.\n */\nexport class Cursor {\n    constructor(...args) {\n        let parent;\n        let lookup;\n        let update;\n        let validate;\n        let opts;\n        let id;\n        switch (args.length) {\n            case 1:\n                opts = args[0];\n                id = opts.id;\n                parent = opts.parent;\n                validate = opts.validate;\n                if (opts.path) {\n                    if (isArray(opts.path) && isFunction(opts.path[0])) {\n                        [lookup, update] = opts.path;\n                    }\n                    else {\n                        lookup = getter(opts.path);\n                        update = setter(opts.path);\n                    }\n                }\n                else {\n                    illegalArgs(\"missing path config\");\n                }\n                break;\n            case 2:\n                parent = args[0];\n                lookup = getter(args[1]);\n                update = setter(args[1]);\n                break;\n            case 3:\n                [parent, lookup, update] = args;\n                break;\n            default:\n                illegalArity(args.length);\n        }\n        this.parent = parent;\n        this.id = id || `cursor-${nextID()}`;\n        this.selfUpdate = false;\n        if (!lookup || !update) {\n            illegalArgs();\n        }\n        this.local = new Atom(lookup(parent.deref()), validate);\n        this.local.addWatch(this.id, (_, prev, curr) => {\n            if (prev !== curr) {\n                this.selfUpdate = true;\n                parent.swap((state) => update(state, curr));\n                this.selfUpdate = false;\n            }\n        });\n        parent.addWatch(this.id, (_, prev, curr) => {\n            if (!this.selfUpdate) {\n                const cval = lookup(curr);\n                if (cval !== lookup(prev)) {\n                    this.local.reset(cval);\n                }\n            }\n        });\n    }\n    get value() {\n        return this.deref();\n    }\n    set value(val) {\n        this.reset(val);\n    }\n    deref() {\n        return this.local.deref();\n    }\n    release() {\n        this.local.release();\n        this.parent.removeWatch(this.id);\n        delete this.local;\n        delete this.parent;\n        return true;\n    }\n    reset(val) {\n        return this.local.reset(val);\n    }\n    resetIn(path, val) {\n        return this.local.resetIn(path, val);\n    }\n    swap(fn, ...args) {\n        return this.local.swap(fn, ...args);\n    }\n    swapIn(path, fn, ...args) {\n        return this.local.swapIn(path, fn, ...args);\n    }\n    addWatch(id, fn) {\n        return this.local.addWatch(id, fn);\n    }\n    removeWatch(id) {\n        return this.local.removeWatch(id);\n    }\n    /* istanbul ignore next */\n    notifyWatches(oldState, newState) {\n        return this.local.notifyWatches(oldState, newState);\n    }\n    addView(path, tx, lazy = true) {\n        return new View(this, path, tx, lazy);\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar History_1;\nimport { INotifyMixin } from \"@thi.ng/api\";\nimport { equiv } from \"@thi.ng/equiv\";\nimport { getIn, setIn, updateIn } from \"@thi.ng/paths\";\nimport { View } from \"./view\";\n/**\n * Undo/redo history stack wrapper for atoms and cursors. Implements\n * `IAtom` interface and so can be used directly in place and delegates\n * to wrapped atom/cursor. Value changes are only recorded in history if\n * `changed` predicate returns truthy value, or else by calling\n * `record()` directly. This class too implements the @thi.ng/api\n * `INotify` interface to support event listeners for `undo()`, `redo()`\n * and `record()`.\n */\nlet History = History_1 = class History {\n    /**\n     * @param state parent state\n     * @param maxLen max size of undo stack\n     * @param changed predicate to determine changed values (default `!equiv(a,b)`)\n     */\n    constructor(state, maxLen = 100, changed) {\n        this.state = state;\n        this.maxLen = maxLen;\n        this.changed = changed || ((a, b) => !equiv(a, b));\n        this.clear();\n    }\n    get value() {\n        return this.deref();\n    }\n    set value(val) {\n        this.reset(val);\n    }\n    canUndo() {\n        return this.history.length > 0;\n    }\n    canRedo() {\n        return this.future.length > 0;\n    }\n    /**\n     * Clears history & future stacks\n     */\n    clear() {\n        this.history = [];\n        this.future = [];\n    }\n    /**\n     * Attempts to re-apply most recent historical value to atom and\n     * returns it if successful (i.e. there's a history). Before the\n     * switch, first records the atom's current value into the future\n     * stack (to enable `redo()` feature). Returns `undefined` if\n     * there's no history.\n     *\n     * If undo was possible, the `History.EVENT_UNDO` event is emitted\n     * after the restoration with both the `prev` and `curr` (restored)\n     * states provided as event value (and object with these two keys).\n     * This allows for additional state handling to be executed, e.g.\n     * application of the \"Command pattern\". See `addListener()` for\n     * registering event listeners.\n     */\n    undo() {\n        if (this.history.length) {\n            const prev = this.state.deref();\n            this.future.push(prev);\n            const curr = this.state.reset(this.history.pop());\n            this.notify({ id: History_1.EVENT_UNDO, value: { prev, curr } });\n            return curr;\n        }\n    }\n    /**\n     * Attempts to re-apply most recent value from future stack to atom\n     * and returns it if successful (i.e. there's a future). Before the\n     * switch, first records the atom's current value into the history\n     * stack (to enable `undo()` feature). Returns `undefined` if\n     * there's no future (so sad!).\n     *\n     * If redo was possible, the `History.EVENT_REDO` event is emitted\n     * after the restoration with both the `prev` and `curr` (restored)\n     * states provided as event value (and object with these two keys).\n     * This allows for additional state handling to be executed, e.g.\n     * application of the \"Command pattern\". See `addListener()` for\n     * registering event listeners.\n     */\n    redo() {\n        if (this.future.length) {\n            const prev = this.state.deref();\n            this.history.push(prev);\n            const curr = this.state.reset(this.future.pop());\n            this.notify({ id: History_1.EVENT_REDO, value: { prev, curr } });\n            return curr;\n        }\n    }\n    /**\n     * `IAtom.reset()` implementation. Delegates to wrapped atom/cursor,\n     * but too applies `changed` predicate to determine if there was a\n     * change and if the previous value should be recorded.\n     *\n     * @param val\n     */\n    reset(val) {\n        const prev = this.state.deref();\n        this.state.reset(val);\n        const changed = this.changed(prev, this.state.deref());\n        if (changed) {\n            this.record(prev);\n        }\n        return val;\n    }\n    resetIn(path, val) {\n        const prev = this.state.deref();\n        const prevV = getIn(prev, path);\n        const curr = setIn(prev, path, val);\n        this.state.reset(curr);\n        this.changed(prevV, getIn(curr, path)) && this.record(prev);\n        return curr;\n    }\n    /**\n     * `IAtom.swap()` implementation. Delegates to wrapped atom/cursor,\n     * but too applies `changed` predicate to determine if there was a\n     * change and if the previous value should be recorded.\n     *\n     * @param val\n     */\n    swap(fn, ...args) {\n        return this.reset(fn(this.state.deref(), ...args));\n    }\n    swapIn(path, fn, ...args) {\n        const prev = this.state.deref();\n        const prevV = getIn(prev, path);\n        const curr = updateIn(this.state.deref(), path, fn, ...args);\n        this.state.reset(curr);\n        this.changed(prevV, getIn(curr, path)) && this.record(prev);\n        return curr;\n    }\n    /**\n     * Records given state in history. This method is only needed when\n     * manually managing snapshots, i.e. when applying multiple swaps on\n     * the wrapped atom directly, but not wanting to create an history\n     * entry for each change. **DO NOT call this explicitly if using\n     * `History.reset()` / `History.swap()` etc.**\n     *\n     * If no `state` is given, uses the wrapped atom's current state\n     * value (user code SHOULD always call without arg).\n     *\n     * If recording succeeded, the `History.EVENT_RECORD` event is\n     * emitted with the recorded state provided as event value.\n     *\n     * @param state\n     */\n    record(state) {\n        const history = this.history;\n        const n = history.length;\n        let ok = true;\n        // check for arg given and not if `state == null` we want to\n        // allow null/undefined as possible values\n        if (!arguments.length) {\n            state = this.state.deref();\n            ok = !n || this.changed(history[n - 1], state);\n        }\n        if (ok) {\n            if (n >= this.maxLen) {\n                history.shift();\n            }\n            history.push(state);\n            this.notify({ id: History_1.EVENT_RECORD, value: state });\n            this.future.length = 0;\n        }\n    }\n    /**\n     * Returns wrapped atom's **current** value.\n     */\n    deref() {\n        return this.state.deref();\n    }\n    /**\n     * `IWatch.addWatch()` implementation. Delegates to wrapped\n     * atom/cursor.\n     *\n     * @param id\n     * @param fn\n     */\n    addWatch(id, fn) {\n        return this.state.addWatch(id, fn);\n    }\n    /**\n     * `IWatch.removeWatch()` implementation. Delegates to wrapped\n     * atom/cursor.\n     *\n     * @param id\n     */\n    removeWatch(id) {\n        return this.state.removeWatch(id);\n    }\n    /**\n     * `IWatch.notifyWatches()` implementation. Delegates to wrapped\n     * atom/cursor.\n     *\n     * @param oldState\n     * @param newState\n     */\n    notifyWatches(oldState, newState) {\n        return this.state.notifyWatches(oldState, newState);\n    }\n    addView(path, tx, lazy = true) {\n        return new View(this, path, tx, lazy);\n    }\n    release() {\n        this.state.release();\n        delete this.state;\n        return true;\n    }\n    addListener(_, __, ___) {\n        return false;\n    }\n    removeListener(_, __, ___) {\n        return false;\n    }\n    notify(_) { }\n};\nHistory.EVENT_UNDO = \"undo\";\nHistory.EVENT_REDO = \"redo\";\nHistory.EVENT_RECORD = \"record\";\nHistory = History_1 = __decorate([\n    INotifyMixin\n], History);\nexport { History };\n","import { assert } from \"@thi.ng/api\";\nimport { setIn, updateIn } from \"@thi.ng/paths\";\nimport { nextID } from \"./idgen\";\nimport { View } from \"./view\";\nexport class Transacted {\n    constructor(parent) {\n        this.parent = parent;\n        this.current = undefined;\n        this.isActive = false;\n        this.id = `tx${nextID()}-`;\n    }\n    get value() {\n        return this.deref();\n    }\n    set value(val) {\n        this.reset(val);\n    }\n    get isTransaction() {\n        return this.isActive;\n    }\n    deref() {\n        return this.isActive ? this.current : this.parent.deref();\n    }\n    equiv(o) {\n        return this === o;\n    }\n    reset(val) {\n        this.ensureTx();\n        this.current = val;\n        return val;\n    }\n    resetIn(path, val) {\n        this.ensureTx();\n        return this.reset(setIn(this.current, path, val));\n    }\n    swap(fn, ...args) {\n        this.ensureTx();\n        return this.reset(fn.apply(null, [this.current, ...args]));\n    }\n    swapIn(path, fn, ...args) {\n        this.ensureTx();\n        return this.reset(updateIn(this.current, path, fn, ...args));\n    }\n    begin() {\n        assert(!this.isActive, \"transaction already started\");\n        this.current = this.parent.deref();\n        this.isActive = true;\n    }\n    commit() {\n        this.ensureTx();\n        const val = this.current;\n        this.parent.reset(this.current);\n        this.isActive = false;\n        this.current = undefined;\n        return val;\n    }\n    cancel() {\n        this.ensureTx();\n        this.isActive = false;\n        this.current = undefined;\n    }\n    addWatch(id, watch) {\n        return this.parent.addWatch(this.id + id, (_, prev, curr) => watch(id, prev, curr));\n    }\n    removeWatch(id) {\n        return this.parent.removeWatch(this.id + id);\n    }\n    notifyWatches(old, curr) {\n        this.parent.notifyWatches(old, curr);\n    }\n    addView(path, tx, lazy = true) {\n        return new View(this, path, tx, lazy);\n    }\n    release() {\n        delete this.parent;\n        delete this.current;\n        delete this.isActive;\n        delete this._watches;\n        return true;\n    }\n    ensureTx() {\n        assert(this.isActive, \"no active transaction\");\n    }\n}\n","export * from \"./atom\";\nexport * from \"./cursor\";\nexport * from \"./history\";\nexport * from \"./transacted\";\nexport * from \"./view\";\n","import { View } from \"@thi.ng/atom\";\nimport { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Similar to {@link fromAtom}, but creates an eager derived view for a\n * nested value in atom / cursor and yields stream of its value changes.\n *\n * @remarks\n * Views are readonly and more lightweight versions of\n * {@link @thi.ng/atom#Cursor | cursors}. The view checks for value\n * changes with given `equiv` predicate ({@link @thi.ng/equiv#equiv} by\n * default). If the predicate returns a falsy result, the new value is\n * emitted on the stream. The first value emitted is always the\n * (possibly transformed) current value at the stream's start time (i.e.\n * when the first subscriber attaches).\n *\n * If the `tx` option is given, the raw value is first passed to this\n * transformer function and its result emitted on the stream instead.\n *\n * When the stream is cancelled the view is destroyed as well.\n *\n * @example\n * ```ts\n * db = new Atom({ a: 1, b: { c: 2 }});\n *\n * fromView(\n *   db,\n *   {\n *     path: \"b.c\",\n *     tx: (x) => x != null ? x : \"n/a\"\n * }).subscribe(trace(\"view:\"))\n * // view: 2\n *\n * db.swapIn(\"b.c\", (x: number) => x + 1);\n * // view: 3\n *\n * db.reset({ a: 10 });\n * // view: n/a\n * ```\n *\n * @param atom\n * @param opts\n */\nexport const fromView = (atom, opts) => {\n    opts = optsWithID(\"view\", opts);\n    return new Stream((stream) => {\n        let isActive = true;\n        const tx = opts.tx;\n        const view = new View(atom, opts.path, tx\n            ? (x) => isActive && ((x = tx(x)), stream.next(x), x)\n            : (x) => isActive && (stream.next(x), x), false, opts.equiv);\n        return () => {\n            isActive = false;\n            view.release();\n        };\n    });\n};\n","import { LOGGER } from \"../api\";\nimport { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\nimport { makeWorker } from \"../utils/worker\";\n/**\n * Returns a {@link Stream} which adds `message` and `error` event\n * listeners to given `worker` and then emits received values.\n *\n * @remarks\n * If `terminate` is true (default), the worker will be terminated when\n * the stream is being closed (either directly or indirectly, i.e. if\n * the user called {@link ISubscriber.done} on the stream or the last\n * child subscription has unsubscribed, depending on\n * {@link CommonOpts | config options}).\n *\n * As with {@link postWorker}, the `worker` can be an existing `Worker`\n * instance, a JS source code `Blob` or an URL string. In the latter two\n * cases, a worker is created automatically.\n *\n * @example\n * ```ts\n *\n * ```\n *\n * @param worker\n * @param opts\n */\nexport const fromWorker = (worker, opts) => {\n    const _worker = makeWorker(worker);\n    opts = optsWithID(\"worker\", opts);\n    return new Stream((stream) => {\n        const ml = (e) => {\n            stream.next(e.data);\n        };\n        const el = (e) => {\n            stream.error(e.data);\n        };\n        _worker.addEventListener(\"message\", ml);\n        _worker.addEventListener(\"error\", el);\n        return () => {\n            _worker.removeEventListener(\"message\", ml);\n            _worker.removeEventListener(\"error\", el);\n            if (opts.terminate !== false) {\n                LOGGER.info(\"terminating worker\", _worker);\n                _worker.terminate();\n            }\n        };\n    }, opts);\n};\n","import { PubSub } from \"../pubsub\";\n/**\n * Returns a {@link PubSub} using given predicate `pred` as boolean\n * {@link PubSubOpts.topic | topic function} and `truthy` & `falsey` as\n * subscribers for their respective values.\n *\n * @remarks\n * If `a` or `b` need to be subscribed to directly, then `a` / `b` MUST\n * be first created as `Subscription` (if not already) and a reference\n * kept prior to calling `bisect()`.\n *\n * @example\n * ```ts\n * fromIterable([1, 2, 3, 4]).subscribe(\n *   bisect(\n *     (x) => !!(x & 1),\n *     trace(\"odd\"),\n *     trace(\"even\")\n *   )\n * );\n * // odd 1\n * // even 2\n * // odd 3\n * // even 4\n * // odd done\n * // even done\n * ```\n *\n * @example\n * ```ts\n * const odd = subscription();\n * const even = subscription();\n * odd.subscribe(trace(\"odd\"));\n * odd.subscribe(trace(\"odd x10\"), map((x) => x * 10));\n * even.subscribe(trace(\"even\"));\n *\n * fromIterable([1, 2, 3, 4]).subscribe(\n *     bisect((x) => !!(x & 1), odd, even)\n * );\n * ```\n *\n * @param pred predicate function\n * @param truthy subscription for truthy branch\n * @param falsy subscription for falsy branch\n */\nexport const bisect = (pred, truthy, falsy) => {\n    const sub = new PubSub({ topic: pred });\n    truthy && sub.subscribeTopic(true, truthy);\n    falsy && sub.subscribeTopic(false, falsy);\n    return sub;\n};\n","import { isTransferable } from \"@thi.ng/checks\";\nimport { isTypedArray } from \"@thi.ng/checks\";\nimport { LOGGER } from \"../api\";\nimport { makeWorker } from \"../utils/worker\";\n/**\n * Creates a {@link ISubscriber | subscriber} which forwards received\n * values to given worker.\n *\n * @remarks\n * The `worker` can be an existing `Worker` instance, a JS source code\n * `Blob` or an URL string. In the latter two cases, a worker is created\n * automatically. If `transfer` is true, the received values will be\n * marked as *transferrable* and the host app loses all access\n * permissions to these marked values. See `Worker.postMessage()` for\n * details.\n *\n * If `terminate` is set to a positive number, then the worker will be\n * automatically terminated after the stated number of milliseconds\n * since the parent subscription is {@link ISubscriber.done}.\n *\n * @example\n * ```ts\n * // worker source code\n * src = `self.onmessage = (e) => console.log(\"worker\", e.data);`;\n *\n * a = stream();\n * a.subscribe(\n *   postWorker(src, { type: \"application/javascript\" }))\n * );\n *\n * a.next(42)\n * // worker 42\n * ```\n *\n * @param worker\n * @param transfer\n * @param terminate worker termination delay (ms)\n */\nexport const postWorker = (worker, transfer = false, terminate = 0) => {\n    const _worker = makeWorker(worker);\n    return {\n        next(x) {\n            if (x instanceof Promise) {\n                x.then((y) => this.next(y));\n                return;\n            }\n            let tx;\n            if (transfer) {\n                const ta = isTypedArray(x);\n                if (ta || isTransferable(x)) {\n                    tx = [ta ? x.buffer : x];\n                }\n            }\n            _worker.postMessage(x, tx || []);\n        },\n        done() {\n            if (terminate > 0) {\n                setTimeout(() => {\n                    LOGGER.info(\"terminating worker...\");\n                    _worker.terminate();\n                }, terminate);\n            }\n        }\n    };\n};\n","import { LOGGER } from \"../api\";\nimport { Subscription } from \"../subscription\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Creates a {@link Subscription} which receives promises, buffers them\n * and then passes their resolved values downstream.\n *\n * @remarks\n * If the optional `fail` handler is provided, it'll be called with the\n * error of each failed promise. If none is provided, the sub's\n * {@link ISubscriber.error} handler is called, which then stops the sub\n * from receiving further values.\n *\n * @example\n * ```ts\n * fromIterable([1, 2, 3], 100)\n *   .transform(tx.delayed(1000))\n *   .subscribe(resolve())\n *   .subscribe(trace(\"result\"))\n * // result 1\n * // result 2\n * // result 3\n * // result done\n * ```\n *\n * @param opts\n */\nexport const resolve = (opts) => new Resolver(opts);\nexport class Resolver extends Subscription {\n    constructor(opts = {}) {\n        super(undefined, optsWithID(\"resolve\"));\n        this.outstanding = 0;\n        this.fail = opts.fail;\n    }\n    next(x) {\n        this.outstanding++;\n        x.then((y) => {\n            if (this.state < 2 /* DONE */) {\n                this.dispatch(y);\n                if (--this.outstanding === 0) {\n                    this.done();\n                }\n            }\n            else {\n                LOGGER.warn(`resolved value in state ${this.state} (${x})`);\n            }\n        }, (e) => {\n            if (this.fail) {\n                this.fail(e);\n            }\n            else {\n                this.error(e);\n            }\n        });\n    }\n    done() {\n        if (this.parent.getState() === 2 /* DONE */ && this.outstanding === 0) {\n            super.done();\n        }\n    }\n}\n","import { Subscription } from \"../subscription\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Returns a {@link Subscription} which buffers values from `src` until\n * side chain fires, then emits buffer (unless empty) and repeats\n * process until either input is done.\n *\n * @remarks\n * By default, the values read from the side chain are ignored (i.e.\n * only their timing is used), however the `pred`icate option can be\n * used to only trigger for specific values / conditions.\n *\n * @example\n * ```t\n * // merge various event streams\n * events = merge([\n *     fromEvent(document,\"mousemove\"),\n *     fromEvent(document,\"mousedown\"),\n *     fromEvent(document,\"mouseup\")\n * ]);\n *\n * // queue event processing to only execute during the\n * // requestAnimationFrame cycle (RAF)\n * events.subscribe(sidechainPartition(fromRAF())).subscribe(trace())\n * ```\n *\n * @param side\n * @param opts\n */\nexport const sidechainPartition = (side, opts) => new SidechainPartition(side, opts);\nexport class SidechainPartition extends Subscription {\n    constructor(side, opts) {\n        opts = optsWithID(\"sidepart\", opts);\n        super(undefined, opts);\n        this.buf = [];\n        const pred = opts.pred || (() => true);\n        const $this = this;\n        this.sideSub = side.subscribe({\n            next(x) {\n                if ($this.buf.length && pred(x)) {\n                    $this.dispatch($this.buf);\n                    $this.buf = [];\n                }\n            },\n            done() {\n                if ($this.buf.length) {\n                    $this.dispatch($this.buf);\n                }\n                $this.done();\n                delete $this.buf;\n            }\n        });\n    }\n    unsubscribe(sub) {\n        const res = super.unsubscribe(sub);\n        if (!sub || !this.subs.length) {\n            this.sideSub.unsubscribe();\n        }\n        return res;\n    }\n    next(x) {\n        if (this.state < 2 /* DONE */) {\n            this.buf.push(x);\n        }\n    }\n    done() {\n        this.sideSub.unsubscribe();\n        super.done();\n    }\n}\n","import { Subscription } from \"../subscription\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Returns {@link Subscription} which filters values from input based on\n * values received from side chain.\n *\n * @remarks\n * By default, the value read from the side chain is ignored (i.e. only\n * their timing is used), however the `pred`icate option can be used to\n * only trigger for specific values/conditions. Every time the predicate\n * fn returns true, the filter will be toggled on/off. Whilst switched\n * off, no input values will be forwarded.\n *\n * @example\n * ```ts\n * // use slower interval stream to toggle main stream on/off\n * fromInterval(500)\n *   .subscribe(sidechainToggle(fromInterval(1000)))\n *   .subscribe(trace());\n * // 0\n * // 3\n * // 4\n * // 7\n * // 8\n * ...\n * ```\n *\n * @param side\n * @param opts\n */\nexport const sidechainToggle = (side, opts) => new SidechainToggle(side, opts);\nexport class SidechainToggle extends Subscription {\n    constructor(side, opts) {\n        opts = optsWithID(\"sidetoggle\", opts);\n        super(undefined, opts);\n        this.isActive = !!opts.initial;\n        const pred = opts.pred || (() => true);\n        const $this = this;\n        this.sideSub = side.subscribe({\n            next(x) {\n                if (pred(x)) {\n                    $this.isActive = !$this.isActive;\n                }\n            },\n            done() {\n                $this.done();\n            }\n        });\n    }\n    unsubscribe(sub) {\n        const res = super.unsubscribe(sub);\n        if (!sub || !this.subs.length) {\n            this.sideSub.unsubscribe();\n        }\n        return res;\n    }\n    next(x) {\n        if (this.isActive) {\n            super.next(x);\n        }\n    }\n    done() {\n        super.done();\n        this.sideSub.unsubscribe();\n    }\n}\n","import { Subscription } from \"../subscription\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Returns a {@link Subscription} that calls the\n * {@link ISubscriber.error} handlers of all child subscriptions with an\n * arbitrary error object after a given time.\n *\n * @remarks\n * If no `error` is given, uses a new `Error` instance by default. If\n * `resetTimeout` is false (default), the error is emitted regardless of\n * any received values in the meantime. However, if `true`, the timeout\n * resets with each received value and then only triggers once the time\n * interval since the last value has exceeded.\n *\n * @param timeoutMs timeout period in milliseconds\n * @param opts\n */\nexport const timeout = (timeoutMs, opts) => new Timeout(timeoutMs, opts);\nclass Timeout extends Subscription {\n    constructor(timeoutMs, opts) {\n        opts = optsWithID(\"timeout\", opts);\n        super(undefined, opts);\n        this.timeoutMs = timeoutMs;\n        this.errorObj = opts.error;\n        this.resetTimeout = opts.reset === true;\n        this.reset();\n    }\n    next(x) {\n        if (this.resetTimeout) {\n            clearTimeout(this.timeoutId);\n            this.reset();\n        }\n        super.next(x);\n    }\n    reset() {\n        this.timeoutId = setTimeout(() => {\n            if (this.state < 2 /* DONE */) {\n                this.error(this.errorObj ||\n                    new Error(`Timeout stream \"${this.id}\" after ${this.timeoutMs} ms`));\n            }\n        }, this.timeoutMs);\n    }\n    cleanup() {\n        clearTimeout(this.timeoutId);\n        super.cleanup();\n    }\n}\n","/**\n * Helper {@link ISubscriber} for inspection / debugging purposes.\n * Simply logs received values to console, optionally with given\n * `prefix`.\n *\n * @param prefix\n */\nexport const trace = (prefix) => ({\n    next(x) {\n        prefix ? console.log(prefix, x) : console.log(x);\n    },\n    done() {\n        prefix ? console.log(prefix, \"done\") : console.log(\"done\");\n    },\n    error(e) {\n        prefix ? console.log(prefix, \"error\", e) : console.log(\"error\", e);\n    }\n});\n","import { isReduced } from \"@thi.ng/transducers\";\n/**\n * Returns a promise which subscribes to given input and transforms\n * incoming values using given transducer `xform` and reducer `rfn`.\n *\n * @remarks\n * Once the input or the reducer is done, the promise will resolve with\n * the final reduced result (or fail with error).\n *\n * @example\n * ```ts\n * transduce(\n *   fromIterable(tx.range(10)),\n *   tx.map((x) => x * 10),\n *   tx.add()\n * ).then((x) => console.log(\"result\", x))\n *\n * // result 450\n * ```\n *\n * @param src\n * @param xform\n * @param rfn\n * @param init\n */\nexport const transduce = (src, xform, rfn, init) => {\n    let acc = init !== undefined ? init : rfn[0]();\n    let sub;\n    return new Promise((resolve, reject) => {\n        sub = src.subscribe({\n            next(x) {\n                const _acc = rfn[2](acc, x);\n                if (isReduced(_acc)) {\n                    resolve(_acc.deref());\n                }\n                else {\n                    acc = _acc;\n                }\n            },\n            done() {\n                resolve(acc);\n            },\n            error(e) {\n                reject(e);\n            }\n        }, xform);\n    }).then((fulfilled) => {\n        sub.unsubscribe();\n        return fulfilled;\n    }, (rejected) => {\n        sub.unsubscribe();\n        throw rejected;\n    });\n};\n","export * from \"./api\";\nexport * from \"./forkjoin\";\nexport * from \"./metastream\";\nexport * from \"./pubsub\";\nexport * from \"./stream\";\nexport * from \"./stream-merge\";\nexport * from \"./stream-sync\";\nexport * from \"./subscription\";\nexport * from \"./trigger\";\nexport * from \"./tween\";\nexport * from \"./from/atom\";\nexport * from \"./from/event\";\nexport * from \"./from/interval\";\nexport * from \"./from/iterable\";\nexport * from \"./from/promise\";\nexport * from \"./from/promises\";\nexport * from \"./from/raf\";\nexport * from \"./from/view\";\nexport * from \"./from/worker\";\nexport * from \"./subs/bisect\";\nexport * from \"./subs/post-worker\";\nexport * from \"./subs/resolve\";\nexport * from \"./subs/sidechain-partition\";\nexport * from \"./subs/sidechain-toggle\";\nexport * from \"./subs/timeout\";\nexport * from \"./subs/trace\";\nexport * from \"./subs/transduce\";\nexport * from \"./subs/tunnel\";\nexport * from \"./utils/idgen\";\nexport * from \"./utils/worker\";\n","import { trace } from \"@thi.ng/rstream\"\r\nimport { map } from \"@thi.ng/transducers\"\r\n\r\nlet fix_jsdoc\r\n\r\n/**\r\n * ## `trace_stream`\r\n *\r\n * simple ad-hoc tracer to log one of the streams emmissions\r\n * @param {string} log_prefix A string that is prepended to\r\n *                  console.log's of emissions from the\r\n *                  stream\r\n * @param {stream}\r\n * */\r\nexport const traceStream = (log_prefix, stream) =>\r\n  stream.subscribeTopic\r\n    ? stream.subscribeTopic(\"...JUST_L0GGING...\", {\r\n        next: x => console.log(log_prefix, x),\r\n        error: console.warn\r\n      })\r\n    : stream.subscribe(trace(log_prefix))\r\n","/**\r\n * Uses a JSON.stringify \"replacer\" function to preserve a\r\n * small (truncated) version of the function signature for\r\n * Object values that contain them\r\n */\r\nlet stringify_w_functions = (x, indent) =>\r\n  JSON.stringify(\r\n    x,\r\n    (key, value) => {\r\n      if (typeof value === \"function\") {\r\n        return (\r\n          value\r\n            .toString()\r\n            .replace(/\\r?\\n|\\r/g, \"\")\r\n            .slice(0, 12) + \"...\"\r\n        )\r\n      } else {\r\n        return value\r\n      }\r\n    },\r\n    indent\r\n  )\r\n\r\n// prettier-ignore\r\n/**\r\n *\r\n * `uknown_key_ERR`\r\n *\r\n * Just a  little error for people defining commands\r\n * that makes sure their keys don't contain typos\r\n */\r\nexport const unknown_key_ERR = (str, c, unknown, sub$, index) => {\r\n  const idx_dict0 = Array.from(Array(19).keys()).reduce(\r\n    (a, idx) => ({ ...a, [idx]: `${idx + 1}th` }),\r\n    {}\r\n  )\r\n\r\n  const idx_dict = { ...idx_dict0, 0: \"1st\", 1: \"2nd\", 2: \"3rd\" }\r\n  const idx_str = idx_dict[index]\r\n\r\n\r\n  return `\r\n   ${ str } ERROR:\r\n  \r\n   Unrecognized Command Key(s)\r\n  \r\n  FAULTY sub$: \"${ sub$ }\" \r\n  ${ Object.keys(unknown)[0] \r\n  ? ` ${ index \r\n    ? `\r\n   was the ${idx_str} Command in a Task or ${ idx_dict[index - 1] } in a Subtask.\r\n  ` : \"\" }\r\n  The problematic entry/entries: \r\n\r\n   ${stringify_w_functions(unknown, 2)}` \r\n  : \"\" } \r\n\r\n  ACCEPTABLE ENTRY KEYS: \r\n  - sub$: a Topic key for for registering the event ${ \r\n  index \r\n  ? `  \r\n  - args: arguments for the handler of the event  \r\n  - reso: handler for resolved Promise args\r\n  - erro: handler for rejected Promise args`\r\n  : `\r\n  - args: payload or payload reshape function \r\n  - handler: function that is called on payload's arrival\r\n  - source$: source stream (advanced use only)`\r\n}\r\n  - path: path/lens for targeted state evolution\r\n\r\n  Hope that helps!\r\n  `\r\n}\r\n","export * from \"./parse_href\"\r\nexport * from \"./stringify_type\"\r\nexport * from \"./traceStream\"\r\nexport * from \"./unknown_key_ERR\"\r\n","/**\r\n @module Tasks\r\n*/\r\nimport { isFunction, isPromise } from \"@thi.ng/checks\"\r\nimport { map } from \"@thi.ng/transducers\"\r\nimport { stringify_type, unknown_key_ERR } from \"../utils\"\r\nimport { command$, task$, run$ } from \"../streams\"\r\n\r\nlet err_str = \"`spool` Interupted\" // <- add doc link to error strings\r\n\r\n/**\r\n *\r\n * ## `spool`\r\n *\r\n * ### TL;DR:\r\n *\r\n * Handles Collections (array) of Commands (\"Tasks\") which\r\n * require _ordered_ choreography and/or have a dependency\r\n * on some (a)sync data produced by a user interaction.\r\n *\r\n * ### Synopsis:\r\n *\r\n * - Async `reduce` function, that passes an accumulator\r\n *   (`acc`) as a local state container between Command\r\n *   invocations.\r\n * - Commands are composed in-situ in userland (Ad hoc)\r\n * - spools a collection of Commands as a Task\r\n * - resolves any promises contained within a Command\r\n * - passes an accumulator (acc) to subsequent Commands in a\r\n *   Task\r\n *\r\n * ### Type checks on function signatures\r\n *\r\n * There are two valid forms for Task entries:\r\n * 1. a Unary function returning an array of Commands:\r\n *    referred to as \"Subtasks\"\r\n * 2. A Command object: dispatch to registered handlers\r\n *\r\n * ## Recognized Keys\r\n *\r\n * There are 5 recognized keys for a Command object:\r\n *\r\n * ### Primary keys\r\n *\r\n * ##### `sub$` key\r\n *\r\n * - Topic identifier: used for registering handlers hooked\r\n *    onto the Command stream.\r\n *\r\n * ##### `args` key\r\n *\r\n * - __primary control structure__ with three recognized\r\n *   forms that do different things in the context of a\r\n *   Task:\r\n * - non-function `args` (primitives, objects) send the args\r\n *   as-is to the Command handler\r\n * - nullary fns (`(0)=>` ) send the _args_ as a Command to\r\n *   a `sub$` _stream_ of your choosing (ADVANCED: see\r\n *   Ad-hoc Stream Injection below)\r\n * - unary fns (`(1)=>`) are passed the inter-Task\r\n *   accumulated value, called and the resulting value is\r\n *   passed to registered Command handler\r\n * - Promises (and those returned from `(1)=>`) are resolved\r\n *   and their values sent to the handler\r\n * - new vals (Objects) are merged with accumulated object\r\n *   from preceding Task results(dupe keys overwritten)\r\n *\r\n * ### Promise-specific keys -> binary (as in two parameter,\r\n *   not boolean) functions:\r\n *\r\n * ##### `reso` key\r\n *\r\n * - (resolving) function `(2)=>` = handle resolved\r\n *   promises: MUST be a binary fn `(acc, resolved Promise)\r\n *   =>`\r\n *\r\n * ##### `erro` key\r\n *\r\n * - `(2)=>` = handle rejected promises: MUST be\r\n *   a binary fn `(acc, Promise rejection) =>`\r\n *\r\n * ### State evolution-specific key:\r\n *\r\n * ##### `path` key\r\n *\r\n * - this is intended to provide a cursor into the global\r\n *   state [Atom](http://thi.ng/atom) for global state\r\n *   evolution (immutably of course)\r\n * - However, you can do anything you want with it using any\r\n *   other `sub$` key than `\"STATE\"`. It's allowed to be any\r\n *   form of static data (no functions), but its presence\r\n *   sets spool to dispatch a Command.\r\n *\r\n * ### Subtasks:\r\n *\r\n * Subtasks are the way you compose tasks. Insert a Task and\r\n * the spool will unpack it in place (super -> sub\r\n * order preserved) A Subtask must be defined as a unary\r\n * function that accepts an accumulator object and returns a\r\n * Task, e.g.:\r\n *\r\n * #### PSEUDO\r\n * ```js\r\n * // { C: Command }\r\n * // ( { A: Accumulator }: Object ) => [{C},{C}]: Subtask\r\n * let someSubtask = ({A}) => [{C}, {C}, ({A})=>[{C},{C}], ...]\r\n * ```\r\n *\r\n * #### Example\r\n * ```js\r\n * // subtask example:\r\n * let subtask1 = acc => [\r\n *  { sub$: \"acc\"\r\n *  , path: [\"body\"]\r\n *  , args: { data: acc.data } },\r\n *  { sub$: \"route\"\r\n *  , args: { route: { href: acc.href } } }\r\n * ]\r\n *\r\n * // task\r\n * let task = [\r\n *  { args: { href: \"https://my.io/todos\" } }, // acc init\r\n *  { sub$: \"fetch\"\r\n *  , args: ({ href }) => fetch(href).then(r => r.json())\r\n *  , erro: (acc, err) => ({ sub$: \"cancel\", args: err })\r\n *  , reso: (acc, res) => ({ data: res }) },\r\n *  acc => subtask1(acc), // subtask reference\r\n *  { sub$: \"FLIP\" , args: \"done\" }\r\n * ]\r\n *\r\n * ```\r\n *\r\n * #### Use:\r\n * ```js\r\n * import { run$ } from \"hurl\"\r\n *\r\n * export const run = e => run$.next(e);\r\n *\r\n * //...  TODO...\r\n * ```\r\n *\r\n * ### Ad-hoc stream injection\r\n *\r\n * ADVANCED USE ONLY \r\n *\r\n * HURL tries to hide the stream implentation from the user\r\n * as much as possible, but allows you to go further down\r\n * the rabbit hole if so desired. You may send Commands to a\r\n * separate stream of your own creation during a Task by\r\n * using a nullary (\"thunk\") `(0)=>` function signature as\r\n * the `args` value of a Command. If this is the case, the\r\n * spool assumes the `sub$` key references a stream and\r\n * sends the return value of the thunk to that stream\r\n *\r\n * > Note: if you need to pass the accumulator to your\r\n * thunk, put it in a subtask, where you can\r\n * access/destructure the data from the acc passed into the\r\n * subtask function\r\n *\r\n * ```js\r\n * import { stream, trace } from \"@thi.ng/rstream\"\r\n *\r\n * // ad-hoc stream\r\n * let login = stream().subscribe(trace(\"login ->\"))\r\n *\r\n * // task\r\n * let task = [\r\n *  { args: { href: \"https://my.io/auth\" } }, // <- no sub$, just pass data\r\n *  { sub$: login , args: () => \"logging in...\" },\r\n *  { sub$: \"AUTH\"\r\n *  , args: ({ href }) => fetch(href).then(r => r.json())\r\n *  , erro: (acc, err) => ({ sub$: \"cancel\", args: err })\r\n *  , reso: (acc, res) => ({ token: res }) },\r\n *  acc => subtask_login(acc),\r\n *  { sub$: login , args: () => \"log in success\" }\r\n * ]\r\n *\r\n * // subtask\r\n * let subtask_login = ({ token }) => [\r\n *  { sub$: login // <- stream\r\n *  , args: () => ({ token }) } // <- use acc\r\n * ]\r\n * ```\r\n *\r\n **/\r\nexport const spool = task_array =>\r\n  task_array.reduce(async (a, c, i) => {\r\n    const acc = await a\r\n    // console.log(\"ACCUMULATOR =>\", acc)\r\n    if (isFunction(c)) {\r\n      try {\r\n        let recur = c(acc)\r\n        // this ensures the accumulator is preserved between\r\n        // stacks\r\n        recur.unshift({ args: acc })\r\n        return spool(recur)\r\n      } catch (e) {\r\n        console.warn(err_str, e)\r\n        run$.done()\r\n      }\r\n    }\r\n    const { sub$, args, path, reso, erro, ...unknown } = c\r\n    if (Object.keys(unknown).length > 0)\r\n      throw new Error(unknown_key_ERR(\"Task `spool`\", c, unknown, sub$, i))\r\n    let arg_type = stringify_type(args)\r\n    let result = args\r\n\r\n    /**\r\n     * ### Caveats:\r\n     *\r\n     * - It's _highly_ recommended to go through the\r\n     *   provided event handling system rather than monkey\r\n     *   patching in your own streams in the above fashion,\r\n     *   however it may be useful in some cases (e.g., for\r\n     *   injecting a quick in-situ logger within a task as\r\n     *   opposed to tracing all command emmissions with\r\n     *   `traceStream`)\r\n     *\r\n     * - The spool preserves execution order of\r\n     *   Commands within a Task, but doesn't do anything to\r\n     *   prevent Commands sent directly to the Command\r\n     *   stream - while the Task is spooling - from being\r\n     *   executed during the execution of the Commands in\r\n     *   the Task queue. This can actually be useful\r\n     *   behavior if you want to enable an, e.g.,\r\n     *   side-effect canceling handler (e.g.,\r\n     *   [AbortController](https://developer.mozilla.org/en-US/docs/Web/API/AbortController),\r\n     *   [\r\n     *   tut](https://www.youtube.com/watch?v=P_mSaky4OtA))\r\n     *\r\n     *\r\n     * ARG SIGNATURE LOGIC\r\n     *\r\n     */\r\n    if (arg_type === \"THUNK\") {\r\n      // if thunk, dispatch to ad-hoc stream, return acc as-is\r\n      result = args()\r\n      console.log(\"dispatching to custom stream\")\r\n      sub$.next(result) // \r\n      return acc\r\n    }\r\n    if (arg_type === \"FUNCTION\") {\r\n      // if function, call it with acc and resolve any promises\r\n      let temp = args(acc)\r\n      result = isPromise(temp) ? await temp.catch(e => e) : temp\r\n    }\r\n    if (arg_type === \"OBJECT\") {\r\n      // if object, send the Command as-is and spread into acc\r\n      command$.next(c)\r\n      return { ...acc, ...args }\r\n    }\r\n    // https://stackoverflow.com/a/31538091\r\n    if (args !== Object(args)) {\r\n      // if primitive, send the Command as-is, return acc as-is\r\n      command$.next(c)\r\n      return acc\r\n    }\r\n\r\n    // RESULT HANDLERS\r\n    // acc handler\r\n    if (path && !(result instanceof Error)) {\r\n      command$.next({ sub$, path, args: result })\r\n      return { ...acc, ...result }\r\n    }\r\n    // promise rejection handler\r\n    if (erro && result instanceof Error) {\r\n      let error = erro(acc, result)\r\n      if (error.sub$) return command$.next(error)\r\n      console.warn(err_str, \"[ Promise rejected ]:\", result)\r\n      return run$.done()\r\n      // throw new Error(error)\r\n    }\r\n    // no sub$ key & not a promise -> just spread into acc\r\n    if (!reso && !sub$) return { ...acc, ...result }\r\n    // resovled promise handler\r\n    if (reso && !(result instanceof Error)) {\r\n      let resolved = reso(acc, result)\r\n      if (resolved.sub$) command$.next(resolved)\r\n      // resolved promise with no sub$ key -> spread\r\n      // resolved value into acc\r\n      else if (!sub$) return { ...acc, ...resolved }\r\n      else result = resolved\r\n    }\r\n    // error, but no error handler\r\n    if (result instanceof Error) {\r\n      console.warn(err_str, result)\r\n      return run$.done()\r\n      // throw new Error(result)\r\n    }\r\n    // if the result has made it this far, send it along\r\n    // console.log(`${sub$} made it through`)\r\n    command$.next({ sub$, args: result })\r\n    return { ...acc, ...result }\r\n  }, Promise.resolve({}))\r\n","/**\r\n @module Streams\r\n*/\r\nimport { pubsub } from \"@thi.ng/rstream\"\r\nimport { spooler } from \"../spool\"\r\n\r\n/**\r\n * ## `out$`\r\n *\r\n * Primary user-land _READ_ stream. For attaching handlers\r\n * for responding to emmitted Commands\r\n *\r\n */\r\nexport const out$ = pubsub({\r\n  topic: x => x.sub$,\r\n  id: \"out$_stream\",\r\n  equiv: (x, y) => x === y || x === \"...JUST_L0GGING...\"\r\n})\r\n\r\n/**\r\n * # Stream Architecture:\r\n *\r\n * `run$` is the primary event stream exposed to the user\r\n * via the `ctx` object injected into every `hdom` component\r\n * the command stream is the only way the user changes\r\n * anything in `hurl`\r\n *\r\n * ## Marble Diagram\r\n *\r\n * ```\r\n * 0>- |------c-----------c--[~a~b~a~]-a----c-> : calls\r\n * 1>- |ps|---1-----------1----------0-1----1-> : run$\r\n * 2>- |t0|---------a~~b~~~~~~~~~~~a~*--------> : task$\r\n * 3>- |t1|---c-----------c------------a----c-> : command$\r\n * 4>- ---|ps|c-----a--b--c--------a---a----c-> : out$\r\n * Handlers\r\n * a>- ---|ta|------*--------------*---*------> : registerCMD\r\n * b>- ---|tb|---------*----------------------> : registerCMD\r\n * c>- ---|tc|*-----------*-----------------*-> : registerCMD\r\n * ```\r\n *\r\n * ## Streams\r\n *\r\n * - `0>-`: `ctx.run$.next(x)` userland dispatches\r\n * - `1>-`: `pubsub({ topic: x => x.length === 0 })` `run$`\r\n *   stream\r\n * - `2>-`: pubsub = `false` ? -> `task$` stream\r\n * - `3>-`: pubsub = `true` ? ->`command$` stream\r\n * - `4>-`: `pubsub({ topic: x => x.sub$ })`: `out$` stream\r\n *   -> `register_command`\r\n *\r\n * ## Handlers\r\n *\r\n * `4>-` this is the stream to which the user (and\r\n * framework) attaches handlers. Handlers receive events\r\n * they subscribe to as topics based on a `sub$` key in a\r\n * Command object.\r\n *\r\n * ### Handlers (framework provided):\r\n * - \"state\": Global state mutations\r\n * - \"route\": Routing\r\n * - \"FLIP\" :\r\n *   [F.L.I.P.](https://aerotwist.com/blog/flip-your-animations/)\r\n *   animations\r\n *\r\n * TODO:\r\n * - add __Examples__\r\n * - add `beforeunload` event handler within #4 (orphan):\r\n *    SEE https://youtu.be/QQukWZcIptM\r\n * - enable ctx.run.cancel() via external or internal events\r\n *    (e.g., popstate / { sub$:  \"cancel\" })\r\n *\r\n * ## `run$`\r\n *\r\n * User-land event dispatch stream\r\n *\r\n * This stream is directly exposed to users via `ctx` Any\r\n * one-off Commands `next`ed into this stream are sent to\r\n * the `command$` stream. Arrays of Commands (Tasks) are\r\n * sent to the `task$` stream.\r\n *\r\n */\r\nexport const run$ = pubsub({\r\n  topic: x => !!x.sub$,\r\n  id: \"run$_stream\",\r\n  equiv: (x, y) => (x && y) || (!x && !y) || x === \"...JUST_L0GGING...\"\r\n})\r\n\r\n/**\r\n * ## `command$`\r\n *\r\n * Primary fork/bisect stream for indivual commands.\r\n * attached to a `pubsub` stemming from this stream. The\r\n * `topic` function used to alert downstream handlers is a\r\n * simple lookup of the `sub$` key of the command\r\n *\r\n */\r\nexport const command$ = run$.subscribeTopic(\r\n  true,\r\n  {\r\n    next: x => out$.next(x),\r\n    error: console.warn\r\n  },\r\n  { id: \"command$_stream\" }\r\n)\r\n\r\n/**\r\n * ## `task$`\r\n *\r\n * Batch processing stream, listens for Tasks sent as an\r\n * array of Commands (including subtask functions)\r\n *\r\n * stream (if array of event objects)\r\n *\r\n */\r\nexport const task$ = run$.subscribeTopic(\r\n  false,\r\n  {\r\n    next: spooler,\r\n    error: console.warn\r\n  },\r\n  { id: \"task$_stream\" }\r\n)\r\n","/**\r\n * @module registerCMD\r\n */\r\nimport { command$, out$ } from \"../streams\"\r\nimport { isFunction } from \"@thi.ng/checks\"\r\nimport { map, comp, pluck, selectKeys } from \"@thi.ng/transducers\"\r\nimport { unknown_key_ERR } from \"../utils\"\r\n\r\nconst err_str = \"registerCMD\"\r\n\r\nconst feedCMD$fromSource$ = ({ sub$, args, path, source$ }) => {\r\n  let args_is_fn = isFunction(args)\r\n  let deliver = x => ({ sub$, args: args(x), path })\r\n  let delivery = { sub$, args, path }\r\n\r\n  let feed = $ => {\r\n    if (args_is_fn) {\r\n      return map(x => $.next(deliver(x)))\r\n    } else return map(() => $.next(delivery))\r\n  }\r\n  // looks for the `sub$` key to determine if its a command\r\n  return source$.subscribe(feed(command$))\r\n}\r\n\r\n/**\r\n *\r\n * ## `registerCMD`\r\n *\r\n * Takes a Command object with some additional information\r\n * and returns a Command usable in a Task or as-is. This\r\n * also serves the additional benefit of giving the user a\r\n * constant to use instead of making any typos in keys\r\n * during use.\r\n *\r\n * ### Destructuring Behavior\r\n *\r\n * During a `sub$` registration, the keys in the Command\r\n * object are used to determine the signature of incoming\r\n * Commands. In order to reduce the amount of boilerplate\r\n * for Commands that only contain the `sub$` and `args` key,\r\n * the `args` key is\r\n * [pluck](https://github.com/thi-ng/umbrella/blob/master/packages/transducers/src/xform/pluck.ts)ed\r\n * from the incoming Commands. This pulls the `args` value\r\n * out from the incoming Command objects to be used directly\r\n * (without the need for dstructuring).\r\n *\r\n * ### Example\r\n *\r\n * ```js\r\n * import { registerCMD, run$ } from \"\"\r\n *\r\n * const cmd_pathless = {\r\n *   sub$: \"PATHLESS\",\r\n *   args: { static: \"payload\" }\r\n * }\r\n *\r\n * const pathless_handler = x => console.log(\"pathless ->\", x)\r\n *\r\n * const CMD_PATHLESS = registerCMD(cmd_pathless, pathless_handler)\r\n *\r\n * run$.next(CMD_PATHLESS) // \r\n * // pathless -> { static: 'payload' }\r\n *\r\n * const cmd_path = {\r\n *   sub$: \"PATH\",\r\n *   args: { static: \"payload\" },\r\n *   path: [\"default\", \"path\"]\r\n * }\r\n *\r\n * const path_handler = x => console.log(\"path ->\", x)\r\n *\r\n * const CMD_PATH = registerCMD(cmd_path, path_handler)\r\n *\r\n * run$.next(CMD_PATH) // \r\n * // path -> { args: { static: 'payload' }, path: [ 'default', 'path' ] }\r\n *\r\n * const test_pathless = {\r\n *   sub$: \"PATHLESS\",\r\n *   args: \"\"\r\n * }\r\n *\r\n * run$.next(test_pathless) // \r\n * // pathless -> \"\"\r\n * // as you can see, the Command args have been plucked out\r\n *\r\n * const test_path = {\r\n *   sub$: \"PATH\",\r\n *   args: \"\",\r\n *   path: [\"new\", \"path\"]\r\n * }\r\n *\r\n * run$.next(test_path) // \r\n * // path -> { args: '', path: [ 'new', 'path' ] }\r\n * // only the sub$ entry has been removed leaving the rest\r\n *\r\n * // NOW: Let's stick these into a Task\r\n * let TASK_1 = [\r\n *   { ...CMD_PATH, path: \"overwritten\" },\r\n *   CMD_PATHLESS,\r\n *   { ...test_path, args: \"\" }\r\n * ]\r\n * run$.next(TASK_1)\r\n * // path -> { args: { static: 'payload' }, path: 'overwritten' }\r\n * // pathless -> { static: 'payload' }\r\n * // path -> { args: '', path: [ 'new', 'path' ] }\r\n *\r\n * ```\r\n *\r\n * @param {Command} command an object with three required\r\n * keys (`sub$`, `args`, `handler`)\r\n *\r\n */\r\nexport const registerCMD = command => {\r\n  //  TODO: register factory function\r\n\r\n  let { sub$, args, path, source$, handler, ...unknown } = command\r\n\r\n  let xform = map(({ args, path }) => (path ? { args, path } : args))\r\n\r\n  /**\r\n   * destructure the args component out of the emissions\r\n   * to save the user from having to do that PITA everytime\r\n   */\r\n  if (Object.keys(unknown).length > 0) {\r\n    throw new Error(unknown_key_ERR(err_str, command, unknown, sub$, undefined))\r\n  }\r\n  if (source$) feedCMD$fromSource$(command)\r\n\r\n  // more: https://github.com/thi-ng/umbrella/blob/develop/examples/rstream-event-loop/src/events.ts\r\n  out$.subscribeTopic(sub$, { next: handler, error: console.warn }, xform)\r\n\r\n  let CMD = { sub$, args, path }\r\n\r\n  return CMD\r\n}\r\n","import { fromDOMEvent, merge } from \"@thi.ng/rstream\"\r\nimport { map } from \"@thi.ng/transducers\"\r\nimport { parse_href } from \"../utils\"\r\nimport { registerCMD } from \"../register\"\r\nexport const popstate$ = fromDOMEvent(window, \"popstate\")\r\n\r\nexport const DOMContentLoaded$ = fromDOMEvent(window, \"DOMContentLoaded\")\r\n\r\n/**\r\n *\r\n * There are three types of navigation we need to handle:\r\n * 1. DOMContentLoaded (entering the site) events\r\n * 2. popstate (browser back/forward button clicks) events\r\n * 3. <a href=\"x\"> (link clicking)\r\n *\r\n * These events have different payloads and need to be\r\n * harmonized in order to use them consistently\r\n *\r\n * ## getting the `href` property from the various events:\r\n * 1. ev.target.location.href\r\n * 2. ev.target.location.href\r\n * 3. ev.target.href\r\n *\r\n * for raw events, we can just transform them, but for link\r\n * clicking we need to convert/wrap it to align with the\r\n * destructuring of the others\r\n */\r\nexport const navigated$ = merge({\r\n  src: [popstate$, DOMContentLoaded$]\r\n}).transform(map(e => ({ href: e.target.location.href })))\r\n\r\nexport const hrefToPushState = href => {\r\n  history.pushState(parse_href(href), null, href)\r\n  document.dispatchEvent(new Event(\"rendered\")) // for prerenderer,\r\n}\r\n\r\nexport const navitage$onEvent = e => {\r\n  e.preventDefault()\r\n  // console.log(e.target.href)\r\n  if (window.location.href === e.target.href) return\r\n\r\n  let href = e.target.href\r\n  hrefToPushState(href)\r\n  /**\r\n   * we need to transform the payload to align with the\r\n   * object structure of the native DOM events ('popstate'\r\n   * and 'DOMContentLoaded') payloads, so they're\r\n   * transformed correctly by the `navigated$` stream\r\n   * transforms\r\n   */\r\n  navigated$.next({ target: { location: { href } } })\r\n  return e\r\n  // history.pushState(parse_hurl(e.target.href), null, e.target.href)\r\n}\r\n\r\nexport const HREF_NAV$ = registerCMD({\r\n  sub$: \"HREF_NAV$\",\r\n  source$: navigated$,\r\n  args: ({ href }) => ({ href }),\r\n  handler: x => console.log(\"connect router ->\", x) //  task\r\n})\r\n","export * from \"./nav\"\r\n","\"use strict\";\n\n// ref: https://github.com/tc39/proposal-global\nvar getGlobal = function () {\n\t// the only reliable means to get the global object is\n\t// `Function('return this')()`\n\t// However, this causes CSP violations in Chrome apps.\n\tif (typeof self !== 'undefined') { return self; }\n\tif (typeof window !== 'undefined') { return window; }\n\tif (typeof global !== 'undefined') { return global; }\n\tthrow new Error('unable to locate global object');\n}\n\nvar global = getGlobal();\n\nmodule.exports = exports = global.fetch;\n\n// Needed for TypeScript and Webpack.\nexports.default = global.fetch.bind(global);\n\nexports.Headers = global.Headers;\nexports.Request = global.Request;\nexports.Response = global.Response;","import { parse_href, traceStream } from \"../src/utils\"\r\nimport { navigated$, navitage$onEvent } from \"../src/DOM\"\r\nimport { registerCMD } from \"../src/register\"\r\nimport { run$ } from \"../src/streams\"\r\nimport { EquivMap } from \"@thi.ng/associative\"\r\n\r\nimport fetch from \"node-fetch\"\r\n\r\n//\r\n//    d8                      d8\r\n//  _d88__  e88~~8e   d88~\\ _d88__\r\n//   888   d888  88b C888    888\r\n//   888   8888__888  Y88b   888\r\n//   888   Y888    ,   888D  888\r\n//   \"88_/  \"88___/  \\_88P   \"88_/\r\n//\r\n//\r\n\r\nconst getSomeJSON = async (path, b) => {\r\n  const text_base = \"https://jsonplaceholder.typicode.com/\"\r\n  const img_base = id => `https://i.picsum.photos/id/${id}/600/600.jpg`\r\n  const img_rand = \"https://picsum.photos/seed/picsum/600/800\"\r\n\r\n  const data = b\r\n    ? {\r\n        img: img_base(b),\r\n        text: await fetch(`${text_base}${path}/${b}`).then(r => r.json())\r\n      }\r\n    : {\r\n        img: img_rand,\r\n        text: await fetch(`${text_base}${path}/`).then(r => r.json())\r\n      }\r\n  return data\r\n}\r\n\r\n/**\r\n * You know, this API warrants a little bit of a story. I\r\n * began the process of abstracting this part of the API\r\n * away from the user, thinking that there were too many\r\n * \"implementation details\" exposed. This scared me a little\r\n * because I really want the most simple API for me and the\r\n * potential future users of the framework.\r\n *\r\n * However, after creating some prototypes for this API, I\r\n * began to realize something. That this API, though it\r\n * exposes the underlying dependency of `EquivMap` from\r\n * `@thi.ng/associative`, is as beautiful as it gets. It's\r\n * what the JavaScript Map should have been and I wanted the\r\n * users to not only see that beauty, but also be made aware\r\n * of this powerful dependency, so they could take it with\r\n * them to put up against other problems.\r\n *\r\n * Value semantics have so many benefits. As a router,\r\n * here's one.\r\n */\r\nconst router = async href => {\r\n  let parsed_href = parse_href(href)\r\n  let {\r\n    subdomain, // array\r\n    domain, // array\r\n    path, // array\r\n    query, // object\r\n    hash // string\r\n  } = parsed_href\r\n  let [p_a, p_b] = path\r\n\r\n  let state =\r\n    new EquivMap([\r\n      [\r\n        { ...parsed_href, path: [\"todos\"] },\r\n        { data: await getSomeJSON(\"todos\"), spec: \"something\" }\r\n      ],\r\n      [\r\n        { ...parsed_href, path: [\"todos\", p_b] },\r\n        { data: await getSomeJSON(\"todos\", p_b), spec: \"else\" }\r\n      ],\r\n      [\r\n        { ...parsed_href, path: [\"users\"] },\r\n        { data: await getSomeJSON(\"users\"), spec: \"ass\" }\r\n      ],\r\n      [\r\n        { ...parsed_href, path: [\"users\", p_b] },\r\n        { data: await getSomeJSON(\"users\", p_b), spec: \"bloop\" }\r\n      ]\r\n    ]).get(parsed_href) || null\r\n\r\n  return { state, path }\r\n}\r\n\r\n// router({ href: \"/todos/1\" }) //?\r\n\r\n//\r\n//    d8                      d8\r\n//  _d88__  e88~~8e   d88~\\ _d88__\r\n//   888   d888  88b C888    888\r\n//   888   8888__888  Y88b   888\r\n//   888   Y888    ,   888D  888\r\n//   \"88_/  \"88___/  \\_88P   \"88_/\r\n//\r\n//\r\n\r\n// first the command... then the handler\r\n// command\r\nexport const I_pushState_href = {\r\n  sub$: \"pushstate\",\r\n  args: ({ href }) => ({ href })\r\n}\r\n\r\n/** or maybe the handler is defined as a part of the\r\n * Command and destructured out like this:\r\n * ```js\r\n * export const I_pushState_href = {\r\n *  sub$: \"pushstate\",\r\n *  args: ({ href }) => ({ href }) // <- implied/unnecessary?\r\n *  handler: ({ href }) => href_pushState(href)\r\n * }\r\n * ````\r\n * And then the actual defHandler takes that and just gives\r\n * back the Command without the handler!?\r\n */\r\n\r\nconsole.log(\"loaded!\")\r\n\r\n//  Include in tutorial/readme\r\nconst HREF_NAV$ = registerCMD({\r\n  sub$: \"HREF_NAV$\",\r\n  source$: navigated$,\r\n  args: ({ href }) => ({ href }), //  router\r\n  handler: x => console.log(\"connect router ->\", x) //  task\r\n})\r\n\r\nlet links = document.querySelectorAll(\"a\")\r\nlinks.forEach(x => {\r\n  x.addEventListener(\"click\", e => navitage$onEvent(e))\r\n})\r\n\r\n// const href2route = registerCMD({\r\n//   sub$: \"HREF_ROUTE\",\r\n//   handler: ({ href }) => href_pushState(href)\r\n// })\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}